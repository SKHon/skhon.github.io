{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/README.MDOWN","path":"README.MDOWN","modified":0,"renderable":0},{"_id":"source/robots.txt","path":"robots.txt","modified":0,"renderable":0},{"_id":"source/avatar/avatar.png","path":"avatar/avatar.png","modified":0,"renderable":0},{"_id":"source/favicon/favicon.ico","path":"favicon/favicon.ico","modified":0,"renderable":0},{"_id":"source/reward/reward_alipay.png","path":"reward/reward_alipay.png","modified":0,"renderable":0},{"_id":"source/yu/1px.html","path":"yu/1px.html","modified":0,"renderable":0},{"_id":"source/yu/css-hack.html","path":"yu/css-hack.html","modified":0,"renderable":0},{"_id":"themes/pure/source/favicon.png","path":"favicon.png","modified":0,"renderable":1},{"_id":"source/reward/reward_wechat.png","path":"reward/reward_wechat.png","modified":0,"renderable":0},{"_id":"source/images/interview/neitui.png","path":"images/interview/neitui.png","modified":0,"renderable":0},{"_id":"source/reward/wechat-alipay.png","path":"reward/wechat-alipay.png","modified":0,"renderable":0},{"_id":"themes/pure/source/fonts/README.md","path":"fonts/README.md","modified":0,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.eot","path":"fonts/iconfont.eot","modified":0,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.ttf","path":"fonts/iconfont.ttf","modified":0,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.woff","path":"fonts/iconfont.woff","modified":0,"renderable":1},{"_id":"themes/pure/source/images/avatar.jpg","path":"images/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/pure/source/images/xingqiu-qrcode.jpg","path":"images/xingqiu-qrcode.jpg","modified":0,"renderable":1},{"_id":"themes/pure/source/images/thumb-default.png","path":"images/thumb-default.png","modified":0,"renderable":1},{"_id":"themes/pure/source/js/application.js","path":"js/application.js","modified":0,"renderable":1},{"_id":"themes/pure/source/js/application.min.js","path":"js/application.min.js","modified":0,"renderable":1},{"_id":"themes/pure/source/js/insight.js","path":"js/insight.js","modified":0,"renderable":1},{"_id":"themes/pure/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/pure/source/js/plugin.min.js","path":"js/plugin.min.js","modified":0,"renderable":1},{"_id":"themes/pure/source/images/donate/alipayimg.png","path":"images/donate/alipayimg.png","modified":0,"renderable":1},{"_id":"themes/pure/source/images/donate/wechatpayimg.png","path":"images/donate/wechatpayimg.png","modified":0,"renderable":1},{"_id":"themes/pure/source/images/favatar/SzsFox-logo.png","path":"images/favatar/SzsFox-logo.png","modified":0,"renderable":1},{"_id":"themes/pure/source/images/favatar/chuangzaoshi-logo.png","path":"images/favatar/chuangzaoshi-logo.png","modified":0,"renderable":1},{"_id":"themes/pure/source/images/favatar/idesign-logo.png","path":"images/favatar/idesign-logo.png","modified":0,"renderable":1},{"_id":"themes/pure/source/js/plugin.js","path":"js/plugin.js","modified":0,"renderable":1},{"_id":"themes/pure/source/js/plugin.js.map","path":"js/plugin.js.map","modified":0,"renderable":1},{"_id":"themes/pure/source/css/style.css","path":"css/style.css","modified":0,"renderable":1},{"_id":"themes/pure/source/css/style.min.css","path":"css/style.min.css","modified":0,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.svg","path":"fonts/iconfont.svg","modified":0,"renderable":1},{"_id":"themes/pure/source/images/my.png","path":"images/my.png","modified":0,"renderable":1},{"_id":"themes/pure/source/images/donate/alipay.png","path":"images/donate/alipay.png","modified":0,"renderable":1},{"_id":"themes/pure/source/images/donate/weixin.png","path":"images/donate/weixin.png","modified":0,"renderable":1},{"_id":"source/images/interview/jianli1.png","path":"images/interview/jianli1.png","modified":0,"renderable":0},{"_id":"source/images/interview/jianli.png","path":"images/interview/jianli.png","modified":0,"renderable":0},{"_id":"source/images/interview/jianli2.png","path":"images/interview/jianli2.png","modified":0,"renderable":0},{"_id":"source/images/book/book1.png","path":"images/book/book1.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/404.md","hash":"e9a4493bbab7f4b81f8ab715df410e1da9577931","modified":1626352126544},{"_id":"source/README.MDOWN","hash":"34e6e72017d036d3a812c276e9204671100d7878","modified":1626352126544},{"_id":"source/offline.md","hash":"a4c914fc01f3f6954054eb0b9c73a26aff60022f","modified":1626352126671},{"_id":"source/robots.txt","hash":"c35385645485ac49bcb827c0f8d74ff43696244a","modified":1626352126673},{"_id":"themes/pure/.gitignore","hash":"dbb41a2f30c98cb9de173d82736c46266c901cda","modified":1639647755521},{"_id":"themes/pure/_config.yml","hash":"eced6336d6ef1e492c42f4f82799a5f7854a4bf0","modified":1640694747792},{"_id":"themes/pure/README.md","hash":"5861cec81712af9197a210fd5212d007aad8b0de","modified":1639647755522},{"_id":"themes/pure/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1639647755522},{"_id":"themes/pure/README.cn.md","hash":"a634af4addbb57088935e060e8ec6035ea7bab76","modified":1639647755522},{"_id":"themes/pure/_config.yml.example","hash":"4714f87fdb6d4a6ea5ece84f4fe37f922337f14d","modified":1639647755523},{"_id":"themes/pure/package-lock.json","hash":"b1df4a8f839f3ec391912670fa39a7b73e0eae1a","modified":1639657307306},{"_id":"themes/pure/package.json","hash":"71d50406fcd1593af66cae6c6cce88bf39a633fa","modified":1639657307269},{"_id":"source/about/index.md","hash":"111ebd34b298b643289f4478dc7b690640aadec3","modified":1639658839735},{"_id":"source/avatar/avatar.png","hash":"f205692c08fc1f013ab81caca5504e6c50fa0e52","modified":1626352126548},{"_id":"source/books/index.md","hash":"745b8b6755bf125b66525ebbb96e6594fe5597ae","modified":1639658498919},{"_id":"source/example/index.md","hash":"df6f11ac573fbff9efbeee7990694cec9ccc90f5","modified":1626352126549},{"_id":"source/categories/index.md","hash":"ae71778d1ed620b8b002efe9bf1eb9103de2c136","modified":1639653533543},{"_id":"source/favicon/favicon.ico","hash":"8c48c4165fbf145abaddc99ac5891f731d5feec5","modified":1626352126549},{"_id":"source/guestbook/index.md","hash":"ac8c09759ae2ea244505c80c491a226d778ff4e8","modified":1626352126549},{"_id":"source/links/index.md","hash":"a7fb71fb4a7a764a715865942c442018d676e723","modified":1639653690712},{"_id":"source/repository/index.md","hash":"ed0e082c30f233dd5c140d188f1e4bce44bdbf79","modified":1639653446253},{"_id":"source/reward/reward_alipay.png","hash":"8d75f24c294434c1831fcc000b35e9fde39966eb","modified":1626352126672},{"_id":"source/reward/index.md","hash":"4f07777ca28fa23fe76fe002b188e4a094250e76","modified":1626352126671},{"_id":"source/tags/index.md","hash":"7a553072486e9f5ad33eae5090e72f69fec77a22","modified":1639653415231},{"_id":"source/weblog/index.md","hash":"324397d3a765846158dcbbce280d6e461fc7c4f7","modified":1626352126673},{"_id":"source/yu/1px.html","hash":"4600e3fdf79f5c5b381d075bc3bdc72597b43678","modified":1626352126673},{"_id":"source/yu/css-hack.html","hash":"d64f2ce9ea0bb76c5f5479cf6512af7a9001ec48","modified":1626352126673},{"_id":"themes/pure/languages/zh-CN.yml","hash":"7bba52173680f30014bd22b2d72aedf97b6f36cd","modified":1639657823291},{"_id":"themes/pure/languages/default.yml","hash":"8ed72cc5f96c6f24b0bb05b94be80647af8d00f9","modified":1639657812748},{"_id":"themes/pure/languages/zh-TW.yml","hash":"75ce80d48b38d5f12e732bc4e1e647d280dbf178","modified":1639657825766},{"_id":"themes/pure/languages/en.yml","hash":"8ed72cc5f96c6f24b0bb05b94be80647af8d00f9","modified":1639657820027},{"_id":"themes/pure/layout/about.ejs","hash":"4f5c769e183249b12eb9d3141432bc0039519730","modified":1640694491136},{"_id":"themes/pure/layout/archive.ejs","hash":"ded5d953b35666e30f4c6e48e2d2c62af8d95ebf","modified":1639647755565},{"_id":"themes/pure/layout/books.ejs","hash":"6c64719cd7071b5319b01339aa524fdaab391385","modified":1639647755565},{"_id":"themes/pure/layout/category.ejs","hash":"3ca5651bbce7b0c280c906468f2eb18c2e55ebcb","modified":1639647755569},{"_id":"themes/pure/layout/index.ejs","hash":"07825d8d8b21eb7b694f5585567b9df5c5a91a60","modified":1639653142173},{"_id":"themes/pure/layout/categories.ejs","hash":"22a2bc1712dd9ba1a3027e875d636132d334fb00","modified":1639647755566},{"_id":"themes/pure/layout/layout.ejs","hash":"106a8ced5a383290c4f8e2e93aa5c345bcc0f1d1","modified":1640694732746},{"_id":"themes/pure/layout/links.ejs","hash":"77c5d1561e2c606c5b3bb39610133d84324074df","modified":1639647755572},{"_id":"themes/pure/layout/page.ejs","hash":"5c27475c176627e6e2e6a16172eb6980e56bcaff","modified":1639653172384},{"_id":"themes/pure/layout/post.ejs","hash":"5c27475c176627e6e2e6a16172eb6980e56bcaff","modified":1640694135934},{"_id":"themes/pure/layout/repository.ejs","hash":"fe4b3e051a8b0debe9ee22c2cc2cc935d92ee23f","modified":1639647755574},{"_id":"themes/pure/layout/tag.ejs","hash":"df60564c162f7ad3422f8959dfea19351857a7cd","modified":1639647755574},{"_id":"themes/pure/layout/tags.ejs","hash":"29f19a6ed10f8b1f069259a7aeaaacddcfaa2ed4","modified":1639647755575},{"_id":"themes/pure/scripts/thumbnail.js","hash":"e667a611f9baac270281b765832020d50bf8fb7f","modified":1639647755584},{"_id":"themes/pure/source/favicon.png","hash":"89875d3b018552e396fc5f0bd8ff5d9f5d4a5d71","modified":1639647755587},{"_id":"source/reward/reward_wechat.png","hash":"8543a5af3092949bb00e50d3daa82b00cd26bb54","modified":1626352126672},{"_id":"themes/pure/screenshot/pure-theme-green.png","hash":"12ec0c6033cb2762839fdf75434bbb4fbf946022","modified":1639647755579},{"_id":"themes/pure/screenshot/pure-theme-blue.png","hash":"6146890a68d5ea9d343c48d50151ddd5a2a1872c","modified":1639647755578},{"_id":"themes/pure/screenshot/pure-theme-black.png","hash":"10b40f398af7eb7e8ba2bf2f2a959d8779fc1fe1","modified":1639647755577},{"_id":"themes/pure/screenshot/pure-theme-purple.png","hash":"9855d2eb0acd23370209354f232471df8f4f72e2","modified":1639647755580},{"_id":"source/_posts/architecture/base.md","hash":"af6184e285ac237770eec5e8d1d1d2a379f5e66d","modified":1640695246106},{"_id":"source/_posts/engineering/coverage.md","hash":"58b4e6d0f52afbfb9ac6eb82f5297a6d48ace751","modified":1640695249661},{"_id":"themes/pure/screenshot/pure.png","hash":"8f4cfd8d7edfa4fbffdf375291302d9807f5cc1c","modified":1639647755580},{"_id":"source/_posts/fe/typescript.md","hash":"0a159d87ffffa66a9838a11758c9681188095e99","modified":1640694828163},{"_id":"source/_posts/fe/garfish.md","hash":"8571d7fffe2eb93b4a391aad51d419fa133bb9f0","modified":1640695240133},{"_id":"source/_posts/interview/mymind.md","hash":"436823eadba6d7bfa86c8796e0f6a0de4ad81324","modified":1640695252941},{"_id":"source/_posts/my-heart/index.md","hash":"1576da2917df2be8c74edabaf87eb241d8fe6fc5","modified":1640695256262},{"_id":"source/_posts/security/prototype.md","hash":"e91eee5d18ef92b23298c0647e8c1adefe51060c","modified":1640695264518},{"_id":"source/images/interview/neitui.png","hash":"9fe911641d9d188af1804424e912eeea3a9e08be","modified":1639734830806},{"_id":"source/reward/wechat-alipay.png","hash":"27c7f2b3bcd10daf16b9f08469b8074354106e90","modified":1626352126673},{"_id":"themes/pure/.github/ISSUE_TEMPLATE/bug_report.md","hash":"83d211c67c12e8c1f6e9f796cfd0cecbf5160e15","modified":1639647755520},{"_id":"themes/pure/.github/ISSUE_TEMPLATE/custom.md","hash":"84208538d48505ee8e49812cb336eb9882e08dc7","modified":1639647755520},{"_id":"themes/pure/.github/ISSUE_TEMPLATE/feature_request.md","hash":"f6867a2f0417fe89a0f2008730ee19dd38422021","modified":1639647755520},{"_id":"themes/pure/_source/_data/links.yml","hash":"aa443a4508550820c77c2a4f6abff1d38ad85054","modified":1639647755525},{"_id":"themes/pure/_source/_data/gallery.yml","hash":"e2b3fad87be3d1cfde1effa655d39678ee90907e","modified":1639647755525},{"_id":"themes/pure/_source/about/index.md","hash":"9c95cabb533409d06daefc4295021ad199761efc","modified":1639647755526},{"_id":"themes/pure/_source/books/index.md","hash":"cf4163959c23244059cbbbc1c0fe379cc3b2cb73","modified":1639647755527},{"_id":"themes/pure/_source/categories/index.md","hash":"5d2a4f103d27bebbe3eef1604649d0f5c6d86ac6","modified":1639647755528},{"_id":"themes/pure/_source/404/index.md","hash":"8d493f624fdd29c8d0266767e56f343d549e16d8","modified":1639647755524},{"_id":"themes/pure/_source/tags/index.md","hash":"42e9c904ea63b0a7dd4033e2e8f153225bc5cda5","modified":1639647755530},{"_id":"themes/pure/_source/links/index.md","hash":"5cfbfb23ce1297058c16561e41dc9a02851bd78d","modified":1639653676995},{"_id":"themes/pure/layout/_common/footer.ejs","hash":"cdc48ec70d9202b947f2a9334234d038d7014a7d","modified":1639647755533},{"_id":"themes/pure/layout/_common/head.ejs","hash":"a48ef0fa22712b29ec044b9e5134461f3a21c10d","modified":1639647755533},{"_id":"themes/pure/layout/_common/script.ejs","hash":"0031114d2a58f8601c2869f78ceedc75a10be90d","modified":1639647755534},{"_id":"themes/pure/layout/_common/social.ejs","hash":"a35a2610e9da762df96587b76b51470507a88cad","modified":1639647755535},{"_id":"themes/pure/layout/_common/header.ejs","hash":"3d739d1e2b2991927c08ec222db123830a44a519","modified":1639647755534},{"_id":"themes/pure/layout/_partial/archive-category.ejs","hash":"9c364fd6b5172890784141802f5f466241d233fd","modified":1639647755536},{"_id":"themes/pure/layout/_partial/archive-link.ejs","hash":"fe4d9bf526d8176683cea89b8561ced571374db0","modified":1639647755537},{"_id":"themes/pure/layout/_partial/archive-list.ejs","hash":"c66c86d6a6a90e00494c380603426fc0f4006311","modified":1639647755537},{"_id":"themes/pure/layout/_partial/archive-post.ejs","hash":"13039fec017332029122ef99901755fcecbfc8ea","modified":1640694302036},{"_id":"themes/pure/layout/_partial/archive-tag.ejs","hash":"5de90244c3cedad531cccc03c40e5f9a3aef3c61","modified":1639647755538},{"_id":"themes/pure/layout/_partial/archive-book.ejs","hash":"977f97f3636947006ad738e502858c46d4cd5ec7","modified":1639647755535},{"_id":"themes/pure/layout/_partial/archive.ejs","hash":"4d6793f50d41fbd47dc50aa36b24d496006bba6c","modified":1639647755539},{"_id":"themes/pure/_source/repository/index.md","hash":"ed0e082c30f233dd5c140d188f1e4bce44bdbf79","modified":1639653440843},{"_id":"themes/pure/layout/_partial/article.ejs","hash":"0f9b71de0087d1f777d92c5a0f3873971aec5a5b","modified":1640694262980},{"_id":"themes/pure/layout/_partial/archive-repository.ejs","hash":"e39dc762d9fe238cede462532e40eaa3d8651122","modified":1639647755538},{"_id":"themes/pure/layout/_partial/article-about.ejs","hash":"7b80319daeb63401d1745b81cd9a6d1d21a4fb60","modified":1640694288354},{"_id":"themes/pure/layout/_partial/pagination.ejs","hash":"41a319642da5af07d6cfb8525796aa610b721879","modified":1639647755541},{"_id":"themes/pure/layout/_partial/item-post.ejs","hash":"9f755b0da1ea928dece32c2050d8a04b3a9fb13b","modified":1639647755540},{"_id":"themes/pure/layout/_partial/sidebar-about.ejs","hash":"46da1ee327b8af107335146bd8fc131eee6c9c4f","modified":1639647755546},{"_id":"themes/pure/layout/_partial/sidebar-toc.ejs","hash":"152538ceceb0fdef65c46470ebf0189f7b891c5b","modified":1640694334555},{"_id":"themes/pure/layout/_partial/sidebar.ejs","hash":"2aa8a9f90838e7c105e75e6d3d03cbf860bb1239","modified":1640694384296},{"_id":"themes/pure/layout/_script/comment.ejs","hash":"6f951510bab9dc15474b6664e0329defccf29a30","modified":1639647755555},{"_id":"themes/pure/layout/_script/analytics.ejs","hash":"e756a81f8c20a187fb863b9689f2f1fa15e2f4e1","modified":1639647755554},{"_id":"themes/pure/layout/_script/douban.ejs","hash":"ee21c4e7ccac26ff2ab6d1d178447fd11fea4d7e","modified":1639647755555},{"_id":"themes/pure/layout/_script/fancybox.ejs","hash":"8f1be01e70a15b2c31ae57d8c6bce54622ebf8a7","modified":1639647755556},{"_id":"themes/pure/layout/_script/mathjax.ejs","hash":"f618393ab971b2faa80d541f2e6a553d9ace9816","modified":1639647755556},{"_id":"themes/pure/layout/_script/pv.ejs","hash":"fb9b5f16029f2ccef4b83cf4facfdcdd748b65b4","modified":1639647755557},{"_id":"themes/pure/layout/_script/repository.ejs","hash":"14f2e7d4c1055ff6a5f5867dc0e9a9f6f4c28fe1","modified":1639647755557},{"_id":"themes/pure/layout/_script/search.ejs","hash":"7be33dc260ce788aa1a2cd3bd0386d95057533cb","modified":1639647755558},{"_id":"themes/pure/layout/_search/baidu.ejs","hash":"67aab280a3ea34429f086cc5c3de7de17727c567","modified":1639647755559},{"_id":"themes/pure/layout/_search/index-mobile.ejs","hash":"c726e234c0166da69fdfbd3dd613a5eaf4c80258","modified":1639647755559},{"_id":"themes/pure/layout/_search/index.ejs","hash":"f8d5a9c3f777250f5fb6512bba585307f784d5cd","modified":1639647755559},{"_id":"themes/pure/layout/_search/insight.ejs","hash":"4af3e92ef98bedba9680d45699cb04dde4640536","modified":1639647755560},{"_id":"themes/pure/layout/_search/swiftype.ejs","hash":"4baeca36e410181300ae7d47ba1fb4755bcfcff0","modified":1639647755560},{"_id":"themes/pure/layout/_widget/archive.ejs","hash":"af8ad7f62877764b75d5272d9d899fd6c8e3845c","modified":1639647755561},{"_id":"themes/pure/layout/_widget/board.ejs","hash":"acd27451be52703e670ce0b313f2da6fa24071e4","modified":1639647755562},{"_id":"themes/pure/layout/_widget/category.ejs","hash":"331b7642a0f58b9088b937436ab39076a4c5dd7e","modified":1639647755562},{"_id":"themes/pure/layout/_widget/recent_posts.ejs","hash":"8942d60311797a591ba2d157c5cdd23e85ceb694","modified":1639647755563},{"_id":"themes/pure/layout/_widget/tag.ejs","hash":"487628925da5fcac91463cdad3d9e55d071bd5ed","modified":1639647755563},{"_id":"themes/pure/layout/_widget/tagcloud.ejs","hash":"3291108e5411c48b2c5b3e17adace6ffa90d1c29","modified":1639647755564},{"_id":"themes/pure/source/fonts/README.md","hash":"c5772b99ad81291fb137b330813f866bdceea0a3","modified":1639647755588},{"_id":"themes/pure/source/fonts/iconfont.eot","hash":"6819d9bb643bdeafc17bfecb0746ae641b018fdf","modified":1639647755588},{"_id":"themes/pure/source/fonts/iconfont.ttf","hash":"9b8837f9f79cf6ab794736301d0665345183a20c","modified":1639647755590},{"_id":"themes/pure/source/fonts/iconfont.woff","hash":"78d29194287b8885d25212048c4f787705212a6e","modified":1639647755590},{"_id":"themes/pure/source/images/avatar.jpg","hash":"f86eafc318f3900319b25057811720168f24d248","modified":1639647755591},{"_id":"themes/pure/source/images/xingqiu-qrcode.jpg","hash":"ef2c2848dc79db6df7c752510651ed8ba57f2daf","modified":1639647755594},{"_id":"themes/pure/source/images/thumb-default.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1639647755594},{"_id":"themes/pure/source/js/application.js","hash":"46d1fb207ce5f0acb83803f927985dfcea86f9ef","modified":1639647755595},{"_id":"themes/pure/source/js/application.min.js","hash":"34d765e982c7d6360c37f82202d99f63ac40e408","modified":1639647755595},{"_id":"themes/pure/source/js/insight.js","hash":"298e8ca42517984bd26f34caa4c45560b0e909ad","modified":1639647755596},{"_id":"themes/pure/source/js/jquery.min.js","hash":"5a9dcfbef655a2668e78baebeaa8dc6f41d8dabb","modified":1639647755596},{"_id":"themes/pure/source/js/plugin.min.js","hash":"07fe34638f9832702c5f81d8583c5e4e8b3d9659","modified":1639647755598},{"_id":"themes/pure/layout/_partial/post/category.ejs","hash":"fcee6b4aef8b6c4627831ff8dbb2d73478511426","modified":1639655110339},{"_id":"themes/pure/layout/_partial/post/comment.ejs","hash":"3c0da69fcea6ccfd97b82d50e740107a88eec5c4","modified":1639657890795},{"_id":"themes/pure/layout/_partial/post/copyright.ejs","hash":"30f273a4146e1128bbf5ea0a4b2c67acdf257765","modified":1639655536275},{"_id":"themes/pure/layout/_partial/post/date.ejs","hash":"7d4979652998abf92a64bfae8157b70d6e514057","modified":1639647755542},{"_id":"themes/pure/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1639647755543},{"_id":"themes/pure/layout/_partial/post/nav.ejs","hash":"95eabc0fe4033ec61b240a16eeaf7dc62a9e3da1","modified":1639647755544},{"_id":"themes/pure/layout/_partial/post/tag.ejs","hash":"39f53ead07f75c181a7ba93e586dd1b8171620f1","modified":1639647755545},{"_id":"themes/pure/layout/_partial/post/donate.ejs","hash":"a251dc34d660601a2e8b7d98b3bfe2b9023dbbce","modified":1639647755543},{"_id":"themes/pure/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1639647755546},{"_id":"themes/pure/layout/_partial/post/pv.ejs","hash":"ec3ccf322432afc2761f860c5a3000ac34d46e4c","modified":1639647755545},{"_id":"themes/pure/layout/_partial/post/thumbnail.ejs","hash":"080d5c5f3e95accf51893a7092695fe32d34a087","modified":1639647755545},{"_id":"themes/pure/layout/_partial/post/wordcount.ejs","hash":"bd06c4c8449ed96aabf655fe1ae3be1f0707b81e","modified":1639647755546},{"_id":"themes/pure/layout/_script/_analytics/baidu-analytics.ejs","hash":"f314be7860c1d5930f1600d010e3120ba5c85325","modified":1639647755548},{"_id":"themes/pure/layout/_script/_analytics/google-analytics.ejs","hash":"54f1dc9375cbdb65464e0ac1b58847aa5e8bc6a5","modified":1639647755549},{"_id":"themes/pure/layout/_script/_analytics/tencent-analytics.ejs","hash":"77defb41a1613a758ff5a6a5128c6107fc584190","modified":1639647755550},{"_id":"themes/pure/layout/_script/_comment/disqus.ejs","hash":"a051e3eddc75586e69131c29ab8c89d69626e0fd","modified":1639647755550},{"_id":"themes/pure/layout/_script/_comment/gitalk.ejs","hash":"fb01f1631c3ae7fe6211dc03233506cb344229be","modified":1639647755551},{"_id":"themes/pure/layout/_script/_comment/gitment.ejs","hash":"a64852076483395738a398deb4c10bdb0f3b7b71","modified":1639647755551},{"_id":"themes/pure/layout/_script/_comment/livere.ejs","hash":"5ab997d5ee4475d2f89f882fab4a52648dbe0e30","modified":1639647755551},{"_id":"themes/pure/layout/_script/_comment/valine.ejs","hash":"acf81f9a59dc45f197d723f70484de5fcd166577","modified":1639647755552},{"_id":"themes/pure/layout/_script/_comment/youyan.ejs","hash":"095649a173573d03b5845c2e331ec7be976b152a","modified":1639647755553},{"_id":"themes/pure/layout/_script/_search/baidu.ejs","hash":"9b60ffa2e2725a993e9cecfb81ddedd9b9361011","modified":1639647755553},{"_id":"themes/pure/layout/_script/_search/insight.ejs","hash":"3543c11d060feaf9381b5d87564b01ffef0e0a59","modified":1639647755554},{"_id":"themes/pure/source/images/donate/alipayimg.png","hash":"9562f23f2eb57841c65dc769b6cc43a2cf0efa94","modified":1639647755591},{"_id":"themes/pure/source/images/donate/wechatpayimg.png","hash":"c0844d9a633696cb00ae64fde06f0f924f63b596","modified":1639647755592},{"_id":"themes/pure/source/images/favatar/SzsFox-logo.png","hash":"d71fcc73b7bc2a439d8c7ba461137856d190bd76","modified":1639647755593},{"_id":"themes/pure/source/images/favatar/chuangzaoshi-logo.png","hash":"7fa5734072050952159a02d330bbc008b5a99122","modified":1639647755593},{"_id":"themes/pure/source/images/favatar/idesign-logo.png","hash":"6b150a2dbb9912b7a7662255c27e4d4baaecee71","modified":1639647755593},{"_id":"themes/pure/source/js/plugin.js","hash":"a8524d42b8621bfaa06602a163c6a1f82702b91d","modified":1639647755597},{"_id":"themes/pure/source/js/plugin.js.map","hash":"1730c0cc660f863120aca0a439d7264e2e245fc5","modified":1639647755597},{"_id":"themes/pure/source/css/style.css","hash":"3b693ce41c2e35ece4773593e94b4c17aeaee02f","modified":1639647755586},{"_id":"themes/pure/source/css/style.min.css","hash":"1d23abc76726ebe042f7df4749f00f8f73338444","modified":1639647755586},{"_id":"themes/pure/source/fonts/iconfont.svg","hash":"25929e6e74f7027acd1f6467a67e95b153bcd8d5","modified":1639647755589},{"_id":"themes/pure/source/images/my.png","hash":"0d1572b3829c1649c46c99ef5cb30dc1bbc18e4e","modified":1639649747285},{"_id":"themes/pure/source/images/donate/alipay.png","hash":"4dfbdc502f0ca04bcf4ec2786bc8cc43d04c7ee7","modified":1639648970325},{"_id":"themes/pure/source/images/donate/weixin.png","hash":"0c6655051d2b6b4a9ec37af6f533c39d553603ee","modified":1639648975573},{"_id":"source/images/interview/jianli1.png","hash":"54834316514d384eafd21057e3d38e94a4a2475c","modified":1639735434580},{"_id":"source/images/interview/jianli.png","hash":"673d69c921e7f8c8e0c247ef161f66509a6a80d2","modified":1639731880549},{"_id":"source/images/interview/jianli2.png","hash":"c263b0722572844248bc6914f8d9706eab297d08","modified":1639732376566},{"_id":"themes/pure/screenshot/pure.psd","hash":"a31cea40b45bdc31f051fca2f1e2f4ecbaee1a94","modified":1639647755583},{"_id":"source/images/book/book1.png","hash":"49ab819f1528017307c3bf5212b18fdb326745bd","modified":1639658277357},{"_id":"public/baidusitemap.xml","hash":"44b0690f4ede7c12dc41b790ab57c64f7a6757df","modified":1640695297518},{"_id":"public/atom.xml","hash":"1b1d8a11a79f9dde5e250fd8bc7f4bc2cd2ed0ee","modified":1640695297518},{"_id":"public/search.xml","hash":"0c493734dc0080d80a6f41e473073a4141cd1eae","modified":1640695297791},{"_id":"public/sitemap.xml","hash":"cff294cd2c73b1f5fb1097858a4b85d14ca0871b","modified":1640695297791},{"_id":"public/archives/index.html","hash":"c54dc508e38ef549f5689d956ef2bff78dec128b","modified":1640695297808},{"_id":"public/archives/2021/index.html","hash":"712ce6edb193b38772cab399a40912659f5c3add","modified":1640695297808},{"_id":"public/archives/2021/07/index.html","hash":"8b744a1234858efe9cd664106d3e22c44520c982","modified":1640695297808},{"_id":"public/archives/2021/12/index.html","hash":"d5e928d1da86311cf52bdc3e3be20b45f8c130f8","modified":1640695297808},{"_id":"public/categories/æ¶æ„/index.html","hash":"51da5a076f4b19385bc98ce683fbe043fe3df71b","modified":1640695297809},{"_id":"public/categories/å·¥ç¨‹åŒ–å»ºè®¾/index.html","hash":"842a2b4e75c545288a06a50c0890f3a53580a144","modified":1640695297809},{"_id":"public/categories/é¢è¯•/index.html","hash":"2990b2b18cc6ababd757d67d15de59cb01f8d783","modified":1640695297809},{"_id":"public/categories/æ‚è°ˆ/index.html","hash":"681a323f33e02984e6d2e821549854622a47eac5","modified":1640695297809},{"_id":"public/categories/å‰ç«¯/index.html","hash":"b2299c04f160b4fa01e93369b7139a14072f3ead","modified":1640695297809},{"_id":"public/categories/å®‰å…¨/index.html","hash":"dd5949ba9b075a4907c5dd5348942576fe246779","modified":1640695297809},{"_id":"public/tags/Architecture/index.html","hash":"762423c4c928db3f1d94a5be1ca5ff5b60f0d5e6","modified":1640695297809},{"_id":"public/tags/Engineering/index.html","hash":"4c0b9d33dbda169686e0fb42ac6d94c1ace81a02","modified":1640695297809},{"_id":"public/tags/Interview/index.html","hash":"22d75920e9ee5bc47c156c17928153e04c9df6bb","modified":1640695297809},{"_id":"public/tags/Talking-to-oneself/index.html","hash":"9b0ca26ccf25e33936bf1cb675b205d275476335","modified":1640695297809},{"_id":"public/tags/Security/index.html","hash":"a9c4e1720d9f23f7b17761e85d2d51770c1009ad","modified":1640695297809},{"_id":"public/tags/Web/index.html","hash":"038799e98dc565dc64ccbd869e9596f9b403e4d2","modified":1640695297809},{"_id":"public/404.html","hash":"0b8464aecf2c9b571de472cf9c0acd8701a17705","modified":1640695297809},{"_id":"public/offline.html","hash":"e8769f57624bbf52359bbcfb986e2c62e3fdf9ed","modified":1640695297809},{"_id":"public/about/index.html","hash":"2de699ad71b61916a6b9e48532fb426781c4cdef","modified":1640695297809},{"_id":"public/books/index.html","hash":"9050e66a5119860bb7ce4eedcc9991887a5e42c4","modified":1640695297810},{"_id":"public/example/index.html","hash":"b26e49b235c12b7ff1a2871a3d0a4df68d9303d7","modified":1640695297810},{"_id":"public/categories/index.html","hash":"ac428e1baa63ba4439dc909f036f2a51368c4f24","modified":1640695297810},{"_id":"public/guestbook/index.html","hash":"b426431b4afe0f4cfe18310f2151591dc4793549","modified":1640695297810},{"_id":"public/repository/index.html","hash":"4ab1251aeec3730d413f1c22e7bdea6bd7c17654","modified":1640695297810},{"_id":"public/reward/index.html","hash":"43585b833a1fb3a1bb891d1e166467b2eb2c9464","modified":1640695297810},{"_id":"public/links/index.html","hash":"2936a4470ac54721cc2fc289a24a2f14d3077ec1","modified":1640695297810},{"_id":"public/tags/index.html","hash":"6a02847855f025c9bc32be139c8e49ffc49f9479","modified":1640695297810},{"_id":"public/weblog/index.html","hash":"6ea7dff80120f2739f69354e2e7f288dc448c5f8","modified":1640695297810},{"_id":"public/2021/12/28/fe/typescript/index.html","hash":"1fa03ecabf9996c97cc0b7f93af65a2434914cb6","modified":1640695297810},{"_id":"public/2021/12/28/fe/garfish/index.html","hash":"b982e71b96c6e75b0288ac5412ac3508b9022241","modified":1640695297811},{"_id":"public/2021/12/20/architecture/base/index.html","hash":"d710c3fb21bc40ab74bf8c883e06397d223a2034","modified":1640695297811},{"_id":"public/2021/12/17/interview/mymind/index.html","hash":"fc451c8797b1c26bf6155c2aca1595fc9fe82e33","modified":1640695297811},{"_id":"public/2021/12/17/security/prototype/index.html","hash":"2f32b829a7d4ff325c4174db38aebb868e74b7d0","modified":1640695297811},{"_id":"public/2021/12/16/engineering/coverage/index.html","hash":"4d312bd58fbfaf47b1607a89c53547895ef2f569","modified":1640695297811},{"_id":"public/2021/07/15/my-heart/index/index.html","hash":"29f80470581d7460d4e6ba7ec21208824944698a","modified":1640695297811},{"_id":"public/index.html","hash":"5afcaa426c8ab3b83cdd01570cd4a4599f702c0a","modified":1640695297811},{"_id":"public/README.MDOWN","hash":"34e6e72017d036d3a812c276e9204671100d7878","modified":1640695297818},{"_id":"public/robots.txt","hash":"c35385645485ac49bcb827c0f8d74ff43696244a","modified":1640695297818},{"_id":"public/avatar/avatar.png","hash":"f205692c08fc1f013ab81caca5504e6c50fa0e52","modified":1640695297819},{"_id":"public/favicon/favicon.ico","hash":"8c48c4165fbf145abaddc99ac5891f731d5feec5","modified":1640695297819},{"_id":"public/reward/reward_alipay.png","hash":"8d75f24c294434c1831fcc000b35e9fde39966eb","modified":1640695297819},{"_id":"public/yu/1px.html","hash":"4600e3fdf79f5c5b381d075bc3bdc72597b43678","modified":1640695297819},{"_id":"public/yu/css-hack.html","hash":"d64f2ce9ea0bb76c5f5479cf6512af7a9001ec48","modified":1640695297819},{"_id":"public/favicon.png","hash":"89875d3b018552e396fc5f0bd8ff5d9f5d4a5d71","modified":1640695297819},{"_id":"public/images/interview/neitui.png","hash":"9fe911641d9d188af1804424e912eeea3a9e08be","modified":1640695297819},{"_id":"public/fonts/iconfont.eot","hash":"6819d9bb643bdeafc17bfecb0746ae641b018fdf","modified":1640695297819},{"_id":"public/fonts/iconfont.ttf","hash":"9b8837f9f79cf6ab794736301d0665345183a20c","modified":1640695297819},{"_id":"public/fonts/iconfont.woff","hash":"78d29194287b8885d25212048c4f787705212a6e","modified":1640695297819},{"_id":"public/images/avatar.jpg","hash":"f86eafc318f3900319b25057811720168f24d248","modified":1640695297819},{"_id":"public/images/xingqiu-qrcode.jpg","hash":"ef2c2848dc79db6df7c752510651ed8ba57f2daf","modified":1640695297819},{"_id":"public/images/thumb-default.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1640695297819},{"_id":"public/images/donate/alipayimg.png","hash":"9562f23f2eb57841c65dc769b6cc43a2cf0efa94","modified":1640695297819},{"_id":"public/images/favatar/SzsFox-logo.png","hash":"d71fcc73b7bc2a439d8c7ba461137856d190bd76","modified":1640695297819},{"_id":"public/images/favatar/chuangzaoshi-logo.png","hash":"7fa5734072050952159a02d330bbc008b5a99122","modified":1640695297819},{"_id":"public/images/donate/wechatpayimg.png","hash":"c0844d9a633696cb00ae64fde06f0f924f63b596","modified":1640695297820},{"_id":"public/images/favatar/idesign-logo.png","hash":"6b150a2dbb9912b7a7662255c27e4d4baaecee71","modified":1640695297820},{"_id":"public/reward/reward_wechat.png","hash":"8543a5af3092949bb00e50d3daa82b00cd26bb54","modified":1640695297824},{"_id":"public/js/application.min.js","hash":"34d765e982c7d6360c37f82202d99f63ac40e408","modified":1640695297832},{"_id":"public/js/application.js","hash":"46d1fb207ce5f0acb83803f927985dfcea86f9ef","modified":1640695297832},{"_id":"public/fonts/README.html","hash":"43b6265aeccff3f9d495e2b44d07b249a2197bd7","modified":1640695297832},{"_id":"public/reward/wechat-alipay.png","hash":"27c7f2b3bcd10daf16b9f08469b8074354106e90","modified":1640695297832},{"_id":"public/js/plugin.js.map","hash":"1730c0cc660f863120aca0a439d7264e2e245fc5","modified":1640695297832},{"_id":"public/fonts/iconfont.svg","hash":"25929e6e74f7027acd1f6467a67e95b153bcd8d5","modified":1640695297832},{"_id":"public/images/donate/alipay.png","hash":"4dfbdc502f0ca04bcf4ec2786bc8cc43d04c7ee7","modified":1640695297833},{"_id":"public/images/my.png","hash":"0d1572b3829c1649c46c99ef5cb30dc1bbc18e4e","modified":1640695297833},{"_id":"public/js/insight.js","hash":"298e8ca42517984bd26f34caa4c45560b0e909ad","modified":1640695297838},{"_id":"public/images/donate/weixin.png","hash":"0c6655051d2b6b4a9ec37af6f533c39d553603ee","modified":1640695297838},{"_id":"public/images/interview/jianli1.png","hash":"54834316514d384eafd21057e3d38e94a4a2475c","modified":1640695297860},{"_id":"public/images/interview/jianli.png","hash":"673d69c921e7f8c8e0c247ef161f66509a6a80d2","modified":1640695297862},{"_id":"public/images/interview/jianli2.png","hash":"c263b0722572844248bc6914f8d9706eab297d08","modified":1640695297865},{"_id":"public/js/plugin.min.js","hash":"07fe34638f9832702c5f81d8583c5e4e8b3d9659","modified":1640695297867},{"_id":"public/js/jquery.min.js","hash":"5a9dcfbef655a2668e78baebeaa8dc6f41d8dabb","modified":1640695297869},{"_id":"public/js/plugin.js","hash":"a8524d42b8621bfaa06602a163c6a1f82702b91d","modified":1640695297876},{"_id":"public/css/style.min.css","hash":"1d23abc76726ebe042f7df4749f00f8f73338444","modified":1640695297878},{"_id":"public/css/style.css","hash":"3b693ce41c2e35ece4773593e94b4c17aeaee02f","modified":1640695297888},{"_id":"public/images/book/book1.png","hash":"49ab819f1528017307c3bf5212b18fdb326745bd","modified":1640695297896}],"Category":[{"name":"æ¶æ„","_id":"ckxq3m94p000ekudoaxld8xqd"},{"name":"å·¥ç¨‹åŒ–å»ºè®¾","_id":"ckxq3m94u000jkudob6xoij3n"},{"name":"é¢è¯•","_id":"ckxq3m94w000nkudoitic0rak"},{"name":"æ‚è°ˆ","_id":"ckxq3m94y000rkudoio8z3n0n"},{"name":"å®‰å…¨","_id":"ckxq3m94z000vkudoh09iroqp"},{"name":"å‰ç«¯","_id":"ckxq3m95t0012kudogopxm0tw"}],"Data":[],"Page":[{"title":"404-æ‰¾ä¸åˆ°é¡µé¢","date":"2016-09-03T17:17:18.000Z","comments":0,"_content":"<center>404 Not Found<center>\n---\n<center>\nå¯¹ä¸èµ·ï¼Œæ‚¨æ‰€è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨æˆ–è€…å·²åˆ é™¤\nä½ å¯ä»¥[ç‚¹å‡»æ­¤å¤„](https://Neveryu.github.io)è¿”å›é¦–é¡µ.\nä½ å¯ä»¥å»æˆ‘çš„å¾®åšçœ‹çœ‹ï¼š[http://weibo.com/Neveryu](http://weibo.com/Neveryu)\næˆ‘çš„Githubï¼š[http://github.com/Neveryu](http://github.com/Neveryu)\næˆ‘çš„CSDNï¼š[http://blog.csdn.net/csdn_yudong](http://blog.csdn.net/csdn_yudong)\næˆ–è€…ç»™æˆ‘ç•™è¨€ï¼š[https://neveryu.github.io/guestbook/](https://neveryu.github.io/guestbook/)\n\n</center>\n<blockquote class=\"blockquote-center\">\n    æ›¾ä¸ä½ æŒ‡å°–ç›¸ç¢°ï¼Œä¹Ÿå¥½è¿‡ä¸€æ— æ‰€æœ‰\n</blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\">\n    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=548109162&auto=0&height=66\" oncontextmenu=\"return false\"></iframe>\n</div>\n\n","source":"404.md","raw":"---\ntitle: 404-æ‰¾ä¸åˆ°é¡µé¢\ndate: 2016-09-03 17:17:18\ncomments: false\n---\n<center>404 Not Found<center>\n---\n<center>\nå¯¹ä¸èµ·ï¼Œæ‚¨æ‰€è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨æˆ–è€…å·²åˆ é™¤\nä½ å¯ä»¥[ç‚¹å‡»æ­¤å¤„](https://Neveryu.github.io)è¿”å›é¦–é¡µ.\nä½ å¯ä»¥å»æˆ‘çš„å¾®åšçœ‹çœ‹ï¼š[http://weibo.com/Neveryu](http://weibo.com/Neveryu)\næˆ‘çš„Githubï¼š[http://github.com/Neveryu](http://github.com/Neveryu)\næˆ‘çš„CSDNï¼š[http://blog.csdn.net/csdn_yudong](http://blog.csdn.net/csdn_yudong)\næˆ–è€…ç»™æˆ‘ç•™è¨€ï¼š[https://neveryu.github.io/guestbook/](https://neveryu.github.io/guestbook/)\n\n</center>\n<blockquote class=\"blockquote-center\">\n    æ›¾ä¸ä½ æŒ‡å°–ç›¸ç¢°ï¼Œä¹Ÿå¥½è¿‡ä¸€æ— æ‰€æœ‰\n</blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\">\n    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=548109162&auto=0&height=66\" oncontextmenu=\"return false\"></iframe>\n</div>\n\n","updated":"2021-07-15T12:28:46.544Z","path":"404.html","layout":"page","_id":"ckxq3m9250000kudo3iseunui","content":"<h2 id=\"404-Not-Found\"><a href=\"#404-Not-Found\" class=\"headerlink\" title=\"404 Not Found\"></a><center>404 Not Found<center></center></center></h2><p><center><br>å¯¹ä¸èµ·ï¼Œæ‚¨æ‰€è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨æˆ–è€…å·²åˆ é™¤<br>ä½ å¯ä»¥<a href=\"https://Neveryu.github.io\" target=\"_blank\" rel=\"noopener\">ç‚¹å‡»æ­¤å¤„</a>è¿”å›é¦–é¡µ.<br>ä½ å¯ä»¥å»æˆ‘çš„å¾®åšçœ‹çœ‹ï¼š<a href=\"http://weibo.com/Neveryu\" target=\"_blank\" rel=\"noopener\">http://weibo.com/Neveryu</a><br>æˆ‘çš„Githubï¼š<a href=\"http://github.com/Neveryu\" target=\"_blank\" rel=\"noopener\">http://github.com/Neveryu</a><br>æˆ‘çš„CSDNï¼š<a href=\"http://blog.csdn.net/csdn_yudong\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/csdn_yudong</a><br>æˆ–è€…ç»™æˆ‘ç•™è¨€ï¼š<a href=\"https://neveryu.github.io/guestbook/\" target=\"_blank\" rel=\"noopener\">https://neveryu.github.io/guestbook/</a></center></p>\n<p></p>\n<blockquote class=\"blockquote-center\"><br>    æ›¾ä¸ä½ æŒ‡å°–ç›¸ç¢°ï¼Œä¹Ÿå¥½è¿‡ä¸€æ— æ‰€æœ‰<br></blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\"><br>    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=548109162&auto=0&height=66\" oncontextmenu=\"return false\"></iframe><br></div>\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"404-Not-Found\"><a href=\"#404-Not-Found\" class=\"headerlink\" title=\"404 Not Found\"></a><center>404 Not Found<center></center></center></h2><p><center><br>å¯¹ä¸èµ·ï¼Œæ‚¨æ‰€è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨æˆ–è€…å·²åˆ é™¤<br>ä½ å¯ä»¥<a href=\"https://Neveryu.github.io\" target=\"_blank\" rel=\"noopener\">ç‚¹å‡»æ­¤å¤„</a>è¿”å›é¦–é¡µ.<br>ä½ å¯ä»¥å»æˆ‘çš„å¾®åšçœ‹çœ‹ï¼š<a href=\"http://weibo.com/Neveryu\" target=\"_blank\" rel=\"noopener\">http://weibo.com/Neveryu</a><br>æˆ‘çš„Githubï¼š<a href=\"http://github.com/Neveryu\" target=\"_blank\" rel=\"noopener\">http://github.com/Neveryu</a><br>æˆ‘çš„CSDNï¼š<a href=\"http://blog.csdn.net/csdn_yudong\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/csdn_yudong</a><br>æˆ–è€…ç»™æˆ‘ç•™è¨€ï¼š<a href=\"https://neveryu.github.io/guestbook/\" target=\"_blank\" rel=\"noopener\">https://neveryu.github.io/guestbook/</a></center></p>\n<p></p>\n<blockquote class=\"blockquote-center\"><br>    æ›¾ä¸ä½ æŒ‡å°–ç›¸ç¢°ï¼Œä¹Ÿå¥½è¿‡ä¸€æ— æ‰€æœ‰<br></blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\"><br>    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=548109162&auto=0&height=66\" oncontextmenu=\"return false\"></iframe><br></div>\n\n"},{"title":"ç¦»çº¿é¡µé¢","date":"2017-06-28T21:46:18.000Z","comments":0,"_content":"<center>404 Not Found<center>\n---\n<center>\nå¯¹ä¸èµ·ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥\nä½ å¯ä»¥[ç‚¹å‡»æ­¤å¤„](https://Neveryu.github.io)è¿”å›é¦–é¡µ.\n\n</center>\n<blockquote class=\"blockquote-center\">\n   \n</blockquote>\n\n","source":"offline.md","raw":"---\ntitle: ç¦»çº¿é¡µé¢\ndate: 2017-06-28 21:46:18\ncomments: false\n---\n<center>404 Not Found<center>\n---\n<center>\nå¯¹ä¸èµ·ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥\nä½ å¯ä»¥[ç‚¹å‡»æ­¤å¤„](https://Neveryu.github.io)è¿”å›é¦–é¡µ.\n\n</center>\n<blockquote class=\"blockquote-center\">\n   \n</blockquote>\n\n","updated":"2021-07-15T12:28:46.671Z","path":"offline.html","layout":"page","_id":"ckxq3m9270001kudo8gyn16sm","content":"<h2 id=\"404-Not-Found\"><a href=\"#404-Not-Found\" class=\"headerlink\" title=\"404 Not Found\"></a><center>404 Not Found<center></center></center></h2><p><center><br>å¯¹ä¸èµ·ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥<br>ä½ å¯ä»¥<a href=\"https://Neveryu.github.io\" target=\"_blank\" rel=\"noopener\">ç‚¹å‡»æ­¤å¤„</a>è¿”å›é¦–é¡µ.</center></p>\n<p></p>\n<blockquote class=\"blockquote-center\"><br><br></blockquote>\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"404-Not-Found\"><a href=\"#404-Not-Found\" class=\"headerlink\" title=\"404 Not Found\"></a><center>404 Not Found<center></center></center></h2><p><center><br>å¯¹ä¸èµ·ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥<br>ä½ å¯ä»¥<a href=\"https://Neveryu.github.io\" target=\"_blank\" rel=\"noopener\">ç‚¹å‡»æ­¤å¤„</a>è¿”å›é¦–é¡µ.</center></p>\n<p></p>\n<blockquote class=\"blockquote-center\"><br><br></blockquote>\n\n"},{"title":"Introduction","comments":0,"_content":"\n## ä¸ªäººä¿¡æ¯\n\n`å§“å`: åˆ˜æ±Ÿè™¹\n`å°±èŒ`: æŠ–éŸ³ç”µå•†æ¶æ„ç»„\n\n## è”ç³»æ–¹å¼\n\nEmail: ljhtianhong@163.com\nwechat: react-router\nqq: 393517017\ngithub: https://github.com/SKHon\n\n","source":"about/index.md","raw":"---\ntitle: Introduction\n\ncomments: false\n---\n\n## ä¸ªäººä¿¡æ¯\n\n`å§“å`: åˆ˜æ±Ÿè™¹\n`å°±èŒ`: æŠ–éŸ³ç”µå•†æ¶æ„ç»„\n\n## è”ç³»æ–¹å¼\n\nEmail: ljhtianhong@163.com\nwechat: react-router\nqq: 393517017\ngithub: https://github.com/SKHon\n\n","date":"2021-12-16T12:47:19.735Z","updated":"2021-12-16T12:47:19.735Z","path":"about/index.html","layout":"page","_id":"ckxq3m9390002kudobgnir0pa","content":"<h2 id=\"ä¸ªäººä¿¡æ¯\"><a href=\"#ä¸ªäººä¿¡æ¯\" class=\"headerlink\" title=\"ä¸ªäººä¿¡æ¯\"></a>ä¸ªäººä¿¡æ¯</h2><p><code>å§“å</code>: åˆ˜æ±Ÿè™¹<br><code>å°±èŒ</code>: æŠ–éŸ³ç”µå•†æ¶æ„ç»„</p>\n<h2 id=\"è”ç³»æ–¹å¼\"><a href=\"#è”ç³»æ–¹å¼\" class=\"headerlink\" title=\"è”ç³»æ–¹å¼\"></a>è”ç³»æ–¹å¼</h2><p>Email: <a href=\"mailto:ljhtianhong@163.com\" target=\"_blank\" rel=\"noopener\">ljhtianhong@163.com</a><br>wechat: react-router<br>qq: 393517017<br>github: <a href=\"https://github.com/SKHon\" target=\"_blank\" rel=\"noopener\">https://github.com/SKHon</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"ä¸ªäººä¿¡æ¯\"><a href=\"#ä¸ªäººä¿¡æ¯\" class=\"headerlink\" title=\"ä¸ªäººä¿¡æ¯\"></a>ä¸ªäººä¿¡æ¯</h2><p><code>å§“å</code>: åˆ˜æ±Ÿè™¹<br><code>å°±èŒ</code>: æŠ–éŸ³ç”µå•†æ¶æ„ç»„</p>\n<h2 id=\"è”ç³»æ–¹å¼\"><a href=\"#è”ç³»æ–¹å¼\" class=\"headerlink\" title=\"è”ç³»æ–¹å¼\"></a>è”ç³»æ–¹å¼</h2><p>Email: <a href=\"mailto:ljhtianhong@163.com\" target=\"_blank\" rel=\"noopener\">ljhtianhong@163.com</a><br>wechat: react-router<br>qq: 393517017<br>github: <a href=\"https://github.com/SKHon\" target=\"_blank\" rel=\"noopener\">https://github.com/SKHon</a></p>\n"},{"title":"ä¹¦å•","comments":0,"sidebar":"none","copyright":false,"_content":"### 1. è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\n<img src=\"/images/book/book1.png\" width=\"20%\">\n\n**è¿™æœ¬ä¹¦æ˜¯æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾å‡ºç‰ˆï¼Œå†…å®¹è®²çš„è¿˜æ˜¯æŒºç»å…¸çš„ï¼Œè®²çš„æ¯”è¾ƒå®åœ¨ï¼Œæ¥åœ°æ°”ã€‚æ¨ä»‹é˜…è¯»**\n","source":"books/index.md","raw":"---\ntitle: ä¹¦å•\ncomments: false\nsidebar: none\ncopyright: false\n---\n### 1. è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\n<img src=\"/images/book/book1.png\" width=\"20%\">\n\n**è¿™æœ¬ä¹¦æ˜¯æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾å‡ºç‰ˆï¼Œå†…å®¹è®²çš„è¿˜æ˜¯æŒºç»å…¸çš„ï¼Œè®²çš„æ¯”è¾ƒå®åœ¨ï¼Œæ¥åœ°æ°”ã€‚æ¨ä»‹é˜…è¯»**\n","date":"2021-12-16T12:41:38.919Z","updated":"2021-12-16T12:41:38.919Z","path":"books/index.html","layout":"page","_id":"ckxq3m93a0003kudo4dziavpz","content":"<h3 id=\"1-è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\"><a href=\"#1-è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\" class=\"headerlink\" title=\"1. è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\"></a>1. è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—</h3><p><img src=\"/images/book/book1.png\" width=\"20%\"></p>\n<p><strong>è¿™æœ¬ä¹¦æ˜¯æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾å‡ºç‰ˆï¼Œå†…å®¹è®²çš„è¿˜æ˜¯æŒºç»å…¸çš„ï¼Œè®²çš„æ¯”è¾ƒå®åœ¨ï¼Œæ¥åœ°æ°”ã€‚æ¨ä»‹é˜…è¯»</strong></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1-è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\"><a href=\"#1-è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\" class=\"headerlink\" title=\"1. è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—\"></a>1. è½¯ä»¶æ¶æ„ï¼šæ¶æ„æ¨¡å¼ã€ç‰¹å¾åŠå®è·µæŒ‡å—</h3><p><img src=\"/images/book/book1.png\" width=\"20%\"></p>\n<p><strong>è¿™æœ¬ä¹¦æ˜¯æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾å‡ºç‰ˆï¼Œå†…å®¹è®²çš„è¿˜æ˜¯æŒºç»å…¸çš„ï¼Œè®²çš„æ¯”è¾ƒå®åœ¨ï¼Œæ¥åœ°æ°”ã€‚æ¨ä»‹é˜…è¯»</strong></p>\n"},{"title":"example","date":"2019-07-03T17:21:10.000Z","comments":0,"_content":"\n- 1ã€ç”¨ better-scroll å®ç°å’ŒåŸç”Ÿæœ‰ç›¸åŒçš„æ»šåŠ¨ä½“éªŒï¼Œä»¥åŠä¸Šæ‹‰åŠ è½½ & ä¸‹æ‹‰åˆ·æ–°\n\nä½ å¯ä»¥ç‚¹å‡»ä¸‹é¢çš„äºŒç»´ç å›¾ç‰‡ï¼Œæˆ–è€…æ‰‹æœºæ‰«ç æ¥ä½“éªŒã€‚\n\n<a href=\"http://neveryu.github.io/my-example/bs-pullup-pulldown\" style=\"width: 100px\">![bs-pullup-pulldown](/images/qr-bs-pullup-pulldown.png)</a>","source":"example/index.md","raw":"---\ntitle: example\ndate: 2019-07-03 17:21:10\ncomments: false\n---\n\n- 1ã€ç”¨ better-scroll å®ç°å’ŒåŸç”Ÿæœ‰ç›¸åŒçš„æ»šåŠ¨ä½“éªŒï¼Œä»¥åŠä¸Šæ‹‰åŠ è½½ & ä¸‹æ‹‰åˆ·æ–°\n\nä½ å¯ä»¥ç‚¹å‡»ä¸‹é¢çš„äºŒç»´ç å›¾ç‰‡ï¼Œæˆ–è€…æ‰‹æœºæ‰«ç æ¥ä½“éªŒã€‚\n\n<a href=\"http://neveryu.github.io/my-example/bs-pullup-pulldown\" style=\"width: 100px\">![bs-pullup-pulldown](/images/qr-bs-pullup-pulldown.png)</a>","updated":"2021-07-15T12:28:46.549Z","path":"example/index.html","layout":"page","_id":"ckxq3m93b0004kudoa68ruow8","content":"<ul>\n<li>1ã€ç”¨ better-scroll å®ç°å’ŒåŸç”Ÿæœ‰ç›¸åŒçš„æ»šåŠ¨ä½“éªŒï¼Œä»¥åŠä¸Šæ‹‰åŠ è½½ &amp; ä¸‹æ‹‰åˆ·æ–°</li>\n</ul>\n<p>ä½ å¯ä»¥ç‚¹å‡»ä¸‹é¢çš„äºŒç»´ç å›¾ç‰‡ï¼Œæˆ–è€…æ‰‹æœºæ‰«ç æ¥ä½“éªŒã€‚</p>\n<p><a href=\"http://neveryu.github.io/my-example/bs-pullup-pulldown\" style=\"width: 100px\" target=\"_blank\" rel=\"noopener\"><img src=\"/images/qr-bs-pullup-pulldown.png\" alt=\"bs-pullup-pulldown\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>1ã€ç”¨ better-scroll å®ç°å’ŒåŸç”Ÿæœ‰ç›¸åŒçš„æ»šåŠ¨ä½“éªŒï¼Œä»¥åŠä¸Šæ‹‰åŠ è½½ &amp; ä¸‹æ‹‰åˆ·æ–°</li>\n</ul>\n<p>ä½ å¯ä»¥ç‚¹å‡»ä¸‹é¢çš„äºŒç»´ç å›¾ç‰‡ï¼Œæˆ–è€…æ‰‹æœºæ‰«ç æ¥ä½“éªŒã€‚</p>\n<p><a href=\"http://neveryu.github.io/my-example/bs-pullup-pulldown\" style=\"width: 100px\" target=\"_blank\" rel=\"noopener\"><img src=\"/images/qr-bs-pullup-pulldown.png\" alt=\"bs-pullup-pulldown\"></a></p>\n"},{"title":"categories","layout":"categories","date":"2016-09-05T23:41:55.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: categories\nlayout: categories\ndate: 2016-09-05 23:41:55\ntype: \"categories\"\ncomments: false\n---","updated":"2021-12-16T11:18:53.543Z","path":"categories/index.html","_id":"ckxq3m93d0005kudo77ddzc0b","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"guestbook","date":"2016-09-03T17:21:10.000Z","comments":1,"_content":"<blockquote class=\"blockquote-center\">\n    è®¤çœŸçš„äººæ‰æœ‰èµ„æ ¼å¼€ç©ç¬‘\n</blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\">\n    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=26672926&auto=0&height=66\" oncontextmenu=\"return false\"></iframe>\n</div>\n","source":"guestbook/index.md","raw":"---\ntitle: guestbook\ndate: 2016-09-03 17:21:10\ncomments: true\n---\n<blockquote class=\"blockquote-center\">\n    è®¤çœŸçš„äººæ‰æœ‰èµ„æ ¼å¼€ç©ç¬‘\n</blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\">\n    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=26672926&auto=0&height=66\" oncontextmenu=\"return false\"></iframe>\n</div>\n","updated":"2021-07-15T12:28:46.549Z","path":"guestbook/index.html","layout":"page","_id":"ckxq3m93g0006kudoz02fooyh","content":"<blockquote class=\"blockquote-center\"><br>    è®¤çœŸçš„äººæ‰æœ‰èµ„æ ¼å¼€ç©ç¬‘<br></blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\"><br>    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=26672926&auto=0&height=66\" oncontextmenu=\"return false\"></iframe><br></div>\n","site":{"data":{}},"excerpt":"","more":"<blockquote class=\"blockquote-center\"><br>    è®¤çœŸçš„äººæ‰æœ‰èµ„æ ¼å¼€ç©ç¬‘<br></blockquote>\n\n<div style=\"width: 340px; margin: 0 auto;\"><br>    <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"//music.163.com/outchain/player?type=2&id=26672926&auto=0&height=66\" oncontextmenu=\"return false\"></iframe><br></div>\n"},{"title":"Repositories","layout":"repository","comments":0,"sidebar":"none","_content":"","source":"repository/index.md","raw":"---\ntitle: Repositories\nlayout: repository\ncomments: false\nsidebar: none\n---\n","date":"2021-12-16T11:17:26.253Z","updated":"2021-12-16T11:17:26.253Z","path":"repository/index.html","_id":"ckxq3m93j0007kudoxvbdrl1v","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"reward","date":"2018-12-23T23:31:12.000Z","comments":0,"_content":"\n<span id=\"yu-1\">æ‰“ èµï¼ˆdonateï¼‰</span>\n\n<p id=\"div-border-left-green\"><span style=\"font-size: 1.2em; font-weight: 600;\">Donate</span>\n    å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¸®åŠ©åˆ°äº†ä½ ï¼Œä½ å¯ä»¥å¸®ä½œè€…ä¹°ä¸€æ¯æœæ±è¡¨ç¤ºé¼“åŠ± ğŸ¹\n</p>\n\n<img class=\"reward-all\" src=\"/reward/wechat-alipay.png\" alt=\"reward me\">\n","source":"reward/index.md","raw":"---\ntitle: reward\ndate: 2018-12-23 23:31:12\ncomments: false\n---\n\n<span id=\"yu-1\">æ‰“ èµï¼ˆdonateï¼‰</span>\n\n<p id=\"div-border-left-green\"><span style=\"font-size: 1.2em; font-weight: 600;\">Donate</span>\n    å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¸®åŠ©åˆ°äº†ä½ ï¼Œä½ å¯ä»¥å¸®ä½œè€…ä¹°ä¸€æ¯æœæ±è¡¨ç¤ºé¼“åŠ± ğŸ¹\n</p>\n\n<img class=\"reward-all\" src=\"/reward/wechat-alipay.png\" alt=\"reward me\">\n","updated":"2021-07-15T12:28:46.671Z","path":"reward/index.html","layout":"page","_id":"ckxq3m93k0008kudowmljbqlk","content":"<p><span id=\"yu-1\">æ‰“ èµï¼ˆdonateï¼‰</span></p>\n<p id=\"div-border-left-green\"><span style=\"font-size: 1.2em; font-weight: 600;\">Donate</span><br>    å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¸®åŠ©åˆ°äº†ä½ ï¼Œä½ å¯ä»¥å¸®ä½œè€…ä¹°ä¸€æ¯æœæ±è¡¨ç¤ºé¼“åŠ± ğŸ¹<br></p>\n\n<p><img class=\"reward-all\" src=\"/reward/wechat-alipay.png\" alt=\"reward me\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p><span id=\"yu-1\">æ‰“ èµï¼ˆdonateï¼‰</span></p>\n<p id=\"div-border-left-green\"><span style=\"font-size: 1.2em; font-weight: 600;\">Donate</span><br>    å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¸®åŠ©åˆ°äº†ä½ ï¼Œä½ å¯ä»¥å¸®ä½œè€…ä¹°ä¸€æ¯æœæ±è¡¨ç¤ºé¼“åŠ± ğŸ¹<br></p>\n\n<p><img class=\"reward-all\" src=\"/reward/wechat-alipay.png\" alt=\"reward me\"></p>\n"},{"title":"å‹æƒ…é“¾æ¥","comments":1,"sidebar":"none","_content":"","source":"links/index.md","raw":"---\ntitle: å‹æƒ…é“¾æ¥\ncomments: true\nsidebar: none\n---","date":"2021-12-16T11:21:30.712Z","updated":"2021-12-16T11:21:30.712Z","path":"links/index.html","layout":"page","_id":"ckxq3m93m0009kudozujdm9w0","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"æ ‡ç­¾","layout":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: æ ‡ç­¾\nlayout: tags\ncomments: false\n---","date":"2021-12-16T11:16:55.231Z","updated":"2021-12-16T11:16:55.231Z","path":"tags/index.html","_id":"ckxq3m93m000akudoeutb40qy","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"weblog","date":"2016-09-03T23:31:12.000Z","comments":0,"_content":"### å»ºç«™æ—¥å¿—\n**2017-10-24ï¼š**å¢åŠ é¼ æ ‡ç§»åŠ¨æ•ˆæœã€è‡ªå®šä¹‰çš„éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ–‡ä»¶ç„¶åå¼•å…¥ã€ç§»é™¤service-workerã€é™æ€æ–‡ä»¶å¢åŠ ç‰ˆæœ¬å·.\n**2017-08-15ï¼š**æ—¥å¸¸ä¿®æ”¹(å¢åŠ ç½‘é¡µè¿›åº¦æ¡ã€å­—æ•°ç»Ÿè®¡ã€RSS ...)\n**2017-06-25ï¼š**æ·»åŠ  Service-worker.\n**2017-05-05ï¼š**å®ç° summary_img å­—æ®µï¼Œç”¨äºé¦–é¡µæ˜¾ç¤ºæ‘˜è¦å›¾ç‰‡ï¼Œæ–‡ç« é¡µä¸æ˜¾ç¤º.\n**2017-02-05ï¼š**å°†èƒŒæ™¯åŠ¨ç”»è°ƒæ•´ä¸ºæŒ‰éœ€åŠ è½½(ç§»åŠ¨ç«¯ä¸åŠ è½½).\n**2017-01-11ï¼š**å°†å¤šè¯´è‡ªå®šä¹‰æ ·å¼ç§»åˆ°æœ¬åœ° & ä¸ºå¤šè¯´è¯„è®ºæ·»åŠ æ˜¾ç¤ºæµè§ˆå™¨åŠæ“ä½œç³»ç»ŸUAä¿¡æ¯.\n**2016-11-11ï¼š**å¸ƒå±€è°ƒæ•´ï¼Œæ·»åŠ å¤šè¯´idï¼Œè§£å†³ Highä¸€ä¸‹ ä¸­éŸ³ä¹å¤šæ¬¡ç‚¹å‡»é‡å¤æ’­æ”¾çš„é—®é¢˜.\n**2016-11-01ï¼š**è§£å†³ Jekyll v3.3ä¸­é»˜è®¤å¿½ç•¥ vendor ç›®å½•å¯¼è‡´ css js ç­‰èµ„æºåŠ è½½ä¸äº†çš„é—®é¢˜.\n**2016-09-26ï¼š**å¢åŠ åšå®¢èƒŒæ™¯ï¼Œé¼ æ ‡ç‚¹å‡»æ ·å¼.\n**2016-09-10ï¼š**å¢åŠ ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾ã€Highä¸€ä¸‹ã€ç«™å†…æœç´¢.\n**2016-09-08ï¼š**å¢åŠ ä¸è’œå­ç»Ÿè®¡ã€ç«™ç‚¹åœ°å›¾ã€ç™¾åº¦æ¨é€ã€ç¾åŒ–ç”¨æˆ·ç•™è¨€å¤´åƒå’Œavatar.\n**2016-09-06ï¼š**é€‰ç”¨å¤šè¯´ä½œä¸ºåˆ†äº«å’Œç•™è¨€çš„å¹³å°ã€å¹¶åšäº†ä¸€äº›å…¼å®¹æ€§çš„å¤„ç†ã€404é¡µé¢çš„è°ƒæ•´.\n**2016-09-03ï¼š**è¿™ä¸¤å¤©èŠ±äº†ä¸€äº›æ—¶é—´æŸ¥é˜…äº†Hexoçš„ç›¸å…³æ–‡æ¡£å’Œèµ„æ–™ã€é€‰æ‹©äº†NexT.Mistä¸»é¢˜ã€ç„¶åä»Šå¤©æ”¾åˆ°åœ¨githubä¸Š.","source":"weblog/index.md","raw":"---\ntitle: weblog\ndate: 2016-09-03 23:31:12\ncomments: false\n---\n### å»ºç«™æ—¥å¿—\n**2017-10-24ï¼š**å¢åŠ é¼ æ ‡ç§»åŠ¨æ•ˆæœã€è‡ªå®šä¹‰çš„éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ–‡ä»¶ç„¶åå¼•å…¥ã€ç§»é™¤service-workerã€é™æ€æ–‡ä»¶å¢åŠ ç‰ˆæœ¬å·.\n**2017-08-15ï¼š**æ—¥å¸¸ä¿®æ”¹(å¢åŠ ç½‘é¡µè¿›åº¦æ¡ã€å­—æ•°ç»Ÿè®¡ã€RSS ...)\n**2017-06-25ï¼š**æ·»åŠ  Service-worker.\n**2017-05-05ï¼š**å®ç° summary_img å­—æ®µï¼Œç”¨äºé¦–é¡µæ˜¾ç¤ºæ‘˜è¦å›¾ç‰‡ï¼Œæ–‡ç« é¡µä¸æ˜¾ç¤º.\n**2017-02-05ï¼š**å°†èƒŒæ™¯åŠ¨ç”»è°ƒæ•´ä¸ºæŒ‰éœ€åŠ è½½(ç§»åŠ¨ç«¯ä¸åŠ è½½).\n**2017-01-11ï¼š**å°†å¤šè¯´è‡ªå®šä¹‰æ ·å¼ç§»åˆ°æœ¬åœ° & ä¸ºå¤šè¯´è¯„è®ºæ·»åŠ æ˜¾ç¤ºæµè§ˆå™¨åŠæ“ä½œç³»ç»ŸUAä¿¡æ¯.\n**2016-11-11ï¼š**å¸ƒå±€è°ƒæ•´ï¼Œæ·»åŠ å¤šè¯´idï¼Œè§£å†³ Highä¸€ä¸‹ ä¸­éŸ³ä¹å¤šæ¬¡ç‚¹å‡»é‡å¤æ’­æ”¾çš„é—®é¢˜.\n**2016-11-01ï¼š**è§£å†³ Jekyll v3.3ä¸­é»˜è®¤å¿½ç•¥ vendor ç›®å½•å¯¼è‡´ css js ç­‰èµ„æºåŠ è½½ä¸äº†çš„é—®é¢˜.\n**2016-09-26ï¼š**å¢åŠ åšå®¢èƒŒæ™¯ï¼Œé¼ æ ‡ç‚¹å‡»æ ·å¼.\n**2016-09-10ï¼š**å¢åŠ ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾ã€Highä¸€ä¸‹ã€ç«™å†…æœç´¢.\n**2016-09-08ï¼š**å¢åŠ ä¸è’œå­ç»Ÿè®¡ã€ç«™ç‚¹åœ°å›¾ã€ç™¾åº¦æ¨é€ã€ç¾åŒ–ç”¨æˆ·ç•™è¨€å¤´åƒå’Œavatar.\n**2016-09-06ï¼š**é€‰ç”¨å¤šè¯´ä½œä¸ºåˆ†äº«å’Œç•™è¨€çš„å¹³å°ã€å¹¶åšäº†ä¸€äº›å…¼å®¹æ€§çš„å¤„ç†ã€404é¡µé¢çš„è°ƒæ•´.\n**2016-09-03ï¼š**è¿™ä¸¤å¤©èŠ±äº†ä¸€äº›æ—¶é—´æŸ¥é˜…äº†Hexoçš„ç›¸å…³æ–‡æ¡£å’Œèµ„æ–™ã€é€‰æ‹©äº†NexT.Mistä¸»é¢˜ã€ç„¶åä»Šå¤©æ”¾åˆ°åœ¨githubä¸Š.","updated":"2021-07-15T12:28:46.673Z","path":"weblog/index.html","layout":"page","_id":"ckxq3m945000bkudos09sjjye","content":"<h3 id=\"å»ºç«™æ—¥å¿—\"><a href=\"#å»ºç«™æ—¥å¿—\" class=\"headerlink\" title=\"å»ºç«™æ—¥å¿—\"></a>å»ºç«™æ—¥å¿—</h3><p><strong>2017-10-24ï¼š</strong>å¢åŠ é¼ æ ‡ç§»åŠ¨æ•ˆæœã€è‡ªå®šä¹‰çš„éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ–‡ä»¶ç„¶åå¼•å…¥ã€ç§»é™¤service-workerã€é™æ€æ–‡ä»¶å¢åŠ ç‰ˆæœ¬å·.<br><strong>2017-08-15ï¼š</strong>æ—¥å¸¸ä¿®æ”¹(å¢åŠ ç½‘é¡µè¿›åº¦æ¡ã€å­—æ•°ç»Ÿè®¡ã€RSS â€¦)<br><strong>2017-06-25ï¼š</strong>æ·»åŠ  Service-worker.<br><strong>2017-05-05ï¼š</strong>å®ç° summary_img å­—æ®µï¼Œç”¨äºé¦–é¡µæ˜¾ç¤ºæ‘˜è¦å›¾ç‰‡ï¼Œæ–‡ç« é¡µä¸æ˜¾ç¤º.<br><strong>2017-02-05ï¼š</strong>å°†èƒŒæ™¯åŠ¨ç”»è°ƒæ•´ä¸ºæŒ‰éœ€åŠ è½½(ç§»åŠ¨ç«¯ä¸åŠ è½½).<br><strong>2017-01-11ï¼š</strong>å°†å¤šè¯´è‡ªå®šä¹‰æ ·å¼ç§»åˆ°æœ¬åœ° &amp; ä¸ºå¤šè¯´è¯„è®ºæ·»åŠ æ˜¾ç¤ºæµè§ˆå™¨åŠæ“ä½œç³»ç»ŸUAä¿¡æ¯.<br><strong>2016-11-11ï¼š</strong>å¸ƒå±€è°ƒæ•´ï¼Œæ·»åŠ å¤šè¯´idï¼Œè§£å†³ Highä¸€ä¸‹ ä¸­éŸ³ä¹å¤šæ¬¡ç‚¹å‡»é‡å¤æ’­æ”¾çš„é—®é¢˜.<br><strong>2016-11-01ï¼š</strong>è§£å†³ Jekyll v3.3ä¸­é»˜è®¤å¿½ç•¥ vendor ç›®å½•å¯¼è‡´ css js ç­‰èµ„æºåŠ è½½ä¸äº†çš„é—®é¢˜.<br><strong>2016-09-26ï¼š</strong>å¢åŠ åšå®¢èƒŒæ™¯ï¼Œé¼ æ ‡ç‚¹å‡»æ ·å¼.<br><strong>2016-09-10ï¼š</strong>å¢åŠ ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾ã€Highä¸€ä¸‹ã€ç«™å†…æœç´¢.<br><strong>2016-09-08ï¼š</strong>å¢åŠ ä¸è’œå­ç»Ÿè®¡ã€ç«™ç‚¹åœ°å›¾ã€ç™¾åº¦æ¨é€ã€ç¾åŒ–ç”¨æˆ·ç•™è¨€å¤´åƒå’Œavatar.<br><strong>2016-09-06ï¼š</strong>é€‰ç”¨å¤šè¯´ä½œä¸ºåˆ†äº«å’Œç•™è¨€çš„å¹³å°ã€å¹¶åšäº†ä¸€äº›å…¼å®¹æ€§çš„å¤„ç†ã€404é¡µé¢çš„è°ƒæ•´.<br><strong>2016-09-03ï¼š</strong>è¿™ä¸¤å¤©èŠ±äº†ä¸€äº›æ—¶é—´æŸ¥é˜…äº†Hexoçš„ç›¸å…³æ–‡æ¡£å’Œèµ„æ–™ã€é€‰æ‹©äº†NexT.Mistä¸»é¢˜ã€ç„¶åä»Šå¤©æ”¾åˆ°åœ¨githubä¸Š.</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"å»ºç«™æ—¥å¿—\"><a href=\"#å»ºç«™æ—¥å¿—\" class=\"headerlink\" title=\"å»ºç«™æ—¥å¿—\"></a>å»ºç«™æ—¥å¿—</h3><p><strong>2017-10-24ï¼š</strong>å¢åŠ é¼ æ ‡ç§»åŠ¨æ•ˆæœã€è‡ªå®šä¹‰çš„éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ–‡ä»¶ç„¶åå¼•å…¥ã€ç§»é™¤service-workerã€é™æ€æ–‡ä»¶å¢åŠ ç‰ˆæœ¬å·.<br><strong>2017-08-15ï¼š</strong>æ—¥å¸¸ä¿®æ”¹(å¢åŠ ç½‘é¡µè¿›åº¦æ¡ã€å­—æ•°ç»Ÿè®¡ã€RSS â€¦)<br><strong>2017-06-25ï¼š</strong>æ·»åŠ  Service-worker.<br><strong>2017-05-05ï¼š</strong>å®ç° summary_img å­—æ®µï¼Œç”¨äºé¦–é¡µæ˜¾ç¤ºæ‘˜è¦å›¾ç‰‡ï¼Œæ–‡ç« é¡µä¸æ˜¾ç¤º.<br><strong>2017-02-05ï¼š</strong>å°†èƒŒæ™¯åŠ¨ç”»è°ƒæ•´ä¸ºæŒ‰éœ€åŠ è½½(ç§»åŠ¨ç«¯ä¸åŠ è½½).<br><strong>2017-01-11ï¼š</strong>å°†å¤šè¯´è‡ªå®šä¹‰æ ·å¼ç§»åˆ°æœ¬åœ° &amp; ä¸ºå¤šè¯´è¯„è®ºæ·»åŠ æ˜¾ç¤ºæµè§ˆå™¨åŠæ“ä½œç³»ç»ŸUAä¿¡æ¯.<br><strong>2016-11-11ï¼š</strong>å¸ƒå±€è°ƒæ•´ï¼Œæ·»åŠ å¤šè¯´idï¼Œè§£å†³ Highä¸€ä¸‹ ä¸­éŸ³ä¹å¤šæ¬¡ç‚¹å‡»é‡å¤æ’­æ”¾çš„é—®é¢˜.<br><strong>2016-11-01ï¼š</strong>è§£å†³ Jekyll v3.3ä¸­é»˜è®¤å¿½ç•¥ vendor ç›®å½•å¯¼è‡´ css js ç­‰èµ„æºåŠ è½½ä¸äº†çš„é—®é¢˜.<br><strong>2016-09-26ï¼š</strong>å¢åŠ åšå®¢èƒŒæ™¯ï¼Œé¼ æ ‡ç‚¹å‡»æ ·å¼.<br><strong>2016-09-10ï¼š</strong>å¢åŠ ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾ã€Highä¸€ä¸‹ã€ç«™å†…æœç´¢.<br><strong>2016-09-08ï¼š</strong>å¢åŠ ä¸è’œå­ç»Ÿè®¡ã€ç«™ç‚¹åœ°å›¾ã€ç™¾åº¦æ¨é€ã€ç¾åŒ–ç”¨æˆ·ç•™è¨€å¤´åƒå’Œavatar.<br><strong>2016-09-06ï¼š</strong>é€‰ç”¨å¤šè¯´ä½œä¸ºåˆ†äº«å’Œç•™è¨€çš„å¹³å°ã€å¹¶åšäº†ä¸€äº›å…¼å®¹æ€§çš„å¤„ç†ã€404é¡µé¢çš„è°ƒæ•´.<br><strong>2016-09-03ï¼š</strong>è¿™ä¸¤å¤©èŠ±äº†ä¸€äº›æ—¶é—´æŸ¥é˜…äº†Hexoçš„ç›¸å…³æ–‡æ¡£å’Œèµ„æ–™ã€é€‰æ‹©äº†NexT.Mistä¸»é¢˜ã€ç„¶åä»Šå¤©æ”¾åˆ°åœ¨githubä¸Š.</p>\n"}],"Post":[{"title":"æ¶æ„å¸ˆçš„èŒè´£","comments":1,"copyright":false,"toc":true,"_content":"\nç»å¸¸æœ‰äººé—®ï¼Œæ¶æ„å¸ˆæ˜¯å¹²å˜›çš„ï¼Ÿé‚£ä¹ˆä»Šå¤©è°ˆè°ˆï¼Œæ¶æ„å¸ˆçš„èŒè´£æ˜¯ä»€ä¹ˆã€‚\n### ä»€ä¹ˆæ˜¯æ¶æ„\nè°ˆæ¶æ„å¸ˆèŒè´£ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä»€ä¹ˆæ˜¯æ¶æ„ã€‚é‚£ä¹ˆæåˆ°æ¶æ„ï¼Œå¾ˆå¤šäººä¹Ÿä¼šæåˆ°æ¡†æ¶è¿™ä¸ªæ¦‚å¿µï¼Œå¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¸æ€ä¹ˆåŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå¦‚æœç»†åˆ†ä¸€ä¸‹çš„è¯ï¼Œæ¶æ„åå‘äºç»“æ„ï¼Œæ¡†æ¶åå‘äºè§„èŒƒã€‚æ¯”å¦‚linuxä¸­æœ‰æ¶æ„ï¼Œwindowæœ‰æ¶æ„ï¼Œå¾®ä¿¡æœ‰æ¶æ„ï¼Œæ·˜å®ä¹Ÿæœ‰æ¶æ„...é‚£ä¹ˆæ¡†æ¶å‘¢ï¼Œæ¯”å¦‚ä¸€æ¬¾mvvmæ¡†æ¶ï¼Œmvcæ¡†æ¶ï¼Œä½¿ç”¨è¿™ä¸ªæ¡†æ¶éœ€è¦éµå¾ªä¸€äº›è§„å®šå¥½çš„è®¾è®¡ã€‚\n\næˆ‘ä»¬è¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹æ¶æ„å§ï¼Œä»¥å¾®ä¿¡ä¸ºä¾‹ï¼Œä¸€æ¬¾appï¼Œå®ƒå…¶å®æ˜¯åˆ†å¾ˆå¤šæ¨¡å—çš„ï¼Œæ¯”å¦‚å¥½å‹æ¨¡å—ï¼Œæœ‹å‹åœˆæ¨¡å—ï¼Œæ¶ˆæ¯æ¨¡å—ç­‰ï¼Œè€Œæœ‹å‹åœˆæ¨¡å—åˆåˆ†ä¸ºç•™è¨€æ¨¡å—ï¼Œç‚¹èµæ¨¡å—ï¼Œå‘è¡¨æ¨¡å—ç­‰ã€‚æ¶æ„å°±æ˜¯è¯´ï¼Œè¿™äº›ä¸åŒçš„æ¨¡å—å¦‚ä½•çš„å„å¸å…¶èŒï¼Œåˆèƒ½å¦‚ä½•çš„äº’ç›¸é…åˆï¼Œå¦‚æœè¦å¢åŠ ä¸€ä¸ªæ‘‡ä¸€æ‘‡æ¨¡å—ï¼Œå¦‚ä½•èƒ½å¤Ÿæ‰©å±•æ–¹ä¾¿ã€‚æŠŠè¿™äº›æ‰€æœ‰å› ç´ éƒ½è€ƒè™‘è¿›æ¥ï¼Œæœ€åèƒ½å¤Ÿç»„è£…åœ¨ä¸€èµ·çš„èƒ½åŠ›ï¼Œå°±æ˜¯æ¶æ„èƒ½åŠ›ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ‰€æœ‰ç»„æˆç»Ÿä¸€å«åšæ¶æ„ã€‚æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹ç»•ã€‚ã€‚ã€‚ä¸ç®¡äº†ï¼Œæˆ‘è§‰å¾—èƒ½å¤Ÿè§£å†³ä¸šåŠ¡ç—›ç‚¹ï¼Œä½¿å¾—ä¸šåŠ¡èƒ½å¤Ÿåšåˆ°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€æ˜“æ‰©å±•ã€æˆæœ¬ä½ã€å®‰å…¨é«˜...ï¼Œè¯´ç™½äº†å°±æ˜¯èƒ½è§£å†³æ‰ä¸šåŠ¡æ’åœ¨å‰é¢ä¸€åŠçš„ç—›ç‚¹ï¼Œå°±æ˜¯ç‰›é€¼çš„æ¶æ„å¸ˆã€‚\n\n### ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\nå¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸€èˆ¬å°å…¬å¸æ²¡æœ‰æ¶æ„å¸ˆè¿™ä¸ªèŒä½ï¼Œåªæœ‰è¾¾åˆ°ä¸€å®šé‡çº§æ‰ä¼šæœ‰æ¶æ„å¸ˆï¼Œå› ä¸ºå°å…¬å¸ä¸éœ€è¦æ¶æ„ï¼Œ10ä¸ªäººå¼€ä¸ªä¼šç¢°ä¸€ç¢°ï¼Œä½ åšè¿™ä¸ªï¼Œæˆ‘åšè¿™ä¸ªï¼Œæ’¸èµ·è¢–å­å†™ä»£ç ï¼Œå°½å¿«ä¸Šçº¿ï¼Œæ¯”èŠ±æ—¶é—´ææ¶æ„æœ‰æ„ä¹‰ã€‚ä½ ä»¥ä¸ºæ·˜å®ä¸€å¼€å§‹å°±æçš„è¿™ä¹ˆç‰›å—ï¼Ÿä¸æ˜¯çš„ï¼Œæ·˜å®ç¬¬ä¸€ç‰ˆæ˜¯ä¹°çš„ï¼å½“å¹´æ­å·é©¬åœ¨2013å¹´çš„æ—¶å€™ï¼Œ4æœˆ7å·å†³å®šè¦åšæ·˜å®ï¼Œè¦æ±‚5æœˆ10å·ä¸Šçº¿ï¼Œè¦æ˜¯ä½ æƒ³ç€ææ¶æ„ï¼Œé»„èŠ±èœéƒ½å‡‰äº†ï¼ŒåŸºäºå½“æ—¶å…¬å¸ã€å¸‚åœºæƒ…å†µï¼Œåªè¦ä¹°ä¸€ä¸ªæ˜¯æœ€å¿«çš„ï¼Œå½“ç„¶è¦è€ƒè™‘ä¹°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ï¼Œä¹°ä¸€ä¸ªè½»é‡çš„è¿˜æ˜¯ä¹°ä¸ªå¤æ‚çš„ï¼Œå„æœ‰ä¼˜åŠ¿ï¼Œä½†æ˜¯åŸºäºåç»­å¯èƒ½è¦æŒç»­å‘å±•ï¼Œå°±ä¹°äº†ä¸ªè½»é‡çš„ï¼Œæ–¹ä¾¿åç»­äºŒæ¬¡å¼€å‘ã€‚ç­‰åˆ°äº†åç»­ï¼Œä¸šåŠ¡å¤§çˆ†å‘ï¼Œå½“å‰é¡¹ç›®æ‰¿è½½ä¸äº†é‚£ä¹ˆé«˜çš„æµé‡ï¼Œæ‰å¼€å§‹ææ¶æ„ã€‚æ‰€ä»¥ï¼Œå¥½çš„æ¶æ„éƒ½æ˜¯ä¸šåŠ¡é€¼å‡ºæ¥çš„ã€‚å¦‚æœæ¶æ„è„±ç¦»ä¸šåŠ¡ï¼Œé‚£æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ã€‚\n\nå›åˆ°ä¸»é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„ï¼Œæˆ‘ç†è§£çš„æ¶æ„å°±æ˜¯ä¸ºäº†è§£å†³å¤æ‚ä¸šåŠ¡ä¸­é‡åˆ°çš„é—®é¢˜ã€‚\n\n### æ¶æ„è¦åšä»€ä¹ˆ\næˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´åˆ°äº†ï¼Œå½“ä¸šåŠ¡å‘å±•ä¸€å®šç¨‹åº¦æ—¶ï¼Œç”±äºå¸‚åœºéœ€æ±‚ã€å…¬å¸è€æ¿è¦æ±‚ç­‰ï¼Œå¿…é¡»è¦å¯¹ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–ï¼Œå¯èƒ½å› ä¸ºæ—§ç»“æ„ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚éš¾æ‰©å¼ ï¼ŒåŠ ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œä¾èµ–çš„ä¸œè¥¿å¤ªå¤šï¼Œäººå‘˜æˆæœ¬å¤§ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·é‡æ€¥å‰§ä¸Šå‡ï¼Œéœ€è¦æ‰¿è½½æ›´é«˜çš„qpsç­‰ï¼Œé‚£ä¹ˆæ¶æ„è¦åšçš„ï¼Œæˆ‘è¿™é‡Œæ•´ç†äº†å‡ ä¸ªæ–¹é¢ï¼šé«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯æ‰©å±•ã€ä½æˆæœ¬ã€é«˜å®‰å…¨ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šï¼Œä½†å¤šæ•°çš„å¤æ‚ä¸šåŠ¡éƒ½ä¼šé‡åˆ°è¿™å‡ ä¸ªé—®é¢˜ã€‚\n\n### é«˜æ€§èƒ½\n\nä¹‹å‰åšè¿‡ä¸€ä¸ªbffæ¡†æ¶ï¼Œæ”¯æŒå…¬å¸å†…éƒ¨æœåŠ¡ï¼Œå½“æ—¶ä¸€å°8æ ¸32GæœåŠ¡å™¨ï¼Œè£¸å‹hello worldï¼Œè®°å¾—qpsæœ€é«˜å‹åˆ°äº†2500ã€‚è®°å¾—å½“æ—¶å…¬å¸æœ‰ä¸ªæ´»åŠ¨ï¼Œé¢„è®¡å½“å¤©å‚ä¸äººæ•°ä¼šåˆ°20ä¸‡ï¼Œqpså³°å€¼ä¿é™©ä¸€ç‚¹å°±æ˜¯20wäº†ï¼Œé‚£ä¹ˆå¦‚ä½•è®©è¿™ä¸ªqpsåªèƒ½åˆ°2500çš„æ¡†æ¶æ”¯æŒè¿™ä¹ˆå¤šçš„ç”¨æˆ·é‡å‘¢ï¼Ÿæœ€ç®€å•çš„åŠæ³•ä¹Ÿæ˜¯æœ€åˆé€‚çš„ï¼Œç”¨æœºå™¨çš„æ•°é‡æ¥æå‡qpsçš„ä¸Šé™ï¼Œä¸€å°æœºå™¨å¯ä»¥æ‰¿è½½2500çš„qpsï¼Œé‚£å°±æ“ä½œ20w/2500å¤šå°æœºå™¨ï¼Œå½“ç„¶ç”±äºç›®å‰è™šæ‹ŸåŒ–æŠ€æœ¯ç­‰å®ç°ï¼Œå¯èƒ½å¾ˆå¤šæœºå™¨æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€æœ‰ï¼ŒçœŸå®çš„æœåŠ¡å™¨ä¹Ÿå¯èƒ½ä¸éœ€è¦é‚£ä¹ˆå¤šã€‚è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„ç”¨é‡æ¥æå‡æ€§èƒ½çš„æ–¹å¼ã€‚\n\nå½“ç„¶ï¼Œé«˜æ€§èƒ½ï¼Œä¹Ÿä¼šä½“ç°åœ¨å…¶ä»–æ–¹é¢ï¼Œæ¯”å¦‚ä¸€äº›è°ƒåº¦ç®—æ³•ã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œéƒ½æ˜¯æå‡é«˜æ€§èƒ½çš„æ–¹å¼ï¼Œå¥½çš„è°ƒåº¦ç®—æ³•ï¼Œä¹Ÿèƒ½å‡å°‘ä¸€äº›èµ„æºéƒ½æµªè´¹ã€‚\n\n### é«˜å¯ç”¨\n\næˆ‘ä»¬è¿˜ä»¥æˆ‘åšçš„é‚£ä¸ªbffæ¡†æ¶ä¸ºä¾‹ï¼Œè¯´ç™½äº†ï¼Œä¸šåŠ¡æ–¹ç”¨äº†ä½ çš„æ¡†æ¶ï¼Œä¸Šçº¿åï¼Œå‘ç°ç¨‹åºç»å¸¸å´©æºƒï¼Œæ’æŸ¥åŸå› è¿˜éå¸¸å›°éš¾ï¼Œæ—¥å¿—éš¾æ‰¾ã€‚è¿™å°±è¯´æ˜ï¼Œä½ è¿™ä¸ªæ¶æ„è®¾è®¡çš„æœ‰é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•åšåˆ°é«˜å¯ç”¨å‘¢ï¼Œé¦–å…ˆä½œä¸ºä¸€ä¸ªæ¶æ„å¸ˆï¼Œå¦³å¾—æœ‰ä¸€å®šéƒ½é¢„æµ‹æ€§ï¼Œå¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Œå¦‚æœå‡ºäº†ä»€ä¹ˆæƒ…å†µä½ æœ‰ä»€ä¹ˆå¤‡é€‰æ–¹æ¡ˆï¼Œå¯ä»¥è®©ä¸šåŠ¡è¿˜èƒ½å¤Ÿç¨³å®šè¿è¡Œï¼Œä¸è¢«ç”¨æˆ·å¯Ÿè§‰çš„æƒ…å†µä¸‹ï¼Œä¸šåŠ¡ä¸å—å½±å“ã€‚è®°å¾—ä¹‹å‰å‡ºç°è¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œçº¿ä¸ŠæœåŠ¡æœ‰æ—¶å€™ä¼šç»å¸¸è«åé‡å¯ï¼Œåæ¥ç»æ’æŸ¥å‘ç°ï¼Œåœ¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œé‡Œï¼ŒæŠ›äº†ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰è¢«catchåˆ°ï¼Œå¯¼è‡´è¿›ç¨‹ç›´æ¥é€€å‡ºäº†ï¼Œé€€å‡ºåï¼Œç”±äºæœºå™¨ä¸Šæœ‰ä¿æ´»æœºåˆ¶ï¼Œè¿›ç¨‹åˆè¢«æ‹‰èµ·æ¥äº†ï¼Œè¿™å°±å‡ºç°äº†æœåŠ¡é‡å¯çš„æƒ…å†µã€‚æœ€åæˆ‘åšäº†ä¸€ä¸ªå…œåº•çš„æ–¹æ¡ˆï¼Œåœ¨è¿›ç¨‹ä¸­ç›‘å¬äº†uncaughtExceptionäº‹ä»¶ï¼Œé˜²æ­¢å¼‚å¸¸é€€å‡ºã€‚\n\nå¦å¤–å¾ˆå¤šæƒ…å†µéœ€è¦æˆ‘ä»¬è€ƒè™‘ï¼Œæ¯”å¦‚çº¿ä¸ŠæœåŠ¡é‡å¯ï¼Œæœ‰ä¸€æ®µçŸ­æš‚çš„äº‹ä»¶ï¼Œè¯·æ±‚æ˜¯æ‰“ä¸è¿›æ¥çš„ï¼Œé‚£å¦‚ä½•è§£å†³è¿™æ®µæ—¶é—´çš„æœåŠ¡ä¸å¯ç”¨å¯¹ç”¨æˆ·çš„å½±å“å‘¢ï¼Œé‚£å°±å¯ä»¥åšåˆ°å¹³æ»‘é‡å¯ï¼Œå¤šä¸ªè¿›ç¨‹é…åˆå°±å¯ä»¥åšåˆ°ï¼Œè¿™äº›éƒ½æ˜¯éœ€è¦æ¶æ„å¸ˆè¦æƒ³çš„ï¼Œå†æ¯”å¦‚ï¼Œæœ‰ä¸€äº›æœåŠ¡æ˜¯é“¾æ¥ElasticSearchï¼ˆåé¢ç®€ç§°esï¼‰çš„ï¼Œä¸€èˆ¬eséƒ½æ˜¯éƒ¨ç½²åˆ°å…¬å¸ç‰¹å®šçš„æœºå™¨ä¸Šï¼Œå¦‚æœæŸä¸ªæ—¶åˆ»esæŒ‚äº†ï¼Œä½ çš„æœåŠ¡å°±ä¼šå—åˆ°å½±å“ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä½ éœ€è¦è€ƒè™‘çš„ï¼Œå¦‚æœesæŒ‚äº†ï¼Œä½ å¾—æœ‰é™çº§æ–¹æ¡ˆï¼Œæ¯”å¦‚å¯ä»¥ç†”æ–­ï¼Œæ•°æ®æ‹¿å¤‡æœºæ•°æ®ã€‚\n\næ€»ä¹‹ï¼Œé«˜å¯ç”¨å°±æ˜¯è¦å°½å¯èƒ½çš„æƒ³åˆ°æ‰€æœ‰çº¿ä¸Šå¯èƒ½é‡åˆ°çš„å„ç§é—®é¢˜ï¼Œä½ æƒ³ï¼Œé˜¿é‡ŒåŒ11å‰ï¼Œéƒ½è¦çªç„¶æ–­ç”µï¼Œå°±æ˜¯ä¸ºäº†éªŒè¯æœåŠ¡çš„é«˜å¯ç”¨ã€‚\n\n### å¯æ‰©å±•\nè¿™ä¸ªå¤§å®¶åº”è¯¥ä¹Ÿå®¹æ˜“ç†è§£ï¼ŒæœåŠ¡çš„å‡çº§å’Œè¿­ä»£ï¼Œæœ‰æ—¶å€™æ˜¯éœ€è¦åœ¨æŸä¸€äº›èƒ½åŠ›åšæ‰©å±•çš„ï¼Œè¿˜ä»¥bffæ¡†æ¶ä¸ºä¾‹ï¼Œå¤šæ•°é€šç”¨çš„ä¸­é—´é—´ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½å†…ç½®åˆ°æ¡†æ¶é‡Œäº†ï¼Œä½†æ˜¯æœ‰äº›ä¸šåŠ¡ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œé‚£å°±éœ€è¦æ¡†æ¶æœ¬èº«æš´éœ²å‡ºä¸€ä¸ªå£å­ï¼Œç”¨æ¥ç”¨æˆ·çš„è‡ªå®šä¹‰æ‰©å±•ã€‚å¦‚æœä¸€ä¸ªbffæ¡†æ¶æ²¡æœ‰å¯æ‰©å±•åŠŸèƒ½ï¼Œç»™ä½ ç”¨çš„è¯ï¼Œæˆ‘ä¼°è®¡ä½ ä¹Ÿä¸æƒ³ç”¨ã€‚æ‰€ä»¥å¯æ‰©å±•ä¹Ÿæ˜¯ä¸€ä¸ªç”¨æˆ·ä½“éªŒåˆ°é—®é¢˜ã€‚å†å¾€å¤§ä¸€ç‚¹äº§å“è®²ï¼Œå¤§å®¶éƒ½åœ¨ç”¨å¾®ä¿¡ï¼Œå¦‚æœå¾®ä¿¡å“ªå¤©åœ¨æœ‹å‹åœˆåšä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæ¯”å¦‚è¦åšå¹¿å‘Šï¼Œæ€»ä¸èƒ½æŠŠæœ‹å‹åœˆæ•´ä½“éƒ½è¦æä¸€ä¸‹æŠŠï¼Œè¿™ä¸ªæˆæœ¬ä¹Ÿå¤ªå¤§äº†ã€‚å¦å¤–å¤§å®¶åœ¨å¾®ä¿¡çš„è®¾ç½®é‡Œï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå‘ç°é¡µçš„è®¾ç½®ï¼Œé‡Œé¢å¯ä»¥åŠ¨æ€å…³é—­å±•ç¤ºä½ å–œæ¬¢çš„åŠŸèƒ½ï¼Œè¿™å°±æ˜¯å¯æ‰©å±•æ€§ã€‚\n\n### å…¶ä»–\nå…¶ä»–è¿˜æœ‰å¾ˆå¤šå› ç´ éœ€è¦æ¶æ„å¸ˆè€ƒè™‘ï¼Œåæ­£æ¶æ„å¸ˆçš„èŒè´£å°±æ˜¯ä¸ºäº†ä¸šåŠ¡çš„é«˜æ•ˆã€ç¨³å®šã€å®‰å…¨ç­‰è€ƒè™‘ï¼Œè„±ç¦»ä¸šåŠ¡çš„æ¶æ„å¸ˆï¼Œä¸æ˜¯å¥½æ¶æ„å¸ˆã€‚","source":"_posts/architecture/base.md","raw":"---\ntitle: æ¶æ„å¸ˆçš„èŒè´£\ncategories: æ¶æ„\ntags: [Architecture]\ncomments: true\ncopyright: false\ntoc: true\n---\n\nç»å¸¸æœ‰äººé—®ï¼Œæ¶æ„å¸ˆæ˜¯å¹²å˜›çš„ï¼Ÿé‚£ä¹ˆä»Šå¤©è°ˆè°ˆï¼Œæ¶æ„å¸ˆçš„èŒè´£æ˜¯ä»€ä¹ˆã€‚\n### ä»€ä¹ˆæ˜¯æ¶æ„\nè°ˆæ¶æ„å¸ˆèŒè´£ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä»€ä¹ˆæ˜¯æ¶æ„ã€‚é‚£ä¹ˆæåˆ°æ¶æ„ï¼Œå¾ˆå¤šäººä¹Ÿä¼šæåˆ°æ¡†æ¶è¿™ä¸ªæ¦‚å¿µï¼Œå¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¸æ€ä¹ˆåŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå¦‚æœç»†åˆ†ä¸€ä¸‹çš„è¯ï¼Œæ¶æ„åå‘äºç»“æ„ï¼Œæ¡†æ¶åå‘äºè§„èŒƒã€‚æ¯”å¦‚linuxä¸­æœ‰æ¶æ„ï¼Œwindowæœ‰æ¶æ„ï¼Œå¾®ä¿¡æœ‰æ¶æ„ï¼Œæ·˜å®ä¹Ÿæœ‰æ¶æ„...é‚£ä¹ˆæ¡†æ¶å‘¢ï¼Œæ¯”å¦‚ä¸€æ¬¾mvvmæ¡†æ¶ï¼Œmvcæ¡†æ¶ï¼Œä½¿ç”¨è¿™ä¸ªæ¡†æ¶éœ€è¦éµå¾ªä¸€äº›è§„å®šå¥½çš„è®¾è®¡ã€‚\n\næˆ‘ä»¬è¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹æ¶æ„å§ï¼Œä»¥å¾®ä¿¡ä¸ºä¾‹ï¼Œä¸€æ¬¾appï¼Œå®ƒå…¶å®æ˜¯åˆ†å¾ˆå¤šæ¨¡å—çš„ï¼Œæ¯”å¦‚å¥½å‹æ¨¡å—ï¼Œæœ‹å‹åœˆæ¨¡å—ï¼Œæ¶ˆæ¯æ¨¡å—ç­‰ï¼Œè€Œæœ‹å‹åœˆæ¨¡å—åˆåˆ†ä¸ºç•™è¨€æ¨¡å—ï¼Œç‚¹èµæ¨¡å—ï¼Œå‘è¡¨æ¨¡å—ç­‰ã€‚æ¶æ„å°±æ˜¯è¯´ï¼Œè¿™äº›ä¸åŒçš„æ¨¡å—å¦‚ä½•çš„å„å¸å…¶èŒï¼Œåˆèƒ½å¦‚ä½•çš„äº’ç›¸é…åˆï¼Œå¦‚æœè¦å¢åŠ ä¸€ä¸ªæ‘‡ä¸€æ‘‡æ¨¡å—ï¼Œå¦‚ä½•èƒ½å¤Ÿæ‰©å±•æ–¹ä¾¿ã€‚æŠŠè¿™äº›æ‰€æœ‰å› ç´ éƒ½è€ƒè™‘è¿›æ¥ï¼Œæœ€åèƒ½å¤Ÿç»„è£…åœ¨ä¸€èµ·çš„èƒ½åŠ›ï¼Œå°±æ˜¯æ¶æ„èƒ½åŠ›ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ‰€æœ‰ç»„æˆç»Ÿä¸€å«åšæ¶æ„ã€‚æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹ç»•ã€‚ã€‚ã€‚ä¸ç®¡äº†ï¼Œæˆ‘è§‰å¾—èƒ½å¤Ÿè§£å†³ä¸šåŠ¡ç—›ç‚¹ï¼Œä½¿å¾—ä¸šåŠ¡èƒ½å¤Ÿåšåˆ°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€æ˜“æ‰©å±•ã€æˆæœ¬ä½ã€å®‰å…¨é«˜...ï¼Œè¯´ç™½äº†å°±æ˜¯èƒ½è§£å†³æ‰ä¸šåŠ¡æ’åœ¨å‰é¢ä¸€åŠçš„ç—›ç‚¹ï¼Œå°±æ˜¯ç‰›é€¼çš„æ¶æ„å¸ˆã€‚\n\n### ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\nå¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸€èˆ¬å°å…¬å¸æ²¡æœ‰æ¶æ„å¸ˆè¿™ä¸ªèŒä½ï¼Œåªæœ‰è¾¾åˆ°ä¸€å®šé‡çº§æ‰ä¼šæœ‰æ¶æ„å¸ˆï¼Œå› ä¸ºå°å…¬å¸ä¸éœ€è¦æ¶æ„ï¼Œ10ä¸ªäººå¼€ä¸ªä¼šç¢°ä¸€ç¢°ï¼Œä½ åšè¿™ä¸ªï¼Œæˆ‘åšè¿™ä¸ªï¼Œæ’¸èµ·è¢–å­å†™ä»£ç ï¼Œå°½å¿«ä¸Šçº¿ï¼Œæ¯”èŠ±æ—¶é—´ææ¶æ„æœ‰æ„ä¹‰ã€‚ä½ ä»¥ä¸ºæ·˜å®ä¸€å¼€å§‹å°±æçš„è¿™ä¹ˆç‰›å—ï¼Ÿä¸æ˜¯çš„ï¼Œæ·˜å®ç¬¬ä¸€ç‰ˆæ˜¯ä¹°çš„ï¼å½“å¹´æ­å·é©¬åœ¨2013å¹´çš„æ—¶å€™ï¼Œ4æœˆ7å·å†³å®šè¦åšæ·˜å®ï¼Œè¦æ±‚5æœˆ10å·ä¸Šçº¿ï¼Œè¦æ˜¯ä½ æƒ³ç€ææ¶æ„ï¼Œé»„èŠ±èœéƒ½å‡‰äº†ï¼ŒåŸºäºå½“æ—¶å…¬å¸ã€å¸‚åœºæƒ…å†µï¼Œåªè¦ä¹°ä¸€ä¸ªæ˜¯æœ€å¿«çš„ï¼Œå½“ç„¶è¦è€ƒè™‘ä¹°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ï¼Œä¹°ä¸€ä¸ªè½»é‡çš„è¿˜æ˜¯ä¹°ä¸ªå¤æ‚çš„ï¼Œå„æœ‰ä¼˜åŠ¿ï¼Œä½†æ˜¯åŸºäºåç»­å¯èƒ½è¦æŒç»­å‘å±•ï¼Œå°±ä¹°äº†ä¸ªè½»é‡çš„ï¼Œæ–¹ä¾¿åç»­äºŒæ¬¡å¼€å‘ã€‚ç­‰åˆ°äº†åç»­ï¼Œä¸šåŠ¡å¤§çˆ†å‘ï¼Œå½“å‰é¡¹ç›®æ‰¿è½½ä¸äº†é‚£ä¹ˆé«˜çš„æµé‡ï¼Œæ‰å¼€å§‹ææ¶æ„ã€‚æ‰€ä»¥ï¼Œå¥½çš„æ¶æ„éƒ½æ˜¯ä¸šåŠ¡é€¼å‡ºæ¥çš„ã€‚å¦‚æœæ¶æ„è„±ç¦»ä¸šåŠ¡ï¼Œé‚£æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ã€‚\n\nå›åˆ°ä¸»é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„ï¼Œæˆ‘ç†è§£çš„æ¶æ„å°±æ˜¯ä¸ºäº†è§£å†³å¤æ‚ä¸šåŠ¡ä¸­é‡åˆ°çš„é—®é¢˜ã€‚\n\n### æ¶æ„è¦åšä»€ä¹ˆ\næˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´åˆ°äº†ï¼Œå½“ä¸šåŠ¡å‘å±•ä¸€å®šç¨‹åº¦æ—¶ï¼Œç”±äºå¸‚åœºéœ€æ±‚ã€å…¬å¸è€æ¿è¦æ±‚ç­‰ï¼Œå¿…é¡»è¦å¯¹ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–ï¼Œå¯èƒ½å› ä¸ºæ—§ç»“æ„ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚éš¾æ‰©å¼ ï¼ŒåŠ ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œä¾èµ–çš„ä¸œè¥¿å¤ªå¤šï¼Œäººå‘˜æˆæœ¬å¤§ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·é‡æ€¥å‰§ä¸Šå‡ï¼Œéœ€è¦æ‰¿è½½æ›´é«˜çš„qpsç­‰ï¼Œé‚£ä¹ˆæ¶æ„è¦åšçš„ï¼Œæˆ‘è¿™é‡Œæ•´ç†äº†å‡ ä¸ªæ–¹é¢ï¼šé«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯æ‰©å±•ã€ä½æˆæœ¬ã€é«˜å®‰å…¨ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šï¼Œä½†å¤šæ•°çš„å¤æ‚ä¸šåŠ¡éƒ½ä¼šé‡åˆ°è¿™å‡ ä¸ªé—®é¢˜ã€‚\n\n### é«˜æ€§èƒ½\n\nä¹‹å‰åšè¿‡ä¸€ä¸ªbffæ¡†æ¶ï¼Œæ”¯æŒå…¬å¸å†…éƒ¨æœåŠ¡ï¼Œå½“æ—¶ä¸€å°8æ ¸32GæœåŠ¡å™¨ï¼Œè£¸å‹hello worldï¼Œè®°å¾—qpsæœ€é«˜å‹åˆ°äº†2500ã€‚è®°å¾—å½“æ—¶å…¬å¸æœ‰ä¸ªæ´»åŠ¨ï¼Œé¢„è®¡å½“å¤©å‚ä¸äººæ•°ä¼šåˆ°20ä¸‡ï¼Œqpså³°å€¼ä¿é™©ä¸€ç‚¹å°±æ˜¯20wäº†ï¼Œé‚£ä¹ˆå¦‚ä½•è®©è¿™ä¸ªqpsåªèƒ½åˆ°2500çš„æ¡†æ¶æ”¯æŒè¿™ä¹ˆå¤šçš„ç”¨æˆ·é‡å‘¢ï¼Ÿæœ€ç®€å•çš„åŠæ³•ä¹Ÿæ˜¯æœ€åˆé€‚çš„ï¼Œç”¨æœºå™¨çš„æ•°é‡æ¥æå‡qpsçš„ä¸Šé™ï¼Œä¸€å°æœºå™¨å¯ä»¥æ‰¿è½½2500çš„qpsï¼Œé‚£å°±æ“ä½œ20w/2500å¤šå°æœºå™¨ï¼Œå½“ç„¶ç”±äºç›®å‰è™šæ‹ŸåŒ–æŠ€æœ¯ç­‰å®ç°ï¼Œå¯èƒ½å¾ˆå¤šæœºå™¨æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€æœ‰ï¼ŒçœŸå®çš„æœåŠ¡å™¨ä¹Ÿå¯èƒ½ä¸éœ€è¦é‚£ä¹ˆå¤šã€‚è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„ç”¨é‡æ¥æå‡æ€§èƒ½çš„æ–¹å¼ã€‚\n\nå½“ç„¶ï¼Œé«˜æ€§èƒ½ï¼Œä¹Ÿä¼šä½“ç°åœ¨å…¶ä»–æ–¹é¢ï¼Œæ¯”å¦‚ä¸€äº›è°ƒåº¦ç®—æ³•ã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œéƒ½æ˜¯æå‡é«˜æ€§èƒ½çš„æ–¹å¼ï¼Œå¥½çš„è°ƒåº¦ç®—æ³•ï¼Œä¹Ÿèƒ½å‡å°‘ä¸€äº›èµ„æºéƒ½æµªè´¹ã€‚\n\n### é«˜å¯ç”¨\n\næˆ‘ä»¬è¿˜ä»¥æˆ‘åšçš„é‚£ä¸ªbffæ¡†æ¶ä¸ºä¾‹ï¼Œè¯´ç™½äº†ï¼Œä¸šåŠ¡æ–¹ç”¨äº†ä½ çš„æ¡†æ¶ï¼Œä¸Šçº¿åï¼Œå‘ç°ç¨‹åºç»å¸¸å´©æºƒï¼Œæ’æŸ¥åŸå› è¿˜éå¸¸å›°éš¾ï¼Œæ—¥å¿—éš¾æ‰¾ã€‚è¿™å°±è¯´æ˜ï¼Œä½ è¿™ä¸ªæ¶æ„è®¾è®¡çš„æœ‰é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•åšåˆ°é«˜å¯ç”¨å‘¢ï¼Œé¦–å…ˆä½œä¸ºä¸€ä¸ªæ¶æ„å¸ˆï¼Œå¦³å¾—æœ‰ä¸€å®šéƒ½é¢„æµ‹æ€§ï¼Œå¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Œå¦‚æœå‡ºäº†ä»€ä¹ˆæƒ…å†µä½ æœ‰ä»€ä¹ˆå¤‡é€‰æ–¹æ¡ˆï¼Œå¯ä»¥è®©ä¸šåŠ¡è¿˜èƒ½å¤Ÿç¨³å®šè¿è¡Œï¼Œä¸è¢«ç”¨æˆ·å¯Ÿè§‰çš„æƒ…å†µä¸‹ï¼Œä¸šåŠ¡ä¸å—å½±å“ã€‚è®°å¾—ä¹‹å‰å‡ºç°è¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œçº¿ä¸ŠæœåŠ¡æœ‰æ—¶å€™ä¼šç»å¸¸è«åé‡å¯ï¼Œåæ¥ç»æ’æŸ¥å‘ç°ï¼Œåœ¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œé‡Œï¼ŒæŠ›äº†ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰è¢«catchåˆ°ï¼Œå¯¼è‡´è¿›ç¨‹ç›´æ¥é€€å‡ºäº†ï¼Œé€€å‡ºåï¼Œç”±äºæœºå™¨ä¸Šæœ‰ä¿æ´»æœºåˆ¶ï¼Œè¿›ç¨‹åˆè¢«æ‹‰èµ·æ¥äº†ï¼Œè¿™å°±å‡ºç°äº†æœåŠ¡é‡å¯çš„æƒ…å†µã€‚æœ€åæˆ‘åšäº†ä¸€ä¸ªå…œåº•çš„æ–¹æ¡ˆï¼Œåœ¨è¿›ç¨‹ä¸­ç›‘å¬äº†uncaughtExceptionäº‹ä»¶ï¼Œé˜²æ­¢å¼‚å¸¸é€€å‡ºã€‚\n\nå¦å¤–å¾ˆå¤šæƒ…å†µéœ€è¦æˆ‘ä»¬è€ƒè™‘ï¼Œæ¯”å¦‚çº¿ä¸ŠæœåŠ¡é‡å¯ï¼Œæœ‰ä¸€æ®µçŸ­æš‚çš„äº‹ä»¶ï¼Œè¯·æ±‚æ˜¯æ‰“ä¸è¿›æ¥çš„ï¼Œé‚£å¦‚ä½•è§£å†³è¿™æ®µæ—¶é—´çš„æœåŠ¡ä¸å¯ç”¨å¯¹ç”¨æˆ·çš„å½±å“å‘¢ï¼Œé‚£å°±å¯ä»¥åšåˆ°å¹³æ»‘é‡å¯ï¼Œå¤šä¸ªè¿›ç¨‹é…åˆå°±å¯ä»¥åšåˆ°ï¼Œè¿™äº›éƒ½æ˜¯éœ€è¦æ¶æ„å¸ˆè¦æƒ³çš„ï¼Œå†æ¯”å¦‚ï¼Œæœ‰ä¸€äº›æœåŠ¡æ˜¯é“¾æ¥ElasticSearchï¼ˆåé¢ç®€ç§°esï¼‰çš„ï¼Œä¸€èˆ¬eséƒ½æ˜¯éƒ¨ç½²åˆ°å…¬å¸ç‰¹å®šçš„æœºå™¨ä¸Šï¼Œå¦‚æœæŸä¸ªæ—¶åˆ»esæŒ‚äº†ï¼Œä½ çš„æœåŠ¡å°±ä¼šå—åˆ°å½±å“ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä½ éœ€è¦è€ƒè™‘çš„ï¼Œå¦‚æœesæŒ‚äº†ï¼Œä½ å¾—æœ‰é™çº§æ–¹æ¡ˆï¼Œæ¯”å¦‚å¯ä»¥ç†”æ–­ï¼Œæ•°æ®æ‹¿å¤‡æœºæ•°æ®ã€‚\n\næ€»ä¹‹ï¼Œé«˜å¯ç”¨å°±æ˜¯è¦å°½å¯èƒ½çš„æƒ³åˆ°æ‰€æœ‰çº¿ä¸Šå¯èƒ½é‡åˆ°çš„å„ç§é—®é¢˜ï¼Œä½ æƒ³ï¼Œé˜¿é‡ŒåŒ11å‰ï¼Œéƒ½è¦çªç„¶æ–­ç”µï¼Œå°±æ˜¯ä¸ºäº†éªŒè¯æœåŠ¡çš„é«˜å¯ç”¨ã€‚\n\n### å¯æ‰©å±•\nè¿™ä¸ªå¤§å®¶åº”è¯¥ä¹Ÿå®¹æ˜“ç†è§£ï¼ŒæœåŠ¡çš„å‡çº§å’Œè¿­ä»£ï¼Œæœ‰æ—¶å€™æ˜¯éœ€è¦åœ¨æŸä¸€äº›èƒ½åŠ›åšæ‰©å±•çš„ï¼Œè¿˜ä»¥bffæ¡†æ¶ä¸ºä¾‹ï¼Œå¤šæ•°é€šç”¨çš„ä¸­é—´é—´ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½å†…ç½®åˆ°æ¡†æ¶é‡Œäº†ï¼Œä½†æ˜¯æœ‰äº›ä¸šåŠ¡ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œé‚£å°±éœ€è¦æ¡†æ¶æœ¬èº«æš´éœ²å‡ºä¸€ä¸ªå£å­ï¼Œç”¨æ¥ç”¨æˆ·çš„è‡ªå®šä¹‰æ‰©å±•ã€‚å¦‚æœä¸€ä¸ªbffæ¡†æ¶æ²¡æœ‰å¯æ‰©å±•åŠŸèƒ½ï¼Œç»™ä½ ç”¨çš„è¯ï¼Œæˆ‘ä¼°è®¡ä½ ä¹Ÿä¸æƒ³ç”¨ã€‚æ‰€ä»¥å¯æ‰©å±•ä¹Ÿæ˜¯ä¸€ä¸ªç”¨æˆ·ä½“éªŒåˆ°é—®é¢˜ã€‚å†å¾€å¤§ä¸€ç‚¹äº§å“è®²ï¼Œå¤§å®¶éƒ½åœ¨ç”¨å¾®ä¿¡ï¼Œå¦‚æœå¾®ä¿¡å“ªå¤©åœ¨æœ‹å‹åœˆåšä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæ¯”å¦‚è¦åšå¹¿å‘Šï¼Œæ€»ä¸èƒ½æŠŠæœ‹å‹åœˆæ•´ä½“éƒ½è¦æä¸€ä¸‹æŠŠï¼Œè¿™ä¸ªæˆæœ¬ä¹Ÿå¤ªå¤§äº†ã€‚å¦å¤–å¤§å®¶åœ¨å¾®ä¿¡çš„è®¾ç½®é‡Œï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå‘ç°é¡µçš„è®¾ç½®ï¼Œé‡Œé¢å¯ä»¥åŠ¨æ€å…³é—­å±•ç¤ºä½ å–œæ¬¢çš„åŠŸèƒ½ï¼Œè¿™å°±æ˜¯å¯æ‰©å±•æ€§ã€‚\n\n### å…¶ä»–\nå…¶ä»–è¿˜æœ‰å¾ˆå¤šå› ç´ éœ€è¦æ¶æ„å¸ˆè€ƒè™‘ï¼Œåæ­£æ¶æ„å¸ˆçš„èŒè´£å°±æ˜¯ä¸ºäº†ä¸šåŠ¡çš„é«˜æ•ˆã€ç¨³å®šã€å®‰å…¨ç­‰è€ƒè™‘ï¼Œè„±ç¦»ä¸šåŠ¡çš„æ¶æ„å¸ˆï¼Œä¸æ˜¯å¥½æ¶æ„å¸ˆã€‚","slug":"architecture/base","published":1,"date":"2021-12-20T13:07:00.774Z","updated":"2021-12-28T12:40:46.106Z","layout":"post","photos":[],"link":"","_id":"ckxq3m94i000ckudo2wrce5go","content":"<p>ç»å¸¸æœ‰äººé—®ï¼Œæ¶æ„å¸ˆæ˜¯å¹²å˜›çš„ï¼Ÿé‚£ä¹ˆä»Šå¤©è°ˆè°ˆï¼Œæ¶æ„å¸ˆçš„èŒè´£æ˜¯ä»€ä¹ˆã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯æ¶æ„\"><a href=\"#ä»€ä¹ˆæ˜¯æ¶æ„\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ¶æ„\"></a>ä»€ä¹ˆæ˜¯æ¶æ„</h3><p>è°ˆæ¶æ„å¸ˆèŒè´£ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä»€ä¹ˆæ˜¯æ¶æ„ã€‚é‚£ä¹ˆæåˆ°æ¶æ„ï¼Œå¾ˆå¤šäººä¹Ÿä¼šæåˆ°æ¡†æ¶è¿™ä¸ªæ¦‚å¿µï¼Œå¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¸æ€ä¹ˆåŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå¦‚æœç»†åˆ†ä¸€ä¸‹çš„è¯ï¼Œæ¶æ„åå‘äºç»“æ„ï¼Œæ¡†æ¶åå‘äºè§„èŒƒã€‚æ¯”å¦‚linuxä¸­æœ‰æ¶æ„ï¼Œwindowæœ‰æ¶æ„ï¼Œå¾®ä¿¡æœ‰æ¶æ„ï¼Œæ·˜å®ä¹Ÿæœ‰æ¶æ„â€¦é‚£ä¹ˆæ¡†æ¶å‘¢ï¼Œæ¯”å¦‚ä¸€æ¬¾mvvmæ¡†æ¶ï¼Œmvcæ¡†æ¶ï¼Œä½¿ç”¨è¿™ä¸ªæ¡†æ¶éœ€è¦éµå¾ªä¸€äº›è§„å®šå¥½çš„è®¾è®¡ã€‚</p>\n<p>æˆ‘ä»¬è¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹æ¶æ„å§ï¼Œä»¥å¾®ä¿¡ä¸ºä¾‹ï¼Œä¸€æ¬¾appï¼Œå®ƒå…¶å®æ˜¯åˆ†å¾ˆå¤šæ¨¡å—çš„ï¼Œæ¯”å¦‚å¥½å‹æ¨¡å—ï¼Œæœ‹å‹åœˆæ¨¡å—ï¼Œæ¶ˆæ¯æ¨¡å—ç­‰ï¼Œè€Œæœ‹å‹åœˆæ¨¡å—åˆåˆ†ä¸ºç•™è¨€æ¨¡å—ï¼Œç‚¹èµæ¨¡å—ï¼Œå‘è¡¨æ¨¡å—ç­‰ã€‚æ¶æ„å°±æ˜¯è¯´ï¼Œè¿™äº›ä¸åŒçš„æ¨¡å—å¦‚ä½•çš„å„å¸å…¶èŒï¼Œåˆèƒ½å¦‚ä½•çš„äº’ç›¸é…åˆï¼Œå¦‚æœè¦å¢åŠ ä¸€ä¸ªæ‘‡ä¸€æ‘‡æ¨¡å—ï¼Œå¦‚ä½•èƒ½å¤Ÿæ‰©å±•æ–¹ä¾¿ã€‚æŠŠè¿™äº›æ‰€æœ‰å› ç´ éƒ½è€ƒè™‘è¿›æ¥ï¼Œæœ€åèƒ½å¤Ÿç»„è£…åœ¨ä¸€èµ·çš„èƒ½åŠ›ï¼Œå°±æ˜¯æ¶æ„èƒ½åŠ›ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ‰€æœ‰ç»„æˆç»Ÿä¸€å«åšæ¶æ„ã€‚æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹ç»•ã€‚ã€‚ã€‚ä¸ç®¡äº†ï¼Œæˆ‘è§‰å¾—èƒ½å¤Ÿè§£å†³ä¸šåŠ¡ç—›ç‚¹ï¼Œä½¿å¾—ä¸šåŠ¡èƒ½å¤Ÿåšåˆ°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€æ˜“æ‰©å±•ã€æˆæœ¬ä½ã€å®‰å…¨é«˜â€¦ï¼Œè¯´ç™½äº†å°±æ˜¯èƒ½è§£å†³æ‰ä¸šåŠ¡æ’åœ¨å‰é¢ä¸€åŠçš„ç—›ç‚¹ï¼Œå°±æ˜¯ç‰›é€¼çš„æ¶æ„å¸ˆã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\"><a href=\"#ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\"></a>ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„</h3><p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸€èˆ¬å°å…¬å¸æ²¡æœ‰æ¶æ„å¸ˆè¿™ä¸ªèŒä½ï¼Œåªæœ‰è¾¾åˆ°ä¸€å®šé‡çº§æ‰ä¼šæœ‰æ¶æ„å¸ˆï¼Œå› ä¸ºå°å…¬å¸ä¸éœ€è¦æ¶æ„ï¼Œ10ä¸ªäººå¼€ä¸ªä¼šç¢°ä¸€ç¢°ï¼Œä½ åšè¿™ä¸ªï¼Œæˆ‘åšè¿™ä¸ªï¼Œæ’¸èµ·è¢–å­å†™ä»£ç ï¼Œå°½å¿«ä¸Šçº¿ï¼Œæ¯”èŠ±æ—¶é—´ææ¶æ„æœ‰æ„ä¹‰ã€‚ä½ ä»¥ä¸ºæ·˜å®ä¸€å¼€å§‹å°±æçš„è¿™ä¹ˆç‰›å—ï¼Ÿä¸æ˜¯çš„ï¼Œæ·˜å®ç¬¬ä¸€ç‰ˆæ˜¯ä¹°çš„ï¼å½“å¹´æ­å·é©¬åœ¨2013å¹´çš„æ—¶å€™ï¼Œ4æœˆ7å·å†³å®šè¦åšæ·˜å®ï¼Œè¦æ±‚5æœˆ10å·ä¸Šçº¿ï¼Œè¦æ˜¯ä½ æƒ³ç€ææ¶æ„ï¼Œé»„èŠ±èœéƒ½å‡‰äº†ï¼ŒåŸºäºå½“æ—¶å…¬å¸ã€å¸‚åœºæƒ…å†µï¼Œåªè¦ä¹°ä¸€ä¸ªæ˜¯æœ€å¿«çš„ï¼Œå½“ç„¶è¦è€ƒè™‘ä¹°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ï¼Œä¹°ä¸€ä¸ªè½»é‡çš„è¿˜æ˜¯ä¹°ä¸ªå¤æ‚çš„ï¼Œå„æœ‰ä¼˜åŠ¿ï¼Œä½†æ˜¯åŸºäºåç»­å¯èƒ½è¦æŒç»­å‘å±•ï¼Œå°±ä¹°äº†ä¸ªè½»é‡çš„ï¼Œæ–¹ä¾¿åç»­äºŒæ¬¡å¼€å‘ã€‚ç­‰åˆ°äº†åç»­ï¼Œä¸šåŠ¡å¤§çˆ†å‘ï¼Œå½“å‰é¡¹ç›®æ‰¿è½½ä¸äº†é‚£ä¹ˆé«˜çš„æµé‡ï¼Œæ‰å¼€å§‹ææ¶æ„ã€‚æ‰€ä»¥ï¼Œå¥½çš„æ¶æ„éƒ½æ˜¯ä¸šåŠ¡é€¼å‡ºæ¥çš„ã€‚å¦‚æœæ¶æ„è„±ç¦»ä¸šåŠ¡ï¼Œé‚£æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ã€‚</p>\n<p>å›åˆ°ä¸»é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„ï¼Œæˆ‘ç†è§£çš„æ¶æ„å°±æ˜¯ä¸ºäº†è§£å†³å¤æ‚ä¸šåŠ¡ä¸­é‡åˆ°çš„é—®é¢˜ã€‚</p>\n<h3 id=\"æ¶æ„è¦åšä»€ä¹ˆ\"><a href=\"#æ¶æ„è¦åšä»€ä¹ˆ\" class=\"headerlink\" title=\"æ¶æ„è¦åšä»€ä¹ˆ\"></a>æ¶æ„è¦åšä»€ä¹ˆ</h3><p>æˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´åˆ°äº†ï¼Œå½“ä¸šåŠ¡å‘å±•ä¸€å®šç¨‹åº¦æ—¶ï¼Œç”±äºå¸‚åœºéœ€æ±‚ã€å…¬å¸è€æ¿è¦æ±‚ç­‰ï¼Œå¿…é¡»è¦å¯¹ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–ï¼Œå¯èƒ½å› ä¸ºæ—§ç»“æ„ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚éš¾æ‰©å¼ ï¼ŒåŠ ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œä¾èµ–çš„ä¸œè¥¿å¤ªå¤šï¼Œäººå‘˜æˆæœ¬å¤§ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·é‡æ€¥å‰§ä¸Šå‡ï¼Œéœ€è¦æ‰¿è½½æ›´é«˜çš„qpsç­‰ï¼Œé‚£ä¹ˆæ¶æ„è¦åšçš„ï¼Œæˆ‘è¿™é‡Œæ•´ç†äº†å‡ ä¸ªæ–¹é¢ï¼šé«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯æ‰©å±•ã€ä½æˆæœ¬ã€é«˜å®‰å…¨ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šï¼Œä½†å¤šæ•°çš„å¤æ‚ä¸šåŠ¡éƒ½ä¼šé‡åˆ°è¿™å‡ ä¸ªé—®é¢˜ã€‚</p>\n<h3 id=\"é«˜æ€§èƒ½\"><a href=\"#é«˜æ€§èƒ½\" class=\"headerlink\" title=\"é«˜æ€§èƒ½\"></a>é«˜æ€§èƒ½</h3><p>ä¹‹å‰åšè¿‡ä¸€ä¸ªbffæ¡†æ¶ï¼Œæ”¯æŒå…¬å¸å†…éƒ¨æœåŠ¡ï¼Œå½“æ—¶ä¸€å°8æ ¸32GæœåŠ¡å™¨ï¼Œè£¸å‹hello worldï¼Œè®°å¾—qpsæœ€é«˜å‹åˆ°äº†2500ã€‚è®°å¾—å½“æ—¶å…¬å¸æœ‰ä¸ªæ´»åŠ¨ï¼Œé¢„è®¡å½“å¤©å‚ä¸äººæ•°ä¼šåˆ°20ä¸‡ï¼Œqpså³°å€¼ä¿é™©ä¸€ç‚¹å°±æ˜¯20wäº†ï¼Œé‚£ä¹ˆå¦‚ä½•è®©è¿™ä¸ªqpsåªèƒ½åˆ°2500çš„æ¡†æ¶æ”¯æŒè¿™ä¹ˆå¤šçš„ç”¨æˆ·é‡å‘¢ï¼Ÿæœ€ç®€å•çš„åŠæ³•ä¹Ÿæ˜¯æœ€åˆé€‚çš„ï¼Œç”¨æœºå™¨çš„æ•°é‡æ¥æå‡qpsçš„ä¸Šé™ï¼Œä¸€å°æœºå™¨å¯ä»¥æ‰¿è½½2500çš„qpsï¼Œé‚£å°±æ“ä½œ20w/2500å¤šå°æœºå™¨ï¼Œå½“ç„¶ç”±äºç›®å‰è™šæ‹ŸåŒ–æŠ€æœ¯ç­‰å®ç°ï¼Œå¯èƒ½å¾ˆå¤šæœºå™¨æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€æœ‰ï¼ŒçœŸå®çš„æœåŠ¡å™¨ä¹Ÿå¯èƒ½ä¸éœ€è¦é‚£ä¹ˆå¤šã€‚è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„ç”¨é‡æ¥æå‡æ€§èƒ½çš„æ–¹å¼ã€‚</p>\n<p>å½“ç„¶ï¼Œé«˜æ€§èƒ½ï¼Œä¹Ÿä¼šä½“ç°åœ¨å…¶ä»–æ–¹é¢ï¼Œæ¯”å¦‚ä¸€äº›è°ƒåº¦ç®—æ³•ã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œéƒ½æ˜¯æå‡é«˜æ€§èƒ½çš„æ–¹å¼ï¼Œå¥½çš„è°ƒåº¦ç®—æ³•ï¼Œä¹Ÿèƒ½å‡å°‘ä¸€äº›èµ„æºéƒ½æµªè´¹ã€‚</p>\n<h3 id=\"é«˜å¯ç”¨\"><a href=\"#é«˜å¯ç”¨\" class=\"headerlink\" title=\"é«˜å¯ç”¨\"></a>é«˜å¯ç”¨</h3><p>æˆ‘ä»¬è¿˜ä»¥æˆ‘åšçš„é‚£ä¸ªbffæ¡†æ¶ä¸ºä¾‹ï¼Œè¯´ç™½äº†ï¼Œä¸šåŠ¡æ–¹ç”¨äº†ä½ çš„æ¡†æ¶ï¼Œä¸Šçº¿åï¼Œå‘ç°ç¨‹åºç»å¸¸å´©æºƒï¼Œæ’æŸ¥åŸå› è¿˜éå¸¸å›°éš¾ï¼Œæ—¥å¿—éš¾æ‰¾ã€‚è¿™å°±è¯´æ˜ï¼Œä½ è¿™ä¸ªæ¶æ„è®¾è®¡çš„æœ‰é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•åšåˆ°é«˜å¯ç”¨å‘¢ï¼Œé¦–å…ˆä½œä¸ºä¸€ä¸ªæ¶æ„å¸ˆï¼Œå¦³å¾—æœ‰ä¸€å®šéƒ½é¢„æµ‹æ€§ï¼Œå¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Œå¦‚æœå‡ºäº†ä»€ä¹ˆæƒ…å†µä½ æœ‰ä»€ä¹ˆå¤‡é€‰æ–¹æ¡ˆï¼Œå¯ä»¥è®©ä¸šåŠ¡è¿˜èƒ½å¤Ÿç¨³å®šè¿è¡Œï¼Œä¸è¢«ç”¨æˆ·å¯Ÿè§‰çš„æƒ…å†µä¸‹ï¼Œä¸šåŠ¡ä¸å—å½±å“ã€‚è®°å¾—ä¹‹å‰å‡ºç°è¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œçº¿ä¸ŠæœåŠ¡æœ‰æ—¶å€™ä¼šç»å¸¸è«åé‡å¯ï¼Œåæ¥ç»æ’æŸ¥å‘ç°ï¼Œåœ¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œé‡Œï¼ŒæŠ›äº†ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰è¢«catchåˆ°ï¼Œå¯¼è‡´è¿›ç¨‹ç›´æ¥é€€å‡ºäº†ï¼Œé€€å‡ºåï¼Œç”±äºæœºå™¨ä¸Šæœ‰ä¿æ´»æœºåˆ¶ï¼Œè¿›ç¨‹åˆè¢«æ‹‰èµ·æ¥äº†ï¼Œè¿™å°±å‡ºç°äº†æœåŠ¡é‡å¯çš„æƒ…å†µã€‚æœ€åæˆ‘åšäº†ä¸€ä¸ªå…œåº•çš„æ–¹æ¡ˆï¼Œåœ¨è¿›ç¨‹ä¸­ç›‘å¬äº†uncaughtExceptionäº‹ä»¶ï¼Œé˜²æ­¢å¼‚å¸¸é€€å‡ºã€‚</p>\n<p>å¦å¤–å¾ˆå¤šæƒ…å†µéœ€è¦æˆ‘ä»¬è€ƒè™‘ï¼Œæ¯”å¦‚çº¿ä¸ŠæœåŠ¡é‡å¯ï¼Œæœ‰ä¸€æ®µçŸ­æš‚çš„äº‹ä»¶ï¼Œè¯·æ±‚æ˜¯æ‰“ä¸è¿›æ¥çš„ï¼Œé‚£å¦‚ä½•è§£å†³è¿™æ®µæ—¶é—´çš„æœåŠ¡ä¸å¯ç”¨å¯¹ç”¨æˆ·çš„å½±å“å‘¢ï¼Œé‚£å°±å¯ä»¥åšåˆ°å¹³æ»‘é‡å¯ï¼Œå¤šä¸ªè¿›ç¨‹é…åˆå°±å¯ä»¥åšåˆ°ï¼Œè¿™äº›éƒ½æ˜¯éœ€è¦æ¶æ„å¸ˆè¦æƒ³çš„ï¼Œå†æ¯”å¦‚ï¼Œæœ‰ä¸€äº›æœåŠ¡æ˜¯é“¾æ¥ElasticSearchï¼ˆåé¢ç®€ç§°esï¼‰çš„ï¼Œä¸€èˆ¬eséƒ½æ˜¯éƒ¨ç½²åˆ°å…¬å¸ç‰¹å®šçš„æœºå™¨ä¸Šï¼Œå¦‚æœæŸä¸ªæ—¶åˆ»esæŒ‚äº†ï¼Œä½ çš„æœåŠ¡å°±ä¼šå—åˆ°å½±å“ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä½ éœ€è¦è€ƒè™‘çš„ï¼Œå¦‚æœesæŒ‚äº†ï¼Œä½ å¾—æœ‰é™çº§æ–¹æ¡ˆï¼Œæ¯”å¦‚å¯ä»¥ç†”æ–­ï¼Œæ•°æ®æ‹¿å¤‡æœºæ•°æ®ã€‚</p>\n<p>æ€»ä¹‹ï¼Œé«˜å¯ç”¨å°±æ˜¯è¦å°½å¯èƒ½çš„æƒ³åˆ°æ‰€æœ‰çº¿ä¸Šå¯èƒ½é‡åˆ°çš„å„ç§é—®é¢˜ï¼Œä½ æƒ³ï¼Œé˜¿é‡ŒåŒ11å‰ï¼Œéƒ½è¦çªç„¶æ–­ç”µï¼Œå°±æ˜¯ä¸ºäº†éªŒè¯æœåŠ¡çš„é«˜å¯ç”¨ã€‚</p>\n<h3 id=\"å¯æ‰©å±•\"><a href=\"#å¯æ‰©å±•\" class=\"headerlink\" title=\"å¯æ‰©å±•\"></a>å¯æ‰©å±•</h3><p>è¿™ä¸ªå¤§å®¶åº”è¯¥ä¹Ÿå®¹æ˜“ç†è§£ï¼ŒæœåŠ¡çš„å‡çº§å’Œè¿­ä»£ï¼Œæœ‰æ—¶å€™æ˜¯éœ€è¦åœ¨æŸä¸€äº›èƒ½åŠ›åšæ‰©å±•çš„ï¼Œè¿˜ä»¥bffæ¡†æ¶ä¸ºä¾‹ï¼Œå¤šæ•°é€šç”¨çš„ä¸­é—´é—´ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½å†…ç½®åˆ°æ¡†æ¶é‡Œäº†ï¼Œä½†æ˜¯æœ‰äº›ä¸šåŠ¡ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œé‚£å°±éœ€è¦æ¡†æ¶æœ¬èº«æš´éœ²å‡ºä¸€ä¸ªå£å­ï¼Œç”¨æ¥ç”¨æˆ·çš„è‡ªå®šä¹‰æ‰©å±•ã€‚å¦‚æœä¸€ä¸ªbffæ¡†æ¶æ²¡æœ‰å¯æ‰©å±•åŠŸèƒ½ï¼Œç»™ä½ ç”¨çš„è¯ï¼Œæˆ‘ä¼°è®¡ä½ ä¹Ÿä¸æƒ³ç”¨ã€‚æ‰€ä»¥å¯æ‰©å±•ä¹Ÿæ˜¯ä¸€ä¸ªç”¨æˆ·ä½“éªŒåˆ°é—®é¢˜ã€‚å†å¾€å¤§ä¸€ç‚¹äº§å“è®²ï¼Œå¤§å®¶éƒ½åœ¨ç”¨å¾®ä¿¡ï¼Œå¦‚æœå¾®ä¿¡å“ªå¤©åœ¨æœ‹å‹åœˆåšä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæ¯”å¦‚è¦åšå¹¿å‘Šï¼Œæ€»ä¸èƒ½æŠŠæœ‹å‹åœˆæ•´ä½“éƒ½è¦æä¸€ä¸‹æŠŠï¼Œè¿™ä¸ªæˆæœ¬ä¹Ÿå¤ªå¤§äº†ã€‚å¦å¤–å¤§å®¶åœ¨å¾®ä¿¡çš„è®¾ç½®é‡Œï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå‘ç°é¡µçš„è®¾ç½®ï¼Œé‡Œé¢å¯ä»¥åŠ¨æ€å…³é—­å±•ç¤ºä½ å–œæ¬¢çš„åŠŸèƒ½ï¼Œè¿™å°±æ˜¯å¯æ‰©å±•æ€§ã€‚</p>\n<h3 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h3><p>å…¶ä»–è¿˜æœ‰å¾ˆå¤šå› ç´ éœ€è¦æ¶æ„å¸ˆè€ƒè™‘ï¼Œåæ­£æ¶æ„å¸ˆçš„èŒè´£å°±æ˜¯ä¸ºäº†ä¸šåŠ¡çš„é«˜æ•ˆã€ç¨³å®šã€å®‰å…¨ç­‰è€ƒè™‘ï¼Œè„±ç¦»ä¸šåŠ¡çš„æ¶æ„å¸ˆï¼Œä¸æ˜¯å¥½æ¶æ„å¸ˆã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<p>ç»å¸¸æœ‰äººé—®ï¼Œæ¶æ„å¸ˆæ˜¯å¹²å˜›çš„ï¼Ÿé‚£ä¹ˆä»Šå¤©è°ˆè°ˆï¼Œæ¶æ„å¸ˆçš„èŒè´£æ˜¯ä»€ä¹ˆã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯æ¶æ„\"><a href=\"#ä»€ä¹ˆæ˜¯æ¶æ„\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ¶æ„\"></a>ä»€ä¹ˆæ˜¯æ¶æ„</h3><p>è°ˆæ¶æ„å¸ˆèŒè´£ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä»€ä¹ˆæ˜¯æ¶æ„ã€‚é‚£ä¹ˆæåˆ°æ¶æ„ï¼Œå¾ˆå¤šäººä¹Ÿä¼šæåˆ°æ¡†æ¶è¿™ä¸ªæ¦‚å¿µï¼Œå¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¸æ€ä¹ˆåŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå¦‚æœç»†åˆ†ä¸€ä¸‹çš„è¯ï¼Œæ¶æ„åå‘äºç»“æ„ï¼Œæ¡†æ¶åå‘äºè§„èŒƒã€‚æ¯”å¦‚linuxä¸­æœ‰æ¶æ„ï¼Œwindowæœ‰æ¶æ„ï¼Œå¾®ä¿¡æœ‰æ¶æ„ï¼Œæ·˜å®ä¹Ÿæœ‰æ¶æ„â€¦é‚£ä¹ˆæ¡†æ¶å‘¢ï¼Œæ¯”å¦‚ä¸€æ¬¾mvvmæ¡†æ¶ï¼Œmvcæ¡†æ¶ï¼Œä½¿ç”¨è¿™ä¸ªæ¡†æ¶éœ€è¦éµå¾ªä¸€äº›è§„å®šå¥½çš„è®¾è®¡ã€‚</p>\n<p>æˆ‘ä»¬è¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹æ¶æ„å§ï¼Œä»¥å¾®ä¿¡ä¸ºä¾‹ï¼Œä¸€æ¬¾appï¼Œå®ƒå…¶å®æ˜¯åˆ†å¾ˆå¤šæ¨¡å—çš„ï¼Œæ¯”å¦‚å¥½å‹æ¨¡å—ï¼Œæœ‹å‹åœˆæ¨¡å—ï¼Œæ¶ˆæ¯æ¨¡å—ç­‰ï¼Œè€Œæœ‹å‹åœˆæ¨¡å—åˆåˆ†ä¸ºç•™è¨€æ¨¡å—ï¼Œç‚¹èµæ¨¡å—ï¼Œå‘è¡¨æ¨¡å—ç­‰ã€‚æ¶æ„å°±æ˜¯è¯´ï¼Œè¿™äº›ä¸åŒçš„æ¨¡å—å¦‚ä½•çš„å„å¸å…¶èŒï¼Œåˆèƒ½å¦‚ä½•çš„äº’ç›¸é…åˆï¼Œå¦‚æœè¦å¢åŠ ä¸€ä¸ªæ‘‡ä¸€æ‘‡æ¨¡å—ï¼Œå¦‚ä½•èƒ½å¤Ÿæ‰©å±•æ–¹ä¾¿ã€‚æŠŠè¿™äº›æ‰€æœ‰å› ç´ éƒ½è€ƒè™‘è¿›æ¥ï¼Œæœ€åèƒ½å¤Ÿç»„è£…åœ¨ä¸€èµ·çš„èƒ½åŠ›ï¼Œå°±æ˜¯æ¶æ„èƒ½åŠ›ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ‰€æœ‰ç»„æˆç»Ÿä¸€å«åšæ¶æ„ã€‚æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹ç»•ã€‚ã€‚ã€‚ä¸ç®¡äº†ï¼Œæˆ‘è§‰å¾—èƒ½å¤Ÿè§£å†³ä¸šåŠ¡ç—›ç‚¹ï¼Œä½¿å¾—ä¸šåŠ¡èƒ½å¤Ÿåšåˆ°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€æ˜“æ‰©å±•ã€æˆæœ¬ä½ã€å®‰å…¨é«˜â€¦ï¼Œè¯´ç™½äº†å°±æ˜¯èƒ½è§£å†³æ‰ä¸šåŠ¡æ’åœ¨å‰é¢ä¸€åŠçš„ç—›ç‚¹ï¼Œå°±æ˜¯ç‰›é€¼çš„æ¶æ„å¸ˆã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\"><a href=\"#ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„\"></a>ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„</h3><p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸€èˆ¬å°å…¬å¸æ²¡æœ‰æ¶æ„å¸ˆè¿™ä¸ªèŒä½ï¼Œåªæœ‰è¾¾åˆ°ä¸€å®šé‡çº§æ‰ä¼šæœ‰æ¶æ„å¸ˆï¼Œå› ä¸ºå°å…¬å¸ä¸éœ€è¦æ¶æ„ï¼Œ10ä¸ªäººå¼€ä¸ªä¼šç¢°ä¸€ç¢°ï¼Œä½ åšè¿™ä¸ªï¼Œæˆ‘åšè¿™ä¸ªï¼Œæ’¸èµ·è¢–å­å†™ä»£ç ï¼Œå°½å¿«ä¸Šçº¿ï¼Œæ¯”èŠ±æ—¶é—´ææ¶æ„æœ‰æ„ä¹‰ã€‚ä½ ä»¥ä¸ºæ·˜å®ä¸€å¼€å§‹å°±æçš„è¿™ä¹ˆç‰›å—ï¼Ÿä¸æ˜¯çš„ï¼Œæ·˜å®ç¬¬ä¸€ç‰ˆæ˜¯ä¹°çš„ï¼å½“å¹´æ­å·é©¬åœ¨2013å¹´çš„æ—¶å€™ï¼Œ4æœˆ7å·å†³å®šè¦åšæ·˜å®ï¼Œè¦æ±‚5æœˆ10å·ä¸Šçº¿ï¼Œè¦æ˜¯ä½ æƒ³ç€ææ¶æ„ï¼Œé»„èŠ±èœéƒ½å‡‰äº†ï¼ŒåŸºäºå½“æ—¶å…¬å¸ã€å¸‚åœºæƒ…å†µï¼Œåªè¦ä¹°ä¸€ä¸ªæ˜¯æœ€å¿«çš„ï¼Œå½“ç„¶è¦è€ƒè™‘ä¹°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ï¼Œä¹°ä¸€ä¸ªè½»é‡çš„è¿˜æ˜¯ä¹°ä¸ªå¤æ‚çš„ï¼Œå„æœ‰ä¼˜åŠ¿ï¼Œä½†æ˜¯åŸºäºåç»­å¯èƒ½è¦æŒç»­å‘å±•ï¼Œå°±ä¹°äº†ä¸ªè½»é‡çš„ï¼Œæ–¹ä¾¿åç»­äºŒæ¬¡å¼€å‘ã€‚ç­‰åˆ°äº†åç»­ï¼Œä¸šåŠ¡å¤§çˆ†å‘ï¼Œå½“å‰é¡¹ç›®æ‰¿è½½ä¸äº†é‚£ä¹ˆé«˜çš„æµé‡ï¼Œæ‰å¼€å§‹ææ¶æ„ã€‚æ‰€ä»¥ï¼Œå¥½çš„æ¶æ„éƒ½æ˜¯ä¸šåŠ¡é€¼å‡ºæ¥çš„ã€‚å¦‚æœæ¶æ„è„±ç¦»ä¸šåŠ¡ï¼Œé‚£æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ã€‚</p>\n<p>å›åˆ°ä¸»é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦æ¶æ„ï¼Œæˆ‘ç†è§£çš„æ¶æ„å°±æ˜¯ä¸ºäº†è§£å†³å¤æ‚ä¸šåŠ¡ä¸­é‡åˆ°çš„é—®é¢˜ã€‚</p>\n<h3 id=\"æ¶æ„è¦åšä»€ä¹ˆ\"><a href=\"#æ¶æ„è¦åšä»€ä¹ˆ\" class=\"headerlink\" title=\"æ¶æ„è¦åšä»€ä¹ˆ\"></a>æ¶æ„è¦åšä»€ä¹ˆ</h3><p>æˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´åˆ°äº†ï¼Œå½“ä¸šåŠ¡å‘å±•ä¸€å®šç¨‹åº¦æ—¶ï¼Œç”±äºå¸‚åœºéœ€æ±‚ã€å…¬å¸è€æ¿è¦æ±‚ç­‰ï¼Œå¿…é¡»è¦å¯¹ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–ï¼Œå¯èƒ½å› ä¸ºæ—§ç»“æ„ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚éš¾æ‰©å¼ ï¼ŒåŠ ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œä¾èµ–çš„ä¸œè¥¿å¤ªå¤šï¼Œäººå‘˜æˆæœ¬å¤§ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·é‡æ€¥å‰§ä¸Šå‡ï¼Œéœ€è¦æ‰¿è½½æ›´é«˜çš„qpsç­‰ï¼Œé‚£ä¹ˆæ¶æ„è¦åšçš„ï¼Œæˆ‘è¿™é‡Œæ•´ç†äº†å‡ ä¸ªæ–¹é¢ï¼šé«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯æ‰©å±•ã€ä½æˆæœ¬ã€é«˜å®‰å…¨ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šï¼Œä½†å¤šæ•°çš„å¤æ‚ä¸šåŠ¡éƒ½ä¼šé‡åˆ°è¿™å‡ ä¸ªé—®é¢˜ã€‚</p>\n<h3 id=\"é«˜æ€§èƒ½\"><a href=\"#é«˜æ€§èƒ½\" class=\"headerlink\" title=\"é«˜æ€§èƒ½\"></a>é«˜æ€§èƒ½</h3><p>ä¹‹å‰åšè¿‡ä¸€ä¸ªbffæ¡†æ¶ï¼Œæ”¯æŒå…¬å¸å†…éƒ¨æœåŠ¡ï¼Œå½“æ—¶ä¸€å°8æ ¸32GæœåŠ¡å™¨ï¼Œè£¸å‹hello worldï¼Œè®°å¾—qpsæœ€é«˜å‹åˆ°äº†2500ã€‚è®°å¾—å½“æ—¶å…¬å¸æœ‰ä¸ªæ´»åŠ¨ï¼Œé¢„è®¡å½“å¤©å‚ä¸äººæ•°ä¼šåˆ°20ä¸‡ï¼Œqpså³°å€¼ä¿é™©ä¸€ç‚¹å°±æ˜¯20wäº†ï¼Œé‚£ä¹ˆå¦‚ä½•è®©è¿™ä¸ªqpsåªèƒ½åˆ°2500çš„æ¡†æ¶æ”¯æŒè¿™ä¹ˆå¤šçš„ç”¨æˆ·é‡å‘¢ï¼Ÿæœ€ç®€å•çš„åŠæ³•ä¹Ÿæ˜¯æœ€åˆé€‚çš„ï¼Œç”¨æœºå™¨çš„æ•°é‡æ¥æå‡qpsçš„ä¸Šé™ï¼Œä¸€å°æœºå™¨å¯ä»¥æ‰¿è½½2500çš„qpsï¼Œé‚£å°±æ“ä½œ20w/2500å¤šå°æœºå™¨ï¼Œå½“ç„¶ç”±äºç›®å‰è™šæ‹ŸåŒ–æŠ€æœ¯ç­‰å®ç°ï¼Œå¯èƒ½å¾ˆå¤šæœºå™¨æ˜¯è™šæ‹Ÿæœºï¼Œæ‰€æœ‰ï¼ŒçœŸå®çš„æœåŠ¡å™¨ä¹Ÿå¯èƒ½ä¸éœ€è¦é‚£ä¹ˆå¤šã€‚è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„ç”¨é‡æ¥æå‡æ€§èƒ½çš„æ–¹å¼ã€‚</p>\n<p>å½“ç„¶ï¼Œé«˜æ€§èƒ½ï¼Œä¹Ÿä¼šä½“ç°åœ¨å…¶ä»–æ–¹é¢ï¼Œæ¯”å¦‚ä¸€äº›è°ƒåº¦ç®—æ³•ã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œéƒ½æ˜¯æå‡é«˜æ€§èƒ½çš„æ–¹å¼ï¼Œå¥½çš„è°ƒåº¦ç®—æ³•ï¼Œä¹Ÿèƒ½å‡å°‘ä¸€äº›èµ„æºéƒ½æµªè´¹ã€‚</p>\n<h3 id=\"é«˜å¯ç”¨\"><a href=\"#é«˜å¯ç”¨\" class=\"headerlink\" title=\"é«˜å¯ç”¨\"></a>é«˜å¯ç”¨</h3><p>æˆ‘ä»¬è¿˜ä»¥æˆ‘åšçš„é‚£ä¸ªbffæ¡†æ¶ä¸ºä¾‹ï¼Œè¯´ç™½äº†ï¼Œä¸šåŠ¡æ–¹ç”¨äº†ä½ çš„æ¡†æ¶ï¼Œä¸Šçº¿åï¼Œå‘ç°ç¨‹åºç»å¸¸å´©æºƒï¼Œæ’æŸ¥åŸå› è¿˜éå¸¸å›°éš¾ï¼Œæ—¥å¿—éš¾æ‰¾ã€‚è¿™å°±è¯´æ˜ï¼Œä½ è¿™ä¸ªæ¶æ„è®¾è®¡çš„æœ‰é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•åšåˆ°é«˜å¯ç”¨å‘¢ï¼Œé¦–å…ˆä½œä¸ºä¸€ä¸ªæ¶æ„å¸ˆï¼Œå¦³å¾—æœ‰ä¸€å®šéƒ½é¢„æµ‹æ€§ï¼Œå¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Œå¦‚æœå‡ºäº†ä»€ä¹ˆæƒ…å†µä½ æœ‰ä»€ä¹ˆå¤‡é€‰æ–¹æ¡ˆï¼Œå¯ä»¥è®©ä¸šåŠ¡è¿˜èƒ½å¤Ÿç¨³å®šè¿è¡Œï¼Œä¸è¢«ç”¨æˆ·å¯Ÿè§‰çš„æƒ…å†µä¸‹ï¼Œä¸šåŠ¡ä¸å—å½±å“ã€‚è®°å¾—ä¹‹å‰å‡ºç°è¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œçº¿ä¸ŠæœåŠ¡æœ‰æ—¶å€™ä¼šç»å¸¸è«åé‡å¯ï¼Œåæ¥ç»æ’æŸ¥å‘ç°ï¼Œåœ¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œé‡Œï¼ŒæŠ›äº†ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰è¢«catchåˆ°ï¼Œå¯¼è‡´è¿›ç¨‹ç›´æ¥é€€å‡ºäº†ï¼Œé€€å‡ºåï¼Œç”±äºæœºå™¨ä¸Šæœ‰ä¿æ´»æœºåˆ¶ï¼Œè¿›ç¨‹åˆè¢«æ‹‰èµ·æ¥äº†ï¼Œè¿™å°±å‡ºç°äº†æœåŠ¡é‡å¯çš„æƒ…å†µã€‚æœ€åæˆ‘åšäº†ä¸€ä¸ªå…œåº•çš„æ–¹æ¡ˆï¼Œåœ¨è¿›ç¨‹ä¸­ç›‘å¬äº†uncaughtExceptionäº‹ä»¶ï¼Œé˜²æ­¢å¼‚å¸¸é€€å‡ºã€‚</p>\n<p>å¦å¤–å¾ˆå¤šæƒ…å†µéœ€è¦æˆ‘ä»¬è€ƒè™‘ï¼Œæ¯”å¦‚çº¿ä¸ŠæœåŠ¡é‡å¯ï¼Œæœ‰ä¸€æ®µçŸ­æš‚çš„äº‹ä»¶ï¼Œè¯·æ±‚æ˜¯æ‰“ä¸è¿›æ¥çš„ï¼Œé‚£å¦‚ä½•è§£å†³è¿™æ®µæ—¶é—´çš„æœåŠ¡ä¸å¯ç”¨å¯¹ç”¨æˆ·çš„å½±å“å‘¢ï¼Œé‚£å°±å¯ä»¥åšåˆ°å¹³æ»‘é‡å¯ï¼Œå¤šä¸ªè¿›ç¨‹é…åˆå°±å¯ä»¥åšåˆ°ï¼Œè¿™äº›éƒ½æ˜¯éœ€è¦æ¶æ„å¸ˆè¦æƒ³çš„ï¼Œå†æ¯”å¦‚ï¼Œæœ‰ä¸€äº›æœåŠ¡æ˜¯é“¾æ¥ElasticSearchï¼ˆåé¢ç®€ç§°esï¼‰çš„ï¼Œä¸€èˆ¬eséƒ½æ˜¯éƒ¨ç½²åˆ°å…¬å¸ç‰¹å®šçš„æœºå™¨ä¸Šï¼Œå¦‚æœæŸä¸ªæ—¶åˆ»esæŒ‚äº†ï¼Œä½ çš„æœåŠ¡å°±ä¼šå—åˆ°å½±å“ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä½ éœ€è¦è€ƒè™‘çš„ï¼Œå¦‚æœesæŒ‚äº†ï¼Œä½ å¾—æœ‰é™çº§æ–¹æ¡ˆï¼Œæ¯”å¦‚å¯ä»¥ç†”æ–­ï¼Œæ•°æ®æ‹¿å¤‡æœºæ•°æ®ã€‚</p>\n<p>æ€»ä¹‹ï¼Œé«˜å¯ç”¨å°±æ˜¯è¦å°½å¯èƒ½çš„æƒ³åˆ°æ‰€æœ‰çº¿ä¸Šå¯èƒ½é‡åˆ°çš„å„ç§é—®é¢˜ï¼Œä½ æƒ³ï¼Œé˜¿é‡ŒåŒ11å‰ï¼Œéƒ½è¦çªç„¶æ–­ç”µï¼Œå°±æ˜¯ä¸ºäº†éªŒè¯æœåŠ¡çš„é«˜å¯ç”¨ã€‚</p>\n<h3 id=\"å¯æ‰©å±•\"><a href=\"#å¯æ‰©å±•\" class=\"headerlink\" title=\"å¯æ‰©å±•\"></a>å¯æ‰©å±•</h3><p>è¿™ä¸ªå¤§å®¶åº”è¯¥ä¹Ÿå®¹æ˜“ç†è§£ï¼ŒæœåŠ¡çš„å‡çº§å’Œè¿­ä»£ï¼Œæœ‰æ—¶å€™æ˜¯éœ€è¦åœ¨æŸä¸€äº›èƒ½åŠ›åšæ‰©å±•çš„ï¼Œè¿˜ä»¥bffæ¡†æ¶ä¸ºä¾‹ï¼Œå¤šæ•°é€šç”¨çš„ä¸­é—´é—´ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½å†…ç½®åˆ°æ¡†æ¶é‡Œäº†ï¼Œä½†æ˜¯æœ‰äº›ä¸šåŠ¡ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œé‚£å°±éœ€è¦æ¡†æ¶æœ¬èº«æš´éœ²å‡ºä¸€ä¸ªå£å­ï¼Œç”¨æ¥ç”¨æˆ·çš„è‡ªå®šä¹‰æ‰©å±•ã€‚å¦‚æœä¸€ä¸ªbffæ¡†æ¶æ²¡æœ‰å¯æ‰©å±•åŠŸèƒ½ï¼Œç»™ä½ ç”¨çš„è¯ï¼Œæˆ‘ä¼°è®¡ä½ ä¹Ÿä¸æƒ³ç”¨ã€‚æ‰€ä»¥å¯æ‰©å±•ä¹Ÿæ˜¯ä¸€ä¸ªç”¨æˆ·ä½“éªŒåˆ°é—®é¢˜ã€‚å†å¾€å¤§ä¸€ç‚¹äº§å“è®²ï¼Œå¤§å®¶éƒ½åœ¨ç”¨å¾®ä¿¡ï¼Œå¦‚æœå¾®ä¿¡å“ªå¤©åœ¨æœ‹å‹åœˆåšä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæ¯”å¦‚è¦åšå¹¿å‘Šï¼Œæ€»ä¸èƒ½æŠŠæœ‹å‹åœˆæ•´ä½“éƒ½è¦æä¸€ä¸‹æŠŠï¼Œè¿™ä¸ªæˆæœ¬ä¹Ÿå¤ªå¤§äº†ã€‚å¦å¤–å¤§å®¶åœ¨å¾®ä¿¡çš„è®¾ç½®é‡Œï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå‘ç°é¡µçš„è®¾ç½®ï¼Œé‡Œé¢å¯ä»¥åŠ¨æ€å…³é—­å±•ç¤ºä½ å–œæ¬¢çš„åŠŸèƒ½ï¼Œè¿™å°±æ˜¯å¯æ‰©å±•æ€§ã€‚</p>\n<h3 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h3><p>å…¶ä»–è¿˜æœ‰å¾ˆå¤šå› ç´ éœ€è¦æ¶æ„å¸ˆè€ƒè™‘ï¼Œåæ­£æ¶æ„å¸ˆçš„èŒè´£å°±æ˜¯ä¸ºäº†ä¸šåŠ¡çš„é«˜æ•ˆã€ç¨³å®šã€å®‰å…¨ç­‰è€ƒè™‘ï¼Œè„±ç¦»ä¸šåŠ¡çš„æ¶æ„å¸ˆï¼Œä¸æ˜¯å¥½æ¶æ„å¸ˆã€‚</p>\n"},{"title":"ä»£ç è¦†ç›–ç‡","comments":1,"copyright":false,"toc":true,"_content":"æœ€è¿‘ä¸ºäº†é˜²æ­¢å› ä¸ºæ¼æµ‹å¯¼è‡´çº¿ä¸Šé—®é¢˜ï¼Œåšäº†ä¸€äº›ç»Ÿè®¡æµ‹è¯•è¦†ç›–ç‡çš„å·¥ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ç”¨åˆ°äº†ä¸€ä¸ªæ£€æµ‹ä»£ç è¦†ç›–ç‡çš„å·¥å…·ï¼Œå«ï¼šistanbulã€‚å®ƒä¸»è¦èƒ½å¤Ÿä»å‡ ä¸ªç»´åº¦æ¥åˆ†æå¯¹åº”çš„è¦†ç›–ç‡ã€‚æ¯”å¦‚ä¸‹é¢å‡ ä¸ªæŒ‡æ ‡ï¼š\n\n> - è¡Œè¦†ç›–ç‡ï¼ˆline coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸€è¡Œéƒ½æ‰§è¡Œäº†ï¼Ÿ\n> - å‡½æ•°è¦†ç›–ç‡ï¼ˆfunction coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†ï¼Ÿ\n> - åˆ†æ”¯è¦†ç›–ç‡ï¼ˆbranch coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªifä»£ç å—éƒ½æ‰§è¡Œäº†ï¼Ÿ\n> - è¯­å¥è¦†ç›–ç‡ï¼ˆstatement coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†ï¼Ÿ\n\nä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼š\n\n### å®‰è£…\nIstanbul æ˜¯ä¸€ä¸ª npm æ¨¡å—ï¼Œå®‰è£…éå¸¸ç®€å•ï¼Œå°±ä¸€è¡Œå‘½ä»¤ã€‚\n```\n$ npm install -g istanbul\n```\n\n### è¦†ç›–ç‡æµ‹è¯•\næ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæ€ä¹ˆä½¿ç”¨ Istanbul ã€‚ä¸‹é¢æ˜¯è„šæœ¬æ–‡ä»¶ simple.js ã€‚\n```\nvar a = 1;\nvar b = 1;\nif ((a + b) > 2) {\n  console.log('more than two');\n}\n```\nä½¿ç”¨ istanbul cover å‘½ä»¤ï¼Œå°±èƒ½å¾—åˆ°è¦†ç›–ç‡ã€‚\n```\n$ istanbul cover simple.js\n\n===== Coverage summary =====\nStatements   : 75% ( 3/4 )\nBranches     : 50% ( 1/2 )\nFunctions    : 100% ( 0/0 )\nLines        : 75% ( 3/4 )\n=============================\n```\nè¿”å›ç»“æœæ˜¾ç¤ºï¼Œsimple.js æœ‰4ä¸ªè¯­å¥ï¼ˆstatementï¼‰ï¼Œæ‰§è¡Œäº†3ä¸ªï¼›æœ‰2ä¸ªåˆ†æ”¯ï¼ˆbranchï¼‰ï¼Œæ‰§è¡Œäº†1ä¸ªï¼›æœ‰0ä¸ªå‡½æ•°ï¼Œè°ƒç”¨äº†0ä¸ªï¼›æœ‰4è¡Œä»£ç ï¼Œæ‰§è¡Œäº†3è¡Œã€‚\n\nè¿™æ¡å‘½ä»¤åŒæ—¶è¿˜ç”Ÿæˆäº†ä¸€ä¸ª coverage å­ç›®å½•ï¼Œå…¶ä¸­çš„ coverage.json æ–‡ä»¶åŒ…å«è¦†ç›–ç‡çš„åŸå§‹æ•°æ®ï¼Œcoverage/lcov-report æ˜¯å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€çš„è¦†ç›–ç‡æŠ¥å‘Šï¼Œå…¶ä¸­æœ‰è¯¦ç»†ä¿¡æ¯ï¼Œåˆ°åº•å“ªäº›ä»£ç æ²¡æœ‰è¦†ç›–åˆ°ã€‚\n\n### è¦†ç›–ç‡é—¨æ§›\nå®Œç¾çš„è¦†ç›–ç‡å½“ç„¶æ˜¯ 100%ï¼Œä½†æ˜¯ç°å®ä¸­å¾ˆéš¾è¾¾åˆ°ã€‚éœ€è¦æœ‰ä¸€ä¸ªé—¨æ§›ï¼Œè¡¡é‡è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ã€‚\n\nistanbul check-coverage å‘½ä»¤ç”¨æ¥è®¾ç½®é—¨æ§›ï¼ŒåŒæ—¶æ£€æŸ¥å½“å‰ä»£ç æ˜¯å¦è¾¾æ ‡ã€‚\n\n```\n$ istanbul check-coverage --statement 90\n\nERROR: Coverage for statements (75%) does not meet global threshold (90%)\n```\nä¸Šé¢å‘½ä»¤è®¾ç½®è¯­å¥è¦†ç›–ç‡çš„é—¨æ§›æ˜¯ 90% ï¼Œç»“æœå°±æŠ¥é”™äº†ï¼Œå› ä¸ºå®é™…è¦†ç›–ç‡åªæœ‰75%ã€‚\n\né™¤äº†ç™¾åˆ†æ¯”é—¨æ§›ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ç»å¯¹å€¼é—¨æ§›ï¼Œæ¯”å¦‚åªå…è®¸æœ‰ä¸€ä¸ªè¯­å¥æ²¡æœ‰è¢«è¦†ç›–åˆ°ã€‚\n\n```\n$ istanbul check-coverage --statement -1\n```\nä¸Šé¢å‘½ä»¤ä½¿ç”¨è´Ÿæ•°ï¼Œè¡¨ç¤ºç»å¯¹å€¼é—¨æ§›ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸Šé¢çš„ä¾‹å­å°±é€šè¿‡äº†è¦†ç›–ç‡æµ‹è¯•ï¼Œä¸ä¼šå†æŠ¥é”™äº†ã€‚\n\nç™¾åˆ†æ¯”é—¨æ§›å’Œç»å¯¹å€¼é—¨æ§›ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨ã€‚\n\n```\n$ istanbul check-coverage --statement -5 --branch -3 --function 100\n```\nä¸Šé¢å‘½ä»¤è®¾ç½®äº†3ä¸ªè¦†ç›–ç‡é—¨æ§›ï¼š5ä¸ªè¯­å¥ã€3ä¸ª if ä»£ç å—ã€100%çš„å‡½æ•°ã€‚æ³¨æ„ï¼Œè¿™ä¸‰ä¸ªé—¨æ§›æ˜¯\"ä¸\"ï¼ˆandï¼‰çš„å…³ç³»ï¼Œåªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰è¾¾æ ‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚\n\n### ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\nå®é™…å¼€å‘æ—¶ï¼Œistanbul æ€»æ˜¯ä¸æµ‹è¯•æ¡†æ¶ç»“åˆä½¿ç”¨ï¼Œä¸‹é¢ä»¥å¸¸ç”¨çš„ Mocha æ¡†æ¶ä¸ºä¾‹ã€‚\n\nsqrt.js æ˜¯ä¸€ä¸ªè®¡ç®—å¹³æ–¹æ ¹çš„è„šæœ¬ã€‚\n\n```\nvar My = {\n  sqrt: function(x) {\n    if (x < 0) throw new Error(\"è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹\");\n      return Math.exp(Math.log(x)/2);\n    }\n};\n\nmodule.exports = My;\n```\nå®ƒçš„æµ‹è¯•è„šæœ¬ test.sqrt.js æ”¾åœ¨ test å­ç›®å½•ã€‚\n\n```\nvar chai = require('chai');\nvar expect = chai.expect;\nvar My = require('../sqrt.js');\n\ndescribe(\"sqrt\", function() {\n\n  it(\"4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2\", function() {\n    expect(My.sqrt(4)).to.equal(2);\n  });\n\n  it(\"å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™\", function() {\n    expect(function(){ My.sqrt(-1); }).to.throw(\"è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹\");\n  });\n\n});\n```\nç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¾—åˆ°ä»£ç è¦†ç›–ç‡ã€‚\n\n```\n$ istanbul cover _mocha\n// or\n$ istanbul cover _mocha test/test.sqrt.js\n\n  sqrt\n    âœ“ 4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2 \n    âœ“ å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™ \n\n  2 passing (7ms)\n\n===== Coverage summary =====\nStatements   : 100% ( 5/5 )\nBranches     : 100% ( 2/2 )\nFunctions    : 100% ( 1/1 )\nLines        : 100% ( 4/4 )\n=============================\n```\nä¸Šé¢å‘½ä»¤ä¸­ï¼Œistanbul cover å‘½ä»¤åé¢è·Ÿçš„æ˜¯ _mocha å‘½ä»¤ï¼Œå‰é¢çš„ä¸‹åˆ’çº¿æ˜¯ä¸èƒ½çœç•¥çš„ã€‚\n\nå› ä¸ºï¼Œmocha å’Œ _mocha æ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½ä»¤ï¼Œå‰è€…ä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œåè€…æ˜¯åœ¨å½“å‰è¿›ç¨‹ï¼ˆå³ istanbul æ‰€åœ¨çš„è¿›ç¨‹ï¼‰æ‰§è¡Œæµ‹è¯•ï¼Œåªæœ‰è¿™æ ·ï¼Œ istanbul æ‰ä¼šæ•æ‰åˆ°è¦†ç›–ç‡æ•°æ®ã€‚å…¶ä»–æµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ã€‚\n\nå¦‚æœè¦å‘ mocha ä¼ å…¥å‚æ•°ï¼Œå¯ä»¥å†™æˆä¸‹é¢çš„æ ·å­ã€‚\n```\n$ istanbul cover _mocha -- tests/test.sqrt.js -R spec\n```\nä¸Šé¢å‘½ä»¤ä¸­ï¼Œä¸¤æ ¹è¿è¯çº¿åé¢çš„éƒ¨åˆ†ï¼Œéƒ½ä¼šè¢«å½“ä½œå‚æ•°ä¼ å…¥ Mocha ã€‚å¦‚æœä¸åŠ é‚£ä¸¤æ ¹è¿è¯çº¿ï¼Œå®ƒä»¬å°±ä¼šè¢«å½“ä½œ istanbul çš„å‚æ•°ï¼ˆå‚è€ƒé“¾æ¥1ï¼Œ2ï¼‰ã€‚\n\nå¦‚æœæƒ³åœ¨æµè§ˆå™¨è¿è¡Œ Istanbul ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚\n\näº”ã€å¿½ç•¥æŸäº›ä»£ç \nistanbul æä¾›æ³¨é‡Šè¯­æ³•ï¼Œå…è®¸æŸäº›ä»£ç ä¸è®¡å…¥è¦†ç›–ç‡ã€‚\n\n```\nvar object = parameter || /* istanbul ignore next */ {};\n```\nä¸Šé¢ä»£ç æ˜¯ä¸º object æŒ‡å®šé»˜è®¤å€¼ï¼ˆä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ã€‚å¦‚æœç”±äºç§ç§åŸå› ï¼Œæ²¡æœ‰ä¸º object ä¸ºç©ºå¯¹è±¡çš„æƒ…å†µå†™æµ‹è¯•ï¼Œå¯ä»¥ç”¨æ³¨é‡Šï¼Œä¸å°†è¿™ç§æƒ…å†µè®¡å…¥è¦†ç›–ç‡ã€‚æ³¨æ„ï¼Œæ³¨é‡Šè¦å†™åœ¨\"æˆ–\"è¿ç®—ç¬¦çš„åé¢ã€‚\n\n```\n/* istanbul ignore if  */\nif (hardToReproduceError)) {\n    return callback(hardToReproduceError);\n}\n```\nä¸Šé¢ä»£ç çš„ if è¯­å¥å—ï¼Œåœ¨è®¡ç®—è¦†ç›–ç‡çš„æ—¶å€™ä¼šè¢«å¿½ç•¥ã€‚\n","source":"_posts/engineering/coverage.md","raw":"---\ntitle: ä»£ç è¦†ç›–ç‡\ncategories: å·¥ç¨‹åŒ–å»ºè®¾\ntags: [Engineering]\ncomments: true\ncopyright: false\ntoc: true\n---\næœ€è¿‘ä¸ºäº†é˜²æ­¢å› ä¸ºæ¼æµ‹å¯¼è‡´çº¿ä¸Šé—®é¢˜ï¼Œåšäº†ä¸€äº›ç»Ÿè®¡æµ‹è¯•è¦†ç›–ç‡çš„å·¥ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ç”¨åˆ°äº†ä¸€ä¸ªæ£€æµ‹ä»£ç è¦†ç›–ç‡çš„å·¥å…·ï¼Œå«ï¼šistanbulã€‚å®ƒä¸»è¦èƒ½å¤Ÿä»å‡ ä¸ªç»´åº¦æ¥åˆ†æå¯¹åº”çš„è¦†ç›–ç‡ã€‚æ¯”å¦‚ä¸‹é¢å‡ ä¸ªæŒ‡æ ‡ï¼š\n\n> - è¡Œè¦†ç›–ç‡ï¼ˆline coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸€è¡Œéƒ½æ‰§è¡Œäº†ï¼Ÿ\n> - å‡½æ•°è¦†ç›–ç‡ï¼ˆfunction coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†ï¼Ÿ\n> - åˆ†æ”¯è¦†ç›–ç‡ï¼ˆbranch coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªifä»£ç å—éƒ½æ‰§è¡Œäº†ï¼Ÿ\n> - è¯­å¥è¦†ç›–ç‡ï¼ˆstatement coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†ï¼Ÿ\n\nä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼š\n\n### å®‰è£…\nIstanbul æ˜¯ä¸€ä¸ª npm æ¨¡å—ï¼Œå®‰è£…éå¸¸ç®€å•ï¼Œå°±ä¸€è¡Œå‘½ä»¤ã€‚\n```\n$ npm install -g istanbul\n```\n\n### è¦†ç›–ç‡æµ‹è¯•\næ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæ€ä¹ˆä½¿ç”¨ Istanbul ã€‚ä¸‹é¢æ˜¯è„šæœ¬æ–‡ä»¶ simple.js ã€‚\n```\nvar a = 1;\nvar b = 1;\nif ((a + b) > 2) {\n  console.log('more than two');\n}\n```\nä½¿ç”¨ istanbul cover å‘½ä»¤ï¼Œå°±èƒ½å¾—åˆ°è¦†ç›–ç‡ã€‚\n```\n$ istanbul cover simple.js\n\n===== Coverage summary =====\nStatements   : 75% ( 3/4 )\nBranches     : 50% ( 1/2 )\nFunctions    : 100% ( 0/0 )\nLines        : 75% ( 3/4 )\n=============================\n```\nè¿”å›ç»“æœæ˜¾ç¤ºï¼Œsimple.js æœ‰4ä¸ªè¯­å¥ï¼ˆstatementï¼‰ï¼Œæ‰§è¡Œäº†3ä¸ªï¼›æœ‰2ä¸ªåˆ†æ”¯ï¼ˆbranchï¼‰ï¼Œæ‰§è¡Œäº†1ä¸ªï¼›æœ‰0ä¸ªå‡½æ•°ï¼Œè°ƒç”¨äº†0ä¸ªï¼›æœ‰4è¡Œä»£ç ï¼Œæ‰§è¡Œäº†3è¡Œã€‚\n\nè¿™æ¡å‘½ä»¤åŒæ—¶è¿˜ç”Ÿæˆäº†ä¸€ä¸ª coverage å­ç›®å½•ï¼Œå…¶ä¸­çš„ coverage.json æ–‡ä»¶åŒ…å«è¦†ç›–ç‡çš„åŸå§‹æ•°æ®ï¼Œcoverage/lcov-report æ˜¯å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€çš„è¦†ç›–ç‡æŠ¥å‘Šï¼Œå…¶ä¸­æœ‰è¯¦ç»†ä¿¡æ¯ï¼Œåˆ°åº•å“ªäº›ä»£ç æ²¡æœ‰è¦†ç›–åˆ°ã€‚\n\n### è¦†ç›–ç‡é—¨æ§›\nå®Œç¾çš„è¦†ç›–ç‡å½“ç„¶æ˜¯ 100%ï¼Œä½†æ˜¯ç°å®ä¸­å¾ˆéš¾è¾¾åˆ°ã€‚éœ€è¦æœ‰ä¸€ä¸ªé—¨æ§›ï¼Œè¡¡é‡è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ã€‚\n\nistanbul check-coverage å‘½ä»¤ç”¨æ¥è®¾ç½®é—¨æ§›ï¼ŒåŒæ—¶æ£€æŸ¥å½“å‰ä»£ç æ˜¯å¦è¾¾æ ‡ã€‚\n\n```\n$ istanbul check-coverage --statement 90\n\nERROR: Coverage for statements (75%) does not meet global threshold (90%)\n```\nä¸Šé¢å‘½ä»¤è®¾ç½®è¯­å¥è¦†ç›–ç‡çš„é—¨æ§›æ˜¯ 90% ï¼Œç»“æœå°±æŠ¥é”™äº†ï¼Œå› ä¸ºå®é™…è¦†ç›–ç‡åªæœ‰75%ã€‚\n\né™¤äº†ç™¾åˆ†æ¯”é—¨æ§›ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ç»å¯¹å€¼é—¨æ§›ï¼Œæ¯”å¦‚åªå…è®¸æœ‰ä¸€ä¸ªè¯­å¥æ²¡æœ‰è¢«è¦†ç›–åˆ°ã€‚\n\n```\n$ istanbul check-coverage --statement -1\n```\nä¸Šé¢å‘½ä»¤ä½¿ç”¨è´Ÿæ•°ï¼Œè¡¨ç¤ºç»å¯¹å€¼é—¨æ§›ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸Šé¢çš„ä¾‹å­å°±é€šè¿‡äº†è¦†ç›–ç‡æµ‹è¯•ï¼Œä¸ä¼šå†æŠ¥é”™äº†ã€‚\n\nç™¾åˆ†æ¯”é—¨æ§›å’Œç»å¯¹å€¼é—¨æ§›ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨ã€‚\n\n```\n$ istanbul check-coverage --statement -5 --branch -3 --function 100\n```\nä¸Šé¢å‘½ä»¤è®¾ç½®äº†3ä¸ªè¦†ç›–ç‡é—¨æ§›ï¼š5ä¸ªè¯­å¥ã€3ä¸ª if ä»£ç å—ã€100%çš„å‡½æ•°ã€‚æ³¨æ„ï¼Œè¿™ä¸‰ä¸ªé—¨æ§›æ˜¯\"ä¸\"ï¼ˆandï¼‰çš„å…³ç³»ï¼Œåªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰è¾¾æ ‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚\n\n### ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\nå®é™…å¼€å‘æ—¶ï¼Œistanbul æ€»æ˜¯ä¸æµ‹è¯•æ¡†æ¶ç»“åˆä½¿ç”¨ï¼Œä¸‹é¢ä»¥å¸¸ç”¨çš„ Mocha æ¡†æ¶ä¸ºä¾‹ã€‚\n\nsqrt.js æ˜¯ä¸€ä¸ªè®¡ç®—å¹³æ–¹æ ¹çš„è„šæœ¬ã€‚\n\n```\nvar My = {\n  sqrt: function(x) {\n    if (x < 0) throw new Error(\"è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹\");\n      return Math.exp(Math.log(x)/2);\n    }\n};\n\nmodule.exports = My;\n```\nå®ƒçš„æµ‹è¯•è„šæœ¬ test.sqrt.js æ”¾åœ¨ test å­ç›®å½•ã€‚\n\n```\nvar chai = require('chai');\nvar expect = chai.expect;\nvar My = require('../sqrt.js');\n\ndescribe(\"sqrt\", function() {\n\n  it(\"4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2\", function() {\n    expect(My.sqrt(4)).to.equal(2);\n  });\n\n  it(\"å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™\", function() {\n    expect(function(){ My.sqrt(-1); }).to.throw(\"è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹\");\n  });\n\n});\n```\nç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¾—åˆ°ä»£ç è¦†ç›–ç‡ã€‚\n\n```\n$ istanbul cover _mocha\n// or\n$ istanbul cover _mocha test/test.sqrt.js\n\n  sqrt\n    âœ“ 4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2 \n    âœ“ å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™ \n\n  2 passing (7ms)\n\n===== Coverage summary =====\nStatements   : 100% ( 5/5 )\nBranches     : 100% ( 2/2 )\nFunctions    : 100% ( 1/1 )\nLines        : 100% ( 4/4 )\n=============================\n```\nä¸Šé¢å‘½ä»¤ä¸­ï¼Œistanbul cover å‘½ä»¤åé¢è·Ÿçš„æ˜¯ _mocha å‘½ä»¤ï¼Œå‰é¢çš„ä¸‹åˆ’çº¿æ˜¯ä¸èƒ½çœç•¥çš„ã€‚\n\nå› ä¸ºï¼Œmocha å’Œ _mocha æ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½ä»¤ï¼Œå‰è€…ä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œåè€…æ˜¯åœ¨å½“å‰è¿›ç¨‹ï¼ˆå³ istanbul æ‰€åœ¨çš„è¿›ç¨‹ï¼‰æ‰§è¡Œæµ‹è¯•ï¼Œåªæœ‰è¿™æ ·ï¼Œ istanbul æ‰ä¼šæ•æ‰åˆ°è¦†ç›–ç‡æ•°æ®ã€‚å…¶ä»–æµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ã€‚\n\nå¦‚æœè¦å‘ mocha ä¼ å…¥å‚æ•°ï¼Œå¯ä»¥å†™æˆä¸‹é¢çš„æ ·å­ã€‚\n```\n$ istanbul cover _mocha -- tests/test.sqrt.js -R spec\n```\nä¸Šé¢å‘½ä»¤ä¸­ï¼Œä¸¤æ ¹è¿è¯çº¿åé¢çš„éƒ¨åˆ†ï¼Œéƒ½ä¼šè¢«å½“ä½œå‚æ•°ä¼ å…¥ Mocha ã€‚å¦‚æœä¸åŠ é‚£ä¸¤æ ¹è¿è¯çº¿ï¼Œå®ƒä»¬å°±ä¼šè¢«å½“ä½œ istanbul çš„å‚æ•°ï¼ˆå‚è€ƒé“¾æ¥1ï¼Œ2ï¼‰ã€‚\n\nå¦‚æœæƒ³åœ¨æµè§ˆå™¨è¿è¡Œ Istanbul ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚\n\näº”ã€å¿½ç•¥æŸäº›ä»£ç \nistanbul æä¾›æ³¨é‡Šè¯­æ³•ï¼Œå…è®¸æŸäº›ä»£ç ä¸è®¡å…¥è¦†ç›–ç‡ã€‚\n\n```\nvar object = parameter || /* istanbul ignore next */ {};\n```\nä¸Šé¢ä»£ç æ˜¯ä¸º object æŒ‡å®šé»˜è®¤å€¼ï¼ˆä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ã€‚å¦‚æœç”±äºç§ç§åŸå› ï¼Œæ²¡æœ‰ä¸º object ä¸ºç©ºå¯¹è±¡çš„æƒ…å†µå†™æµ‹è¯•ï¼Œå¯ä»¥ç”¨æ³¨é‡Šï¼Œä¸å°†è¿™ç§æƒ…å†µè®¡å…¥è¦†ç›–ç‡ã€‚æ³¨æ„ï¼Œæ³¨é‡Šè¦å†™åœ¨\"æˆ–\"è¿ç®—ç¬¦çš„åé¢ã€‚\n\n```\n/* istanbul ignore if  */\nif (hardToReproduceError)) {\n    return callback(hardToReproduceError);\n}\n```\nä¸Šé¢ä»£ç çš„ if è¯­å¥å—ï¼Œåœ¨è®¡ç®—è¦†ç›–ç‡çš„æ—¶å€™ä¼šè¢«å¿½ç•¥ã€‚\n","slug":"engineering/coverage","published":1,"date":"2021-12-16T12:50:04.517Z","updated":"2021-12-28T12:40:49.661Z","layout":"post","photos":[],"link":"","_id":"ckxq3m94o000dkudo0l50jmos","content":"<p>æœ€è¿‘ä¸ºäº†é˜²æ­¢å› ä¸ºæ¼æµ‹å¯¼è‡´çº¿ä¸Šé—®é¢˜ï¼Œåšäº†ä¸€äº›ç»Ÿè®¡æµ‹è¯•è¦†ç›–ç‡çš„å·¥ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ç”¨åˆ°äº†ä¸€ä¸ªæ£€æµ‹ä»£ç è¦†ç›–ç‡çš„å·¥å…·ï¼Œå«ï¼šistanbulã€‚å®ƒä¸»è¦èƒ½å¤Ÿä»å‡ ä¸ªç»´åº¦æ¥åˆ†æå¯¹åº”çš„è¦†ç›–ç‡ã€‚æ¯”å¦‚ä¸‹é¢å‡ ä¸ªæŒ‡æ ‡ï¼š</p>\n<blockquote>\n<ul>\n<li>è¡Œè¦†ç›–ç‡ï¼ˆline coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸€è¡Œéƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n<li>å‡½æ•°è¦†ç›–ç‡ï¼ˆfunction coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†ï¼Ÿ</li>\n<li>åˆ†æ”¯è¦†ç›–ç‡ï¼ˆbranch coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªifä»£ç å—éƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n<li>è¯­å¥è¦†ç›–ç‡ï¼ˆstatement coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n</ul>\n</blockquote>\n<p>ä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼š</p>\n<h3 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h3><p>Istanbul æ˜¯ä¸€ä¸ª npm æ¨¡å—ï¼Œå®‰è£…éå¸¸ç®€å•ï¼Œå°±ä¸€è¡Œå‘½ä»¤ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install -g istanbul</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"è¦†ç›–ç‡æµ‹è¯•\"><a href=\"#è¦†ç›–ç‡æµ‹è¯•\" class=\"headerlink\" title=\"è¦†ç›–ç‡æµ‹è¯•\"></a>è¦†ç›–ç‡æµ‹è¯•</h3><p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæ€ä¹ˆä½¿ç”¨ Istanbul ã€‚ä¸‹é¢æ˜¯è„šæœ¬æ–‡ä»¶ simple.js ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = 1;</span><br><span class=\"line\">var b = 1;</span><br><span class=\"line\">if ((a + b) &gt; 2) &#123;</span><br><span class=\"line\">  console.log(&apos;more than two&apos;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ä½¿ç”¨ istanbul cover å‘½ä»¤ï¼Œå°±èƒ½å¾—åˆ°è¦†ç›–ç‡ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul cover simple.js</span><br><span class=\"line\"></span><br><span class=\"line\">===== Coverage summary =====</span><br><span class=\"line\">Statements   : 75% ( 3/4 )</span><br><span class=\"line\">Branches     : 50% ( 1/2 )</span><br><span class=\"line\">Functions    : 100% ( 0/0 )</span><br><span class=\"line\">Lines        : 75% ( 3/4 )</span><br><span class=\"line\">=============================</span><br></pre></td></tr></table></figure></p>\n<p>è¿”å›ç»“æœæ˜¾ç¤ºï¼Œsimple.js æœ‰4ä¸ªè¯­å¥ï¼ˆstatementï¼‰ï¼Œæ‰§è¡Œäº†3ä¸ªï¼›æœ‰2ä¸ªåˆ†æ”¯ï¼ˆbranchï¼‰ï¼Œæ‰§è¡Œäº†1ä¸ªï¼›æœ‰0ä¸ªå‡½æ•°ï¼Œè°ƒç”¨äº†0ä¸ªï¼›æœ‰4è¡Œä»£ç ï¼Œæ‰§è¡Œäº†3è¡Œã€‚</p>\n<p>è¿™æ¡å‘½ä»¤åŒæ—¶è¿˜ç”Ÿæˆäº†ä¸€ä¸ª coverage å­ç›®å½•ï¼Œå…¶ä¸­çš„ coverage.json æ–‡ä»¶åŒ…å«è¦†ç›–ç‡çš„åŸå§‹æ•°æ®ï¼Œcoverage/lcov-report æ˜¯å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€çš„è¦†ç›–ç‡æŠ¥å‘Šï¼Œå…¶ä¸­æœ‰è¯¦ç»†ä¿¡æ¯ï¼Œåˆ°åº•å“ªäº›ä»£ç æ²¡æœ‰è¦†ç›–åˆ°ã€‚</p>\n<h3 id=\"è¦†ç›–ç‡é—¨æ§›\"><a href=\"#è¦†ç›–ç‡é—¨æ§›\" class=\"headerlink\" title=\"è¦†ç›–ç‡é—¨æ§›\"></a>è¦†ç›–ç‡é—¨æ§›</h3><p>å®Œç¾çš„è¦†ç›–ç‡å½“ç„¶æ˜¯ 100%ï¼Œä½†æ˜¯ç°å®ä¸­å¾ˆéš¾è¾¾åˆ°ã€‚éœ€è¦æœ‰ä¸€ä¸ªé—¨æ§›ï¼Œè¡¡é‡è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ã€‚</p>\n<p>istanbul check-coverage å‘½ä»¤ç”¨æ¥è®¾ç½®é—¨æ§›ï¼ŒåŒæ—¶æ£€æŸ¥å½“å‰ä»£ç æ˜¯å¦è¾¾æ ‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul check-coverage --statement 90</span><br><span class=\"line\"></span><br><span class=\"line\">ERROR: Coverage for statements (75%) does not meet global threshold (90%)</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤è®¾ç½®è¯­å¥è¦†ç›–ç‡çš„é—¨æ§›æ˜¯ 90% ï¼Œç»“æœå°±æŠ¥é”™äº†ï¼Œå› ä¸ºå®é™…è¦†ç›–ç‡åªæœ‰75%ã€‚</p>\n<p>é™¤äº†ç™¾åˆ†æ¯”é—¨æ§›ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ç»å¯¹å€¼é—¨æ§›ï¼Œæ¯”å¦‚åªå…è®¸æœ‰ä¸€ä¸ªè¯­å¥æ²¡æœ‰è¢«è¦†ç›–åˆ°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul check-coverage --statement -1</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨è´Ÿæ•°ï¼Œè¡¨ç¤ºç»å¯¹å€¼é—¨æ§›ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸Šé¢çš„ä¾‹å­å°±é€šè¿‡äº†è¦†ç›–ç‡æµ‹è¯•ï¼Œä¸ä¼šå†æŠ¥é”™äº†ã€‚</p>\n<p>ç™¾åˆ†æ¯”é—¨æ§›å’Œç»å¯¹å€¼é—¨æ§›ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul check-coverage --statement -5 --branch -3 --function 100</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤è®¾ç½®äº†3ä¸ªè¦†ç›–ç‡é—¨æ§›ï¼š5ä¸ªè¯­å¥ã€3ä¸ª if ä»£ç å—ã€100%çš„å‡½æ•°ã€‚æ³¨æ„ï¼Œè¿™ä¸‰ä¸ªé—¨æ§›æ˜¯â€ä¸â€ï¼ˆandï¼‰çš„å…³ç³»ï¼Œåªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰è¾¾æ ‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>\n<h3 id=\"ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\"><a href=\"#ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\" class=\"headerlink\" title=\"ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\"></a>ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ</h3><p>å®é™…å¼€å‘æ—¶ï¼Œistanbul æ€»æ˜¯ä¸æµ‹è¯•æ¡†æ¶ç»“åˆä½¿ç”¨ï¼Œä¸‹é¢ä»¥å¸¸ç”¨çš„ Mocha æ¡†æ¶ä¸ºä¾‹ã€‚</p>\n<p>sqrt.js æ˜¯ä¸€ä¸ªè®¡ç®—å¹³æ–¹æ ¹çš„è„šæœ¬ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var My = &#123;</span><br><span class=\"line\">  sqrt: function(x) &#123;</span><br><span class=\"line\">    if (x &lt; 0) throw new Error(&quot;è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹&quot;);</span><br><span class=\"line\">      return Math.exp(Math.log(x)/2);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = My;</span><br></pre></td></tr></table></figure>\n<p>å®ƒçš„æµ‹è¯•è„šæœ¬ test.sqrt.js æ”¾åœ¨ test å­ç›®å½•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var chai = require(&apos;chai&apos;);</span><br><span class=\"line\">var expect = chai.expect;</span><br><span class=\"line\">var My = require(&apos;../sqrt.js&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">describe(&quot;sqrt&quot;, function() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  it(&quot;4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2&quot;, function() &#123;</span><br><span class=\"line\">    expect(My.sqrt(4)).to.equal(2);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  it(&quot;å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™&quot;, function() &#123;</span><br><span class=\"line\">    expect(function()&#123; My.sqrt(-1); &#125;).to.throw(&quot;è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹&quot;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>ç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¾—åˆ°ä»£ç è¦†ç›–ç‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul cover _mocha</span><br><span class=\"line\">// or</span><br><span class=\"line\">$ istanbul cover _mocha test/test.sqrt.js</span><br><span class=\"line\"></span><br><span class=\"line\">  sqrt</span><br><span class=\"line\">    âœ“ 4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2 </span><br><span class=\"line\">    âœ“ å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™ </span><br><span class=\"line\"></span><br><span class=\"line\">  2 passing (7ms)</span><br><span class=\"line\"></span><br><span class=\"line\">===== Coverage summary =====</span><br><span class=\"line\">Statements   : 100% ( 5/5 )</span><br><span class=\"line\">Branches     : 100% ( 2/2 )</span><br><span class=\"line\">Functions    : 100% ( 1/1 )</span><br><span class=\"line\">Lines        : 100% ( 4/4 )</span><br><span class=\"line\">=============================</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œistanbul cover å‘½ä»¤åé¢è·Ÿçš„æ˜¯ _mocha å‘½ä»¤ï¼Œå‰é¢çš„ä¸‹åˆ’çº¿æ˜¯ä¸èƒ½çœç•¥çš„ã€‚</p>\n<p>å› ä¸ºï¼Œmocha å’Œ _mocha æ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½ä»¤ï¼Œå‰è€…ä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œåè€…æ˜¯åœ¨å½“å‰è¿›ç¨‹ï¼ˆå³ istanbul æ‰€åœ¨çš„è¿›ç¨‹ï¼‰æ‰§è¡Œæµ‹è¯•ï¼Œåªæœ‰è¿™æ ·ï¼Œ istanbul æ‰ä¼šæ•æ‰åˆ°è¦†ç›–ç‡æ•°æ®ã€‚å…¶ä»–æµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ã€‚</p>\n<p>å¦‚æœè¦å‘ mocha ä¼ å…¥å‚æ•°ï¼Œå¯ä»¥å†™æˆä¸‹é¢çš„æ ·å­ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul cover _mocha -- tests/test.sqrt.js -R spec</span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œä¸¤æ ¹è¿è¯çº¿åé¢çš„éƒ¨åˆ†ï¼Œéƒ½ä¼šè¢«å½“ä½œå‚æ•°ä¼ å…¥ Mocha ã€‚å¦‚æœä¸åŠ é‚£ä¸¤æ ¹è¿è¯çº¿ï¼Œå®ƒä»¬å°±ä¼šè¢«å½“ä½œ istanbul çš„å‚æ•°ï¼ˆå‚è€ƒé“¾æ¥1ï¼Œ2ï¼‰ã€‚</p>\n<p>å¦‚æœæƒ³åœ¨æµè§ˆå™¨è¿è¡Œ Istanbul ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚</p>\n<p>äº”ã€å¿½ç•¥æŸäº›ä»£ç <br>istanbul æä¾›æ³¨é‡Šè¯­æ³•ï¼Œå…è®¸æŸäº›ä»£ç ä¸è®¡å…¥è¦†ç›–ç‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var object = parameter || /* istanbul ignore next */ &#123;&#125;;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢ä»£ç æ˜¯ä¸º object æŒ‡å®šé»˜è®¤å€¼ï¼ˆä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ã€‚å¦‚æœç”±äºç§ç§åŸå› ï¼Œæ²¡æœ‰ä¸º object ä¸ºç©ºå¯¹è±¡çš„æƒ…å†µå†™æµ‹è¯•ï¼Œå¯ä»¥ç”¨æ³¨é‡Šï¼Œä¸å°†è¿™ç§æƒ…å†µè®¡å…¥è¦†ç›–ç‡ã€‚æ³¨æ„ï¼Œæ³¨é‡Šè¦å†™åœ¨â€æˆ–â€è¿ç®—ç¬¦çš„åé¢ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/* istanbul ignore if  */</span><br><span class=\"line\">if (hardToReproduceError)) &#123;</span><br><span class=\"line\">    return callback(hardToReproduceError);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢ä»£ç çš„ if è¯­å¥å—ï¼Œåœ¨è®¡ç®—è¦†ç›–ç‡çš„æ—¶å€™ä¼šè¢«å¿½ç•¥ã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<p>æœ€è¿‘ä¸ºäº†é˜²æ­¢å› ä¸ºæ¼æµ‹å¯¼è‡´çº¿ä¸Šé—®é¢˜ï¼Œåšäº†ä¸€äº›ç»Ÿè®¡æµ‹è¯•è¦†ç›–ç‡çš„å·¥ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ç”¨åˆ°äº†ä¸€ä¸ªæ£€æµ‹ä»£ç è¦†ç›–ç‡çš„å·¥å…·ï¼Œå«ï¼šistanbulã€‚å®ƒä¸»è¦èƒ½å¤Ÿä»å‡ ä¸ªç»´åº¦æ¥åˆ†æå¯¹åº”çš„è¦†ç›–ç‡ã€‚æ¯”å¦‚ä¸‹é¢å‡ ä¸ªæŒ‡æ ‡ï¼š</p>\n<blockquote>\n<ul>\n<li>è¡Œè¦†ç›–ç‡ï¼ˆline coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸€è¡Œéƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n<li>å‡½æ•°è¦†ç›–ç‡ï¼ˆfunction coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†ï¼Ÿ</li>\n<li>åˆ†æ”¯è¦†ç›–ç‡ï¼ˆbranch coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªifä»£ç å—éƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n<li>è¯­å¥è¦†ç›–ç‡ï¼ˆstatement coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n</ul>\n</blockquote>\n<p>ä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼š</p>\n<h3 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h3><p>Istanbul æ˜¯ä¸€ä¸ª npm æ¨¡å—ï¼Œå®‰è£…éå¸¸ç®€å•ï¼Œå°±ä¸€è¡Œå‘½ä»¤ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install -g istanbul</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"è¦†ç›–ç‡æµ‹è¯•\"><a href=\"#è¦†ç›–ç‡æµ‹è¯•\" class=\"headerlink\" title=\"è¦†ç›–ç‡æµ‹è¯•\"></a>è¦†ç›–ç‡æµ‹è¯•</h3><p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæ€ä¹ˆä½¿ç”¨ Istanbul ã€‚ä¸‹é¢æ˜¯è„šæœ¬æ–‡ä»¶ simple.js ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = 1;</span><br><span class=\"line\">var b = 1;</span><br><span class=\"line\">if ((a + b) &gt; 2) &#123;</span><br><span class=\"line\">  console.log(&apos;more than two&apos;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ä½¿ç”¨ istanbul cover å‘½ä»¤ï¼Œå°±èƒ½å¾—åˆ°è¦†ç›–ç‡ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul cover simple.js</span><br><span class=\"line\"></span><br><span class=\"line\">===== Coverage summary =====</span><br><span class=\"line\">Statements   : 75% ( 3/4 )</span><br><span class=\"line\">Branches     : 50% ( 1/2 )</span><br><span class=\"line\">Functions    : 100% ( 0/0 )</span><br><span class=\"line\">Lines        : 75% ( 3/4 )</span><br><span class=\"line\">=============================</span><br></pre></td></tr></table></figure></p>\n<p>è¿”å›ç»“æœæ˜¾ç¤ºï¼Œsimple.js æœ‰4ä¸ªè¯­å¥ï¼ˆstatementï¼‰ï¼Œæ‰§è¡Œäº†3ä¸ªï¼›æœ‰2ä¸ªåˆ†æ”¯ï¼ˆbranchï¼‰ï¼Œæ‰§è¡Œäº†1ä¸ªï¼›æœ‰0ä¸ªå‡½æ•°ï¼Œè°ƒç”¨äº†0ä¸ªï¼›æœ‰4è¡Œä»£ç ï¼Œæ‰§è¡Œäº†3è¡Œã€‚</p>\n<p>è¿™æ¡å‘½ä»¤åŒæ—¶è¿˜ç”Ÿæˆäº†ä¸€ä¸ª coverage å­ç›®å½•ï¼Œå…¶ä¸­çš„ coverage.json æ–‡ä»¶åŒ…å«è¦†ç›–ç‡çš„åŸå§‹æ•°æ®ï¼Œcoverage/lcov-report æ˜¯å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€çš„è¦†ç›–ç‡æŠ¥å‘Šï¼Œå…¶ä¸­æœ‰è¯¦ç»†ä¿¡æ¯ï¼Œåˆ°åº•å“ªäº›ä»£ç æ²¡æœ‰è¦†ç›–åˆ°ã€‚</p>\n<h3 id=\"è¦†ç›–ç‡é—¨æ§›\"><a href=\"#è¦†ç›–ç‡é—¨æ§›\" class=\"headerlink\" title=\"è¦†ç›–ç‡é—¨æ§›\"></a>è¦†ç›–ç‡é—¨æ§›</h3><p>å®Œç¾çš„è¦†ç›–ç‡å½“ç„¶æ˜¯ 100%ï¼Œä½†æ˜¯ç°å®ä¸­å¾ˆéš¾è¾¾åˆ°ã€‚éœ€è¦æœ‰ä¸€ä¸ªé—¨æ§›ï¼Œè¡¡é‡è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡ã€‚</p>\n<p>istanbul check-coverage å‘½ä»¤ç”¨æ¥è®¾ç½®é—¨æ§›ï¼ŒåŒæ—¶æ£€æŸ¥å½“å‰ä»£ç æ˜¯å¦è¾¾æ ‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul check-coverage --statement 90</span><br><span class=\"line\"></span><br><span class=\"line\">ERROR: Coverage for statements (75%) does not meet global threshold (90%)</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤è®¾ç½®è¯­å¥è¦†ç›–ç‡çš„é—¨æ§›æ˜¯ 90% ï¼Œç»“æœå°±æŠ¥é”™äº†ï¼Œå› ä¸ºå®é™…è¦†ç›–ç‡åªæœ‰75%ã€‚</p>\n<p>é™¤äº†ç™¾åˆ†æ¯”é—¨æ§›ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ç»å¯¹å€¼é—¨æ§›ï¼Œæ¯”å¦‚åªå…è®¸æœ‰ä¸€ä¸ªè¯­å¥æ²¡æœ‰è¢«è¦†ç›–åˆ°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul check-coverage --statement -1</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨è´Ÿæ•°ï¼Œè¡¨ç¤ºç»å¯¹å€¼é—¨æ§›ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸Šé¢çš„ä¾‹å­å°±é€šè¿‡äº†è¦†ç›–ç‡æµ‹è¯•ï¼Œä¸ä¼šå†æŠ¥é”™äº†ã€‚</p>\n<p>ç™¾åˆ†æ¯”é—¨æ§›å’Œç»å¯¹å€¼é—¨æ§›ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul check-coverage --statement -5 --branch -3 --function 100</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤è®¾ç½®äº†3ä¸ªè¦†ç›–ç‡é—¨æ§›ï¼š5ä¸ªè¯­å¥ã€3ä¸ª if ä»£ç å—ã€100%çš„å‡½æ•°ã€‚æ³¨æ„ï¼Œè¿™ä¸‰ä¸ªé—¨æ§›æ˜¯â€ä¸â€ï¼ˆandï¼‰çš„å…³ç³»ï¼Œåªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰è¾¾æ ‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>\n<h3 id=\"ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\"><a href=\"#ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\" class=\"headerlink\" title=\"ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ\"></a>ä¸æµ‹è¯•æ¡†æ¶çš„ç»“åˆ</h3><p>å®é™…å¼€å‘æ—¶ï¼Œistanbul æ€»æ˜¯ä¸æµ‹è¯•æ¡†æ¶ç»“åˆä½¿ç”¨ï¼Œä¸‹é¢ä»¥å¸¸ç”¨çš„ Mocha æ¡†æ¶ä¸ºä¾‹ã€‚</p>\n<p>sqrt.js æ˜¯ä¸€ä¸ªè®¡ç®—å¹³æ–¹æ ¹çš„è„šæœ¬ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var My = &#123;</span><br><span class=\"line\">  sqrt: function(x) &#123;</span><br><span class=\"line\">    if (x &lt; 0) throw new Error(&quot;è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹&quot;);</span><br><span class=\"line\">      return Math.exp(Math.log(x)/2);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = My;</span><br></pre></td></tr></table></figure>\n<p>å®ƒçš„æµ‹è¯•è„šæœ¬ test.sqrt.js æ”¾åœ¨ test å­ç›®å½•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var chai = require(&apos;chai&apos;);</span><br><span class=\"line\">var expect = chai.expect;</span><br><span class=\"line\">var My = require(&apos;../sqrt.js&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">describe(&quot;sqrt&quot;, function() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  it(&quot;4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2&quot;, function() &#123;</span><br><span class=\"line\">    expect(My.sqrt(4)).to.equal(2);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  it(&quot;å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™&quot;, function() &#123;</span><br><span class=\"line\">    expect(function()&#123; My.sqrt(-1); &#125;).to.throw(&quot;è´Ÿå€¼æ²¡æœ‰å¹³æ–¹æ ¹&quot;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>ç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¾—åˆ°ä»£ç è¦†ç›–ç‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul cover _mocha</span><br><span class=\"line\">// or</span><br><span class=\"line\">$ istanbul cover _mocha test/test.sqrt.js</span><br><span class=\"line\"></span><br><span class=\"line\">  sqrt</span><br><span class=\"line\">    âœ“ 4çš„å¹³æ–¹æ ¹åº”è¯¥ç­‰äº2 </span><br><span class=\"line\">    âœ“ å‚æ•°ä¸ºè´Ÿå€¼æ—¶åº”è¯¥æŠ¥é”™ </span><br><span class=\"line\"></span><br><span class=\"line\">  2 passing (7ms)</span><br><span class=\"line\"></span><br><span class=\"line\">===== Coverage summary =====</span><br><span class=\"line\">Statements   : 100% ( 5/5 )</span><br><span class=\"line\">Branches     : 100% ( 2/2 )</span><br><span class=\"line\">Functions    : 100% ( 1/1 )</span><br><span class=\"line\">Lines        : 100% ( 4/4 )</span><br><span class=\"line\">=============================</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œistanbul cover å‘½ä»¤åé¢è·Ÿçš„æ˜¯ _mocha å‘½ä»¤ï¼Œå‰é¢çš„ä¸‹åˆ’çº¿æ˜¯ä¸èƒ½çœç•¥çš„ã€‚</p>\n<p>å› ä¸ºï¼Œmocha å’Œ _mocha æ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½ä»¤ï¼Œå‰è€…ä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œåè€…æ˜¯åœ¨å½“å‰è¿›ç¨‹ï¼ˆå³ istanbul æ‰€åœ¨çš„è¿›ç¨‹ï¼‰æ‰§è¡Œæµ‹è¯•ï¼Œåªæœ‰è¿™æ ·ï¼Œ istanbul æ‰ä¼šæ•æ‰åˆ°è¦†ç›–ç‡æ•°æ®ã€‚å…¶ä»–æµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ã€‚</p>\n<p>å¦‚æœè¦å‘ mocha ä¼ å…¥å‚æ•°ï¼Œå¯ä»¥å†™æˆä¸‹é¢çš„æ ·å­ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ istanbul cover _mocha -- tests/test.sqrt.js -R spec</span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œä¸¤æ ¹è¿è¯çº¿åé¢çš„éƒ¨åˆ†ï¼Œéƒ½ä¼šè¢«å½“ä½œå‚æ•°ä¼ å…¥ Mocha ã€‚å¦‚æœä¸åŠ é‚£ä¸¤æ ¹è¿è¯çº¿ï¼Œå®ƒä»¬å°±ä¼šè¢«å½“ä½œ istanbul çš„å‚æ•°ï¼ˆå‚è€ƒé“¾æ¥1ï¼Œ2ï¼‰ã€‚</p>\n<p>å¦‚æœæƒ³åœ¨æµè§ˆå™¨è¿è¡Œ Istanbul ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚</p>\n<p>äº”ã€å¿½ç•¥æŸäº›ä»£ç <br>istanbul æä¾›æ³¨é‡Šè¯­æ³•ï¼Œå…è®¸æŸäº›ä»£ç ä¸è®¡å…¥è¦†ç›–ç‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var object = parameter || /* istanbul ignore next */ &#123;&#125;;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢ä»£ç æ˜¯ä¸º object æŒ‡å®šé»˜è®¤å€¼ï¼ˆä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ã€‚å¦‚æœç”±äºç§ç§åŸå› ï¼Œæ²¡æœ‰ä¸º object ä¸ºç©ºå¯¹è±¡çš„æƒ…å†µå†™æµ‹è¯•ï¼Œå¯ä»¥ç”¨æ³¨é‡Šï¼Œä¸å°†è¿™ç§æƒ…å†µè®¡å…¥è¦†ç›–ç‡ã€‚æ³¨æ„ï¼Œæ³¨é‡Šè¦å†™åœ¨â€æˆ–â€è¿ç®—ç¬¦çš„åé¢ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/* istanbul ignore if  */</span><br><span class=\"line\">if (hardToReproduceError)) &#123;</span><br><span class=\"line\">    return callback(hardToReproduceError);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢ä»£ç çš„ if è¯­å¥å—ï¼Œåœ¨è®¡ç®—è¦†ç›–ç‡çš„æ—¶å€™ä¼šè¢«å¿½ç•¥ã€‚</p>\n"},{"title":"è°ˆè°ˆæˆ‘å–œæ¬¢çš„å€™é€‰äºº","comments":1,"copyright":true,"toc":true,"_content":"\nå…¶å®ä½œä¸ºé¢è¯•å®˜æœ‰å‡ å¹´äº†ï¼Œåœ¨ç¬¬ä¸€å®¶å…¬å¸2016å¹´çš„æ—¶å€™ï¼Œå°±å¼€å§‹è¿™æ–¹é¢å·¥ä½œäº†ï¼Œè¿™å‡ å¹´çš„é¢è¯•ç»å†ä¸­ï¼Œé‡åˆ°çš„å¤šæ•°å€™é€‰äººæ™®æ™®é€šé€šï¼Œå½“ç„¶ä¹Ÿé‡åˆ°è¿‡ä¼˜ç§€çš„ï¼Œä½†æ˜¯éå¸¸å°‘ã€‚å…¶å®ä½œä¸ºé¢è¯•å®˜ï¼Œæˆ‘æ˜¯éå¸¸ä¸èµæˆæŠ›å¼€ç®€å†ä¸­çš„é¡¹ç›®ï¼Œç›´æ¥å„ç§å…«è‚¡æ–‡å»è€ƒå¯Ÿå€™é€‰äººï¼Œè¿™æ ·çš„é¢è¯•æ˜¯ç‰‡é¢çš„ï¼Œè¿˜æœ‰ä¸€äº›é¢è¯•å®˜ï¼Œä¹Ÿæ˜¯æŠ›å¼€å€™é€‰äººç®€å†ï¼Œåªé—®é¢è¯•å®˜è‡ªå·±ä¼šçš„ã€‚æˆ‘è§‰å¾—åƒè¿™äº›é¢è¯•å®˜ï¼Œä»–æœ¬èº«çš„æŠ€èƒ½å°±ä¸æ˜¯å¾ˆæ‰å®ï¼Œä¸æ˜¯åˆæ ¼çš„é¢è¯•å®˜ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šæ—¶å€™ï¼Œå…¬å¸éœ€è¦å¤§é‡æ‹›äººï¼Œå°±ä¼šè®©ä¸€äº›çº§åˆ«ä¸é«˜çš„åŒå­¦ä¹Ÿå»åšé¢è¯•å®˜ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘å°±è°ˆè°ˆï¼Œæˆ‘å¿ƒç›®ä¸­ä¼˜ç§€çš„å€™é€‰äººï¼Œæ˜¯ä»€ä¹ˆæ ·çš„ã€‚\n\n### ç®€å†\nç®€å†å¾ˆé‡è¦ï¼Œæˆ‘äº†è§£å€™é€‰äººçš„æ•´ä½“æƒ…å†µï¼Œç¬¬ä¸€å°è±¡éƒ½æ¥è‡ªäºå€™é€‰äººçš„ç®€å†ã€‚ç®€å†å¦‚æœæ²¡æœ‰äº®ç‚¹ï¼ŒæŒ‰ç…§æˆ‘çš„ç»éªŒï¼Œå¤šå°‘æƒ…å†µæœ€ç»ˆçš„ç»“æœéƒ½æ˜¯failã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹åƒç¯‡ä¸€å¾‹çš„ç®€å†ï¼Œå¦‚ä¸‹ï¼š\n<img src=\"/images/interview/jianli1.png\" width=\"50%\">\nè¿™ä¸ªå€™é€‰äººï¼Œå·¥ä½œ4å¹´ï¼Œå…¶å®ä¹Ÿä¸çŸ­ï¼Œä¸“ä¸šæŠ€èƒ½å†™çš„å¾ˆæ³›æ³›ï¼Œé¢æ¯”è¾ƒå¹¿ï¼Œè¿™äº›æŠ€èƒ½éƒ½å­¦çš„æ€ä¹ˆæ ·ï¼Œé€šè¿‡ç®€å†è¿˜æ˜¯çœ‹ä¸å‡ºæ¥ï¼Œéœ€è¦é¢è¯•ä¸­æ²Ÿé€šã€‚å¦å¤–å†çœ‹é¡¹ç›®ï¼Œå°±æ˜¯æ™®é€šçš„å‰ç«¯é¡¹ç›®ï¼Œä¹Ÿçœ‹ä¸åˆ°ä»»ä½•çš„éš¾ç‚¹å’Œäº®ç‚¹ã€‚æ‰€ä»¥ï¼Œåƒè¿™ç§ç®€å†ï¼Œç¬¬ä¸€å°è±¡éƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚æœå­¦æ ¡ã€å·¥ä½œç»å†éƒ½ä¸å¥½çš„æƒ…å†µä¸‹ï¼Œç®€å†åŸºæœ¬è¿‡ä¸äº†ã€‚\né‚£ä¹ˆä»€ä¹ˆæ ·çš„ç®€å†æ˜¯æœ‰äº®ç‚¹çš„å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªï¼š\n<img src=\"/images/interview/jianli2.png\" width=\"50%\">\né¦–å…ˆä¸ªäººä¼˜åŠ¿æ¯”è¾ƒçªå‡ºï¼Œæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®çš„ä¸»è¦è´Ÿè´£äººï¼Œå¹¶ä¸”æ˜¯vue-routerçš„Contributorï¼Œå¦å¤–åœ¨æå®¢å¸®åšè¿‡æŠ€æœ¯åˆ†äº«ï¼Œè¿™å‡ ç‚¹å°±å¾ˆå¤šäººåšä¸åˆ°çš„äº†ã€‚è¿™å°±æ˜¯äº®ç‚¹ï¼æˆ‘ä»¬ä¸ºä»€ä¹ˆå–œæ¬¢å¯¹å¼€æºç¤¾åŒºæœ‰è´¡çŒ®çš„å€™é€‰äººå‘¢ï¼Œå› ä¸ºä¸€èˆ¬å¼€æºç¤¾åŒºä¸­æ¯”è¾ƒçŸ¥åçš„æ¡†æ¶æˆ–è€…æŠ€æœ¯éƒ½æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ï¼Œéƒ½æ˜¯ä»æ¶æ„è®¾è®¡åˆ°å®ç°ï¼Œæ˜¯å€¼å¾—æˆ‘ä»¬å¾ˆå¤šäººå»å­¦ä¹ çš„ï¼Œæ‰€ä»¥å®ƒå‡ºåï¼Œè€Œå¯¹äºè¿™äº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®æœ‰å…±äº«çš„åŒå­¦ï¼Œä»–ä»¬å¯¹å…¶å®ç°è‚¯å®šæ˜¯äº†è§£ç”šè‡³æŒæ¡çš„ï¼Œè€Œè¿™å°±æ˜¯ä½“ç°å‡ºäº†å€™é€‰äººçš„å®åŠ›ã€‚\nä¸€ä¸ªäººçš„äº®ç‚¹å¯ä»¥æ˜¯æ–¹æ–¹é¢é¢çš„ï¼Œæ¯”å¦‚æ›¾ç»å†™è¿‡ã€Šxxxã€‹ä¹¦ç±ï¼Œåœ¨å…¬å¸ç”³è¯·è¿‡ã€Šxxxã€‹ä¸“åˆ©ï¼Œç”šè‡³ä½ åœ¨leetcodeä¸Šæ¶®äº†200é“é¢˜éƒ½æ˜¯ä½ çš„äº®ç‚¹ï¼Œå¦‚æœä½ è¯´æˆ‘å°±æ˜¯æ²¡æœ‰äº®ç‚¹ï¼Œé‚£æˆ‘è§‰å¾—å°±æ˜¯æ‡’ï¼Œè¡ŒåŠ¨ä¸Šå’Œæ€æƒ³ä¸Šéƒ½æ‡’ã€‚é‚£ä¸ºå•¥ä¼˜ç§€çš„é‚£ä¸ªäººä¸å¯ä»¥æ˜¯ä½ å‘¢ï¼Ÿ\n\n### æŠ€èƒ½\næˆ‘ä¸€èˆ¬åœ¨é¢è¯•ä¸­ï¼Œé™¤äº†è®¡ç®—æœºåŸºç¡€ä¹‹å¤–ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¼šæŒ‰ç…§å€™é€‰äººçš„ç®€å†å»èŠï¼Œç”±æµ…å…¥æ·±ï¼Œæ¢ç´¢å€™é€‰äººçš„æ·±åº¦ï¼Œæ¯”å¦‚å€™é€‰äººä¸»è¦ç”¨çš„æŠ€æœ¯æ ˆæ˜¯reactï¼Œé‚£æˆ‘ä¼šå…ˆèŠä¸€ä¸‹reactçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸã€ä¸€äº›å‰¯ä½œç”¨çš„æ“ä½œåœ¨å“ªé‡Œå†™æ¯”è¾ƒåˆé€‚ã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šé—®ä¸€äº›reactä¼˜åŒ–çš„é—®é¢˜ï¼Œhooksçš„ä½¿ç”¨ã€‚å¦‚æœå€™é€‰äººç­”çš„ä¸é”™ï¼Œæˆ‘è¿˜ä¼šå¾€åŸç†ä¸ŠèŠï¼Œæ¯”å¦‚å¦‚æœè¦å®ç°ä¸€ä¸ªxxxéœ€æ±‚ï¼Œå¦‚ä½•å†™ä¸€ä¸ªè‡ªå®šä¹‰hooksã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šèŠåˆ°reactè®¾è®¡ã€æºç è¿™éƒ¨åˆ†ï¼Œå¦‚æœå€™é€‰äººèƒ½æŠŠæ‰€æœ‰é—®é¢˜éƒ½ç­”çš„éå¸¸å¥½ï¼Œé‚£å°±æ˜¯ç‰›æ‰¹çš„å€™é€‰äººã€‚è¿™æ˜¯æ·±åº¦ã€‚å¦å¤–ä¹Ÿä¼šæ¢ç´¢ä¸€ä¸‹å€™é€‰äººçš„å¹¿åº¦ï¼Œæ¯”å¦‚è·³å‡ºæµè§ˆå™¨ä¼šé—®ä¸€äº›å…¶ä»–çš„æŠ€èƒ½ï¼Œæ¯”å¦‚nodejsã€æ•°æ®åº“ã€è¿ç»´ç›¸å…³çš„ï¼Œå¦‚æœå€™é€‰äººå¹³æ—¶åç«¯éœ€æ±‚ä¹Ÿå†™ï¼Œé‚£å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œè¿™æ ·çš„å€™é€‰äººæœ‰ä¸ªä¼˜åŠ¿å°±æ˜¯é¢å¯¹ä¸€äº›å¤æ‚çš„åœºæ™¯éœ€æ±‚æ—¶ï¼Œå¯ä»¥è‡ªå·±æå®šï¼Œè¿›æ¥ä¹Ÿå¥½å¸¦ï¼Œä¸ç”¨ç‰¹åˆ«è´¹åŠ²ã€‚å¦‚æœæŠ€æœ¯çš„æ·±åº¦å’Œå¹¿åº¦éƒ½æ²¡é—®é¢˜çš„è¯ï¼Œæˆ‘å¯èƒ½è¿˜ä¼šé—®ä¸€äº›è§£å†³æ–¹æ¡ˆçš„æ€è·¯ï¼Œæ¯”å¦‚ä¸€äº›å·¥ç¨‹åŒ–é—®é¢˜ï¼Œå¦‚ä½•åˆ†æå…¬å…±ä¾èµ–ï¼Œç¡®å®šå‰ç«¯é¡µé¢çš„å›å½’èŒƒå›´ã€å¦‚ä½•ç»Ÿè®¡ç›¸ä¼¼å‡½æ•°ä»¥æå‡ä»£ç è´¨é‡ç­‰ã€‚æ€»ä¹‹æˆ‘çš„é¢è¯•ä¸­ï¼Œå¯èƒ½ä¼šé—®å¾ˆå¤šåŸç†æ€§é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬èŠçš„æ¥ï¼Œé‚£æˆ‘è§‰å¾—ä½ å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç§å€™é€‰äººã€‚\n\n### ä»£ç èƒ½åŠ›\næˆ‘çš„é¢è¯•ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä»£ç é¢˜ï¼Œé¢˜ç›®ä¸éš¾ï¼Œéƒ½æ˜¯leetcodeä¸­ç®€å•é¢˜ç›®ã€‚è€ƒä»£ç èƒ½åŠ›çš„ä¸»è¦ç›®çš„ï¼Œä¸æ˜¯ä¸ºäº†è€ƒçš„ä½ ä¸ä¼šï¼Œè€Œæ˜¯çœ‹ä½ çš„ä»£ç èƒ½åŠ›è¿‡ä¸è¿‡å…³ï¼Œä¸»è¦çœ‹ä½ çš„ä»£ç é€Ÿåº¦ã€ä»£ç æ€è·¯ã€ä»£ç è§„èŒƒç­‰ï¼Œé€šè¿‡ä½ å†™ä»£ç ï¼Œå¤§æ¦‚èƒ½äº†è§£ä½ çš„ä»£ç èƒ½åŠ›ï¼Œç”šè‡³ä½ çš„æ€§æ ¼ã€‚å› ä¸ºä¸ªåˆ«å€™é€‰äººï¼Œç†è®ºçŸ¥è¯†ç¡®å®ä¸é”™ï¼Œè¿›æ¥å†™é¡¹ç›®éœ€æ±‚çš„æ—¶å€™ï¼Œå·¨æ…¢ï¼Œè¿™ç§å°±æ˜¯ä»£ç ä¸è¿‡å…³å¯¼è‡´çš„é—®é¢˜ã€‚\n\n### è½¯æ€§æŠ€èƒ½\nè½¯æ€§æŠ€èƒ½çš„è¯ï¼Œå¯¹äºå€™é€‰äººæ¥è¯´ï¼Œå¯èƒ½æ¯”è¾ƒå¥½ç­”ä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿåˆ†å¥½åã€‚è¿™ä¸ªå°±æ˜¯ä¸»è¦è§‚å¯Ÿä¸€äº›å€™é€‰äººçš„æ²Ÿé€šèƒ½åŠ›ã€æ€§æ ¼ä¹‹ç±»çš„ï¼Œå¯èƒ½æ›´å…·å€™é€‰äººçš„æ€§æ ¼ï¼Œä¹Ÿéœ€è¦å®‰æ’ä¸åŒçš„å·¥ä½œï¼Œæ¯”å¦‚å†…å‘ä¸€ç‚¹éƒ½ï¼Œå¯èƒ½ä¼šæ“…é•¿åæŠ€æœ¯æ”»å…³ä¹‹ç±»çš„å·¥ä½œï¼Œå› ä¸ºåå†…å‘çš„äººï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€å®šçš„è€åŠ›æˆ–è€…è€æ€§ã€‚å¯¹äºä¹è§‚å¼€æœ—ä¸€ç‚¹çš„å€™é€‰äººï¼Œä¼šé€‚åˆåšä¸€äº›éœ€æ±‚è”åŠ¨çš„å·¥ä½œï¼Œå› ä¸ºä»–æ“…äºå’Œå„ç§äººï¼ˆæµ‹è¯•ã€äº§å“ï¼‰æ²Ÿé€šï¼Œä¹Ÿä¼šä¿ƒè¿›å·¥ä½œæ›´å¥½çš„å®Œæˆã€‚\nå¦å¤–å°±æ˜¯çœ‹çœ‹ä»–çš„ä¸€äº›å­¦ä¹ æ¸ é“ï¼Œæ¯”å¦‚å–œæ¬¢çœ‹å‡¯æºçš„ä¸€äº›æŠ€æœ¯æˆ–è€…æ¡†æ¶ï¼Œé‚£å¯ä»¥çœ‹åˆ°è¿™æ ·çš„å€™é€‰äººå¯¹æŠ€æœ¯è¿˜æ˜¯æœ‰çƒ­æƒ…çš„ã€‚å–œæ¬¢çœ‹ä¹¦ã€çœ‹åšå®¢ï¼Œè¿™æ ·çš„å€™é€‰äººä¹Ÿæ˜¯å–œæ¬¢å­¦ä¹ çš„ï¼Œåƒè¿™æ ·çš„å€™é€‰äººï¼Œæˆ‘ä¹Ÿæ¯”è¾ƒé’çã€‚\n\n### æ€»ç»“\næˆ‘è§‰å¾—ä»¥ä¸Šå‡ ä¸ªæ–¹é¢åšçš„ä¸é”™çš„åŒå­¦ï¼Œæˆ‘è§‰å¾—å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç±»å€™é€‰äººã€‚\n\n","source":"_posts/interview/mymind.md","raw":"---\ntitle: è°ˆè°ˆæˆ‘å–œæ¬¢çš„å€™é€‰äºº\ncategories: é¢è¯•\ntags: [Interview]\ncomments: true\ncopyright: true\ntoc: true\n---\n\nå…¶å®ä½œä¸ºé¢è¯•å®˜æœ‰å‡ å¹´äº†ï¼Œåœ¨ç¬¬ä¸€å®¶å…¬å¸2016å¹´çš„æ—¶å€™ï¼Œå°±å¼€å§‹è¿™æ–¹é¢å·¥ä½œäº†ï¼Œè¿™å‡ å¹´çš„é¢è¯•ç»å†ä¸­ï¼Œé‡åˆ°çš„å¤šæ•°å€™é€‰äººæ™®æ™®é€šé€šï¼Œå½“ç„¶ä¹Ÿé‡åˆ°è¿‡ä¼˜ç§€çš„ï¼Œä½†æ˜¯éå¸¸å°‘ã€‚å…¶å®ä½œä¸ºé¢è¯•å®˜ï¼Œæˆ‘æ˜¯éå¸¸ä¸èµæˆæŠ›å¼€ç®€å†ä¸­çš„é¡¹ç›®ï¼Œç›´æ¥å„ç§å…«è‚¡æ–‡å»è€ƒå¯Ÿå€™é€‰äººï¼Œè¿™æ ·çš„é¢è¯•æ˜¯ç‰‡é¢çš„ï¼Œè¿˜æœ‰ä¸€äº›é¢è¯•å®˜ï¼Œä¹Ÿæ˜¯æŠ›å¼€å€™é€‰äººç®€å†ï¼Œåªé—®é¢è¯•å®˜è‡ªå·±ä¼šçš„ã€‚æˆ‘è§‰å¾—åƒè¿™äº›é¢è¯•å®˜ï¼Œä»–æœ¬èº«çš„æŠ€èƒ½å°±ä¸æ˜¯å¾ˆæ‰å®ï¼Œä¸æ˜¯åˆæ ¼çš„é¢è¯•å®˜ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šæ—¶å€™ï¼Œå…¬å¸éœ€è¦å¤§é‡æ‹›äººï¼Œå°±ä¼šè®©ä¸€äº›çº§åˆ«ä¸é«˜çš„åŒå­¦ä¹Ÿå»åšé¢è¯•å®˜ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘å°±è°ˆè°ˆï¼Œæˆ‘å¿ƒç›®ä¸­ä¼˜ç§€çš„å€™é€‰äººï¼Œæ˜¯ä»€ä¹ˆæ ·çš„ã€‚\n\n### ç®€å†\nç®€å†å¾ˆé‡è¦ï¼Œæˆ‘äº†è§£å€™é€‰äººçš„æ•´ä½“æƒ…å†µï¼Œç¬¬ä¸€å°è±¡éƒ½æ¥è‡ªäºå€™é€‰äººçš„ç®€å†ã€‚ç®€å†å¦‚æœæ²¡æœ‰äº®ç‚¹ï¼ŒæŒ‰ç…§æˆ‘çš„ç»éªŒï¼Œå¤šå°‘æƒ…å†µæœ€ç»ˆçš„ç»“æœéƒ½æ˜¯failã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹åƒç¯‡ä¸€å¾‹çš„ç®€å†ï¼Œå¦‚ä¸‹ï¼š\n<img src=\"/images/interview/jianli1.png\" width=\"50%\">\nè¿™ä¸ªå€™é€‰äººï¼Œå·¥ä½œ4å¹´ï¼Œå…¶å®ä¹Ÿä¸çŸ­ï¼Œä¸“ä¸šæŠ€èƒ½å†™çš„å¾ˆæ³›æ³›ï¼Œé¢æ¯”è¾ƒå¹¿ï¼Œè¿™äº›æŠ€èƒ½éƒ½å­¦çš„æ€ä¹ˆæ ·ï¼Œé€šè¿‡ç®€å†è¿˜æ˜¯çœ‹ä¸å‡ºæ¥ï¼Œéœ€è¦é¢è¯•ä¸­æ²Ÿé€šã€‚å¦å¤–å†çœ‹é¡¹ç›®ï¼Œå°±æ˜¯æ™®é€šçš„å‰ç«¯é¡¹ç›®ï¼Œä¹Ÿçœ‹ä¸åˆ°ä»»ä½•çš„éš¾ç‚¹å’Œäº®ç‚¹ã€‚æ‰€ä»¥ï¼Œåƒè¿™ç§ç®€å†ï¼Œç¬¬ä¸€å°è±¡éƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚æœå­¦æ ¡ã€å·¥ä½œç»å†éƒ½ä¸å¥½çš„æƒ…å†µä¸‹ï¼Œç®€å†åŸºæœ¬è¿‡ä¸äº†ã€‚\né‚£ä¹ˆä»€ä¹ˆæ ·çš„ç®€å†æ˜¯æœ‰äº®ç‚¹çš„å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªï¼š\n<img src=\"/images/interview/jianli2.png\" width=\"50%\">\né¦–å…ˆä¸ªäººä¼˜åŠ¿æ¯”è¾ƒçªå‡ºï¼Œæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®çš„ä¸»è¦è´Ÿè´£äººï¼Œå¹¶ä¸”æ˜¯vue-routerçš„Contributorï¼Œå¦å¤–åœ¨æå®¢å¸®åšè¿‡æŠ€æœ¯åˆ†äº«ï¼Œè¿™å‡ ç‚¹å°±å¾ˆå¤šäººåšä¸åˆ°çš„äº†ã€‚è¿™å°±æ˜¯äº®ç‚¹ï¼æˆ‘ä»¬ä¸ºä»€ä¹ˆå–œæ¬¢å¯¹å¼€æºç¤¾åŒºæœ‰è´¡çŒ®çš„å€™é€‰äººå‘¢ï¼Œå› ä¸ºä¸€èˆ¬å¼€æºç¤¾åŒºä¸­æ¯”è¾ƒçŸ¥åçš„æ¡†æ¶æˆ–è€…æŠ€æœ¯éƒ½æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ï¼Œéƒ½æ˜¯ä»æ¶æ„è®¾è®¡åˆ°å®ç°ï¼Œæ˜¯å€¼å¾—æˆ‘ä»¬å¾ˆå¤šäººå»å­¦ä¹ çš„ï¼Œæ‰€ä»¥å®ƒå‡ºåï¼Œè€Œå¯¹äºè¿™äº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®æœ‰å…±äº«çš„åŒå­¦ï¼Œä»–ä»¬å¯¹å…¶å®ç°è‚¯å®šæ˜¯äº†è§£ç”šè‡³æŒæ¡çš„ï¼Œè€Œè¿™å°±æ˜¯ä½“ç°å‡ºäº†å€™é€‰äººçš„å®åŠ›ã€‚\nä¸€ä¸ªäººçš„äº®ç‚¹å¯ä»¥æ˜¯æ–¹æ–¹é¢é¢çš„ï¼Œæ¯”å¦‚æ›¾ç»å†™è¿‡ã€Šxxxã€‹ä¹¦ç±ï¼Œåœ¨å…¬å¸ç”³è¯·è¿‡ã€Šxxxã€‹ä¸“åˆ©ï¼Œç”šè‡³ä½ åœ¨leetcodeä¸Šæ¶®äº†200é“é¢˜éƒ½æ˜¯ä½ çš„äº®ç‚¹ï¼Œå¦‚æœä½ è¯´æˆ‘å°±æ˜¯æ²¡æœ‰äº®ç‚¹ï¼Œé‚£æˆ‘è§‰å¾—å°±æ˜¯æ‡’ï¼Œè¡ŒåŠ¨ä¸Šå’Œæ€æƒ³ä¸Šéƒ½æ‡’ã€‚é‚£ä¸ºå•¥ä¼˜ç§€çš„é‚£ä¸ªäººä¸å¯ä»¥æ˜¯ä½ å‘¢ï¼Ÿ\n\n### æŠ€èƒ½\næˆ‘ä¸€èˆ¬åœ¨é¢è¯•ä¸­ï¼Œé™¤äº†è®¡ç®—æœºåŸºç¡€ä¹‹å¤–ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¼šæŒ‰ç…§å€™é€‰äººçš„ç®€å†å»èŠï¼Œç”±æµ…å…¥æ·±ï¼Œæ¢ç´¢å€™é€‰äººçš„æ·±åº¦ï¼Œæ¯”å¦‚å€™é€‰äººä¸»è¦ç”¨çš„æŠ€æœ¯æ ˆæ˜¯reactï¼Œé‚£æˆ‘ä¼šå…ˆèŠä¸€ä¸‹reactçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸã€ä¸€äº›å‰¯ä½œç”¨çš„æ“ä½œåœ¨å“ªé‡Œå†™æ¯”è¾ƒåˆé€‚ã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šé—®ä¸€äº›reactä¼˜åŒ–çš„é—®é¢˜ï¼Œhooksçš„ä½¿ç”¨ã€‚å¦‚æœå€™é€‰äººç­”çš„ä¸é”™ï¼Œæˆ‘è¿˜ä¼šå¾€åŸç†ä¸ŠèŠï¼Œæ¯”å¦‚å¦‚æœè¦å®ç°ä¸€ä¸ªxxxéœ€æ±‚ï¼Œå¦‚ä½•å†™ä¸€ä¸ªè‡ªå®šä¹‰hooksã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šèŠåˆ°reactè®¾è®¡ã€æºç è¿™éƒ¨åˆ†ï¼Œå¦‚æœå€™é€‰äººèƒ½æŠŠæ‰€æœ‰é—®é¢˜éƒ½ç­”çš„éå¸¸å¥½ï¼Œé‚£å°±æ˜¯ç‰›æ‰¹çš„å€™é€‰äººã€‚è¿™æ˜¯æ·±åº¦ã€‚å¦å¤–ä¹Ÿä¼šæ¢ç´¢ä¸€ä¸‹å€™é€‰äººçš„å¹¿åº¦ï¼Œæ¯”å¦‚è·³å‡ºæµè§ˆå™¨ä¼šé—®ä¸€äº›å…¶ä»–çš„æŠ€èƒ½ï¼Œæ¯”å¦‚nodejsã€æ•°æ®åº“ã€è¿ç»´ç›¸å…³çš„ï¼Œå¦‚æœå€™é€‰äººå¹³æ—¶åç«¯éœ€æ±‚ä¹Ÿå†™ï¼Œé‚£å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œè¿™æ ·çš„å€™é€‰äººæœ‰ä¸ªä¼˜åŠ¿å°±æ˜¯é¢å¯¹ä¸€äº›å¤æ‚çš„åœºæ™¯éœ€æ±‚æ—¶ï¼Œå¯ä»¥è‡ªå·±æå®šï¼Œè¿›æ¥ä¹Ÿå¥½å¸¦ï¼Œä¸ç”¨ç‰¹åˆ«è´¹åŠ²ã€‚å¦‚æœæŠ€æœ¯çš„æ·±åº¦å’Œå¹¿åº¦éƒ½æ²¡é—®é¢˜çš„è¯ï¼Œæˆ‘å¯èƒ½è¿˜ä¼šé—®ä¸€äº›è§£å†³æ–¹æ¡ˆçš„æ€è·¯ï¼Œæ¯”å¦‚ä¸€äº›å·¥ç¨‹åŒ–é—®é¢˜ï¼Œå¦‚ä½•åˆ†æå…¬å…±ä¾èµ–ï¼Œç¡®å®šå‰ç«¯é¡µé¢çš„å›å½’èŒƒå›´ã€å¦‚ä½•ç»Ÿè®¡ç›¸ä¼¼å‡½æ•°ä»¥æå‡ä»£ç è´¨é‡ç­‰ã€‚æ€»ä¹‹æˆ‘çš„é¢è¯•ä¸­ï¼Œå¯èƒ½ä¼šé—®å¾ˆå¤šåŸç†æ€§é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬èŠçš„æ¥ï¼Œé‚£æˆ‘è§‰å¾—ä½ å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç§å€™é€‰äººã€‚\n\n### ä»£ç èƒ½åŠ›\næˆ‘çš„é¢è¯•ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä»£ç é¢˜ï¼Œé¢˜ç›®ä¸éš¾ï¼Œéƒ½æ˜¯leetcodeä¸­ç®€å•é¢˜ç›®ã€‚è€ƒä»£ç èƒ½åŠ›çš„ä¸»è¦ç›®çš„ï¼Œä¸æ˜¯ä¸ºäº†è€ƒçš„ä½ ä¸ä¼šï¼Œè€Œæ˜¯çœ‹ä½ çš„ä»£ç èƒ½åŠ›è¿‡ä¸è¿‡å…³ï¼Œä¸»è¦çœ‹ä½ çš„ä»£ç é€Ÿåº¦ã€ä»£ç æ€è·¯ã€ä»£ç è§„èŒƒç­‰ï¼Œé€šè¿‡ä½ å†™ä»£ç ï¼Œå¤§æ¦‚èƒ½äº†è§£ä½ çš„ä»£ç èƒ½åŠ›ï¼Œç”šè‡³ä½ çš„æ€§æ ¼ã€‚å› ä¸ºä¸ªåˆ«å€™é€‰äººï¼Œç†è®ºçŸ¥è¯†ç¡®å®ä¸é”™ï¼Œè¿›æ¥å†™é¡¹ç›®éœ€æ±‚çš„æ—¶å€™ï¼Œå·¨æ…¢ï¼Œè¿™ç§å°±æ˜¯ä»£ç ä¸è¿‡å…³å¯¼è‡´çš„é—®é¢˜ã€‚\n\n### è½¯æ€§æŠ€èƒ½\nè½¯æ€§æŠ€èƒ½çš„è¯ï¼Œå¯¹äºå€™é€‰äººæ¥è¯´ï¼Œå¯èƒ½æ¯”è¾ƒå¥½ç­”ä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿåˆ†å¥½åã€‚è¿™ä¸ªå°±æ˜¯ä¸»è¦è§‚å¯Ÿä¸€äº›å€™é€‰äººçš„æ²Ÿé€šèƒ½åŠ›ã€æ€§æ ¼ä¹‹ç±»çš„ï¼Œå¯èƒ½æ›´å…·å€™é€‰äººçš„æ€§æ ¼ï¼Œä¹Ÿéœ€è¦å®‰æ’ä¸åŒçš„å·¥ä½œï¼Œæ¯”å¦‚å†…å‘ä¸€ç‚¹éƒ½ï¼Œå¯èƒ½ä¼šæ“…é•¿åæŠ€æœ¯æ”»å…³ä¹‹ç±»çš„å·¥ä½œï¼Œå› ä¸ºåå†…å‘çš„äººï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€å®šçš„è€åŠ›æˆ–è€…è€æ€§ã€‚å¯¹äºä¹è§‚å¼€æœ—ä¸€ç‚¹çš„å€™é€‰äººï¼Œä¼šé€‚åˆåšä¸€äº›éœ€æ±‚è”åŠ¨çš„å·¥ä½œï¼Œå› ä¸ºä»–æ“…äºå’Œå„ç§äººï¼ˆæµ‹è¯•ã€äº§å“ï¼‰æ²Ÿé€šï¼Œä¹Ÿä¼šä¿ƒè¿›å·¥ä½œæ›´å¥½çš„å®Œæˆã€‚\nå¦å¤–å°±æ˜¯çœ‹çœ‹ä»–çš„ä¸€äº›å­¦ä¹ æ¸ é“ï¼Œæ¯”å¦‚å–œæ¬¢çœ‹å‡¯æºçš„ä¸€äº›æŠ€æœ¯æˆ–è€…æ¡†æ¶ï¼Œé‚£å¯ä»¥çœ‹åˆ°è¿™æ ·çš„å€™é€‰äººå¯¹æŠ€æœ¯è¿˜æ˜¯æœ‰çƒ­æƒ…çš„ã€‚å–œæ¬¢çœ‹ä¹¦ã€çœ‹åšå®¢ï¼Œè¿™æ ·çš„å€™é€‰äººä¹Ÿæ˜¯å–œæ¬¢å­¦ä¹ çš„ï¼Œåƒè¿™æ ·çš„å€™é€‰äººï¼Œæˆ‘ä¹Ÿæ¯”è¾ƒé’çã€‚\n\n### æ€»ç»“\næˆ‘è§‰å¾—ä»¥ä¸Šå‡ ä¸ªæ–¹é¢åšçš„ä¸é”™çš„åŒå­¦ï¼Œæˆ‘è§‰å¾—å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç±»å€™é€‰äººã€‚\n\n","slug":"interview/mymind","published":1,"date":"2021-12-17T08:42:03.628Z","updated":"2021-12-28T12:40:52.941Z","layout":"post","photos":[],"link":"","_id":"ckxq3m94r000gkudoy7ahtgwy","content":"<p>å…¶å®ä½œä¸ºé¢è¯•å®˜æœ‰å‡ å¹´äº†ï¼Œåœ¨ç¬¬ä¸€å®¶å…¬å¸2016å¹´çš„æ—¶å€™ï¼Œå°±å¼€å§‹è¿™æ–¹é¢å·¥ä½œäº†ï¼Œè¿™å‡ å¹´çš„é¢è¯•ç»å†ä¸­ï¼Œé‡åˆ°çš„å¤šæ•°å€™é€‰äººæ™®æ™®é€šé€šï¼Œå½“ç„¶ä¹Ÿé‡åˆ°è¿‡ä¼˜ç§€çš„ï¼Œä½†æ˜¯éå¸¸å°‘ã€‚å…¶å®ä½œä¸ºé¢è¯•å®˜ï¼Œæˆ‘æ˜¯éå¸¸ä¸èµæˆæŠ›å¼€ç®€å†ä¸­çš„é¡¹ç›®ï¼Œç›´æ¥å„ç§å…«è‚¡æ–‡å»è€ƒå¯Ÿå€™é€‰äººï¼Œè¿™æ ·çš„é¢è¯•æ˜¯ç‰‡é¢çš„ï¼Œè¿˜æœ‰ä¸€äº›é¢è¯•å®˜ï¼Œä¹Ÿæ˜¯æŠ›å¼€å€™é€‰äººç®€å†ï¼Œåªé—®é¢è¯•å®˜è‡ªå·±ä¼šçš„ã€‚æˆ‘è§‰å¾—åƒè¿™äº›é¢è¯•å®˜ï¼Œä»–æœ¬èº«çš„æŠ€èƒ½å°±ä¸æ˜¯å¾ˆæ‰å®ï¼Œä¸æ˜¯åˆæ ¼çš„é¢è¯•å®˜ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šæ—¶å€™ï¼Œå…¬å¸éœ€è¦å¤§é‡æ‹›äººï¼Œå°±ä¼šè®©ä¸€äº›çº§åˆ«ä¸é«˜çš„åŒå­¦ä¹Ÿå»åšé¢è¯•å®˜ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘å°±è°ˆè°ˆï¼Œæˆ‘å¿ƒç›®ä¸­ä¼˜ç§€çš„å€™é€‰äººï¼Œæ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p>\n<h3 id=\"ç®€å†\"><a href=\"#ç®€å†\" class=\"headerlink\" title=\"ç®€å†\"></a>ç®€å†</h3><p>ç®€å†å¾ˆé‡è¦ï¼Œæˆ‘äº†è§£å€™é€‰äººçš„æ•´ä½“æƒ…å†µï¼Œç¬¬ä¸€å°è±¡éƒ½æ¥è‡ªäºå€™é€‰äººçš„ç®€å†ã€‚ç®€å†å¦‚æœæ²¡æœ‰äº®ç‚¹ï¼ŒæŒ‰ç…§æˆ‘çš„ç»éªŒï¼Œå¤šå°‘æƒ…å†µæœ€ç»ˆçš„ç»“æœéƒ½æ˜¯failã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹åƒç¯‡ä¸€å¾‹çš„ç®€å†ï¼Œå¦‚ä¸‹ï¼š<br><img src=\"/images/interview/jianli1.png\" width=\"50%\"><br>è¿™ä¸ªå€™é€‰äººï¼Œå·¥ä½œ4å¹´ï¼Œå…¶å®ä¹Ÿä¸çŸ­ï¼Œä¸“ä¸šæŠ€èƒ½å†™çš„å¾ˆæ³›æ³›ï¼Œé¢æ¯”è¾ƒå¹¿ï¼Œè¿™äº›æŠ€èƒ½éƒ½å­¦çš„æ€ä¹ˆæ ·ï¼Œé€šè¿‡ç®€å†è¿˜æ˜¯çœ‹ä¸å‡ºæ¥ï¼Œéœ€è¦é¢è¯•ä¸­æ²Ÿé€šã€‚å¦å¤–å†çœ‹é¡¹ç›®ï¼Œå°±æ˜¯æ™®é€šçš„å‰ç«¯é¡¹ç›®ï¼Œä¹Ÿçœ‹ä¸åˆ°ä»»ä½•çš„éš¾ç‚¹å’Œäº®ç‚¹ã€‚æ‰€ä»¥ï¼Œåƒè¿™ç§ç®€å†ï¼Œç¬¬ä¸€å°è±¡éƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚æœå­¦æ ¡ã€å·¥ä½œç»å†éƒ½ä¸å¥½çš„æƒ…å†µä¸‹ï¼Œç®€å†åŸºæœ¬è¿‡ä¸äº†ã€‚<br>é‚£ä¹ˆä»€ä¹ˆæ ·çš„ç®€å†æ˜¯æœ‰äº®ç‚¹çš„å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªï¼š<br><img src=\"/images/interview/jianli2.png\" width=\"50%\"><br>é¦–å…ˆä¸ªäººä¼˜åŠ¿æ¯”è¾ƒçªå‡ºï¼Œæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®çš„ä¸»è¦è´Ÿè´£äººï¼Œå¹¶ä¸”æ˜¯vue-routerçš„Contributorï¼Œå¦å¤–åœ¨æå®¢å¸®åšè¿‡æŠ€æœ¯åˆ†äº«ï¼Œè¿™å‡ ç‚¹å°±å¾ˆå¤šäººåšä¸åˆ°çš„äº†ã€‚è¿™å°±æ˜¯äº®ç‚¹ï¼æˆ‘ä»¬ä¸ºä»€ä¹ˆå–œæ¬¢å¯¹å¼€æºç¤¾åŒºæœ‰è´¡çŒ®çš„å€™é€‰äººå‘¢ï¼Œå› ä¸ºä¸€èˆ¬å¼€æºç¤¾åŒºä¸­æ¯”è¾ƒçŸ¥åçš„æ¡†æ¶æˆ–è€…æŠ€æœ¯éƒ½æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ï¼Œéƒ½æ˜¯ä»æ¶æ„è®¾è®¡åˆ°å®ç°ï¼Œæ˜¯å€¼å¾—æˆ‘ä»¬å¾ˆå¤šäººå»å­¦ä¹ çš„ï¼Œæ‰€ä»¥å®ƒå‡ºåï¼Œè€Œå¯¹äºè¿™äº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®æœ‰å…±äº«çš„åŒå­¦ï¼Œä»–ä»¬å¯¹å…¶å®ç°è‚¯å®šæ˜¯äº†è§£ç”šè‡³æŒæ¡çš„ï¼Œè€Œè¿™å°±æ˜¯ä½“ç°å‡ºäº†å€™é€‰äººçš„å®åŠ›ã€‚<br>ä¸€ä¸ªäººçš„äº®ç‚¹å¯ä»¥æ˜¯æ–¹æ–¹é¢é¢çš„ï¼Œæ¯”å¦‚æ›¾ç»å†™è¿‡ã€Šxxxã€‹ä¹¦ç±ï¼Œåœ¨å…¬å¸ç”³è¯·è¿‡ã€Šxxxã€‹ä¸“åˆ©ï¼Œç”šè‡³ä½ åœ¨leetcodeä¸Šæ¶®äº†200é“é¢˜éƒ½æ˜¯ä½ çš„äº®ç‚¹ï¼Œå¦‚æœä½ è¯´æˆ‘å°±æ˜¯æ²¡æœ‰äº®ç‚¹ï¼Œé‚£æˆ‘è§‰å¾—å°±æ˜¯æ‡’ï¼Œè¡ŒåŠ¨ä¸Šå’Œæ€æƒ³ä¸Šéƒ½æ‡’ã€‚é‚£ä¸ºå•¥ä¼˜ç§€çš„é‚£ä¸ªäººä¸å¯ä»¥æ˜¯ä½ å‘¢ï¼Ÿ</p>\n<h3 id=\"æŠ€èƒ½\"><a href=\"#æŠ€èƒ½\" class=\"headerlink\" title=\"æŠ€èƒ½\"></a>æŠ€èƒ½</h3><p>æˆ‘ä¸€èˆ¬åœ¨é¢è¯•ä¸­ï¼Œé™¤äº†è®¡ç®—æœºåŸºç¡€ä¹‹å¤–ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¼šæŒ‰ç…§å€™é€‰äººçš„ç®€å†å»èŠï¼Œç”±æµ…å…¥æ·±ï¼Œæ¢ç´¢å€™é€‰äººçš„æ·±åº¦ï¼Œæ¯”å¦‚å€™é€‰äººä¸»è¦ç”¨çš„æŠ€æœ¯æ ˆæ˜¯reactï¼Œé‚£æˆ‘ä¼šå…ˆèŠä¸€ä¸‹reactçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸã€ä¸€äº›å‰¯ä½œç”¨çš„æ“ä½œåœ¨å“ªé‡Œå†™æ¯”è¾ƒåˆé€‚ã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šé—®ä¸€äº›reactä¼˜åŒ–çš„é—®é¢˜ï¼Œhooksçš„ä½¿ç”¨ã€‚å¦‚æœå€™é€‰äººç­”çš„ä¸é”™ï¼Œæˆ‘è¿˜ä¼šå¾€åŸç†ä¸ŠèŠï¼Œæ¯”å¦‚å¦‚æœè¦å®ç°ä¸€ä¸ªxxxéœ€æ±‚ï¼Œå¦‚ä½•å†™ä¸€ä¸ªè‡ªå®šä¹‰hooksã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šèŠåˆ°reactè®¾è®¡ã€æºç è¿™éƒ¨åˆ†ï¼Œå¦‚æœå€™é€‰äººèƒ½æŠŠæ‰€æœ‰é—®é¢˜éƒ½ç­”çš„éå¸¸å¥½ï¼Œé‚£å°±æ˜¯ç‰›æ‰¹çš„å€™é€‰äººã€‚è¿™æ˜¯æ·±åº¦ã€‚å¦å¤–ä¹Ÿä¼šæ¢ç´¢ä¸€ä¸‹å€™é€‰äººçš„å¹¿åº¦ï¼Œæ¯”å¦‚è·³å‡ºæµè§ˆå™¨ä¼šé—®ä¸€äº›å…¶ä»–çš„æŠ€èƒ½ï¼Œæ¯”å¦‚nodejsã€æ•°æ®åº“ã€è¿ç»´ç›¸å…³çš„ï¼Œå¦‚æœå€™é€‰äººå¹³æ—¶åç«¯éœ€æ±‚ä¹Ÿå†™ï¼Œé‚£å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œè¿™æ ·çš„å€™é€‰äººæœ‰ä¸ªä¼˜åŠ¿å°±æ˜¯é¢å¯¹ä¸€äº›å¤æ‚çš„åœºæ™¯éœ€æ±‚æ—¶ï¼Œå¯ä»¥è‡ªå·±æå®šï¼Œè¿›æ¥ä¹Ÿå¥½å¸¦ï¼Œä¸ç”¨ç‰¹åˆ«è´¹åŠ²ã€‚å¦‚æœæŠ€æœ¯çš„æ·±åº¦å’Œå¹¿åº¦éƒ½æ²¡é—®é¢˜çš„è¯ï¼Œæˆ‘å¯èƒ½è¿˜ä¼šé—®ä¸€äº›è§£å†³æ–¹æ¡ˆçš„æ€è·¯ï¼Œæ¯”å¦‚ä¸€äº›å·¥ç¨‹åŒ–é—®é¢˜ï¼Œå¦‚ä½•åˆ†æå…¬å…±ä¾èµ–ï¼Œç¡®å®šå‰ç«¯é¡µé¢çš„å›å½’èŒƒå›´ã€å¦‚ä½•ç»Ÿè®¡ç›¸ä¼¼å‡½æ•°ä»¥æå‡ä»£ç è´¨é‡ç­‰ã€‚æ€»ä¹‹æˆ‘çš„é¢è¯•ä¸­ï¼Œå¯èƒ½ä¼šé—®å¾ˆå¤šåŸç†æ€§é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬èŠçš„æ¥ï¼Œé‚£æˆ‘è§‰å¾—ä½ å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç§å€™é€‰äººã€‚</p>\n<h3 id=\"ä»£ç èƒ½åŠ›\"><a href=\"#ä»£ç èƒ½åŠ›\" class=\"headerlink\" title=\"ä»£ç èƒ½åŠ›\"></a>ä»£ç èƒ½åŠ›</h3><p>æˆ‘çš„é¢è¯•ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä»£ç é¢˜ï¼Œé¢˜ç›®ä¸éš¾ï¼Œéƒ½æ˜¯leetcodeä¸­ç®€å•é¢˜ç›®ã€‚è€ƒä»£ç èƒ½åŠ›çš„ä¸»è¦ç›®çš„ï¼Œä¸æ˜¯ä¸ºäº†è€ƒçš„ä½ ä¸ä¼šï¼Œè€Œæ˜¯çœ‹ä½ çš„ä»£ç èƒ½åŠ›è¿‡ä¸è¿‡å…³ï¼Œä¸»è¦çœ‹ä½ çš„ä»£ç é€Ÿåº¦ã€ä»£ç æ€è·¯ã€ä»£ç è§„èŒƒç­‰ï¼Œé€šè¿‡ä½ å†™ä»£ç ï¼Œå¤§æ¦‚èƒ½äº†è§£ä½ çš„ä»£ç èƒ½åŠ›ï¼Œç”šè‡³ä½ çš„æ€§æ ¼ã€‚å› ä¸ºä¸ªåˆ«å€™é€‰äººï¼Œç†è®ºçŸ¥è¯†ç¡®å®ä¸é”™ï¼Œè¿›æ¥å†™é¡¹ç›®éœ€æ±‚çš„æ—¶å€™ï¼Œå·¨æ…¢ï¼Œè¿™ç§å°±æ˜¯ä»£ç ä¸è¿‡å…³å¯¼è‡´çš„é—®é¢˜ã€‚</p>\n<h3 id=\"è½¯æ€§æŠ€èƒ½\"><a href=\"#è½¯æ€§æŠ€èƒ½\" class=\"headerlink\" title=\"è½¯æ€§æŠ€èƒ½\"></a>è½¯æ€§æŠ€èƒ½</h3><p>è½¯æ€§æŠ€èƒ½çš„è¯ï¼Œå¯¹äºå€™é€‰äººæ¥è¯´ï¼Œå¯èƒ½æ¯”è¾ƒå¥½ç­”ä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿåˆ†å¥½åã€‚è¿™ä¸ªå°±æ˜¯ä¸»è¦è§‚å¯Ÿä¸€äº›å€™é€‰äººçš„æ²Ÿé€šèƒ½åŠ›ã€æ€§æ ¼ä¹‹ç±»çš„ï¼Œå¯èƒ½æ›´å…·å€™é€‰äººçš„æ€§æ ¼ï¼Œä¹Ÿéœ€è¦å®‰æ’ä¸åŒçš„å·¥ä½œï¼Œæ¯”å¦‚å†…å‘ä¸€ç‚¹éƒ½ï¼Œå¯èƒ½ä¼šæ“…é•¿åæŠ€æœ¯æ”»å…³ä¹‹ç±»çš„å·¥ä½œï¼Œå› ä¸ºåå†…å‘çš„äººï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€å®šçš„è€åŠ›æˆ–è€…è€æ€§ã€‚å¯¹äºä¹è§‚å¼€æœ—ä¸€ç‚¹çš„å€™é€‰äººï¼Œä¼šé€‚åˆåšä¸€äº›éœ€æ±‚è”åŠ¨çš„å·¥ä½œï¼Œå› ä¸ºä»–æ“…äºå’Œå„ç§äººï¼ˆæµ‹è¯•ã€äº§å“ï¼‰æ²Ÿé€šï¼Œä¹Ÿä¼šä¿ƒè¿›å·¥ä½œæ›´å¥½çš„å®Œæˆã€‚<br>å¦å¤–å°±æ˜¯çœ‹çœ‹ä»–çš„ä¸€äº›å­¦ä¹ æ¸ é“ï¼Œæ¯”å¦‚å–œæ¬¢çœ‹å‡¯æºçš„ä¸€äº›æŠ€æœ¯æˆ–è€…æ¡†æ¶ï¼Œé‚£å¯ä»¥çœ‹åˆ°è¿™æ ·çš„å€™é€‰äººå¯¹æŠ€æœ¯è¿˜æ˜¯æœ‰çƒ­æƒ…çš„ã€‚å–œæ¬¢çœ‹ä¹¦ã€çœ‹åšå®¢ï¼Œè¿™æ ·çš„å€™é€‰äººä¹Ÿæ˜¯å–œæ¬¢å­¦ä¹ çš„ï¼Œåƒè¿™æ ·çš„å€™é€‰äººï¼Œæˆ‘ä¹Ÿæ¯”è¾ƒé’çã€‚</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>æˆ‘è§‰å¾—ä»¥ä¸Šå‡ ä¸ªæ–¹é¢åšçš„ä¸é”™çš„åŒå­¦ï¼Œæˆ‘è§‰å¾—å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç±»å€™é€‰äººã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<p>å…¶å®ä½œä¸ºé¢è¯•å®˜æœ‰å‡ å¹´äº†ï¼Œåœ¨ç¬¬ä¸€å®¶å…¬å¸2016å¹´çš„æ—¶å€™ï¼Œå°±å¼€å§‹è¿™æ–¹é¢å·¥ä½œäº†ï¼Œè¿™å‡ å¹´çš„é¢è¯•ç»å†ä¸­ï¼Œé‡åˆ°çš„å¤šæ•°å€™é€‰äººæ™®æ™®é€šé€šï¼Œå½“ç„¶ä¹Ÿé‡åˆ°è¿‡ä¼˜ç§€çš„ï¼Œä½†æ˜¯éå¸¸å°‘ã€‚å…¶å®ä½œä¸ºé¢è¯•å®˜ï¼Œæˆ‘æ˜¯éå¸¸ä¸èµæˆæŠ›å¼€ç®€å†ä¸­çš„é¡¹ç›®ï¼Œç›´æ¥å„ç§å…«è‚¡æ–‡å»è€ƒå¯Ÿå€™é€‰äººï¼Œè¿™æ ·çš„é¢è¯•æ˜¯ç‰‡é¢çš„ï¼Œè¿˜æœ‰ä¸€äº›é¢è¯•å®˜ï¼Œä¹Ÿæ˜¯æŠ›å¼€å€™é€‰äººç®€å†ï¼Œåªé—®é¢è¯•å®˜è‡ªå·±ä¼šçš„ã€‚æˆ‘è§‰å¾—åƒè¿™äº›é¢è¯•å®˜ï¼Œä»–æœ¬èº«çš„æŠ€èƒ½å°±ä¸æ˜¯å¾ˆæ‰å®ï¼Œä¸æ˜¯åˆæ ¼çš„é¢è¯•å®˜ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šæ—¶å€™ï¼Œå…¬å¸éœ€è¦å¤§é‡æ‹›äººï¼Œå°±ä¼šè®©ä¸€äº›çº§åˆ«ä¸é«˜çš„åŒå­¦ä¹Ÿå»åšé¢è¯•å®˜ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘å°±è°ˆè°ˆï¼Œæˆ‘å¿ƒç›®ä¸­ä¼˜ç§€çš„å€™é€‰äººï¼Œæ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p>\n<h3 id=\"ç®€å†\"><a href=\"#ç®€å†\" class=\"headerlink\" title=\"ç®€å†\"></a>ç®€å†</h3><p>ç®€å†å¾ˆé‡è¦ï¼Œæˆ‘äº†è§£å€™é€‰äººçš„æ•´ä½“æƒ…å†µï¼Œç¬¬ä¸€å°è±¡éƒ½æ¥è‡ªäºå€™é€‰äººçš„ç®€å†ã€‚ç®€å†å¦‚æœæ²¡æœ‰äº®ç‚¹ï¼ŒæŒ‰ç…§æˆ‘çš„ç»éªŒï¼Œå¤šå°‘æƒ…å†µæœ€ç»ˆçš„ç»“æœéƒ½æ˜¯failã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹åƒç¯‡ä¸€å¾‹çš„ç®€å†ï¼Œå¦‚ä¸‹ï¼š<br><img src=\"/images/interview/jianli1.png\" width=\"50%\"><br>è¿™ä¸ªå€™é€‰äººï¼Œå·¥ä½œ4å¹´ï¼Œå…¶å®ä¹Ÿä¸çŸ­ï¼Œä¸“ä¸šæŠ€èƒ½å†™çš„å¾ˆæ³›æ³›ï¼Œé¢æ¯”è¾ƒå¹¿ï¼Œè¿™äº›æŠ€èƒ½éƒ½å­¦çš„æ€ä¹ˆæ ·ï¼Œé€šè¿‡ç®€å†è¿˜æ˜¯çœ‹ä¸å‡ºæ¥ï¼Œéœ€è¦é¢è¯•ä¸­æ²Ÿé€šã€‚å¦å¤–å†çœ‹é¡¹ç›®ï¼Œå°±æ˜¯æ™®é€šçš„å‰ç«¯é¡¹ç›®ï¼Œä¹Ÿçœ‹ä¸åˆ°ä»»ä½•çš„éš¾ç‚¹å’Œäº®ç‚¹ã€‚æ‰€ä»¥ï¼Œåƒè¿™ç§ç®€å†ï¼Œç¬¬ä¸€å°è±¡éƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚æœå­¦æ ¡ã€å·¥ä½œç»å†éƒ½ä¸å¥½çš„æƒ…å†µä¸‹ï¼Œç®€å†åŸºæœ¬è¿‡ä¸äº†ã€‚<br>é‚£ä¹ˆä»€ä¹ˆæ ·çš„ç®€å†æ˜¯æœ‰äº®ç‚¹çš„å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªï¼š<br><img src=\"/images/interview/jianli2.png\" width=\"50%\"><br>é¦–å…ˆä¸ªäººä¼˜åŠ¿æ¯”è¾ƒçªå‡ºï¼Œæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®çš„ä¸»è¦è´Ÿè´£äººï¼Œå¹¶ä¸”æ˜¯vue-routerçš„Contributorï¼Œå¦å¤–åœ¨æå®¢å¸®åšè¿‡æŠ€æœ¯åˆ†äº«ï¼Œè¿™å‡ ç‚¹å°±å¾ˆå¤šäººåšä¸åˆ°çš„äº†ã€‚è¿™å°±æ˜¯äº®ç‚¹ï¼æˆ‘ä»¬ä¸ºä»€ä¹ˆå–œæ¬¢å¯¹å¼€æºç¤¾åŒºæœ‰è´¡çŒ®çš„å€™é€‰äººå‘¢ï¼Œå› ä¸ºä¸€èˆ¬å¼€æºç¤¾åŒºä¸­æ¯”è¾ƒçŸ¥åçš„æ¡†æ¶æˆ–è€…æŠ€æœ¯éƒ½æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ï¼Œéƒ½æ˜¯ä»æ¶æ„è®¾è®¡åˆ°å®ç°ï¼Œæ˜¯å€¼å¾—æˆ‘ä»¬å¾ˆå¤šäººå»å­¦ä¹ çš„ï¼Œæ‰€ä»¥å®ƒå‡ºåï¼Œè€Œå¯¹äºè¿™äº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®æœ‰å…±äº«çš„åŒå­¦ï¼Œä»–ä»¬å¯¹å…¶å®ç°è‚¯å®šæ˜¯äº†è§£ç”šè‡³æŒæ¡çš„ï¼Œè€Œè¿™å°±æ˜¯ä½“ç°å‡ºäº†å€™é€‰äººçš„å®åŠ›ã€‚<br>ä¸€ä¸ªäººçš„äº®ç‚¹å¯ä»¥æ˜¯æ–¹æ–¹é¢é¢çš„ï¼Œæ¯”å¦‚æ›¾ç»å†™è¿‡ã€Šxxxã€‹ä¹¦ç±ï¼Œåœ¨å…¬å¸ç”³è¯·è¿‡ã€Šxxxã€‹ä¸“åˆ©ï¼Œç”šè‡³ä½ åœ¨leetcodeä¸Šæ¶®äº†200é“é¢˜éƒ½æ˜¯ä½ çš„äº®ç‚¹ï¼Œå¦‚æœä½ è¯´æˆ‘å°±æ˜¯æ²¡æœ‰äº®ç‚¹ï¼Œé‚£æˆ‘è§‰å¾—å°±æ˜¯æ‡’ï¼Œè¡ŒåŠ¨ä¸Šå’Œæ€æƒ³ä¸Šéƒ½æ‡’ã€‚é‚£ä¸ºå•¥ä¼˜ç§€çš„é‚£ä¸ªäººä¸å¯ä»¥æ˜¯ä½ å‘¢ï¼Ÿ</p>\n<h3 id=\"æŠ€èƒ½\"><a href=\"#æŠ€èƒ½\" class=\"headerlink\" title=\"æŠ€èƒ½\"></a>æŠ€èƒ½</h3><p>æˆ‘ä¸€èˆ¬åœ¨é¢è¯•ä¸­ï¼Œé™¤äº†è®¡ç®—æœºåŸºç¡€ä¹‹å¤–ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¼šæŒ‰ç…§å€™é€‰äººçš„ç®€å†å»èŠï¼Œç”±æµ…å…¥æ·±ï¼Œæ¢ç´¢å€™é€‰äººçš„æ·±åº¦ï¼Œæ¯”å¦‚å€™é€‰äººä¸»è¦ç”¨çš„æŠ€æœ¯æ ˆæ˜¯reactï¼Œé‚£æˆ‘ä¼šå…ˆèŠä¸€ä¸‹reactçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸã€ä¸€äº›å‰¯ä½œç”¨çš„æ“ä½œåœ¨å“ªé‡Œå†™æ¯”è¾ƒåˆé€‚ã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šé—®ä¸€äº›reactä¼˜åŒ–çš„é—®é¢˜ï¼Œhooksçš„ä½¿ç”¨ã€‚å¦‚æœå€™é€‰äººç­”çš„ä¸é”™ï¼Œæˆ‘è¿˜ä¼šå¾€åŸç†ä¸ŠèŠï¼Œæ¯”å¦‚å¦‚æœè¦å®ç°ä¸€ä¸ªxxxéœ€æ±‚ï¼Œå¦‚ä½•å†™ä¸€ä¸ªè‡ªå®šä¹‰hooksã€‚å†å¾€æ·±èŠï¼Œå°±ä¼šèŠåˆ°reactè®¾è®¡ã€æºç è¿™éƒ¨åˆ†ï¼Œå¦‚æœå€™é€‰äººèƒ½æŠŠæ‰€æœ‰é—®é¢˜éƒ½ç­”çš„éå¸¸å¥½ï¼Œé‚£å°±æ˜¯ç‰›æ‰¹çš„å€™é€‰äººã€‚è¿™æ˜¯æ·±åº¦ã€‚å¦å¤–ä¹Ÿä¼šæ¢ç´¢ä¸€ä¸‹å€™é€‰äººçš„å¹¿åº¦ï¼Œæ¯”å¦‚è·³å‡ºæµè§ˆå™¨ä¼šé—®ä¸€äº›å…¶ä»–çš„æŠ€èƒ½ï¼Œæ¯”å¦‚nodejsã€æ•°æ®åº“ã€è¿ç»´ç›¸å…³çš„ï¼Œå¦‚æœå€™é€‰äººå¹³æ—¶åç«¯éœ€æ±‚ä¹Ÿå†™ï¼Œé‚£å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œè¿™æ ·çš„å€™é€‰äººæœ‰ä¸ªä¼˜åŠ¿å°±æ˜¯é¢å¯¹ä¸€äº›å¤æ‚çš„åœºæ™¯éœ€æ±‚æ—¶ï¼Œå¯ä»¥è‡ªå·±æå®šï¼Œè¿›æ¥ä¹Ÿå¥½å¸¦ï¼Œä¸ç”¨ç‰¹åˆ«è´¹åŠ²ã€‚å¦‚æœæŠ€æœ¯çš„æ·±åº¦å’Œå¹¿åº¦éƒ½æ²¡é—®é¢˜çš„è¯ï¼Œæˆ‘å¯èƒ½è¿˜ä¼šé—®ä¸€äº›è§£å†³æ–¹æ¡ˆçš„æ€è·¯ï¼Œæ¯”å¦‚ä¸€äº›å·¥ç¨‹åŒ–é—®é¢˜ï¼Œå¦‚ä½•åˆ†æå…¬å…±ä¾èµ–ï¼Œç¡®å®šå‰ç«¯é¡µé¢çš„å›å½’èŒƒå›´ã€å¦‚ä½•ç»Ÿè®¡ç›¸ä¼¼å‡½æ•°ä»¥æå‡ä»£ç è´¨é‡ç­‰ã€‚æ€»ä¹‹æˆ‘çš„é¢è¯•ä¸­ï¼Œå¯èƒ½ä¼šé—®å¾ˆå¤šåŸç†æ€§é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬èŠçš„æ¥ï¼Œé‚£æˆ‘è§‰å¾—ä½ å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç§å€™é€‰äººã€‚</p>\n<h3 id=\"ä»£ç èƒ½åŠ›\"><a href=\"#ä»£ç èƒ½åŠ›\" class=\"headerlink\" title=\"ä»£ç èƒ½åŠ›\"></a>ä»£ç èƒ½åŠ›</h3><p>æˆ‘çš„é¢è¯•ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä»£ç é¢˜ï¼Œé¢˜ç›®ä¸éš¾ï¼Œéƒ½æ˜¯leetcodeä¸­ç®€å•é¢˜ç›®ã€‚è€ƒä»£ç èƒ½åŠ›çš„ä¸»è¦ç›®çš„ï¼Œä¸æ˜¯ä¸ºäº†è€ƒçš„ä½ ä¸ä¼šï¼Œè€Œæ˜¯çœ‹ä½ çš„ä»£ç èƒ½åŠ›è¿‡ä¸è¿‡å…³ï¼Œä¸»è¦çœ‹ä½ çš„ä»£ç é€Ÿåº¦ã€ä»£ç æ€è·¯ã€ä»£ç è§„èŒƒç­‰ï¼Œé€šè¿‡ä½ å†™ä»£ç ï¼Œå¤§æ¦‚èƒ½äº†è§£ä½ çš„ä»£ç èƒ½åŠ›ï¼Œç”šè‡³ä½ çš„æ€§æ ¼ã€‚å› ä¸ºä¸ªåˆ«å€™é€‰äººï¼Œç†è®ºçŸ¥è¯†ç¡®å®ä¸é”™ï¼Œè¿›æ¥å†™é¡¹ç›®éœ€æ±‚çš„æ—¶å€™ï¼Œå·¨æ…¢ï¼Œè¿™ç§å°±æ˜¯ä»£ç ä¸è¿‡å…³å¯¼è‡´çš„é—®é¢˜ã€‚</p>\n<h3 id=\"è½¯æ€§æŠ€èƒ½\"><a href=\"#è½¯æ€§æŠ€èƒ½\" class=\"headerlink\" title=\"è½¯æ€§æŠ€èƒ½\"></a>è½¯æ€§æŠ€èƒ½</h3><p>è½¯æ€§æŠ€èƒ½çš„è¯ï¼Œå¯¹äºå€™é€‰äººæ¥è¯´ï¼Œå¯èƒ½æ¯”è¾ƒå¥½ç­”ä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿåˆ†å¥½åã€‚è¿™ä¸ªå°±æ˜¯ä¸»è¦è§‚å¯Ÿä¸€äº›å€™é€‰äººçš„æ²Ÿé€šèƒ½åŠ›ã€æ€§æ ¼ä¹‹ç±»çš„ï¼Œå¯èƒ½æ›´å…·å€™é€‰äººçš„æ€§æ ¼ï¼Œä¹Ÿéœ€è¦å®‰æ’ä¸åŒçš„å·¥ä½œï¼Œæ¯”å¦‚å†…å‘ä¸€ç‚¹éƒ½ï¼Œå¯èƒ½ä¼šæ“…é•¿åæŠ€æœ¯æ”»å…³ä¹‹ç±»çš„å·¥ä½œï¼Œå› ä¸ºåå†…å‘çš„äººï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€å®šçš„è€åŠ›æˆ–è€…è€æ€§ã€‚å¯¹äºä¹è§‚å¼€æœ—ä¸€ç‚¹çš„å€™é€‰äººï¼Œä¼šé€‚åˆåšä¸€äº›éœ€æ±‚è”åŠ¨çš„å·¥ä½œï¼Œå› ä¸ºä»–æ“…äºå’Œå„ç§äººï¼ˆæµ‹è¯•ã€äº§å“ï¼‰æ²Ÿé€šï¼Œä¹Ÿä¼šä¿ƒè¿›å·¥ä½œæ›´å¥½çš„å®Œæˆã€‚<br>å¦å¤–å°±æ˜¯çœ‹çœ‹ä»–çš„ä¸€äº›å­¦ä¹ æ¸ é“ï¼Œæ¯”å¦‚å–œæ¬¢çœ‹å‡¯æºçš„ä¸€äº›æŠ€æœ¯æˆ–è€…æ¡†æ¶ï¼Œé‚£å¯ä»¥çœ‹åˆ°è¿™æ ·çš„å€™é€‰äººå¯¹æŠ€æœ¯è¿˜æ˜¯æœ‰çƒ­æƒ…çš„ã€‚å–œæ¬¢çœ‹ä¹¦ã€çœ‹åšå®¢ï¼Œè¿™æ ·çš„å€™é€‰äººä¹Ÿæ˜¯å–œæ¬¢å­¦ä¹ çš„ï¼Œåƒè¿™æ ·çš„å€™é€‰äººï¼Œæˆ‘ä¹Ÿæ¯”è¾ƒé’çã€‚</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>æˆ‘è§‰å¾—ä»¥ä¸Šå‡ ä¸ªæ–¹é¢åšçš„ä¸é”™çš„åŒå­¦ï¼Œæˆ‘è§‰å¾—å°±æ˜¯æˆ‘å–œæ¬¢çš„é‚£ç±»å€™é€‰äººã€‚</p>\n"},{"title":"æ­ä¸€ä¸ªå°çª","comments":1,"copyright":false,"toc":true,"_content":"åŠ å…¥å­—èŠ‚è·³åŠ¨å·²ç»åŠå¹´å¤šäº†ï¼Œåç»­å¤šåšä¸€äº›æŠ€æœ¯ç§¯ç´¯ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæ­å»ºä¸€ä¸ªå°çªï¼Œè®°å½•ä¸€äº›è‡ªå·±çš„æ€æƒ³ï¼Œå¯èƒ½æ˜¯æŠ€æœ¯ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰¯æ·¡ã€‚<!--more-->ä¸ºçš„å°±æ˜¯ä»¥åå¯ä»¥å†å›å¿†å›å¿†è¿™æ®µæ—¶å…‰ã€‚å“ªæ€•ä»¥åä¸åœ¨äº’è”ç½‘å·¥ä½œäº†ï¼Œæœ‰æ—¶é—´ä¹Ÿèƒ½å†çœ‹çœ‹æ›¾ç»èµ°è¿‡çš„è¿™æ®µè·¯ç¨‹ã€‚\n\n\n\n\n\n\n","source":"_posts/my-heart/index.md","raw":"---\ntitle: æ­ä¸€ä¸ªå°çª\ncategories: æ‚è°ˆ\ntags: [Talking to oneself]\ncomments: true\ncopyright: false\ntoc: true\n---\nåŠ å…¥å­—èŠ‚è·³åŠ¨å·²ç»åŠå¹´å¤šäº†ï¼Œåç»­å¤šåšä¸€äº›æŠ€æœ¯ç§¯ç´¯ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæ­å»ºä¸€ä¸ªå°çªï¼Œè®°å½•ä¸€äº›è‡ªå·±çš„æ€æƒ³ï¼Œå¯èƒ½æ˜¯æŠ€æœ¯ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰¯æ·¡ã€‚<!--more-->ä¸ºçš„å°±æ˜¯ä»¥åå¯ä»¥å†å›å¿†å›å¿†è¿™æ®µæ—¶å…‰ã€‚å“ªæ€•ä»¥åä¸åœ¨äº’è”ç½‘å·¥ä½œäº†ï¼Œæœ‰æ—¶é—´ä¹Ÿèƒ½å†çœ‹çœ‹æ›¾ç»èµ°è¿‡çš„è¿™æ®µè·¯ç¨‹ã€‚\n\n\n\n\n\n\n","slug":"my-heart/index","published":1,"date":"2021-07-15T12:36:19.443Z","updated":"2021-12-28T12:40:56.262Z","layout":"post","photos":[],"link":"","_id":"ckxq3m94s000hkudoqi8694ky","content":"<p>åŠ å…¥å­—èŠ‚è·³åŠ¨å·²ç»åŠå¹´å¤šäº†ï¼Œåç»­å¤šåšä¸€äº›æŠ€æœ¯ç§¯ç´¯ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæ­å»ºä¸€ä¸ªå°çªï¼Œè®°å½•ä¸€äº›è‡ªå·±çš„æ€æƒ³ï¼Œå¯èƒ½æ˜¯æŠ€æœ¯ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰¯æ·¡ã€‚<a id=\"more\"></a>ä¸ºçš„å°±æ˜¯ä»¥åå¯ä»¥å†å›å¿†å›å¿†è¿™æ®µæ—¶å…‰ã€‚å“ªæ€•ä»¥åä¸åœ¨äº’è”ç½‘å·¥ä½œäº†ï¼Œæœ‰æ—¶é—´ä¹Ÿèƒ½å†çœ‹çœ‹æ›¾ç»èµ°è¿‡çš„è¿™æ®µè·¯ç¨‹ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>åŠ å…¥å­—èŠ‚è·³åŠ¨å·²ç»åŠå¹´å¤šäº†ï¼Œåç»­å¤šåšä¸€äº›æŠ€æœ¯ç§¯ç´¯ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæ­å»ºä¸€ä¸ªå°çªï¼Œè®°å½•ä¸€äº›è‡ªå·±çš„æ€æƒ³ï¼Œå¯èƒ½æ˜¯æŠ€æœ¯ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰¯æ·¡ã€‚","more":"ä¸ºçš„å°±æ˜¯ä»¥åå¯ä»¥å†å›å¿†å›å¿†è¿™æ®µæ—¶å…‰ã€‚å“ªæ€•ä»¥åä¸åœ¨äº’è”ç½‘å·¥ä½œäº†ï¼Œæœ‰æ—¶é—´ä¹Ÿèƒ½å†çœ‹çœ‹æ›¾ç»èµ°è¿‡çš„è¿™æ®µè·¯ç¨‹ã€‚</p>"},{"title":"åŸå‹é“¾æ”»å‡»","comments":1,"copyright":true,"toc":true,"_content":"\nå®‰å…¨é—®é¢˜æ˜¯å…¬å¸éå¸¸é‡è§†çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨æˆ‘é¢è¯•è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå€™é€‰äººåªçŸ¥é“xssã€csrfè¿™ä¸¤ç§ï¼Œå› ä¸ºå¤šæ•°é¢ç»ä¸­ï¼Œåªä¼šæåˆ°è¿™ä¸¤ç§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œè¿˜æ˜¯å¾ˆå°‘è€ƒè™‘å®‰å…¨é—®é¢˜çš„ã€‚ç”±äºæœ¬äººåœ¨å…¬å¸è´Ÿè´£å·¥ç¨‹åŒ–å»ºè®¾ç›¸å…³å·¥ä½œï¼Œä¼šæ¶‰åŠåˆ°é¡¹ç›®çš„å®‰å…¨æ¼æ´æ£€æµ‹ï¼Œæ‰€ä»¥åç»­å¤šå†™ä¸€äº›ç›¸å…³çš„æ–‡ç« ã€‚\nä»Šå¤©èŠçš„æ˜¯åŸå‹é“¾æ±¡æŸ“æ”»å‡»é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆä»¥ä¸€ä¸ªéå¸¸ç®€å•çš„ç¨‹åºå…¥æ‰‹ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨JavaScriptä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª__proto__å±æ€§ï¼Œå®ƒæ˜¯æŒ‡å‘Object.prototypeçš„ï¼Œåƒè¿™æ ·ï¼š\n```\nlet obj = {};\nconsole.log(obj.__proto__ === Object.prototype); // true\n```\n\næœ‰äº†è¿™ä¸ªå‰ç½®çŸ¥è¯†åï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸‹é¢çš„ç¨‹åºä¼šè¾“å‡ºä»€ä¹ˆã€‚\n```\nlet obj = {};\nobj.__proto__.name = 'obj';\nconsole.log(obj.name); // è¿™ä¸ªå¾ˆæ˜æ˜¾ï¼Œæ˜¯obj\n\nlet newObj = {};\nconsole.log(newObj.name); // ???\n\n```\næ‰§è¡Œåï¼Œä½ ä¼šå‘ç°ï¼ŒnewObj.nameä¹Ÿä¸ºobjï¼ä»€ä¹ˆæƒ…å†µï¼Œæˆ‘æ–°å®šä¹‰çš„newObjå¯¹è±¡ï¼Œå±…ç„¶å¯ä»¥è¾“å‡ºnameå±æ€§ï¼Ÿï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“ã€‚**åŸå› å°±æ˜¯ï¼šæ”¹obj.__proto__,å…¶å®å°±æ˜¯æ”¹äº†Object.prototype,è€ŒnewObjçš„__proto__ä¹Ÿæ˜¯æŒ‡å‘Object.prototypeï¼Œè¿™æ ·Objectçš„åŸå‹å¯¹è±¡è¢«å·å·æ”¹äº†ï¼Œå¯¼è‡´åé¢çš„å¯¹è±¡ä¸çŸ¥é“ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“çš„å®è´¨**\n\nè¿™ç§æ¼æ´ä¸€èˆ¬ä¼šå‡ºç°åœ¨ç±»ä¼¼mergeæ“ä½œä¸­ï¼Œè€Œå¾ˆå¤šå·¥å…·åº“å°±æä¾›mergeæ–¹æ³•ï¼Œä¹‹å‰lodashå°±å­˜åœ¨è¿‡åŸå‹é“¾æ¼æ´é—®é¢˜ï¼Œåæ¥ä¿®å¤äº†ï¼Œå¦‚æœå­˜åœ¨æ¼æ´ï¼Œæœ‰äº›äººå°±ä¼šæ•…æ„å¾€åŸå‹é“¾ä¸Šmergeä¸€äº›å…·æœ‰å±é™©çš„å±æ€§ï¼Œç»™ç³»ç»Ÿå¸¦æ¥å±æœºã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„mergeå‡½æ•°ï¼š\n```\nfunction merge(target, source) {\n  for (let key in source) {\n    if (key in source && key in target) {\n      merge(target[key], source[key])\n    } else {\n      target[key] = source[key]\n    }\n  }\n}\n```\næˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼š\n```\nlet o1 = {}\nlet o2 = {a: 1, \"__proto__\": {b: 2}}\nmerge(o1, o2)\nconsole.log(o1.a, o1.b) // 1 2\n\no3 = {}\nconsole.log(o3.b) // undefined\n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¹ˆæï¼Œæ˜¯æ²¡æœ‰æ±¡æŸ“çš„ï¼ŒåŸå› æ˜¯o2è¿™ä¹ˆå®šä¹‰ï¼Œ__proto__ä¼šç›´æ¥æ”¾åœ¨åŸå‹é“¾ä¸Šï¼Œä¸ä¼šå½“ä½œo2çš„å±æ€§ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š\no2.__proto__ ==> { b: 2, __proto__: Object.prototype}ï¼Œè€Œfor inæ˜¯èƒ½å¤Ÿéå†åˆ°åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥ä¼šç›´æ¥åœ¨o1ä¸­å¢åŠ å±æ€§bä¸º2ã€‚åŠ å…¥è¿™ä¹ˆå†™ä¼šæ˜¯å•¥æ ·ï¼Œçœ‹ä»£ç ï¼š\n```\nlet o1 = {}\nlet o2 = JSON.parse('{\"a\": 1, \"__proto__\": {\"b\": 2}}')\nmerge(o1, o2)\nconsole.log(o1.a, o1.b) // 1 2\n\no3 = {}\nconsole.log(o3.b) // 2\n```\nè¿™ä¹ˆå†™å°±æ±¡æŸ“äº†ï¼Œå› ä¸ºè¿™ä¹ˆå†™ï¼Œ__proto__ä¼šå½“ä½œo2çš„ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯è¿™æ ·çš„ï¼š\n```\no2 = {\n  a: 1,\n  __proto__: {\n    b: 2\n  }\n}\n```\nè¿™ä¹ˆä¼šè®©o1.__proto__ = {b: 2},è€Œo1çš„__proto__å°±æ˜¯Object.prototypeï¼Œéšæ„å°±ä¼šå¯¼è‡´Objectçš„åŸå‹å¯¹è±¡è¢«æ‚„æ‚„çš„æ”¹äº†ã€‚\n\nå¦‚ä½•ç¼“è§£åŸå‹é“¾æ¼æ´å‘¢ï¼Ÿè¿™é‡Œæä¾›äº†å‡ ç§æ–¹å¼å¯å‚è€ƒï¼š\n> Object.freeze å°†ç¼“è§£å‡ ä¹æ‰€æœ‰æƒ…å†µã€‚å†»ç»“ Object é˜»æ­¢æ·»åŠ æ–°çš„ Prototypeã€‚\n> ä½¿ç”¨æ¨¡å¼éªŒè¯ç¡®ä¿ JSON æ•°æ®åŒ…å«é¢„æœŸå±æ€§ï¼Œä»è€Œåˆ é™¤ JSON ä¸­å‡ºç°çš„ _proto_ã€‚\n> ä½¿ç”¨æ˜ å°„åŸè¯­ã€‚å®ƒåœ¨ EcmaScript6 æ ‡å‡†ä¸­å¼•å…¥ï¼Œç›®å‰åœ¨ NodeJS ç¯å¢ƒä¸­å¤‡å—æ”¯æŒã€‚\n> ä½¿ç”¨ Object.create(null) å‡½æ•°åˆ›å»ºçš„Objects ä¸å…·æœ‰ _proto_ å±æ€§ã€‚","source":"_posts/security/prototype.md","raw":"---\ntitle: åŸå‹é“¾æ”»å‡»\ncategories: å®‰å…¨\ntags: [Security]\ncomments: true\ncopyright: true\ntoc: true\n---\n\nå®‰å…¨é—®é¢˜æ˜¯å…¬å¸éå¸¸é‡è§†çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨æˆ‘é¢è¯•è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå€™é€‰äººåªçŸ¥é“xssã€csrfè¿™ä¸¤ç§ï¼Œå› ä¸ºå¤šæ•°é¢ç»ä¸­ï¼Œåªä¼šæåˆ°è¿™ä¸¤ç§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œè¿˜æ˜¯å¾ˆå°‘è€ƒè™‘å®‰å…¨é—®é¢˜çš„ã€‚ç”±äºæœ¬äººåœ¨å…¬å¸è´Ÿè´£å·¥ç¨‹åŒ–å»ºè®¾ç›¸å…³å·¥ä½œï¼Œä¼šæ¶‰åŠåˆ°é¡¹ç›®çš„å®‰å…¨æ¼æ´æ£€æµ‹ï¼Œæ‰€ä»¥åç»­å¤šå†™ä¸€äº›ç›¸å…³çš„æ–‡ç« ã€‚\nä»Šå¤©èŠçš„æ˜¯åŸå‹é“¾æ±¡æŸ“æ”»å‡»é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆä»¥ä¸€ä¸ªéå¸¸ç®€å•çš„ç¨‹åºå…¥æ‰‹ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨JavaScriptä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª__proto__å±æ€§ï¼Œå®ƒæ˜¯æŒ‡å‘Object.prototypeçš„ï¼Œåƒè¿™æ ·ï¼š\n```\nlet obj = {};\nconsole.log(obj.__proto__ === Object.prototype); // true\n```\n\næœ‰äº†è¿™ä¸ªå‰ç½®çŸ¥è¯†åï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸‹é¢çš„ç¨‹åºä¼šè¾“å‡ºä»€ä¹ˆã€‚\n```\nlet obj = {};\nobj.__proto__.name = 'obj';\nconsole.log(obj.name); // è¿™ä¸ªå¾ˆæ˜æ˜¾ï¼Œæ˜¯obj\n\nlet newObj = {};\nconsole.log(newObj.name); // ???\n\n```\næ‰§è¡Œåï¼Œä½ ä¼šå‘ç°ï¼ŒnewObj.nameä¹Ÿä¸ºobjï¼ä»€ä¹ˆæƒ…å†µï¼Œæˆ‘æ–°å®šä¹‰çš„newObjå¯¹è±¡ï¼Œå±…ç„¶å¯ä»¥è¾“å‡ºnameå±æ€§ï¼Ÿï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“ã€‚**åŸå› å°±æ˜¯ï¼šæ”¹obj.__proto__,å…¶å®å°±æ˜¯æ”¹äº†Object.prototype,è€ŒnewObjçš„__proto__ä¹Ÿæ˜¯æŒ‡å‘Object.prototypeï¼Œè¿™æ ·Objectçš„åŸå‹å¯¹è±¡è¢«å·å·æ”¹äº†ï¼Œå¯¼è‡´åé¢çš„å¯¹è±¡ä¸çŸ¥é“ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“çš„å®è´¨**\n\nè¿™ç§æ¼æ´ä¸€èˆ¬ä¼šå‡ºç°åœ¨ç±»ä¼¼mergeæ“ä½œä¸­ï¼Œè€Œå¾ˆå¤šå·¥å…·åº“å°±æä¾›mergeæ–¹æ³•ï¼Œä¹‹å‰lodashå°±å­˜åœ¨è¿‡åŸå‹é“¾æ¼æ´é—®é¢˜ï¼Œåæ¥ä¿®å¤äº†ï¼Œå¦‚æœå­˜åœ¨æ¼æ´ï¼Œæœ‰äº›äººå°±ä¼šæ•…æ„å¾€åŸå‹é“¾ä¸Šmergeä¸€äº›å…·æœ‰å±é™©çš„å±æ€§ï¼Œç»™ç³»ç»Ÿå¸¦æ¥å±æœºã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„mergeå‡½æ•°ï¼š\n```\nfunction merge(target, source) {\n  for (let key in source) {\n    if (key in source && key in target) {\n      merge(target[key], source[key])\n    } else {\n      target[key] = source[key]\n    }\n  }\n}\n```\næˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼š\n```\nlet o1 = {}\nlet o2 = {a: 1, \"__proto__\": {b: 2}}\nmerge(o1, o2)\nconsole.log(o1.a, o1.b) // 1 2\n\no3 = {}\nconsole.log(o3.b) // undefined\n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¹ˆæï¼Œæ˜¯æ²¡æœ‰æ±¡æŸ“çš„ï¼ŒåŸå› æ˜¯o2è¿™ä¹ˆå®šä¹‰ï¼Œ__proto__ä¼šç›´æ¥æ”¾åœ¨åŸå‹é“¾ä¸Šï¼Œä¸ä¼šå½“ä½œo2çš„å±æ€§ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š\no2.__proto__ ==> { b: 2, __proto__: Object.prototype}ï¼Œè€Œfor inæ˜¯èƒ½å¤Ÿéå†åˆ°åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥ä¼šç›´æ¥åœ¨o1ä¸­å¢åŠ å±æ€§bä¸º2ã€‚åŠ å…¥è¿™ä¹ˆå†™ä¼šæ˜¯å•¥æ ·ï¼Œçœ‹ä»£ç ï¼š\n```\nlet o1 = {}\nlet o2 = JSON.parse('{\"a\": 1, \"__proto__\": {\"b\": 2}}')\nmerge(o1, o2)\nconsole.log(o1.a, o1.b) // 1 2\n\no3 = {}\nconsole.log(o3.b) // 2\n```\nè¿™ä¹ˆå†™å°±æ±¡æŸ“äº†ï¼Œå› ä¸ºè¿™ä¹ˆå†™ï¼Œ__proto__ä¼šå½“ä½œo2çš„ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯è¿™æ ·çš„ï¼š\n```\no2 = {\n  a: 1,\n  __proto__: {\n    b: 2\n  }\n}\n```\nè¿™ä¹ˆä¼šè®©o1.__proto__ = {b: 2},è€Œo1çš„__proto__å°±æ˜¯Object.prototypeï¼Œéšæ„å°±ä¼šå¯¼è‡´Objectçš„åŸå‹å¯¹è±¡è¢«æ‚„æ‚„çš„æ”¹äº†ã€‚\n\nå¦‚ä½•ç¼“è§£åŸå‹é“¾æ¼æ´å‘¢ï¼Ÿè¿™é‡Œæä¾›äº†å‡ ç§æ–¹å¼å¯å‚è€ƒï¼š\n> Object.freeze å°†ç¼“è§£å‡ ä¹æ‰€æœ‰æƒ…å†µã€‚å†»ç»“ Object é˜»æ­¢æ·»åŠ æ–°çš„ Prototypeã€‚\n> ä½¿ç”¨æ¨¡å¼éªŒè¯ç¡®ä¿ JSON æ•°æ®åŒ…å«é¢„æœŸå±æ€§ï¼Œä»è€Œåˆ é™¤ JSON ä¸­å‡ºç°çš„ _proto_ã€‚\n> ä½¿ç”¨æ˜ å°„åŸè¯­ã€‚å®ƒåœ¨ EcmaScript6 æ ‡å‡†ä¸­å¼•å…¥ï¼Œç›®å‰åœ¨ NodeJS ç¯å¢ƒä¸­å¤‡å—æ”¯æŒã€‚\n> ä½¿ç”¨ Object.create(null) å‡½æ•°åˆ›å»ºçš„Objects ä¸å…·æœ‰ _proto_ å±æ€§ã€‚","slug":"security/prototype","published":1,"date":"2021-12-17T07:32:15.614Z","updated":"2021-12-28T12:41:04.518Z","layout":"post","photos":[],"link":"","_id":"ckxq3m94t000ikudof4wbz3kh","content":"<p>å®‰å…¨é—®é¢˜æ˜¯å…¬å¸éå¸¸é‡è§†çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨æˆ‘é¢è¯•è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå€™é€‰äººåªçŸ¥é“xssã€csrfè¿™ä¸¤ç§ï¼Œå› ä¸ºå¤šæ•°é¢ç»ä¸­ï¼Œåªä¼šæåˆ°è¿™ä¸¤ç§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œè¿˜æ˜¯å¾ˆå°‘è€ƒè™‘å®‰å…¨é—®é¢˜çš„ã€‚ç”±äºæœ¬äººåœ¨å…¬å¸è´Ÿè´£å·¥ç¨‹åŒ–å»ºè®¾ç›¸å…³å·¥ä½œï¼Œä¼šæ¶‰åŠåˆ°é¡¹ç›®çš„å®‰å…¨æ¼æ´æ£€æµ‹ï¼Œæ‰€ä»¥åç»­å¤šå†™ä¸€äº›ç›¸å…³çš„æ–‡ç« ã€‚<br>ä»Šå¤©èŠçš„æ˜¯åŸå‹é“¾æ±¡æŸ“æ”»å‡»é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆä»¥ä¸€ä¸ªéå¸¸ç®€å•çš„ç¨‹åºå…¥æ‰‹ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨JavaScriptä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª<strong>proto</strong>å±æ€§ï¼Œå®ƒæ˜¯æŒ‡å‘Object.prototypeçš„ï¼Œåƒè¿™æ ·ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let obj = &#123;&#125;;</span><br><span class=\"line\">console.log(obj.__proto__ === Object.prototype); // true</span><br></pre></td></tr></table></figure></p>\n<p>æœ‰äº†è¿™ä¸ªå‰ç½®çŸ¥è¯†åï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸‹é¢çš„ç¨‹åºä¼šè¾“å‡ºä»€ä¹ˆã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let obj = &#123;&#125;;</span><br><span class=\"line\">obj.__proto__.name = &apos;obj&apos;;</span><br><span class=\"line\">console.log(obj.name); // è¿™ä¸ªå¾ˆæ˜æ˜¾ï¼Œæ˜¯obj</span><br><span class=\"line\"></span><br><span class=\"line\">let newObj = &#123;&#125;;</span><br><span class=\"line\">console.log(newObj.name); // ???</span><br></pre></td></tr></table></figure></p>\n<p>æ‰§è¡Œåï¼Œä½ ä¼šå‘ç°ï¼ŒnewObj.nameä¹Ÿä¸ºobjï¼ä»€ä¹ˆæƒ…å†µï¼Œæˆ‘æ–°å®šä¹‰çš„newObjå¯¹è±¡ï¼Œå±…ç„¶å¯ä»¥è¾“å‡ºnameå±æ€§ï¼Ÿï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“ã€‚<strong>åŸå› å°±æ˜¯ï¼šæ”¹obj.<strong>proto</strong>,å…¶å®å°±æ˜¯æ”¹äº†Object.prototype,è€ŒnewObjçš„<strong>proto</strong>ä¹Ÿæ˜¯æŒ‡å‘Object.prototypeï¼Œè¿™æ ·Objectçš„åŸå‹å¯¹è±¡è¢«å·å·æ”¹äº†ï¼Œå¯¼è‡´åé¢çš„å¯¹è±¡ä¸çŸ¥é“ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“çš„å®è´¨</strong></p>\n<p>è¿™ç§æ¼æ´ä¸€èˆ¬ä¼šå‡ºç°åœ¨ç±»ä¼¼mergeæ“ä½œä¸­ï¼Œè€Œå¾ˆå¤šå·¥å…·åº“å°±æä¾›mergeæ–¹æ³•ï¼Œä¹‹å‰lodashå°±å­˜åœ¨è¿‡åŸå‹é“¾æ¼æ´é—®é¢˜ï¼Œåæ¥ä¿®å¤äº†ï¼Œå¦‚æœå­˜åœ¨æ¼æ´ï¼Œæœ‰äº›äººå°±ä¼šæ•…æ„å¾€åŸå‹é“¾ä¸Šmergeä¸€äº›å…·æœ‰å±é™©çš„å±æ€§ï¼Œç»™ç³»ç»Ÿå¸¦æ¥å±æœºã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„mergeå‡½æ•°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function merge(target, source) &#123;</span><br><span class=\"line\">  for (let key in source) &#123;</span><br><span class=\"line\">    if (key in source &amp;&amp; key in target) &#123;</span><br><span class=\"line\">      merge(target[key], source[key])</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">      target[key] = source[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let o1 = &#123;&#125;</span><br><span class=\"line\">let o2 = &#123;a: 1, &quot;__proto__&quot;: &#123;b: 2&#125;&#125;</span><br><span class=\"line\">merge(o1, o2)</span><br><span class=\"line\">console.log(o1.a, o1.b) // 1 2</span><br><span class=\"line\"></span><br><span class=\"line\">o3 = &#123;&#125;</span><br><span class=\"line\">console.log(o3.b) // undefined</span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¹ˆæï¼Œæ˜¯æ²¡æœ‰æ±¡æŸ“çš„ï¼ŒåŸå› æ˜¯o2è¿™ä¹ˆå®šä¹‰ï¼Œ<strong>proto</strong>ä¼šç›´æ¥æ”¾åœ¨åŸå‹é“¾ä¸Šï¼Œä¸ä¼šå½“ä½œo2çš„å±æ€§ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š<br>o2.<strong>proto</strong> ==&gt; { b: 2, <strong>proto</strong>: Object.prototype}ï¼Œè€Œfor inæ˜¯èƒ½å¤Ÿéå†åˆ°åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥ä¼šç›´æ¥åœ¨o1ä¸­å¢åŠ å±æ€§bä¸º2ã€‚åŠ å…¥è¿™ä¹ˆå†™ä¼šæ˜¯å•¥æ ·ï¼Œçœ‹ä»£ç ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let o1 = &#123;&#125;</span><br><span class=\"line\">let o2 = JSON.parse(&apos;&#123;&quot;a&quot;: 1, &quot;__proto__&quot;: &#123;&quot;b&quot;: 2&#125;&#125;&apos;)</span><br><span class=\"line\">merge(o1, o2)</span><br><span class=\"line\">console.log(o1.a, o1.b) // 1 2</span><br><span class=\"line\"></span><br><span class=\"line\">o3 = &#123;&#125;</span><br><span class=\"line\">console.log(o3.b) // 2</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¹ˆå†™å°±æ±¡æŸ“äº†ï¼Œå› ä¸ºè¿™ä¹ˆå†™ï¼Œ<strong>proto</strong>ä¼šå½“ä½œo2çš„ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯è¿™æ ·çš„ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o2 = &#123;</span><br><span class=\"line\">  a: 1,</span><br><span class=\"line\">  __proto__: &#123;</span><br><span class=\"line\">    b: 2</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¹ˆä¼šè®©o1.<strong>proto</strong> = {b: 2},è€Œo1çš„<strong>proto</strong>å°±æ˜¯Object.prototypeï¼Œéšæ„å°±ä¼šå¯¼è‡´Objectçš„åŸå‹å¯¹è±¡è¢«æ‚„æ‚„çš„æ”¹äº†ã€‚</p>\n<p>å¦‚ä½•ç¼“è§£åŸå‹é“¾æ¼æ´å‘¢ï¼Ÿè¿™é‡Œæä¾›äº†å‡ ç§æ–¹å¼å¯å‚è€ƒï¼š</p>\n<blockquote>\n<p>Object.freeze å°†ç¼“è§£å‡ ä¹æ‰€æœ‰æƒ…å†µã€‚å†»ç»“ Object é˜»æ­¢æ·»åŠ æ–°çš„ Prototypeã€‚<br>ä½¿ç”¨æ¨¡å¼éªŒè¯ç¡®ä¿ JSON æ•°æ®åŒ…å«é¢„æœŸå±æ€§ï¼Œä»è€Œåˆ é™¤ JSON ä¸­å‡ºç°çš„ <em>proto</em>ã€‚<br>ä½¿ç”¨æ˜ å°„åŸè¯­ã€‚å®ƒåœ¨ EcmaScript6 æ ‡å‡†ä¸­å¼•å…¥ï¼Œç›®å‰åœ¨ NodeJS ç¯å¢ƒä¸­å¤‡å—æ”¯æŒã€‚<br>ä½¿ç”¨ Object.create(null) å‡½æ•°åˆ›å»ºçš„Objects ä¸å…·æœ‰ <em>proto</em> å±æ€§ã€‚</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>å®‰å…¨é—®é¢˜æ˜¯å…¬å¸éå¸¸é‡è§†çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨æˆ‘é¢è¯•è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå€™é€‰äººåªçŸ¥é“xssã€csrfè¿™ä¸¤ç§ï¼Œå› ä¸ºå¤šæ•°é¢ç»ä¸­ï¼Œåªä¼šæåˆ°è¿™ä¸¤ç§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œè¿˜æ˜¯å¾ˆå°‘è€ƒè™‘å®‰å…¨é—®é¢˜çš„ã€‚ç”±äºæœ¬äººåœ¨å…¬å¸è´Ÿè´£å·¥ç¨‹åŒ–å»ºè®¾ç›¸å…³å·¥ä½œï¼Œä¼šæ¶‰åŠåˆ°é¡¹ç›®çš„å®‰å…¨æ¼æ´æ£€æµ‹ï¼Œæ‰€ä»¥åç»­å¤šå†™ä¸€äº›ç›¸å…³çš„æ–‡ç« ã€‚<br>ä»Šå¤©èŠçš„æ˜¯åŸå‹é“¾æ±¡æŸ“æ”»å‡»é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆä»¥ä¸€ä¸ªéå¸¸ç®€å•çš„ç¨‹åºå…¥æ‰‹ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨JavaScriptä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª<strong>proto</strong>å±æ€§ï¼Œå®ƒæ˜¯æŒ‡å‘Object.prototypeçš„ï¼Œåƒè¿™æ ·ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let obj = &#123;&#125;;</span><br><span class=\"line\">console.log(obj.__proto__ === Object.prototype); // true</span><br></pre></td></tr></table></figure></p>\n<p>æœ‰äº†è¿™ä¸ªå‰ç½®çŸ¥è¯†åï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸‹é¢çš„ç¨‹åºä¼šè¾“å‡ºä»€ä¹ˆã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let obj = &#123;&#125;;</span><br><span class=\"line\">obj.__proto__.name = &apos;obj&apos;;</span><br><span class=\"line\">console.log(obj.name); // è¿™ä¸ªå¾ˆæ˜æ˜¾ï¼Œæ˜¯obj</span><br><span class=\"line\"></span><br><span class=\"line\">let newObj = &#123;&#125;;</span><br><span class=\"line\">console.log(newObj.name); // ???</span><br></pre></td></tr></table></figure></p>\n<p>æ‰§è¡Œåï¼Œä½ ä¼šå‘ç°ï¼ŒnewObj.nameä¹Ÿä¸ºobjï¼ä»€ä¹ˆæƒ…å†µï¼Œæˆ‘æ–°å®šä¹‰çš„newObjå¯¹è±¡ï¼Œå±…ç„¶å¯ä»¥è¾“å‡ºnameå±æ€§ï¼Ÿï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“ã€‚<strong>åŸå› å°±æ˜¯ï¼šæ”¹obj.<strong>proto</strong>,å…¶å®å°±æ˜¯æ”¹äº†Object.prototype,è€ŒnewObjçš„<strong>proto</strong>ä¹Ÿæ˜¯æŒ‡å‘Object.prototypeï¼Œè¿™æ ·Objectçš„åŸå‹å¯¹è±¡è¢«å·å·æ”¹äº†ï¼Œå¯¼è‡´åé¢çš„å¯¹è±¡ä¸çŸ¥é“ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“çš„å®è´¨</strong></p>\n<p>è¿™ç§æ¼æ´ä¸€èˆ¬ä¼šå‡ºç°åœ¨ç±»ä¼¼mergeæ“ä½œä¸­ï¼Œè€Œå¾ˆå¤šå·¥å…·åº“å°±æä¾›mergeæ–¹æ³•ï¼Œä¹‹å‰lodashå°±å­˜åœ¨è¿‡åŸå‹é“¾æ¼æ´é—®é¢˜ï¼Œåæ¥ä¿®å¤äº†ï¼Œå¦‚æœå­˜åœ¨æ¼æ´ï¼Œæœ‰äº›äººå°±ä¼šæ•…æ„å¾€åŸå‹é“¾ä¸Šmergeä¸€äº›å…·æœ‰å±é™©çš„å±æ€§ï¼Œç»™ç³»ç»Ÿå¸¦æ¥å±æœºã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„mergeå‡½æ•°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function merge(target, source) &#123;</span><br><span class=\"line\">  for (let key in source) &#123;</span><br><span class=\"line\">    if (key in source &amp;&amp; key in target) &#123;</span><br><span class=\"line\">      merge(target[key], source[key])</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">      target[key] = source[key]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let o1 = &#123;&#125;</span><br><span class=\"line\">let o2 = &#123;a: 1, &quot;__proto__&quot;: &#123;b: 2&#125;&#125;</span><br><span class=\"line\">merge(o1, o2)</span><br><span class=\"line\">console.log(o1.a, o1.b) // 1 2</span><br><span class=\"line\"></span><br><span class=\"line\">o3 = &#123;&#125;</span><br><span class=\"line\">console.log(o3.b) // undefined</span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¹ˆæï¼Œæ˜¯æ²¡æœ‰æ±¡æŸ“çš„ï¼ŒåŸå› æ˜¯o2è¿™ä¹ˆå®šä¹‰ï¼Œ<strong>proto</strong>ä¼šç›´æ¥æ”¾åœ¨åŸå‹é“¾ä¸Šï¼Œä¸ä¼šå½“ä½œo2çš„å±æ€§ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š<br>o2.<strong>proto</strong> ==&gt; { b: 2, <strong>proto</strong>: Object.prototype}ï¼Œè€Œfor inæ˜¯èƒ½å¤Ÿéå†åˆ°åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥ä¼šç›´æ¥åœ¨o1ä¸­å¢åŠ å±æ€§bä¸º2ã€‚åŠ å…¥è¿™ä¹ˆå†™ä¼šæ˜¯å•¥æ ·ï¼Œçœ‹ä»£ç ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let o1 = &#123;&#125;</span><br><span class=\"line\">let o2 = JSON.parse(&apos;&#123;&quot;a&quot;: 1, &quot;__proto__&quot;: &#123;&quot;b&quot;: 2&#125;&#125;&apos;)</span><br><span class=\"line\">merge(o1, o2)</span><br><span class=\"line\">console.log(o1.a, o1.b) // 1 2</span><br><span class=\"line\"></span><br><span class=\"line\">o3 = &#123;&#125;</span><br><span class=\"line\">console.log(o3.b) // 2</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¹ˆå†™å°±æ±¡æŸ“äº†ï¼Œå› ä¸ºè¿™ä¹ˆå†™ï¼Œ<strong>proto</strong>ä¼šå½“ä½œo2çš„ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯è¿™æ ·çš„ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o2 = &#123;</span><br><span class=\"line\">  a: 1,</span><br><span class=\"line\">  __proto__: &#123;</span><br><span class=\"line\">    b: 2</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¹ˆä¼šè®©o1.<strong>proto</strong> = {b: 2},è€Œo1çš„<strong>proto</strong>å°±æ˜¯Object.prototypeï¼Œéšæ„å°±ä¼šå¯¼è‡´Objectçš„åŸå‹å¯¹è±¡è¢«æ‚„æ‚„çš„æ”¹äº†ã€‚</p>\n<p>å¦‚ä½•ç¼“è§£åŸå‹é“¾æ¼æ´å‘¢ï¼Ÿè¿™é‡Œæä¾›äº†å‡ ç§æ–¹å¼å¯å‚è€ƒï¼š</p>\n<blockquote>\n<p>Object.freeze å°†ç¼“è§£å‡ ä¹æ‰€æœ‰æƒ…å†µã€‚å†»ç»“ Object é˜»æ­¢æ·»åŠ æ–°çš„ Prototypeã€‚<br>ä½¿ç”¨æ¨¡å¼éªŒè¯ç¡®ä¿ JSON æ•°æ®åŒ…å«é¢„æœŸå±æ€§ï¼Œä»è€Œåˆ é™¤ JSON ä¸­å‡ºç°çš„ <em>proto</em>ã€‚<br>ä½¿ç”¨æ˜ å°„åŸè¯­ã€‚å®ƒåœ¨ EcmaScript6 æ ‡å‡†ä¸­å¼•å…¥ï¼Œç›®å‰åœ¨ NodeJS ç¯å¢ƒä¸­å¤‡å—æ”¯æŒã€‚<br>ä½¿ç”¨ Object.create(null) å‡½æ•°åˆ›å»ºçš„Objects ä¸å…·æœ‰ <em>proto</em> å±æ€§ã€‚</p>\n</blockquote>\n"},{"title":"æ¢ç´¢garfishæºç ","comments":1,"copyright":true,"toc":true,"_content":"# å‡†å¤‡å·¥ä½œ\né¦–å…ˆï¼Œå¯ä»¥åœ¨githubä¸ŠæŠŠä»£ç æ‹‰åˆ°æœ¬åœ°ï¼Œåœ°å€ä¸ºï¼šhttps://github.com/modern-js-dev/garfish\nç„¶åå°±éœ€è¦æŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚æ€»å…±å››æ­¥å³å¯ï¼š\n1. å…¨å±€å®‰è£…pnpmï¼š\n> $ npm i -g pnpm\n2. å®‰è£…ä¾èµ–\n> $ pnpm install\n3. å¯åŠ¨build:watch\n> $ pnpm build:watch\n4. å¯åŠ¨dev\n> $ pnpm dev\nè¿™æ ·å°±è·‘èµ·æ¥äº†ã€‚æ•´ä½“æ¡†æ¶ä»£ç è®²è§£ä¸»è¦ä»¥æµç¨‹ä¸ºä¸»ï¼Œä¸€äº›ç»†èŠ‚æ€§é€»è¾‘å°±ç›´æ¥è·³è¿‡ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç¿»æºç ã€‚\n# åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\nåœ¨ä¸»åº”ç”¨ä¸­ï¼Œé¦–å…ˆå¼•å…¥Garfishå®ä¾‹ï¼š\n```\n// dev/main/src/index.ts\nimport GarfishInstance from 'garfish';\n```\nå…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªå®ä¾‹æ˜¯ä¸ªå•¥ï¼Œè¿½æº¯ä¸€ä¸‹æºç ï¼Œå‘ç°Garfishå®ä¾‹æ˜¯ä¸€ä¸ªå‡½æ•°è¿”å›çš„ï¼š\n```\n// packages/garfish/src/index.ts\nfunction createContext(): Garfish {\n  // ...\n  // Existing garfish instance, direct return\n  if (inBrowser() && window['__GARFISH__'] && window['Garfish']) {\n    return window['Garfish'];\n  }\n\n  const GarfishInstance = new Garfish({\n    plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()],\n  });\n\n  // ...\n  \n  return GarfishInstance;\n}\n```\ncreateContextå¯ä»¥ç†è§£ä¸ºåˆ›å»ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä»ä¸Šè‡³ä¸‹æ‹ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œå¹¶ä¸”windowä¸Šå­˜åœ¨Garfishå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›ï¼ˆç†Ÿæ‚‰è®¾è®¡æ¨¡å¼çš„åŒå­¦ï¼Œåº”è¯¥çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼‰ã€‚æ¥ä¸‹æ¥newäº†ä¸€ä¸ªGarfishå¯¹è±¡ï¼Œå¹¶ä¸”é»˜è®¤ä¼ å…¥äº†ä¸€ä¸ªå¯¹è±¡ { plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()] }ã€‚è¿™æ˜¯åˆå§‹åŒ–äº†ä¸‰ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ä¸€ä¸‹è¿™ä¸‰ä¸ªæ’ä»¶é•¿ä»€ä¹ˆæ ·å­ã€‚\næˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹GarfishRouter\n```\n// packages/router/src/index.ts\nexport function GarfishRouter(_args?: Options) {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    Garfish.apps = {};\n    Garfish.router = router;\n\n    return {\n      name: 'router',\n      version: __VERSION__,\n\n      bootstrap(options: interfaces.Options) {\n        // ...\n      },\n\n      registerApp(appInfos) {\n        // ...\n      },\n    };\n  };\n}\n```\nå¯ä»¥çœ‹åˆ°GarfishRouter()è¿”å›çš„æ˜¯ä¸€ä¸ªfunctionï¼Œå½¢æˆé—­åŒ…ï¼Œæœ€åä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªæ’ä»¶çš„æ ¼å¼ï¼Œæœ‰nameã€versionï¼Œè¿˜æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­bootstrapã€registerAppï¼Œç”Ÿå‘½å‘¨æœŸé’©å­æˆ‘ä»¬åç»­ä¼šä»‹ç»åˆ°ï¼Œè¿™é‡Œå¤§å®¶äº†è§£å°±è¡Œã€‚å†çœ‹çœ‹å…¶ä»–ä¸¤ä¸ªæ’ä»¶æ˜¯ä»€ä¹ˆï¼š\nGarfishBorwserVm:\n```\n// packages/browser-vm/src/pluginify.ts\nexport function GarfishBrowserVm() {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    Garfish.getGlobalObject = function () {\n      return Sandbox.getNativeWindow();\n    };\n\n    Garfish.setGlobalValue = function (key, value) {\n      return (this.getGlobalObject()[key] = value);\n    };\n\n    Garfish.clearEscapeEffect = function (key, value) {\n      const global = this.getGlobalObject();\n      if (key in global) {\n        global[key] = value;\n      }\n    };\n    return createOptions(Garfish);\n  };\n}\n\nfunction createOptions(Garfish: interfaces.Garfish) {\n  // ...\n  const options: interfaces.Plugin = {\n    name: 'browser-vm',\n    version: __VERSION__,\n\n    afterLoad(appInfo, appInstance) {\n      // ...\n    },\n\n    // If the app is uninstalled, the sandbox needs to clear all effects and then reset\n    afterUnmount(appInfo, appInstance, isCacheMode) {\n      // ...\n    },\n\n    afterMount(appInfo, appInstance) {\n      // ...\n    },\n  };\n  return options;\n}\n```\nGarfishBrowserSnapshot: \n```\n// packages/browser-snapshot/src/index.ts\nexport function GarfishBrowserSnapshot(op?: BrowserConfig) {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    const config: BrowserConfig = op || { open: true };\n\n    const options = {\n      openBrowser: false,\n      version: __VERSION__,\n      name: 'browser-snapshot',\n\n      afterLoad(appInfo, appInstance) {\n        // ...\n      },\n\n      beforeMount(appInfo, appInstance) {\n        // ...\n      },\n\n      afterUnmount(appInfo, appInstance) {\n        // ...\n      },\n    };\n    return options;\n  };\n}\n```\nå¯ä»¥çœ‹åˆ°éƒ½æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°çš„è¿”å›æ ¼å¼æœ‰ç‚¹ç±»ä¼¼ï¼Œå…¶å®è¿™å°±æ˜¯garfishæ’ä»¶çš„å½¢å¼ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†è¿™ä¸ªæ’ä»¶çš„ä¸€äº›ä¿¡æ¯ï¼Œå¯ä»¥æ€»ç»“æˆè¿™æ ·ï¼š\n```\n{\n    name: '',\n    version: '',\n    lifecycle: '' // è¿™é‡Œçš„lifecycleæ˜¯æ³›æŒ‡ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ï¼Œå…·ä½“æŒ‡bootstrapã€beforeBootstrapç­‰ç­‰\n    ...\n}\n```\næ’ä»¶ä¸­ç”Ÿå‘½å‘¨æœŸçš„å…·ä½“å®ç°ï¼Œæ”¾åœ¨åé¢è®²è¿°ã€‚è¿™é‡Œæš‚æ—¶æŠŠä»£ç è¿è¡Œé“¾è·¯æ‹‰é€šã€‚æ¥ä¸‹æ¥å†è¿”å›Garfishç±»çš„å®ç°ï¼Œå®ƒçš„å®ä¾‹æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚\nGarfishç±»çš„å®ç°ï¼š\n```\n// packages/core/src/garfish.ts\nexport class Garfish extends EventEmitter2 {\n  public running = false;\n  public version = __VERSION__;\n  public flag = __GARFISH_FLAG__; // A unique identifier\n  public loader = new Loader();\n  public hooks = globalLifecycle();\n  public channel = new EventEmitter2();\n  public options = createDefaultOptions();\n  public externals: Record<string, any> = {};\n  public activeApps: Array<interfaces.App> = [];\n  public plugins: interfaces.Plugins = {} as any;\n  public cacheApps: Record<string, interfaces.App> = {};\n  public appInfos: Record<string, interfaces.AppInfo> = {};\n\n  private nestedSwitch = false;\n  private loading: Record<string, Promise<any> | null> = {};\n\n  get props(): Record<string, any> {\n    return (this.options && this.options.props) || DEFAULT_PROPS.get(this);\n  }\n\n  constructor(options: interfaces.Options) {\n    super();\n    this.setOptions(options);\n    DEFAULT_PROPS.set(this, {});\n    this.options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n  }\n\n  private setOptions(options: Partial<interfaces.Options>) {\n    // ...\n  }\n\n  createPluginSystem<T extends (api: typeof HOOKS_API) => any>(callback: T) {\n    // ...\n  }\n\n  usePlugin(\n    plugin: (context: Garfish) => interfaces.Plugin,\n    ...args: Array<any>\n  ) {\n    // ...\n  }\n\n  run(options: interfaces.Options = {}) {\n    // ...\n  }\n\n  registerApp(list: interfaces.AppInfo | Array<interfaces.AppInfo>) {\n    // ...\n  }\n\n  setExternal(nameOrExtObj: string | Record<string, any>, value?: any) {\n    // ...\n  }\n\n  async loadApp(\n    appName: string,\n    optionsOrUrl?: Omit<interfaces.AppInfo, 'name'>,\n  ): Promise<interfaces.App | null> {\n    // ...\n  }\n}\n```\nå…ˆçœ‹ä¸€ä¸‹é’©å­å‡½æ•°ä¸­ï¼Œåšäº†ä»€ä¹ˆï¼š\n```\n// packages/core/src/garfish.ts\nconstructor(options: interfaces.Options) {\n    super();\n    // ä¼ å…¥çš„optionsï¼ˆå…¶å®å°±æ˜¯é»˜è®¤çš„é‚£ä¸‰ä¸ªæ’ä»¶ï¼‰ æ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸Šã€‚\n    this.setOptions(options);\n    DEFAULT_PROPS.set(this, {});\n    // è¿™é‡Œåˆ†åˆ«æ‰§è¡Œé»˜è®¤çš„ä¸‰ä¸ªæ’ä»¶\n    this.options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n  }\n```\nthis.setOptions(options)ä¸»è¦æ˜¯æŠŠä¼ å…¥çš„optionsæ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸­ã€‚è€Œä¼ å…¥çš„optionså°±æ˜¯ä¼ å…¥çš„é‚£ä¸‰ä¸ªé»˜è®¤æ’ä»¶ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹é»˜è®¤çš„optionsæœ‰å“ªäº›å±æ€§å§ï¼š\n```\n// packages/core/src/config.ts\nexport const createDefaultOptions = (nested = false) => {\n  const config: interfaces.Options = {\n    // global config\n    appID: '',\n    apps: [],\n    autoRefreshApp: true,\n    disableStatistics: false,\n    disablePreloadApp: false,\n    // app config\n    basename: '/',\n    props: {},\n    // Use an empty div by default\n    domGetter: () => document.createElement('div'),\n    sandbox: {\n      snapshot: false,\n      disableWith: false,\n      strictIsolation: false,\n    },\n    // global hooks\n    beforeLoad: () => {},\n    afterLoad: () => {},\n    errorLoadApp: (e) => error(e),\n    // Router\n    onNotMatchRouter: () => {},\n    // app hooks\n    // Code eval hooks\n    beforeEval: () => {},\n    afterEval: () => {},\n    // App mount hooks\n    beforeMount: () => {},\n    afterMount: () => {},\n    beforeUnmount: () => {},\n    afterUnmount: () => {},\n    // Error hooks\n    errorMountApp: (e) => error(e),\n    errorUnmountApp: (e) => error(e),\n    customLoader: null, // deprecated\n  };\n\n  if (nested) {\n    invalidNestedAttrs.forEach((key) => delete config[key]);\n  }\n  return config;\n};\n```\nå†å›åˆ°æ„é€ å‡½æ•°ä¸­ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å¯¹pluginsè¿›è¡ŒusePluginæ“ä½œï¼Œå…¶å®å°±æ˜¯ä¸ºäº†æ‹¿åˆ°æ’ä»¶ä¸­çš„ä¸€äº›å±æ€§ï¼Œå¹¶ä¸”è¿›è¡Œä¸€äº›æ³¨å†Œæ“ä½œã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹usePluginåšäº†äº›ä»€ä¹ˆï¼š\n```\n// packages/core/src/garfish.ts\nusePlugin(\n    plugin: (context: Garfish) => interfaces.Plugin,\n    ...args: Array<any>\n  ) {\n   // ...\n   \n    // thisæŒ‡å‘æ˜¯Garfishç±»\n    args.unshift(this); \n    \n    // æ‰§è¡Œä¼ å…¥çš„plugin\n    const pluginConfig = plugin.apply(null, args) as interfaces.Plugin;\n    assert(pluginConfig.name, 'The plugin must have a name.');\n\n    // å¦‚æœæ²¡æœ‰æ³¨å†Œè¿‡ï¼Œåˆ™è¿›è¡Œæ³¨å†Œ \n    if (!this.plugins[pluginConfig.name]) {\n      this.plugins[pluginConfig.name] = pluginConfig;\n      // Register hooks, Compatible with the old api\n      this.hooks.usePlugin(pluginConfig);\n    } else if (__DEV__) {\n      warn('Please do not register the plugin repeatedly.');\n    }\n    return this;\n  }\n```\nargsæ•°ç»„é¦–ä½æ˜¯Garfishè‡ªå·±ï¼Œç„¶åè·å–æ’ä»¶é…ç½®ï¼Œå‰é¢æˆ‘ä»¬æåˆ°äº†ï¼Œæ’ä»¶æœ€åçš„è¿”å›æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«nameã€versionã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ç„¶åplugin.apply()å°±æ˜¯è¿”å›çš„è¿™äº›é…ç½®ï¼Œå¹¶ä¸”èµ‹å€¼ç»™äº†pluginConfigã€‚æ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œé€»è¾‘äº†ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æ³¨å†Œè¿‡è¯¥pluginï¼Œåˆ™è¿›è¡Œæ³¨å†Œï¼Œå°±æ˜¯keyä¸ºpluginçš„nameï¼Œvalueä¸ºå…·ä½“çš„é…ç½®å½¢å¼ï¼Œæ”¾åœ¨this.pluginså¯¹è±¡ä¸­ï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œæ¥ä¸‹æ¥æ˜¯è¿›è¡Œthis.hooks.usePlugin(pluginConfig)æ“ä½œï¼Œè¿™ä¸ªå…¶å®æ˜¯ç”¨æ¥æ³¨å†Œç”Ÿå‘½å‘¨æœŸçš„ï¼Œçœ‹ä¸€ä¸‹this.hooksæ˜¯å•¥ï¼Œå†æ„é€ å‡½æ•°ä¸­ï¼Œæ˜¯è¿™ä¹ˆåˆå§‹åŒ–hooksçš„ï¼š\n// packages/core/src/garfish.ts\npublic hooks = globalLifecycle();\né€šè¿‡å‡½æ•°åï¼Œä¹Ÿåº”è¯¥èƒ½çŒœå¾—åˆ°ï¼Œå…¨å±€ç”Ÿå‘½å‘¨æœŸçš„hooksã€‚æ¥ç€çœ‹globalLifeCycleå®ç°ï¼š\n```\n// packages/core/src/lifecycle.ts\nexport function globalLifecycle() {\n  return new PluginSystem({\n    beforeBootstrap: new SyncHook<[interfaces.Options], void>(),\n    bootstrap: new SyncHook<[interfaces.Options], void>(),\n    beforeRegisterApp: new SyncHook<[interfaces.AppInfo | Array<interfaces.AppInfo>], void>(),\n    registerApp: new SyncHook<[Record<string, interfaces.AppInfo>], void>(),\n    beforeLoad: new AsyncHook<[interfaces.AppInfo], Promise<boolean | void> | void | boolean>(),\n    afterLoad: new AsyncHook<[interfaces.AppInfo, interfaces.App], void>(),\n    errorLoadApp: new SyncHook<[Error, interfaces.AppInfo], void>(),\n  });\n}\n```\nè¿”å›çš„æ˜¯ä¸€ä¸ªpluginSystemå®ä¾‹ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«7ä¸ªç”Ÿå‘½å‘¨æœŸå±æ€§ã€‚å…ˆçœ‹pluginSystemç±»çš„å®ç°ï¼š\n```\n// packages/hooks/src/pluginSystem.ts\nexport class PluginSystem<T extends Record<string, any>> {\n  lifecycle: T;\n  lifecycleKeys: Array<keyof T>;\n  private registerPlugins: Record<string, Plugin<T>> = {};\n\n  constructor(lifecycle: T) {\n    /*\n      lifecycle: \n      {\n        beforeBootstrap: new SyncHook<[interfaces.Options], void>(),\n        bootstrap: new SyncHook<[interfaces.Options], void>(),\n        beforeRegisterApp: new SyncHook<[interfaces.AppInfo | Array<interfaces.AppInfo>], void>(),\n        registerApp: new SyncHook<[Record<string, interfaces.AppInfo>], void>(),\n        beforeLoad: new AsyncHook<[interfaces.AppInfo], Promise<boolean | void> | void | boolean>(),\n        afterLoad: new AsyncHook<[interfaces.AppInfo, interfaces.App], void>(),\n        errorLoadApp: new SyncHook<[Error, interfaces.AppInfo], void>(),\n      }\n    */\n    this.lifecycle = lifecycle;\n    this.lifecycleKeys = Object.keys(lifecycle);\n  }\n\n  usePlugin(plugin: Plugin<T>) {\n    assert(isPlainObject(plugin), 'Invalid plugin configuration.');\n    // Plugin name is required and unique\n    const pluginName = plugin.name;\n    assert(pluginName, 'Plugin must provide a name.');\n\n    if (!this.registerPlugins[pluginName]) {\n      this.registerPlugins[pluginName] = plugin;\n\n      for (const key in this.lifecycle) {\n        const pluginLife = plugin[key as string];\n        if (pluginLife) {\n          // Differentiate different types of hooks and adopt different registration strategies\n          this.lifecycle[key].on(pluginLife);\n        }\n      }\n    } else if (__DEV__) {\n      warn(`Repeat to register plugin hooks \"${pluginName}\".`);\n    }\n  }\n\n  removePlugin(pluginName: string) {\n    assert(pluginName, 'Must provide a name.');\n    const plugin = this.registerPlugins[pluginName];\n    assert(plugin, `plugin \"${pluginName}\" is not registered.`);\n\n    for (const key in plugin) {\n      this.lifecycle[key].remove(plugin[key as string]);\n    }\n  }\n}\n```\nå¯ä»¥çœ‹åˆ°ä¸Šé¢æåˆ°çš„this.hooks.usePluginå…¶å®æ˜¯æ‰§è¡Œäº†pluginSystemç±»ä¸­çš„usePluginæ–¹æ³•ï¼Œå®ç°é€»è¾‘ä¹Ÿæ˜¯ä¼šåœ¨pluginSystemç±»ä¸­çš„registerPluginsè¿›è¡Œæ³¨å†Œï¼Œç„¶åä¼šåœ¨å…¨å±€ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé’©å­ä¸Šï¼Œæ³¨å†Œæ¯ä¸ªæ’ä»¶é…ç½®ä¸­å¯¹åº”çš„é’©å­å‡½æ•°ã€‚è¿™ä¸ªå¤§å®¶éœ€è¦å¥½å¥½ç†è§£ä¸€ä¸‹ï¼Œè¿™ä¸ªè®¾è®¡æˆ‘ä»¬åœ¨å†™è‡ªå·±çš„æ¡†æ¶æ—¶å¯ä»¥å­¦ä¹ ä¸€ä¸‹ã€‚å†è¿”å›åˆ°åˆ›å»ºpluginSystemå®ä¾‹ä¸­ï¼Œä¼ å…¥çš„å‡ ä¸ªhooksï¼Œä¸»è¦åŒ…å«ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥çš„SyncHookï¼Œå¦ä¸€ç§æ˜¯å¼‚æ­¥çš„AsyncHookã€‚çœ‹ä¸€ä¸‹è¿™ä¸¤ç±»hooksçš„å®ç°ã€‚\nSyncHookï¼š\n```\n// packages/hooks/src/syncHook.ts\nexport class SyncHook<T, K> {\n  public type: string = '';\n  public listeners = new Set<Callback<T, K>>();\n\n  constructor(type?: string) {\n    if (type) this.type = type;\n  }\n\n  on(fn: Callback<T, K>) {\n    if (typeof fn === 'function') {\n      this.listeners.add(fn);\n    } else if (__DEV__) {\n      warn('Invalid parameter in \"Hook\".');\n    }\n  }\n\n  once(fn: Callback<T, K>) {\n    const self = this;\n    this.on(function wrapper(...args: Array<any>) {\n      self.remove(wrapper);\n      return fn.apply(null, args);\n    });\n  }\n\n  emit(...data: ArgsType<T>) {\n    if (this.listeners.size > 0) {\n      this.listeners.forEach((fn) => fn.apply(null, data));\n    }\n  }\n\n  remove(fn: Callback<T, K>) {\n    return this.listeners.delete(fn);\n  }\n\n  removeAll() {\n    this.listeners.clear();\n  }\n}\n```\nå°±æ˜¯ä¸€ä¸ªç®€å•çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚\nAsyncHookï¼š\n```\n// packages/hooks/src/asyncHook.ts\nexport class AsyncHook<T, K> extends SyncHook<T, K> {\n  emit(...data: ArgsType<T>): Promise<void | false> {\n    let result;\n    const ls = Array.from(this.listeners);\n    if (ls.length > 0) {\n      let i = 0;\n      const call = (prev?: any) => {\n        if (prev === false) {\n          return false; // Abort process\n        } else if (i < ls.length) {\n          return Promise.resolve(ls[i++].apply(null, data)).then(call);\n        }\n      };\n      result = call();\n    }\n    return Promise.resolve(result);\n  }\n}\n```\nAsyncHookçš„emitå®ç°ï¼Œå¯ä»¥ç†è§£å°†ä¸€ä¸²çš„å¼‚æ­¥å‡½æ•°ï¼Œè¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œä¸Šä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„è¿”å›ï¼Œæ˜¯ä¸‹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„å…¥å‚ï¼Œå¦‚æœçœ‹è¿‡Koaä¸­é—´ä»¶çš„å®ç°ï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½è¿™æ ·é€»è¾‘çš„å®ç°äº†ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå½“ä¸»åº”ç”¨å¼•å…¥Garfishåï¼Œåˆæ­¥çš„æ³¨å†Œå·¥ä½œåŸºæœ¬å®Œæˆäº†ã€‚\n# ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\næˆ‘ä»¬å…ˆå‡è®¾ä¸»åº”ç”¨é»˜è®¤è·¯ç”±å°±æ˜¯/ï¼Œä¸é»˜è®¤å±•ç¤ºå­åº”ç”¨ã€‚\nå†çœ‹ä¸»åº”ç”¨å¦‚ä½•è¿›è¡Œä¸‹ä¸€æ­¥çš„ï¼š\n```\n// main/src/index.ts\nimport GarfishInstance from 'garfish'; \nimport { Config } from './config';\n\nGarfishInstance.run(Config);\nç¬¬ä¸€è¡Œä»£ç ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢ä»‹ç»è¿‡äº†ï¼Œç»§ç»­å¾€ä¸‹èµ°ï¼Œçœ‹çœ‹Configæ˜¯ä»€ä¹ˆï¼š\n// dev/main/src/config.ts\nlet defaultConfig: interfaces.Options = {\n  basename: '/garfish_master',\n  domGetter: () => {\n    // await asyncTime();\n    return document.querySelector('#submoduleByRouter');\n  },\n  apps: [\n    // {\n    //   name: 'vue',\n    //   activeWhen: '/vue',\n    //   cache: false,\n    //   entry: 'http://localhost:2666',\n    // },\n    {\n      name: 'vue2',\n      cache: false,\n      activeWhen: '/vue2',\n      entry: 'http://localhost:2777',\n    },\n    {\n      name: 'react',\n      activeWhen: '/react',\n      entry: 'http://localhost:2444',\n      props: {\n        appName: 'react',\n      },\n    },\n  ],\n  autoRefreshApp: false,\n  disablePreloadApp: true,\n  protectVariable: ['MonitoringInstance', 'Garfish'],\n  sandbox: {\n    open: true,\n    // strictIsolation: true,\n  },\n\n  // beforeMount(appInfo) {\n  //   console.log('beforeMount', appInfo);\n  // },\n\n  // afterLoad(info, app) {\n  //   console.log(app.vmSandbox);\n  // },\n\n  customLoader() {},\n};\n```\nè¿™ä¸ªé»˜è®¤é…ç½®ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œé€šè¿‡ä¹‹å‰çš„æºç åˆ†æï¼Œè¿™äº›é…ç½®æœ€åä¼šæ·±åº¦mergeåˆ°Garfishç±»ä¸­çš„é»˜è®¤é…ç½®ã€‚æ¥ä¸‹æ¥å°±æ˜¯GarfishInstance.run(Config)ï¼Œå°†é…ç½®ä¼ å…¥ï¼Œç„¶åæ‰§è¡ŒGarfishç±»ä¸­çš„runæ–¹æ³•ã€‚\n```\n// packages/core/src/garfish.ts\nrun(options: interfaces.Options = {}) {\n    if (this.running) {\n      // ...\n    }\n\n    this.setOptions(options);\n    // Register plugins\n    this.usePlugin(GarfishHMRPlugin());\n    this.usePlugin(GarfishPerformance());\n    if (!this.options.disablePreloadApp) {\n      this.usePlugin(GarfishPreloadPlugin());\n    }\n    options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n    // Put the lifecycle plugin at the end, so that you can get the changes of other plugins\n    this.usePlugin(GarfishOptionsLife(this.options, 'global-lifecycle'));\n\n    // Emit hooks and register apps\n    this.hooks.lifecycle.beforeBootstrap.emit(this.options);\n    this.registerApp(this.options.apps || []);\n    this.running = true;\n    this.hooks.lifecycle.bootstrap.emit(this.options);\n    return this;\n  }\n```\né¦–å…ˆè¿˜æ˜¯æŠŠä¼ å…¥çš„optionså‚æ•°æ·±åº¦mergeåˆ°Garfishé»˜è®¤çš„optionsä¸­ï¼Œæ¥ç€è¿›è¡Œä¸€äº›æ’ä»¶æ³¨å†Œï¼Œæœ€åæ³¨å†Œäº†ä¸€ä¸ªåä¸ºglobal-lifecycleçš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶ä¸»è¦æ˜¯ç”¨æ¥å…œåº•çš„ï¼Œå› ä¸ºæ’ä»¶æ³¨å†Œæ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå…ˆæ³¨å†Œçš„æ’ä»¶ï¼Œåœ¨å®è¡Œç”Ÿå‘½é’©å­æ–¹æ³•æ—¶ï¼Œæ˜¯å…ˆæ‰§è¡Œçš„ï¼Œæ‰€ä»¥global-lifecycleè¿™ä¸ªæ’ä»¶ä¸­ï¼Œä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ–¹æ³•æ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¼ å…¥çš„ï¼Œé‚£ä¹ˆæœ€åæ‰§è¡Œçš„æ—¶å€™ï¼Œglobal-lifecycleæ‹¿åˆ°çš„æ˜¯æ‰€æœ‰æ’ä»¶ä¸­æœ€åçš„æ•°æ®ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚\næ¥ä¸‹æ¥å°±æ˜¯è§¦å‘ç”Ÿå‘½å‘¨æœŸä¸­beforeBootstrapï¼Œä¹‹å‰æ‰€æœ‰çš„æ’ä»¶ä¸­ï¼Œæ‰€æœ‰beforeBootstrapçš„é’©å­éƒ½æ³¨å†Œåˆ°äº†å…¨å±€beforeBootstrapä¸­ï¼Œè¿™ä¸ªæ—¶å€™è¿›è¡Œemitæ“ä½œã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ å…¥è‡ªå®šä¹‰plugin(å·²ç»å®šä¹‰äº†beforeBootstrapæ–¹æ³•)çš„è¯ï¼Œè¿™é‡Œåº”è¯¥æ˜¯æ²¡æœ‰å¯æ‰§è¡Œæ–¹æ³•çš„ï¼Œå› ä¸ºæ¡†æ¶å†…ç½®çš„ä¸€äº›æ’ä»¶ä¸­æ²¡æœ‰è¯¥æ–¹æ³•ã€‚\næ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œappäº†ï¼Œæˆ‘ä»¬åœ¨ä¸»åº”ç”¨ä¸­çš„optionsä¸­ï¼Œæœ‰ä¸ªappsçš„å±æ€§ï¼Œé‡Œé¢æ³¨å†Œç€æ‰€æœ‰å­åº”ç”¨ã€‚çœ‹ä¸€ä¸‹registreAppçš„å®ç°ï¼š\n```\n// packages/core/src/garfish.ts\nregisterApp(list: interfaces.AppInfo | Array<interfaces.AppInfo>) {\n    const currentAdds = {};\n    this.hooks.lifecycle.beforeRegisterApp.emit(list);\n    if (!Array.isArray(list)) list = [list];\n\n    for (const appInfo of list) {\n      assert(appInfo.name, 'Miss app.name.');\n      if (!this.appInfos[appInfo.name]) {\n        assert(\n          appInfo.entry,\n          `${appInfo.name} application entry is not url: ${appInfo.entry}`,\n        );\n        currentAdds[appInfo.name] = appInfo;\n        this.appInfos[appInfo.name] = appInfo;\n      } else if (__DEV__) {\n        warn(`The \"${appInfo.name}\" app is already registered.`);\n      }\n    }\n    this.hooks.lifecycle.registerApp.emit(currentAdds);\n    return this;\n  }\n```\né¦–å…ˆæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbeforeRegisterAppä¸­çš„æ–¹æ³•ï¼Œç„¶åå°†appsæ³¨å†Œåˆ°currentAddså’Œthis.appInfosä¸­ï¼Œå†æ‰§è¡ŒregisterAppä¸­çš„æ–¹æ³•ã€‚\nå†è¿”å›åˆ°runæ–¹æ³•ä¸­ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå°±ä¼šæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbootstrapä¸­çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¸»è¦çœ‹ä¸€ä¸‹routerä¸­çš„bootstrapæ–¹æ³•ï¼Œçœ‹çœ‹åœ¨å¯åŠ¨æ—¶åšäº†ä»€ä¹ˆ\n```\n// packages/router/src/index.ts\nbootstrap(options: interfaces.Options) {\n        let activeApp = null;\n        const unmounts: Record<string, Function> = {};\n        const { basename } = options;\n        const { autoRefreshApp = true, onNotMatchRouter = () => null } =\n          Garfish.options;\n\n        async function active(appInfo: interfaces.AppInfo, rootPath: string) {\n          const { name, cache = true, active } = appInfo;\n          if (active) return active(appInfo, rootPath);\n          appInfo.rootPath = rootPath;\n\n          const currentApp = (activeApp = createKey());\n          const app = await Garfish.loadApp(appInfo.name, {\n            basename: rootPath,\n            entry: appInfo.entry,\n            cache: true,\n            domGetter: appInfo.domGetter,\n          });\n          app.appInfo.basename = rootPath;\n\n          const call = (app: interfaces.App, isRender: boolean) => {\n            if (!app) return;\n            const isDes = cache && app.mounted;\n            const fn = isRender\n              ? app[isDes ? 'show' : 'mount']\n              : app[isDes ? 'hide' : 'unmount'];\n            return fn.call(app);\n          };\n\n          Garfish.apps[name] = app;\n          unmounts[name] = () => call(app, false);\n\n          if (currentApp === activeApp) {\n            await call(app, true);\n          }\n        }\n\n        async function deactive(appInfo: interfaces.AppInfo, rootPath: string) {\n          activeApp = null;\n          const { name, deactive } = appInfo;\n          if (deactive) return deactive(appInfo, rootPath);\n\n          const unmount = unmounts[name];\n          unmount && unmount();\n          delete Garfish.apps[name];\n\n          // Nested scene to remove the current application of nested data\n          // To avoid the main application prior to application\n          const needToDeleteApps = router.routerConfig.apps.filter((app) => {\n            if (appInfo.rootPath === app.basename) return true;\n          });\n          if (needToDeleteApps.length > 0) {\n            needToDeleteApps.forEach((app) => {\n              delete Garfish.appInfos[app.name];\n              delete Garfish.cacheApps[app.name];\n            });\n            router.setRouterConfig({\n              apps: router.routerConfig.apps.filter((app) => {\n                return !needToDeleteApps.some(\n                  (needDelete) => app.name === needDelete.name,\n                );\n              }),\n            });\n          }\n        }\n\n        const apps = Object.values(Garfish.appInfos);\n\n        const appList = apps.filter((app) => {\n          if (!app.basename) app.basename = basename;\n          return !!app.activeWhen;\n        }) as Array<Required<interfaces.AppInfo>>;\n\n        const listenOptions = {\n          basename,\n          active,\n          deactive,\n          autoRefreshApp,\n          notMatch: onNotMatchRouter,\n          apps: appList,\n        };\n        listenRouterAndReDirect(listenOptions);\n      }\n```\nè¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥çœ‹æœ€åï¼Œå°±æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªlistenRouterAndReDirectæ–¹æ³•ï¼Œå¹¶ä¼ å…¥äº†listenOptionså¯¹è±¡ã€‚æ¥ç€æ‰¾listenRouterAndReDirectæ–¹æ³•çš„å®ç°ï¼š\n```\n// packages/router/src/context.ts\nexport const listenRouterAndReDirect = ({\n  apps,\n  basename,\n  autoRefreshApp,\n  active,\n  deactive,\n  notMatch,\n}: Options) => {\n  // æ³¨å†Œå­åº”ç”¨ã€æ³¨å†Œæ¿€æ´»ã€é”€æ¯é’©å­\n  registerRouter(apps);\n\n  // åˆå§‹åŒ–ä¿¡æ¯\n  setRouterConfig({\n    basename,\n    autoRefreshApp,\n    // supportProxy: !!window.Proxy,\n    active,\n    deactive,\n    notMatch,\n  });\n\n  // å¼€å§‹ç›‘å¬è·¯ç”±å˜åŒ–è§¦å‘ã€å­åº”ç”¨æ›´æ–°ã€‚é‡è½½é»˜è®¤åˆå§‹å­åº”ç”¨\n  listen();\n};\n```\nä¸»è¦å°±æ˜¯æ³¨å†Œå­åº”ç”¨ï¼Œåˆå§‹åŒ–é…ç½®ï¼Œæœ€åè¿›è¡Œç›‘å¬ã€‚å†çœ‹listenæ–¹æ³•çš„å®ç°ï¼š\n```\n// packages/router/src/agentRouter.ts\nexport const listen = () => {\n  normalAgent();\n  initRedirect();\n};\n```\nç„¶åæ‰§è¡Œäº†ä¸¤ä¸ªæ–¹æ³•normalAgentå’ŒinitRedirectï¼Œç»§ç»­å¾€ä¸‹çœ‹å®ç°ï¼š\n```\n// packages/router/src/agentRouter.ts\nexport const normalAgent = () => {\n  // By identifying whether have finished listening, if finished listening, listening to the routing changes do not need to hijack the original event\n  // Support nested scene\n  const addRouterListener = function () {\n    window.addEventListener(__GARFISH_BEFORE_ROUTER_EVENT__, function (env) {\n      RouterConfig.routerChange && RouterConfig.routerChange(location.pathname);\n      linkTo((env as any).detail);\n    });\n  };\n\n  if (!window[__GARFISH_ROUTER_FLAG__]) {\n    // Listen for pushState and replaceState, call linkTo, processing, listen back\n    // Rewrite the history API method, triggering events in the call\n    const rewrite = function (type: keyof History) {\n      const hapi = history[type];\n      return function () {\n        const urlBefore = window.location.pathname + window.location.hash;\n        const stateBefore = history?.state;\n        const res = hapi.apply(this as any, arguments);\n        const urlAfter = window.location.pathname + window.location.hash;\n        const stateAfter = history?.state;\n\n        const e = createEvent(type);\n        (e as any).arguments = arguments;\n\n        if (urlBefore !== urlAfter || stateBefore !== stateAfter) {\n          if (history.state && history.state === 'object')\n            delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];\n          window.dispatchEvent(\n            new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, {\n              detail: {\n                toRouterInfo: {\n                  fullPath: urlAfter,\n                  query: parseQuery(location.search),\n                  path: getPath(RouterConfig.basename!, urlAfter),\n                  state: stateAfter,\n                },\n                fromRouterInfo: {\n                  fullPath: urlBefore,\n                  query: parseQuery(location.search),\n                  path: getPath(RouterConfig.basename!, urlBefore),\n                  state: stateBefore,\n                },\n                eventType: type,\n              },\n            }),\n          );\n        }\n        // window.dispatchEvent(e);\n        return res;\n      };\n    };\n\n    history.pushState = rewrite('pushState');\n    history.replaceState = rewrite('replaceState');\n\n    // Before the collection application sub routing, forward backward routing updates between child application\n    window.addEventListener(\n      'popstate',\n      function (event) {\n        // Stop trigger collection function, fire again match rendering\n        if (event && typeof event === 'object' && (event as any).garfish)\n          return;\n        if (history.state && history.state === 'object')\n          delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];\n        window.dispatchEvent(\n          new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, {\n            detail: {\n              toRouterInfo: {\n                fullPath: location.pathname,\n                query: parseQuery(location.search),\n                path: getPath(RouterConfig.basename!),\n              },\n              fromRouterInfo: {\n                fullPath: RouterConfig.current!.fullPath,\n                path: getPath(\n                  RouterConfig.basename!,\n                  RouterConfig.current!.path,\n                ),\n                query: RouterConfig.current!.query,\n              },\n              eventType: 'popstate',\n            },\n          }),\n        );\n      },\n      false,\n    );\n\n    window[__GARFISH_ROUTER_FLAG__] = true;\n  }\n  addRouterListener();\n};\n```\n\nnormalAgentæ–¹æ³•çš„å®ç°ï¼Œå…¶å®å°±æ˜¯é‡å†™äº†history.pushStateå’Œhistory.replaceStateä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ä¼šè§¦å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶__GARFISH_BEFORE_ROUTER_EVENT__ï¼Œé‚£ä¹ˆaddRouterListenerå…¶å®å°±æ˜¯æ³¨å†Œäº†__GARFISH_BEFORE_ROUTER_EVENT__è‡ªå®šä¹‰äº‹ä»¶ã€‚è€ŒinitRedirectæ–¹æ³•å°±æ˜¯åˆå§‹é»˜è®¤åŒ–è·¯ç”±çš„ã€‚æ— è®ºæ˜¯normalAgentè¿˜æ˜¯initRedirectï¼Œæœ€åéƒ½ä¼šè¿›å…¥linkToæ–¹æ³•ï¼š\n```\n// packages/router/src/linkTo.ts\nexport const linkTo = async ({\n  toRouterInfo,\n  fromRouterInfo,\n  eventType,\n}: {\n  toRouterInfo: RouterInfo;\n  fromRouterInfo: RouterInfo;\n  eventType: keyof History | 'popstate';\n}) => {\n  const {\n    current,\n    apps,\n    deactive,\n    active,\n    notMatch,\n    beforeEach,\n    afterEach,\n    autoRefreshApp,\n  } = RouterConfig;\n  const deactiveApps = current!.matched.filter(\n    (appInfo) =>\n      !hasActive(\n        appInfo.activeWhen,\n        getPath(appInfo.basename, location.pathname),\n      ),\n  );\n\n  // Activate the corresponding application\n  const activeApps = apps.filter((appInfo) => {\n    return hasActive(\n      appInfo.activeWhen,\n      getPath(appInfo.basename, location.pathname),\n    );\n  });\n\n  const needToActive = activeApps.filter(({ name }) => {\n    return !current!.matched.some(({ name: cName }) => name === cName);\n  });\n\n  // router infos\n  const to = {\n    ...toRouterInfo,\n    matched: needToActive,\n  };\n\n  const from = {\n    ...fromRouterInfo,\n    matched: deactiveApps,\n  };\n\n  await toMiddleWare(to, from, beforeEach!);\n\n  // Pause the current application of active state\n  if (current!.matched.length > 0) {\n    await asyncForEach(\n      deactiveApps,\n      async (appInfo) =>\n        await deactive(appInfo, getPath(appInfo.basename, location.pathname)),\n    );\n  }\n\n  setRouterConfig({\n    current: {\n      path: getPath(RouterConfig.basename!),\n      fullPath: location.pathname,\n      matched: activeApps,\n      state: history.state,\n      query: parseQuery(location.search),\n    },\n  });\n\n  // Within the application routing jump, by collecting the routing function for processing.\n  // Filtering gar-router popstate hijacking of the router\n  // In the switch back and forth in the application is provided through routing push method would trigger application updates\n  // application will refresh when autoRefresh configuration to true\n  const curState = window.history.state || {};\n  if (\n    eventType !== 'popstate' &&\n    (curState[__GARFISH_ROUTER_UPDATE_FLAG__] || autoRefreshApp)\n  ) {\n    callCapturedEventListeners(eventType);\n  }\n\n  await asyncForEach(needToActive, async (appInfo) => {\n    // Function using matches character and routing using string matching characters\n    const appRootPath = getAppRootPath(appInfo);\n    await active(appInfo, appRootPath);\n  });\n\n  if (activeApps.length === 0 && notMatch) notMatch(location.pathname);\n\n  await toMiddleWare(to, from, afterEach!);\n};\n```\nå†å½’çº³ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å¯ä»¥æ‰§è¡Œï¼ŒafterEachå’ŒbeforeEachï¼Œå°±æ˜¯åœ¨activeä¹‹å‰å’Œä¹‹åçš„æ‰§è¡Œæ—¶æœºã€‚ç„¶åä¸»è¦çš„å°±æ˜¯activeäº†ï¼Œå…¶å®activeè¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯routeræ’ä»¶ä¸­ï¼Œbootstrapé’©å­é‡Œçš„activeæ–¹æ³•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸»åº”ç”¨å°±runèµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é€šè¿‡è·¯ç”±æ¥showæˆ–è€…hideå­åº”ç”¨äº†ã€‚\n# è·¯ç”±triggerå­åº”ç”¨\næ¥ä¸‹æ¥ç‚¹å‡»vueæŒ‰é’®ï¼Œå±•ç¤ºvueå­åº”ç”¨ã€‚\næˆ‘ä»¬å‰é¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œåœ¨normalAgentå®ç°ä¸­åŠ«æŒäº†history.pushæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œè·¯ç”±å˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘è‡ªå®šä¹‰äº‹ä»¶__GARFISH_BEFORE_ROUTER_EVENT__ï¼Œç„¶åä¼šå†æ¬¡è¿›å…¥linkToæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™needToActiveå°±æ˜¯trueäº†ï¼Œä¼šæ‰§è¡Œactiveï¼Œè€Œactiveå°±æ˜¯routeræ’ä»¶ä¸­bootstrapçš„activeæ–¹æ³•ï¼š\n```\n// packages/router/src/index.ts\nasync function active(appInfo: interfaces.AppInfo, rootPath: string) {\n          const { name, cache = true, active } = appInfo;\n          if (active) return active(appInfo, rootPath);\n          appInfo.rootPath = rootPath;\n\n          const currentApp = (activeApp = createKey());\n          const app = await Garfish.loadApp(appInfo.name, {\n            basename: rootPath,\n            entry: appInfo.entry,\n            cache: true,\n            domGetter: appInfo.domGetter,\n          });\n          app.appInfo.basename = rootPath;\n\n          const call = (app: interfaces.App, isRender: boolean) => {\n            if (!app) return;\n            const isDes = cache && app.mounted;\n            const fn = isRender\n              ? app[isDes ? 'show' : 'mount']\n              : app[isDes ? 'hide' : 'unmount'];\n            return fn.call(app);\n          };\n\n          Garfish.apps[name] = app;\n          unmounts[name] = () => call(app, false);\n\n          if (currentApp === activeApp) {\n            await call(app, true);\n          }\n        }\n```\nè¿™ä¸ªæ–¹æ³•ä¸­ä¼šæœ‰ä¸ªappï¼Œè¿™ä¸ªappæ˜¯Garfishç±»ä¸­loadAppæ–¹æ³•è¿”å›çš„ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿”å›çš„è¿™ä¸ªappæ˜¯å•¥ï¼š\n```\n// packages/core/src/garfish.ts\nasync loadApp(\n    appName: string,\n    optionsOrUrl?: Omit<interfaces.AppInfo, 'name'>,\n  ): Promise<interfaces.App | null> {\n    assert(appName, 'Miss appName.');\n    const appInfo = generateAppOptions(appName, this, optionsOrUrl);\n\n    const asyncLoadProcess = async () => {\n      // Return not undefined type data directly to end loading\n      const stop = await this.hooks.lifecycle.beforeLoad.emit(appInfo);\n      if (stop === false) {\n        warn(`Load ${appName} application is terminated by beforeLoad.`);\n        return null;\n      }\n      // Existing cache caching logic\n      let appInstance: interfaces.App = null;\n      const cacheApp = this.cacheApps[appName];\n      if (appInfo.cache && cacheApp) {\n        appInstance = cacheApp;\n      } else {\n        try {\n          const [manager, resources, isHtmlMode] = await processAppResources(\n            this.loader,\n            appInfo,\n          );\n\n          appInstance = new App(\n            this,\n            appInfo,\n            manager,\n            resources,\n            isHtmlMode,\n            appInfo.customLoader,\n          );\n\n          // The registration hook will automatically remove the duplication\n          for (const key in this.plugins) {\n            appInstance.hooks.usePlugin(this.plugins[key]);\n          }\n          if (appInfo.cache) {\n            this.cacheApps[appName] = appInstance;\n          }\n        } catch (e) {\n          __DEV__ && warn(e);\n          this.hooks.lifecycle.errorLoadApp.emit(e, appInfo);\n        }\n      }\n      await this.hooks.lifecycle.afterLoad.emit(appInfo, appInstance);\n      return appInstance;\n    };\n\n    if (!this.loading[appName]) {\n      this.loading[appName] = asyncLoadProcess().finally(() => {\n        this.loading[appName] = null;\n      });\n    }\n    return this.loading[appName];\n  }\n```\nè¿™ä¸ªå‡½æ•°ç¨å¾®æœ‰ç‚¹é•¿ï¼Œæˆ‘æ€»ç»“ä¸€ä¸‹ï¼Œthis.loadingæ˜¯ä¸ºäº†ä¿å­˜å½“å‰è¦åŠ è½½çš„appï¼Œé€šè¿‡ä¸€ä¸ªasyncLoadProcessè¿”å›ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼ŒasyncLoadProcessæ˜¯asyncå‡½æ•°ï¼Œæ²¡æœ‰awaitï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œresolveçš„æ˜¯appInstanceï¼Œåœ¨asyncLoadProcessä¸­ï¼Œä¹Ÿæ˜¯æ‰§è¡Œäº†appç”Ÿå‘½å‘¨æœŸä¸­çš„å‡ ä¸ªé’©å­ã€‚æˆ‘ä»¬å†ç®€å•äº†è§£ä¸€ä¸‹Appç±»æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œç”±äºä»£ç å¤ªå¤šï¼Œæˆ‘ä»¬åªåˆ—ä¸ªå¤§æ¦‚ï¼Œå¹¶ä¸”è¯´æ˜ç”¨é€”å³å¯ï¼š\n```\n// packages/core/src/module/app.ts\nexport class App {\n  public appId = appId++;\n  public display = false;\n  public mounted = false;\n  public esModule = false;\n  public strictIsolation = false;\n  public name: string;\n  public isHtmlMode: boolean;\n  public global: any = window;\n  public appContainer: HTMLElement;\n  public cjsModules: Record<string, any>;\n  public htmlNode: HTMLElement | ShadowRoot;\n  public customExports: Record<string, any> = {}; // If you don't want to use the CJS export, can use this\n  public sourceList: Array<{ tagName: string; url: string }> = [];\n  public appInfo: AppInfo;\n  public hooks: interfaces.AppHooks;\n  public provider: interfaces.Provider;\n  public entryManager: TemplateManager;\n  public appPerformance: SubAppObserver;\n  /** @deprecated */\n  public customLoader: CustomerLoader;\n\n  private active = false;\n  private mounting = false;\n  private unmounting = false;\n  private context: Garfish;\n  private resources: interfaces.ResourceModules;\n  // Environment variables injected by garfish for linkage with child applications\n  private globalEnvVariables: Record<string, any>;\n  // es-module save lifeCycle to appGlobalIdï¼ŒappGlobalId in script attr\n  private appGlobalId: string;\n\n  constructor(\n    context: Garfish,\n    appInfo: AppInfo,\n    entryManager: TemplateManager,\n    resources: interfaces.ResourceModules,\n    isHtmlMode: boolean,\n    customLoader: CustomerLoader,\n  ) {\n    // ...\n  }\n\n  get rootElement() {\n     // ...\n  }\n\n  getProvider() {\n    // ...\n  }\n\n  execScript(\n    code: string,\n    env: Record<string, any>,\n    url?: string,\n    options?: { async?: boolean; noEntry?: boolean },\n  ) {\n     // ...\n  }\n\n  // `vm sandbox` can override this method\n  runCode(\n    code: string,\n    env: Record<string, any>,\n    url?: string,\n    options?: { async?: boolean; noEntry?: boolean },\n  ) {\n     // ...\n  }\n\n  async show() {\n     // ...\n  }\n\n  hide() {\n     // ...\n  }\n\n  async mount() {\n     // ...\n  }\n\n  unmount() {\n     // ...\n  }\n\n  getExecScriptEnv(noEntry: boolean) {\n     // ...\n  }\n\n  // Performs js resources provided by the module, finally get the content of the export\n  async compileAndRenderContainer() {\n     // ...\n  }\n\n  private canMount() {\n     // ...\n  }\n\n  // If asynchronous task encountered in the rendering process, such as triggering the beforeEval before executing code,\n  // after the asynchronous task, you need to determine whether the application has been destroyed or in the end state.\n  // If in the end state will need to perform the side effects of removing rendering process, adding a mount point to a document,\n  // for example, execute code of the environmental effects, and rendering the state in the end.\n  private stopMountAndClearEffect() {\n     // ...\n  }\n\n  // Calls to render do compatible with two different sandbox\n  private callRender(provider: interfaces.Provider, isMount: boolean) {\n     // ...\n  }\n\n  // Call to destroy do compatible with two different sandbox\n  private callDestroy(provider: interfaces.Provider, isUnmount: boolean) {\n     // ...\n  }\n\n  // Create a container node and add in the document flow\n  // domGetter Have been dealing with\n  private async addContainer() {\n    // ...\n  }\n\n  private async renderTemplate() {\n     // ...\n  }\n\n  private async checkAndGetProvider() {\n    // ...\n  }\n}\n```\næ€»ç»“èµ·æ¥ï¼Œè¿™ä¸ªAppç±»æä¾›çš„èƒ½åŠ›å¦‚ä¸‹ï¼š\n1. æä¾›é™æ€èµ„æºï¼ŒHTMLã€CSSã€jsçš„ç»“æ„ã€‚\n2. å¯ä»¥åœ¨CJSä¸­æå–æˆ–è€…æ¨å¯¼å‡ºå­åº”ç”¨çš„ providerã€‚\n3.é€šè¿‡execCodeä¼ å…¥æ¨¡å—çš„CJSè§„èŒƒã€requireã€exportsç­‰ç¯å¢ƒå˜é‡å®ç°å¯¹å¤–å…±äº«\n4. è§¦å‘æ¸²æŸ“ï¼šåº”ç”¨ç›¸å…³èŠ‚ç‚¹æ”¾ç½®åœ¨æ–‡æ¡£æµä¸­ï¼Œä¾æ¬¡æ‰§è¡Œåº”ç”¨è„šæœ¬ï¼Œæœ€ç»ˆæ¸²æŸ“åŠŸèƒ½ï¼Œæ‰§è¡Œå­åº”ç”¨æä¾›å®Œæ•´çš„åº”ç”¨ç‹¬ç«‹è¿è¡Œæ—¶æ‰§è¡Œã€‚\n5. è§¦å‘é”€æ¯ï¼šæ‰§è¡Œå­åº”ç”¨ç¨‹åºçš„é”€æ¯åŠŸèƒ½ï¼Œåº”ç”¨å­èŠ‚ç‚¹ä»æ–‡æ¡£æµä¸­ç§»é™¤ã€‚\nå†å›åˆ°activeæ–¹æ³•ä¸­ï¼Œæœ€æ ¸å¿ƒçš„åœ°æ–¹æ˜¯callæ–¹æ³•ï¼Œæœ€åè°ƒç”¨äº†Appä¸­çš„showã€mountã€hideã€unmountæ–¹æ³•ã€‚showå’Œhideå¯ä»¥ç†è§£ä¸ºä¹‹å‰å·²ç»åŠ è½½è¿‡äº†ï¼Œå°±æ˜¯showå’Œhideä¸€ä¸‹ï¼Œmountæ˜¯è¦å’Œunmountæ˜¯æŒ‚è½½å’Œå¸è½½ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ä»¥mountä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•åŠ è½½å­åº”ç”¨ç¯å¢ƒå¹¶ä¸”åŠ è½½å­åº”ç”¨çš„ã€‚\n```\n// packages/core/src/module/app.ts\nasync mount() {\n    if (!this.canMount()) return false;\n    this.hooks.lifecycle.beforeMount.emit(this.appInfo, this, false);\n\n    this.active = true;\n    this.mounting = true;\n    try {\n      // add container and compile js with cjs\n      const asyncJsProcess = await this.compileAndRenderContainer();\n\n      // Good provider is set at compile time\n      const provider = await this.getProvider();\n      // Existing asynchronous functions need to decide whether the application has been unloaded\n      if (!this.stopMountAndClearEffect()) return false;\n\n      this.callRender(provider, true);\n      this.display = true;\n      this.mounted = true;\n      this.context.activeApps.push(this);\n      this.hooks.lifecycle.afterMount.emit(this.appInfo, this, false);\n\n      await asyncJsProcess;\n      if (!this.stopMountAndClearEffect()) return false;\n    } catch (e) {\n      this.entryManager.DOMApis.removeElement(this.appContainer);\n      this.hooks.lifecycle.errorMountApp.emit(e, this.appInfo);\n      return false;\n    } finally {\n      this.mounting = false;\n    }\n    return true;\n  }\n```\nå¤§æ¦‚æ„æ€å°±æ˜¯è¯´ï¼Œæ·»åŠ äº†ä¸€ä¸ªå­åº”ç”¨å®¹å™¨ï¼Œæ‹¿åˆ°å­åº”ç”¨èµ„æºï¼ˆä¸»è¦é€šè¿‡fetchæ–¹å¼è·å–ï¼Œç»§ç»­æ·±æŒ–compileAndRenderContainerå°±çŸ¥é“äº†ï¼‰ï¼Œç„¶åè·å–å­åº”ç”¨exportå‡ºæ¥çš„providerï¼Œæœ€åæ‰§è¡Œä»£ç ï¼Œå­åº”ç”¨å°±æˆåŠŸå±•ç¤ºå‡ºæ¥äº†ã€‚\nå†è¯´ä¸€ä¸‹å­åº”ç”¨çš„ä»£ç æ‰§è¡Œï¼Œå­åº”ç”¨ä¸­å¦‚æœä½¿ç”¨äº†windowï¼Œé‚£ä¹ˆåœ¨å­åº”ç”¨æ¥å…¥ä¸»åº”ç”¨åï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œé‚£ä¹ˆä¸¤ä¸ªåº”ç”¨çš„windowæ˜¯ä¸€ä¸ªï¼Œè¿™æ ·å°±ä¼šæœ‰é€»è¾‘é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æœ‰äº†æ²™ç®±æ¦‚å¿µã€‚garfishä¸­æä¾›äº†ä¸¤ç§æ²™ç®±æœºåˆ¶ï¼švmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚\næˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„vmæ²™ç®±åŸç†ï¼š\n```\nconst varBox = {};\nconst fakeWindow = new Proxy(window, {\n    get(target, key) {\n        return varBox[key] || window[key]\n    },\n    set(target, key, value) {\n        varBox[key] = value;\n        return true;\n    }\n})\nconst fn = new Function('window', code);\nfn(fakeWindow);\n```\nä¸»è¦æ˜¯é€šè¿‡es6ä¸­proxyå®ç°çš„ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªåŸç†æ€§ä»£ç ï¼Œå®é™…ä¸­è¿˜ä¼šå…¼å®¹å¾ˆå¤šcaseã€‚å…¶å®åœ¨æœ€åˆæ³¨å†Œgarfishæ’ä»¶çš„æ—¶å€™ï¼Œåˆå§‹åŒ–garfishå®ä¾‹çš„æ—¶å€™ï¼Œå°±åˆå§‹åŒ–äº†vmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚æˆ‘ä»¬å‰é¢ä¹Ÿè¯´äº†ï¼Œåœ¨æ¯ä¸ªæ’ä»¶ä¸­éƒ½ä¼šå®šä¹‰ä¸€äº›ç”Ÿå‘½å‘¨æœŸçš„é’©å­æ–¹æ³•ï¼Œå…¶å®åœ¨Garfish.loadAppçš„æ—¶å€™ï¼Œå°±åœ¨Appä¸ŠæŒ‚è½½äº†vmSandboxå±æ€§ï¼Œåœ¨åç»­çš„å­åº”ç”¨æ‰§è¡Œä»£ç æ—¶ï¼Œç¯å¢ƒéƒ½æ˜¯åœ¨æ²™ç®±ä¸­æ‰§è¡Œã€‚\n","source":"_posts/fe/garfish.md","raw":"---\ntitle: æ¢ç´¢garfishæºç \ncategories: å‰ç«¯\ntags: [Web]\ncomments: true\ncopyright: true\ntoc: true\n---\n# å‡†å¤‡å·¥ä½œ\né¦–å…ˆï¼Œå¯ä»¥åœ¨githubä¸ŠæŠŠä»£ç æ‹‰åˆ°æœ¬åœ°ï¼Œåœ°å€ä¸ºï¼šhttps://github.com/modern-js-dev/garfish\nç„¶åå°±éœ€è¦æŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚æ€»å…±å››æ­¥å³å¯ï¼š\n1. å…¨å±€å®‰è£…pnpmï¼š\n> $ npm i -g pnpm\n2. å®‰è£…ä¾èµ–\n> $ pnpm install\n3. å¯åŠ¨build:watch\n> $ pnpm build:watch\n4. å¯åŠ¨dev\n> $ pnpm dev\nè¿™æ ·å°±è·‘èµ·æ¥äº†ã€‚æ•´ä½“æ¡†æ¶ä»£ç è®²è§£ä¸»è¦ä»¥æµç¨‹ä¸ºä¸»ï¼Œä¸€äº›ç»†èŠ‚æ€§é€»è¾‘å°±ç›´æ¥è·³è¿‡ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç¿»æºç ã€‚\n# åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\nåœ¨ä¸»åº”ç”¨ä¸­ï¼Œé¦–å…ˆå¼•å…¥Garfishå®ä¾‹ï¼š\n```\n// dev/main/src/index.ts\nimport GarfishInstance from 'garfish';\n```\nå…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªå®ä¾‹æ˜¯ä¸ªå•¥ï¼Œè¿½æº¯ä¸€ä¸‹æºç ï¼Œå‘ç°Garfishå®ä¾‹æ˜¯ä¸€ä¸ªå‡½æ•°è¿”å›çš„ï¼š\n```\n// packages/garfish/src/index.ts\nfunction createContext(): Garfish {\n  // ...\n  // Existing garfish instance, direct return\n  if (inBrowser() && window['__GARFISH__'] && window['Garfish']) {\n    return window['Garfish'];\n  }\n\n  const GarfishInstance = new Garfish({\n    plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()],\n  });\n\n  // ...\n  \n  return GarfishInstance;\n}\n```\ncreateContextå¯ä»¥ç†è§£ä¸ºåˆ›å»ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä»ä¸Šè‡³ä¸‹æ‹ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œå¹¶ä¸”windowä¸Šå­˜åœ¨Garfishå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›ï¼ˆç†Ÿæ‚‰è®¾è®¡æ¨¡å¼çš„åŒå­¦ï¼Œåº”è¯¥çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼‰ã€‚æ¥ä¸‹æ¥newäº†ä¸€ä¸ªGarfishå¯¹è±¡ï¼Œå¹¶ä¸”é»˜è®¤ä¼ å…¥äº†ä¸€ä¸ªå¯¹è±¡ { plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()] }ã€‚è¿™æ˜¯åˆå§‹åŒ–äº†ä¸‰ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ä¸€ä¸‹è¿™ä¸‰ä¸ªæ’ä»¶é•¿ä»€ä¹ˆæ ·å­ã€‚\næˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹GarfishRouter\n```\n// packages/router/src/index.ts\nexport function GarfishRouter(_args?: Options) {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    Garfish.apps = {};\n    Garfish.router = router;\n\n    return {\n      name: 'router',\n      version: __VERSION__,\n\n      bootstrap(options: interfaces.Options) {\n        // ...\n      },\n\n      registerApp(appInfos) {\n        // ...\n      },\n    };\n  };\n}\n```\nå¯ä»¥çœ‹åˆ°GarfishRouter()è¿”å›çš„æ˜¯ä¸€ä¸ªfunctionï¼Œå½¢æˆé—­åŒ…ï¼Œæœ€åä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªæ’ä»¶çš„æ ¼å¼ï¼Œæœ‰nameã€versionï¼Œè¿˜æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­bootstrapã€registerAppï¼Œç”Ÿå‘½å‘¨æœŸé’©å­æˆ‘ä»¬åç»­ä¼šä»‹ç»åˆ°ï¼Œè¿™é‡Œå¤§å®¶äº†è§£å°±è¡Œã€‚å†çœ‹çœ‹å…¶ä»–ä¸¤ä¸ªæ’ä»¶æ˜¯ä»€ä¹ˆï¼š\nGarfishBorwserVm:\n```\n// packages/browser-vm/src/pluginify.ts\nexport function GarfishBrowserVm() {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    Garfish.getGlobalObject = function () {\n      return Sandbox.getNativeWindow();\n    };\n\n    Garfish.setGlobalValue = function (key, value) {\n      return (this.getGlobalObject()[key] = value);\n    };\n\n    Garfish.clearEscapeEffect = function (key, value) {\n      const global = this.getGlobalObject();\n      if (key in global) {\n        global[key] = value;\n      }\n    };\n    return createOptions(Garfish);\n  };\n}\n\nfunction createOptions(Garfish: interfaces.Garfish) {\n  // ...\n  const options: interfaces.Plugin = {\n    name: 'browser-vm',\n    version: __VERSION__,\n\n    afterLoad(appInfo, appInstance) {\n      // ...\n    },\n\n    // If the app is uninstalled, the sandbox needs to clear all effects and then reset\n    afterUnmount(appInfo, appInstance, isCacheMode) {\n      // ...\n    },\n\n    afterMount(appInfo, appInstance) {\n      // ...\n    },\n  };\n  return options;\n}\n```\nGarfishBrowserSnapshot: \n```\n// packages/browser-snapshot/src/index.ts\nexport function GarfishBrowserSnapshot(op?: BrowserConfig) {\n  return function (Garfish: interfaces.Garfish): interfaces.Plugin {\n    const config: BrowserConfig = op || { open: true };\n\n    const options = {\n      openBrowser: false,\n      version: __VERSION__,\n      name: 'browser-snapshot',\n\n      afterLoad(appInfo, appInstance) {\n        // ...\n      },\n\n      beforeMount(appInfo, appInstance) {\n        // ...\n      },\n\n      afterUnmount(appInfo, appInstance) {\n        // ...\n      },\n    };\n    return options;\n  };\n}\n```\nå¯ä»¥çœ‹åˆ°éƒ½æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°çš„è¿”å›æ ¼å¼æœ‰ç‚¹ç±»ä¼¼ï¼Œå…¶å®è¿™å°±æ˜¯garfishæ’ä»¶çš„å½¢å¼ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†è¿™ä¸ªæ’ä»¶çš„ä¸€äº›ä¿¡æ¯ï¼Œå¯ä»¥æ€»ç»“æˆè¿™æ ·ï¼š\n```\n{\n    name: '',\n    version: '',\n    lifecycle: '' // è¿™é‡Œçš„lifecycleæ˜¯æ³›æŒ‡ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ï¼Œå…·ä½“æŒ‡bootstrapã€beforeBootstrapç­‰ç­‰\n    ...\n}\n```\næ’ä»¶ä¸­ç”Ÿå‘½å‘¨æœŸçš„å…·ä½“å®ç°ï¼Œæ”¾åœ¨åé¢è®²è¿°ã€‚è¿™é‡Œæš‚æ—¶æŠŠä»£ç è¿è¡Œé“¾è·¯æ‹‰é€šã€‚æ¥ä¸‹æ¥å†è¿”å›Garfishç±»çš„å®ç°ï¼Œå®ƒçš„å®ä¾‹æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚\nGarfishç±»çš„å®ç°ï¼š\n```\n// packages/core/src/garfish.ts\nexport class Garfish extends EventEmitter2 {\n  public running = false;\n  public version = __VERSION__;\n  public flag = __GARFISH_FLAG__; // A unique identifier\n  public loader = new Loader();\n  public hooks = globalLifecycle();\n  public channel = new EventEmitter2();\n  public options = createDefaultOptions();\n  public externals: Record<string, any> = {};\n  public activeApps: Array<interfaces.App> = [];\n  public plugins: interfaces.Plugins = {} as any;\n  public cacheApps: Record<string, interfaces.App> = {};\n  public appInfos: Record<string, interfaces.AppInfo> = {};\n\n  private nestedSwitch = false;\n  private loading: Record<string, Promise<any> | null> = {};\n\n  get props(): Record<string, any> {\n    return (this.options && this.options.props) || DEFAULT_PROPS.get(this);\n  }\n\n  constructor(options: interfaces.Options) {\n    super();\n    this.setOptions(options);\n    DEFAULT_PROPS.set(this, {});\n    this.options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n  }\n\n  private setOptions(options: Partial<interfaces.Options>) {\n    // ...\n  }\n\n  createPluginSystem<T extends (api: typeof HOOKS_API) => any>(callback: T) {\n    // ...\n  }\n\n  usePlugin(\n    plugin: (context: Garfish) => interfaces.Plugin,\n    ...args: Array<any>\n  ) {\n    // ...\n  }\n\n  run(options: interfaces.Options = {}) {\n    // ...\n  }\n\n  registerApp(list: interfaces.AppInfo | Array<interfaces.AppInfo>) {\n    // ...\n  }\n\n  setExternal(nameOrExtObj: string | Record<string, any>, value?: any) {\n    // ...\n  }\n\n  async loadApp(\n    appName: string,\n    optionsOrUrl?: Omit<interfaces.AppInfo, 'name'>,\n  ): Promise<interfaces.App | null> {\n    // ...\n  }\n}\n```\nå…ˆçœ‹ä¸€ä¸‹é’©å­å‡½æ•°ä¸­ï¼Œåšäº†ä»€ä¹ˆï¼š\n```\n// packages/core/src/garfish.ts\nconstructor(options: interfaces.Options) {\n    super();\n    // ä¼ å…¥çš„optionsï¼ˆå…¶å®å°±æ˜¯é»˜è®¤çš„é‚£ä¸‰ä¸ªæ’ä»¶ï¼‰ æ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸Šã€‚\n    this.setOptions(options);\n    DEFAULT_PROPS.set(this, {});\n    // è¿™é‡Œåˆ†åˆ«æ‰§è¡Œé»˜è®¤çš„ä¸‰ä¸ªæ’ä»¶\n    this.options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n  }\n```\nthis.setOptions(options)ä¸»è¦æ˜¯æŠŠä¼ å…¥çš„optionsæ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸­ã€‚è€Œä¼ å…¥çš„optionså°±æ˜¯ä¼ å…¥çš„é‚£ä¸‰ä¸ªé»˜è®¤æ’ä»¶ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹é»˜è®¤çš„optionsæœ‰å“ªäº›å±æ€§å§ï¼š\n```\n// packages/core/src/config.ts\nexport const createDefaultOptions = (nested = false) => {\n  const config: interfaces.Options = {\n    // global config\n    appID: '',\n    apps: [],\n    autoRefreshApp: true,\n    disableStatistics: false,\n    disablePreloadApp: false,\n    // app config\n    basename: '/',\n    props: {},\n    // Use an empty div by default\n    domGetter: () => document.createElement('div'),\n    sandbox: {\n      snapshot: false,\n      disableWith: false,\n      strictIsolation: false,\n    },\n    // global hooks\n    beforeLoad: () => {},\n    afterLoad: () => {},\n    errorLoadApp: (e) => error(e),\n    // Router\n    onNotMatchRouter: () => {},\n    // app hooks\n    // Code eval hooks\n    beforeEval: () => {},\n    afterEval: () => {},\n    // App mount hooks\n    beforeMount: () => {},\n    afterMount: () => {},\n    beforeUnmount: () => {},\n    afterUnmount: () => {},\n    // Error hooks\n    errorMountApp: (e) => error(e),\n    errorUnmountApp: (e) => error(e),\n    customLoader: null, // deprecated\n  };\n\n  if (nested) {\n    invalidNestedAttrs.forEach((key) => delete config[key]);\n  }\n  return config;\n};\n```\nå†å›åˆ°æ„é€ å‡½æ•°ä¸­ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å¯¹pluginsè¿›è¡ŒusePluginæ“ä½œï¼Œå…¶å®å°±æ˜¯ä¸ºäº†æ‹¿åˆ°æ’ä»¶ä¸­çš„ä¸€äº›å±æ€§ï¼Œå¹¶ä¸”è¿›è¡Œä¸€äº›æ³¨å†Œæ“ä½œã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹usePluginåšäº†äº›ä»€ä¹ˆï¼š\n```\n// packages/core/src/garfish.ts\nusePlugin(\n    plugin: (context: Garfish) => interfaces.Plugin,\n    ...args: Array<any>\n  ) {\n   // ...\n   \n    // thisæŒ‡å‘æ˜¯Garfishç±»\n    args.unshift(this); \n    \n    // æ‰§è¡Œä¼ å…¥çš„plugin\n    const pluginConfig = plugin.apply(null, args) as interfaces.Plugin;\n    assert(pluginConfig.name, 'The plugin must have a name.');\n\n    // å¦‚æœæ²¡æœ‰æ³¨å†Œè¿‡ï¼Œåˆ™è¿›è¡Œæ³¨å†Œ \n    if (!this.plugins[pluginConfig.name]) {\n      this.plugins[pluginConfig.name] = pluginConfig;\n      // Register hooks, Compatible with the old api\n      this.hooks.usePlugin(pluginConfig);\n    } else if (__DEV__) {\n      warn('Please do not register the plugin repeatedly.');\n    }\n    return this;\n  }\n```\nargsæ•°ç»„é¦–ä½æ˜¯Garfishè‡ªå·±ï¼Œç„¶åè·å–æ’ä»¶é…ç½®ï¼Œå‰é¢æˆ‘ä»¬æåˆ°äº†ï¼Œæ’ä»¶æœ€åçš„è¿”å›æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«nameã€versionã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ç„¶åplugin.apply()å°±æ˜¯è¿”å›çš„è¿™äº›é…ç½®ï¼Œå¹¶ä¸”èµ‹å€¼ç»™äº†pluginConfigã€‚æ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œé€»è¾‘äº†ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æ³¨å†Œè¿‡è¯¥pluginï¼Œåˆ™è¿›è¡Œæ³¨å†Œï¼Œå°±æ˜¯keyä¸ºpluginçš„nameï¼Œvalueä¸ºå…·ä½“çš„é…ç½®å½¢å¼ï¼Œæ”¾åœ¨this.pluginså¯¹è±¡ä¸­ï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œæ¥ä¸‹æ¥æ˜¯è¿›è¡Œthis.hooks.usePlugin(pluginConfig)æ“ä½œï¼Œè¿™ä¸ªå…¶å®æ˜¯ç”¨æ¥æ³¨å†Œç”Ÿå‘½å‘¨æœŸçš„ï¼Œçœ‹ä¸€ä¸‹this.hooksæ˜¯å•¥ï¼Œå†æ„é€ å‡½æ•°ä¸­ï¼Œæ˜¯è¿™ä¹ˆåˆå§‹åŒ–hooksçš„ï¼š\n// packages/core/src/garfish.ts\npublic hooks = globalLifecycle();\né€šè¿‡å‡½æ•°åï¼Œä¹Ÿåº”è¯¥èƒ½çŒœå¾—åˆ°ï¼Œå…¨å±€ç”Ÿå‘½å‘¨æœŸçš„hooksã€‚æ¥ç€çœ‹globalLifeCycleå®ç°ï¼š\n```\n// packages/core/src/lifecycle.ts\nexport function globalLifecycle() {\n  return new PluginSystem({\n    beforeBootstrap: new SyncHook<[interfaces.Options], void>(),\n    bootstrap: new SyncHook<[interfaces.Options], void>(),\n    beforeRegisterApp: new SyncHook<[interfaces.AppInfo | Array<interfaces.AppInfo>], void>(),\n    registerApp: new SyncHook<[Record<string, interfaces.AppInfo>], void>(),\n    beforeLoad: new AsyncHook<[interfaces.AppInfo], Promise<boolean | void> | void | boolean>(),\n    afterLoad: new AsyncHook<[interfaces.AppInfo, interfaces.App], void>(),\n    errorLoadApp: new SyncHook<[Error, interfaces.AppInfo], void>(),\n  });\n}\n```\nè¿”å›çš„æ˜¯ä¸€ä¸ªpluginSystemå®ä¾‹ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«7ä¸ªç”Ÿå‘½å‘¨æœŸå±æ€§ã€‚å…ˆçœ‹pluginSystemç±»çš„å®ç°ï¼š\n```\n// packages/hooks/src/pluginSystem.ts\nexport class PluginSystem<T extends Record<string, any>> {\n  lifecycle: T;\n  lifecycleKeys: Array<keyof T>;\n  private registerPlugins: Record<string, Plugin<T>> = {};\n\n  constructor(lifecycle: T) {\n    /*\n      lifecycle: \n      {\n        beforeBootstrap: new SyncHook<[interfaces.Options], void>(),\n        bootstrap: new SyncHook<[interfaces.Options], void>(),\n        beforeRegisterApp: new SyncHook<[interfaces.AppInfo | Array<interfaces.AppInfo>], void>(),\n        registerApp: new SyncHook<[Record<string, interfaces.AppInfo>], void>(),\n        beforeLoad: new AsyncHook<[interfaces.AppInfo], Promise<boolean | void> | void | boolean>(),\n        afterLoad: new AsyncHook<[interfaces.AppInfo, interfaces.App], void>(),\n        errorLoadApp: new SyncHook<[Error, interfaces.AppInfo], void>(),\n      }\n    */\n    this.lifecycle = lifecycle;\n    this.lifecycleKeys = Object.keys(lifecycle);\n  }\n\n  usePlugin(plugin: Plugin<T>) {\n    assert(isPlainObject(plugin), 'Invalid plugin configuration.');\n    // Plugin name is required and unique\n    const pluginName = plugin.name;\n    assert(pluginName, 'Plugin must provide a name.');\n\n    if (!this.registerPlugins[pluginName]) {\n      this.registerPlugins[pluginName] = plugin;\n\n      for (const key in this.lifecycle) {\n        const pluginLife = plugin[key as string];\n        if (pluginLife) {\n          // Differentiate different types of hooks and adopt different registration strategies\n          this.lifecycle[key].on(pluginLife);\n        }\n      }\n    } else if (__DEV__) {\n      warn(`Repeat to register plugin hooks \"${pluginName}\".`);\n    }\n  }\n\n  removePlugin(pluginName: string) {\n    assert(pluginName, 'Must provide a name.');\n    const plugin = this.registerPlugins[pluginName];\n    assert(plugin, `plugin \"${pluginName}\" is not registered.`);\n\n    for (const key in plugin) {\n      this.lifecycle[key].remove(plugin[key as string]);\n    }\n  }\n}\n```\nå¯ä»¥çœ‹åˆ°ä¸Šé¢æåˆ°çš„this.hooks.usePluginå…¶å®æ˜¯æ‰§è¡Œäº†pluginSystemç±»ä¸­çš„usePluginæ–¹æ³•ï¼Œå®ç°é€»è¾‘ä¹Ÿæ˜¯ä¼šåœ¨pluginSystemç±»ä¸­çš„registerPluginsè¿›è¡Œæ³¨å†Œï¼Œç„¶åä¼šåœ¨å…¨å±€ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé’©å­ä¸Šï¼Œæ³¨å†Œæ¯ä¸ªæ’ä»¶é…ç½®ä¸­å¯¹åº”çš„é’©å­å‡½æ•°ã€‚è¿™ä¸ªå¤§å®¶éœ€è¦å¥½å¥½ç†è§£ä¸€ä¸‹ï¼Œè¿™ä¸ªè®¾è®¡æˆ‘ä»¬åœ¨å†™è‡ªå·±çš„æ¡†æ¶æ—¶å¯ä»¥å­¦ä¹ ä¸€ä¸‹ã€‚å†è¿”å›åˆ°åˆ›å»ºpluginSystemå®ä¾‹ä¸­ï¼Œä¼ å…¥çš„å‡ ä¸ªhooksï¼Œä¸»è¦åŒ…å«ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥çš„SyncHookï¼Œå¦ä¸€ç§æ˜¯å¼‚æ­¥çš„AsyncHookã€‚çœ‹ä¸€ä¸‹è¿™ä¸¤ç±»hooksçš„å®ç°ã€‚\nSyncHookï¼š\n```\n// packages/hooks/src/syncHook.ts\nexport class SyncHook<T, K> {\n  public type: string = '';\n  public listeners = new Set<Callback<T, K>>();\n\n  constructor(type?: string) {\n    if (type) this.type = type;\n  }\n\n  on(fn: Callback<T, K>) {\n    if (typeof fn === 'function') {\n      this.listeners.add(fn);\n    } else if (__DEV__) {\n      warn('Invalid parameter in \"Hook\".');\n    }\n  }\n\n  once(fn: Callback<T, K>) {\n    const self = this;\n    this.on(function wrapper(...args: Array<any>) {\n      self.remove(wrapper);\n      return fn.apply(null, args);\n    });\n  }\n\n  emit(...data: ArgsType<T>) {\n    if (this.listeners.size > 0) {\n      this.listeners.forEach((fn) => fn.apply(null, data));\n    }\n  }\n\n  remove(fn: Callback<T, K>) {\n    return this.listeners.delete(fn);\n  }\n\n  removeAll() {\n    this.listeners.clear();\n  }\n}\n```\nå°±æ˜¯ä¸€ä¸ªç®€å•çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚\nAsyncHookï¼š\n```\n// packages/hooks/src/asyncHook.ts\nexport class AsyncHook<T, K> extends SyncHook<T, K> {\n  emit(...data: ArgsType<T>): Promise<void | false> {\n    let result;\n    const ls = Array.from(this.listeners);\n    if (ls.length > 0) {\n      let i = 0;\n      const call = (prev?: any) => {\n        if (prev === false) {\n          return false; // Abort process\n        } else if (i < ls.length) {\n          return Promise.resolve(ls[i++].apply(null, data)).then(call);\n        }\n      };\n      result = call();\n    }\n    return Promise.resolve(result);\n  }\n}\n```\nAsyncHookçš„emitå®ç°ï¼Œå¯ä»¥ç†è§£å°†ä¸€ä¸²çš„å¼‚æ­¥å‡½æ•°ï¼Œè¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œä¸Šä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„è¿”å›ï¼Œæ˜¯ä¸‹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„å…¥å‚ï¼Œå¦‚æœçœ‹è¿‡Koaä¸­é—´ä»¶çš„å®ç°ï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½è¿™æ ·é€»è¾‘çš„å®ç°äº†ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå½“ä¸»åº”ç”¨å¼•å…¥Garfishåï¼Œåˆæ­¥çš„æ³¨å†Œå·¥ä½œåŸºæœ¬å®Œæˆäº†ã€‚\n# ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\næˆ‘ä»¬å…ˆå‡è®¾ä¸»åº”ç”¨é»˜è®¤è·¯ç”±å°±æ˜¯/ï¼Œä¸é»˜è®¤å±•ç¤ºå­åº”ç”¨ã€‚\nå†çœ‹ä¸»åº”ç”¨å¦‚ä½•è¿›è¡Œä¸‹ä¸€æ­¥çš„ï¼š\n```\n// main/src/index.ts\nimport GarfishInstance from 'garfish'; \nimport { Config } from './config';\n\nGarfishInstance.run(Config);\nç¬¬ä¸€è¡Œä»£ç ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢ä»‹ç»è¿‡äº†ï¼Œç»§ç»­å¾€ä¸‹èµ°ï¼Œçœ‹çœ‹Configæ˜¯ä»€ä¹ˆï¼š\n// dev/main/src/config.ts\nlet defaultConfig: interfaces.Options = {\n  basename: '/garfish_master',\n  domGetter: () => {\n    // await asyncTime();\n    return document.querySelector('#submoduleByRouter');\n  },\n  apps: [\n    // {\n    //   name: 'vue',\n    //   activeWhen: '/vue',\n    //   cache: false,\n    //   entry: 'http://localhost:2666',\n    // },\n    {\n      name: 'vue2',\n      cache: false,\n      activeWhen: '/vue2',\n      entry: 'http://localhost:2777',\n    },\n    {\n      name: 'react',\n      activeWhen: '/react',\n      entry: 'http://localhost:2444',\n      props: {\n        appName: 'react',\n      },\n    },\n  ],\n  autoRefreshApp: false,\n  disablePreloadApp: true,\n  protectVariable: ['MonitoringInstance', 'Garfish'],\n  sandbox: {\n    open: true,\n    // strictIsolation: true,\n  },\n\n  // beforeMount(appInfo) {\n  //   console.log('beforeMount', appInfo);\n  // },\n\n  // afterLoad(info, app) {\n  //   console.log(app.vmSandbox);\n  // },\n\n  customLoader() {},\n};\n```\nè¿™ä¸ªé»˜è®¤é…ç½®ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œé€šè¿‡ä¹‹å‰çš„æºç åˆ†æï¼Œè¿™äº›é…ç½®æœ€åä¼šæ·±åº¦mergeåˆ°Garfishç±»ä¸­çš„é»˜è®¤é…ç½®ã€‚æ¥ä¸‹æ¥å°±æ˜¯GarfishInstance.run(Config)ï¼Œå°†é…ç½®ä¼ å…¥ï¼Œç„¶åæ‰§è¡ŒGarfishç±»ä¸­çš„runæ–¹æ³•ã€‚\n```\n// packages/core/src/garfish.ts\nrun(options: interfaces.Options = {}) {\n    if (this.running) {\n      // ...\n    }\n\n    this.setOptions(options);\n    // Register plugins\n    this.usePlugin(GarfishHMRPlugin());\n    this.usePlugin(GarfishPerformance());\n    if (!this.options.disablePreloadApp) {\n      this.usePlugin(GarfishPreloadPlugin());\n    }\n    options.plugins?.forEach((plugin) => this.usePlugin(plugin));\n    // Put the lifecycle plugin at the end, so that you can get the changes of other plugins\n    this.usePlugin(GarfishOptionsLife(this.options, 'global-lifecycle'));\n\n    // Emit hooks and register apps\n    this.hooks.lifecycle.beforeBootstrap.emit(this.options);\n    this.registerApp(this.options.apps || []);\n    this.running = true;\n    this.hooks.lifecycle.bootstrap.emit(this.options);\n    return this;\n  }\n```\né¦–å…ˆè¿˜æ˜¯æŠŠä¼ å…¥çš„optionså‚æ•°æ·±åº¦mergeåˆ°Garfishé»˜è®¤çš„optionsä¸­ï¼Œæ¥ç€è¿›è¡Œä¸€äº›æ’ä»¶æ³¨å†Œï¼Œæœ€åæ³¨å†Œäº†ä¸€ä¸ªåä¸ºglobal-lifecycleçš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶ä¸»è¦æ˜¯ç”¨æ¥å…œåº•çš„ï¼Œå› ä¸ºæ’ä»¶æ³¨å†Œæ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå…ˆæ³¨å†Œçš„æ’ä»¶ï¼Œåœ¨å®è¡Œç”Ÿå‘½é’©å­æ–¹æ³•æ—¶ï¼Œæ˜¯å…ˆæ‰§è¡Œçš„ï¼Œæ‰€ä»¥global-lifecycleè¿™ä¸ªæ’ä»¶ä¸­ï¼Œä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ–¹æ³•æ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¼ å…¥çš„ï¼Œé‚£ä¹ˆæœ€åæ‰§è¡Œçš„æ—¶å€™ï¼Œglobal-lifecycleæ‹¿åˆ°çš„æ˜¯æ‰€æœ‰æ’ä»¶ä¸­æœ€åçš„æ•°æ®ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚\næ¥ä¸‹æ¥å°±æ˜¯è§¦å‘ç”Ÿå‘½å‘¨æœŸä¸­beforeBootstrapï¼Œä¹‹å‰æ‰€æœ‰çš„æ’ä»¶ä¸­ï¼Œæ‰€æœ‰beforeBootstrapçš„é’©å­éƒ½æ³¨å†Œåˆ°äº†å…¨å±€beforeBootstrapä¸­ï¼Œè¿™ä¸ªæ—¶å€™è¿›è¡Œemitæ“ä½œã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ å…¥è‡ªå®šä¹‰plugin(å·²ç»å®šä¹‰äº†beforeBootstrapæ–¹æ³•)çš„è¯ï¼Œè¿™é‡Œåº”è¯¥æ˜¯æ²¡æœ‰å¯æ‰§è¡Œæ–¹æ³•çš„ï¼Œå› ä¸ºæ¡†æ¶å†…ç½®çš„ä¸€äº›æ’ä»¶ä¸­æ²¡æœ‰è¯¥æ–¹æ³•ã€‚\næ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œappäº†ï¼Œæˆ‘ä»¬åœ¨ä¸»åº”ç”¨ä¸­çš„optionsä¸­ï¼Œæœ‰ä¸ªappsçš„å±æ€§ï¼Œé‡Œé¢æ³¨å†Œç€æ‰€æœ‰å­åº”ç”¨ã€‚çœ‹ä¸€ä¸‹registreAppçš„å®ç°ï¼š\n```\n// packages/core/src/garfish.ts\nregisterApp(list: interfaces.AppInfo | Array<interfaces.AppInfo>) {\n    const currentAdds = {};\n    this.hooks.lifecycle.beforeRegisterApp.emit(list);\n    if (!Array.isArray(list)) list = [list];\n\n    for (const appInfo of list) {\n      assert(appInfo.name, 'Miss app.name.');\n      if (!this.appInfos[appInfo.name]) {\n        assert(\n          appInfo.entry,\n          `${appInfo.name} application entry is not url: ${appInfo.entry}`,\n        );\n        currentAdds[appInfo.name] = appInfo;\n        this.appInfos[appInfo.name] = appInfo;\n      } else if (__DEV__) {\n        warn(`The \"${appInfo.name}\" app is already registered.`);\n      }\n    }\n    this.hooks.lifecycle.registerApp.emit(currentAdds);\n    return this;\n  }\n```\né¦–å…ˆæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbeforeRegisterAppä¸­çš„æ–¹æ³•ï¼Œç„¶åå°†appsæ³¨å†Œåˆ°currentAddså’Œthis.appInfosä¸­ï¼Œå†æ‰§è¡ŒregisterAppä¸­çš„æ–¹æ³•ã€‚\nå†è¿”å›åˆ°runæ–¹æ³•ä¸­ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå°±ä¼šæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbootstrapä¸­çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¸»è¦çœ‹ä¸€ä¸‹routerä¸­çš„bootstrapæ–¹æ³•ï¼Œçœ‹çœ‹åœ¨å¯åŠ¨æ—¶åšäº†ä»€ä¹ˆ\n```\n// packages/router/src/index.ts\nbootstrap(options: interfaces.Options) {\n        let activeApp = null;\n        const unmounts: Record<string, Function> = {};\n        const { basename } = options;\n        const { autoRefreshApp = true, onNotMatchRouter = () => null } =\n          Garfish.options;\n\n        async function active(appInfo: interfaces.AppInfo, rootPath: string) {\n          const { name, cache = true, active } = appInfo;\n          if (active) return active(appInfo, rootPath);\n          appInfo.rootPath = rootPath;\n\n          const currentApp = (activeApp = createKey());\n          const app = await Garfish.loadApp(appInfo.name, {\n            basename: rootPath,\n            entry: appInfo.entry,\n            cache: true,\n            domGetter: appInfo.domGetter,\n          });\n          app.appInfo.basename = rootPath;\n\n          const call = (app: interfaces.App, isRender: boolean) => {\n            if (!app) return;\n            const isDes = cache && app.mounted;\n            const fn = isRender\n              ? app[isDes ? 'show' : 'mount']\n              : app[isDes ? 'hide' : 'unmount'];\n            return fn.call(app);\n          };\n\n          Garfish.apps[name] = app;\n          unmounts[name] = () => call(app, false);\n\n          if (currentApp === activeApp) {\n            await call(app, true);\n          }\n        }\n\n        async function deactive(appInfo: interfaces.AppInfo, rootPath: string) {\n          activeApp = null;\n          const { name, deactive } = appInfo;\n          if (deactive) return deactive(appInfo, rootPath);\n\n          const unmount = unmounts[name];\n          unmount && unmount();\n          delete Garfish.apps[name];\n\n          // Nested scene to remove the current application of nested data\n          // To avoid the main application prior to application\n          const needToDeleteApps = router.routerConfig.apps.filter((app) => {\n            if (appInfo.rootPath === app.basename) return true;\n          });\n          if (needToDeleteApps.length > 0) {\n            needToDeleteApps.forEach((app) => {\n              delete Garfish.appInfos[app.name];\n              delete Garfish.cacheApps[app.name];\n            });\n            router.setRouterConfig({\n              apps: router.routerConfig.apps.filter((app) => {\n                return !needToDeleteApps.some(\n                  (needDelete) => app.name === needDelete.name,\n                );\n              }),\n            });\n          }\n        }\n\n        const apps = Object.values(Garfish.appInfos);\n\n        const appList = apps.filter((app) => {\n          if (!app.basename) app.basename = basename;\n          return !!app.activeWhen;\n        }) as Array<Required<interfaces.AppInfo>>;\n\n        const listenOptions = {\n          basename,\n          active,\n          deactive,\n          autoRefreshApp,\n          notMatch: onNotMatchRouter,\n          apps: appList,\n        };\n        listenRouterAndReDirect(listenOptions);\n      }\n```\nè¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥çœ‹æœ€åï¼Œå°±æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªlistenRouterAndReDirectæ–¹æ³•ï¼Œå¹¶ä¼ å…¥äº†listenOptionså¯¹è±¡ã€‚æ¥ç€æ‰¾listenRouterAndReDirectæ–¹æ³•çš„å®ç°ï¼š\n```\n// packages/router/src/context.ts\nexport const listenRouterAndReDirect = ({\n  apps,\n  basename,\n  autoRefreshApp,\n  active,\n  deactive,\n  notMatch,\n}: Options) => {\n  // æ³¨å†Œå­åº”ç”¨ã€æ³¨å†Œæ¿€æ´»ã€é”€æ¯é’©å­\n  registerRouter(apps);\n\n  // åˆå§‹åŒ–ä¿¡æ¯\n  setRouterConfig({\n    basename,\n    autoRefreshApp,\n    // supportProxy: !!window.Proxy,\n    active,\n    deactive,\n    notMatch,\n  });\n\n  // å¼€å§‹ç›‘å¬è·¯ç”±å˜åŒ–è§¦å‘ã€å­åº”ç”¨æ›´æ–°ã€‚é‡è½½é»˜è®¤åˆå§‹å­åº”ç”¨\n  listen();\n};\n```\nä¸»è¦å°±æ˜¯æ³¨å†Œå­åº”ç”¨ï¼Œåˆå§‹åŒ–é…ç½®ï¼Œæœ€åè¿›è¡Œç›‘å¬ã€‚å†çœ‹listenæ–¹æ³•çš„å®ç°ï¼š\n```\n// packages/router/src/agentRouter.ts\nexport const listen = () => {\n  normalAgent();\n  initRedirect();\n};\n```\nç„¶åæ‰§è¡Œäº†ä¸¤ä¸ªæ–¹æ³•normalAgentå’ŒinitRedirectï¼Œç»§ç»­å¾€ä¸‹çœ‹å®ç°ï¼š\n```\n// packages/router/src/agentRouter.ts\nexport const normalAgent = () => {\n  // By identifying whether have finished listening, if finished listening, listening to the routing changes do not need to hijack the original event\n  // Support nested scene\n  const addRouterListener = function () {\n    window.addEventListener(__GARFISH_BEFORE_ROUTER_EVENT__, function (env) {\n      RouterConfig.routerChange && RouterConfig.routerChange(location.pathname);\n      linkTo((env as any).detail);\n    });\n  };\n\n  if (!window[__GARFISH_ROUTER_FLAG__]) {\n    // Listen for pushState and replaceState, call linkTo, processing, listen back\n    // Rewrite the history API method, triggering events in the call\n    const rewrite = function (type: keyof History) {\n      const hapi = history[type];\n      return function () {\n        const urlBefore = window.location.pathname + window.location.hash;\n        const stateBefore = history?.state;\n        const res = hapi.apply(this as any, arguments);\n        const urlAfter = window.location.pathname + window.location.hash;\n        const stateAfter = history?.state;\n\n        const e = createEvent(type);\n        (e as any).arguments = arguments;\n\n        if (urlBefore !== urlAfter || stateBefore !== stateAfter) {\n          if (history.state && history.state === 'object')\n            delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];\n          window.dispatchEvent(\n            new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, {\n              detail: {\n                toRouterInfo: {\n                  fullPath: urlAfter,\n                  query: parseQuery(location.search),\n                  path: getPath(RouterConfig.basename!, urlAfter),\n                  state: stateAfter,\n                },\n                fromRouterInfo: {\n                  fullPath: urlBefore,\n                  query: parseQuery(location.search),\n                  path: getPath(RouterConfig.basename!, urlBefore),\n                  state: stateBefore,\n                },\n                eventType: type,\n              },\n            }),\n          );\n        }\n        // window.dispatchEvent(e);\n        return res;\n      };\n    };\n\n    history.pushState = rewrite('pushState');\n    history.replaceState = rewrite('replaceState');\n\n    // Before the collection application sub routing, forward backward routing updates between child application\n    window.addEventListener(\n      'popstate',\n      function (event) {\n        // Stop trigger collection function, fire again match rendering\n        if (event && typeof event === 'object' && (event as any).garfish)\n          return;\n        if (history.state && history.state === 'object')\n          delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];\n        window.dispatchEvent(\n          new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, {\n            detail: {\n              toRouterInfo: {\n                fullPath: location.pathname,\n                query: parseQuery(location.search),\n                path: getPath(RouterConfig.basename!),\n              },\n              fromRouterInfo: {\n                fullPath: RouterConfig.current!.fullPath,\n                path: getPath(\n                  RouterConfig.basename!,\n                  RouterConfig.current!.path,\n                ),\n                query: RouterConfig.current!.query,\n              },\n              eventType: 'popstate',\n            },\n          }),\n        );\n      },\n      false,\n    );\n\n    window[__GARFISH_ROUTER_FLAG__] = true;\n  }\n  addRouterListener();\n};\n```\n\nnormalAgentæ–¹æ³•çš„å®ç°ï¼Œå…¶å®å°±æ˜¯é‡å†™äº†history.pushStateå’Œhistory.replaceStateä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ä¼šè§¦å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶__GARFISH_BEFORE_ROUTER_EVENT__ï¼Œé‚£ä¹ˆaddRouterListenerå…¶å®å°±æ˜¯æ³¨å†Œäº†__GARFISH_BEFORE_ROUTER_EVENT__è‡ªå®šä¹‰äº‹ä»¶ã€‚è€ŒinitRedirectæ–¹æ³•å°±æ˜¯åˆå§‹é»˜è®¤åŒ–è·¯ç”±çš„ã€‚æ— è®ºæ˜¯normalAgentè¿˜æ˜¯initRedirectï¼Œæœ€åéƒ½ä¼šè¿›å…¥linkToæ–¹æ³•ï¼š\n```\n// packages/router/src/linkTo.ts\nexport const linkTo = async ({\n  toRouterInfo,\n  fromRouterInfo,\n  eventType,\n}: {\n  toRouterInfo: RouterInfo;\n  fromRouterInfo: RouterInfo;\n  eventType: keyof History | 'popstate';\n}) => {\n  const {\n    current,\n    apps,\n    deactive,\n    active,\n    notMatch,\n    beforeEach,\n    afterEach,\n    autoRefreshApp,\n  } = RouterConfig;\n  const deactiveApps = current!.matched.filter(\n    (appInfo) =>\n      !hasActive(\n        appInfo.activeWhen,\n        getPath(appInfo.basename, location.pathname),\n      ),\n  );\n\n  // Activate the corresponding application\n  const activeApps = apps.filter((appInfo) => {\n    return hasActive(\n      appInfo.activeWhen,\n      getPath(appInfo.basename, location.pathname),\n    );\n  });\n\n  const needToActive = activeApps.filter(({ name }) => {\n    return !current!.matched.some(({ name: cName }) => name === cName);\n  });\n\n  // router infos\n  const to = {\n    ...toRouterInfo,\n    matched: needToActive,\n  };\n\n  const from = {\n    ...fromRouterInfo,\n    matched: deactiveApps,\n  };\n\n  await toMiddleWare(to, from, beforeEach!);\n\n  // Pause the current application of active state\n  if (current!.matched.length > 0) {\n    await asyncForEach(\n      deactiveApps,\n      async (appInfo) =>\n        await deactive(appInfo, getPath(appInfo.basename, location.pathname)),\n    );\n  }\n\n  setRouterConfig({\n    current: {\n      path: getPath(RouterConfig.basename!),\n      fullPath: location.pathname,\n      matched: activeApps,\n      state: history.state,\n      query: parseQuery(location.search),\n    },\n  });\n\n  // Within the application routing jump, by collecting the routing function for processing.\n  // Filtering gar-router popstate hijacking of the router\n  // In the switch back and forth in the application is provided through routing push method would trigger application updates\n  // application will refresh when autoRefresh configuration to true\n  const curState = window.history.state || {};\n  if (\n    eventType !== 'popstate' &&\n    (curState[__GARFISH_ROUTER_UPDATE_FLAG__] || autoRefreshApp)\n  ) {\n    callCapturedEventListeners(eventType);\n  }\n\n  await asyncForEach(needToActive, async (appInfo) => {\n    // Function using matches character and routing using string matching characters\n    const appRootPath = getAppRootPath(appInfo);\n    await active(appInfo, appRootPath);\n  });\n\n  if (activeApps.length === 0 && notMatch) notMatch(location.pathname);\n\n  await toMiddleWare(to, from, afterEach!);\n};\n```\nå†å½’çº³ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å¯ä»¥æ‰§è¡Œï¼ŒafterEachå’ŒbeforeEachï¼Œå°±æ˜¯åœ¨activeä¹‹å‰å’Œä¹‹åçš„æ‰§è¡Œæ—¶æœºã€‚ç„¶åä¸»è¦çš„å°±æ˜¯activeäº†ï¼Œå…¶å®activeè¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯routeræ’ä»¶ä¸­ï¼Œbootstrapé’©å­é‡Œçš„activeæ–¹æ³•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸»åº”ç”¨å°±runèµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é€šè¿‡è·¯ç”±æ¥showæˆ–è€…hideå­åº”ç”¨äº†ã€‚\n# è·¯ç”±triggerå­åº”ç”¨\næ¥ä¸‹æ¥ç‚¹å‡»vueæŒ‰é’®ï¼Œå±•ç¤ºvueå­åº”ç”¨ã€‚\næˆ‘ä»¬å‰é¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œåœ¨normalAgentå®ç°ä¸­åŠ«æŒäº†history.pushæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œè·¯ç”±å˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘è‡ªå®šä¹‰äº‹ä»¶__GARFISH_BEFORE_ROUTER_EVENT__ï¼Œç„¶åä¼šå†æ¬¡è¿›å…¥linkToæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™needToActiveå°±æ˜¯trueäº†ï¼Œä¼šæ‰§è¡Œactiveï¼Œè€Œactiveå°±æ˜¯routeræ’ä»¶ä¸­bootstrapçš„activeæ–¹æ³•ï¼š\n```\n// packages/router/src/index.ts\nasync function active(appInfo: interfaces.AppInfo, rootPath: string) {\n          const { name, cache = true, active } = appInfo;\n          if (active) return active(appInfo, rootPath);\n          appInfo.rootPath = rootPath;\n\n          const currentApp = (activeApp = createKey());\n          const app = await Garfish.loadApp(appInfo.name, {\n            basename: rootPath,\n            entry: appInfo.entry,\n            cache: true,\n            domGetter: appInfo.domGetter,\n          });\n          app.appInfo.basename = rootPath;\n\n          const call = (app: interfaces.App, isRender: boolean) => {\n            if (!app) return;\n            const isDes = cache && app.mounted;\n            const fn = isRender\n              ? app[isDes ? 'show' : 'mount']\n              : app[isDes ? 'hide' : 'unmount'];\n            return fn.call(app);\n          };\n\n          Garfish.apps[name] = app;\n          unmounts[name] = () => call(app, false);\n\n          if (currentApp === activeApp) {\n            await call(app, true);\n          }\n        }\n```\nè¿™ä¸ªæ–¹æ³•ä¸­ä¼šæœ‰ä¸ªappï¼Œè¿™ä¸ªappæ˜¯Garfishç±»ä¸­loadAppæ–¹æ³•è¿”å›çš„ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿”å›çš„è¿™ä¸ªappæ˜¯å•¥ï¼š\n```\n// packages/core/src/garfish.ts\nasync loadApp(\n    appName: string,\n    optionsOrUrl?: Omit<interfaces.AppInfo, 'name'>,\n  ): Promise<interfaces.App | null> {\n    assert(appName, 'Miss appName.');\n    const appInfo = generateAppOptions(appName, this, optionsOrUrl);\n\n    const asyncLoadProcess = async () => {\n      // Return not undefined type data directly to end loading\n      const stop = await this.hooks.lifecycle.beforeLoad.emit(appInfo);\n      if (stop === false) {\n        warn(`Load ${appName} application is terminated by beforeLoad.`);\n        return null;\n      }\n      // Existing cache caching logic\n      let appInstance: interfaces.App = null;\n      const cacheApp = this.cacheApps[appName];\n      if (appInfo.cache && cacheApp) {\n        appInstance = cacheApp;\n      } else {\n        try {\n          const [manager, resources, isHtmlMode] = await processAppResources(\n            this.loader,\n            appInfo,\n          );\n\n          appInstance = new App(\n            this,\n            appInfo,\n            manager,\n            resources,\n            isHtmlMode,\n            appInfo.customLoader,\n          );\n\n          // The registration hook will automatically remove the duplication\n          for (const key in this.plugins) {\n            appInstance.hooks.usePlugin(this.plugins[key]);\n          }\n          if (appInfo.cache) {\n            this.cacheApps[appName] = appInstance;\n          }\n        } catch (e) {\n          __DEV__ && warn(e);\n          this.hooks.lifecycle.errorLoadApp.emit(e, appInfo);\n        }\n      }\n      await this.hooks.lifecycle.afterLoad.emit(appInfo, appInstance);\n      return appInstance;\n    };\n\n    if (!this.loading[appName]) {\n      this.loading[appName] = asyncLoadProcess().finally(() => {\n        this.loading[appName] = null;\n      });\n    }\n    return this.loading[appName];\n  }\n```\nè¿™ä¸ªå‡½æ•°ç¨å¾®æœ‰ç‚¹é•¿ï¼Œæˆ‘æ€»ç»“ä¸€ä¸‹ï¼Œthis.loadingæ˜¯ä¸ºäº†ä¿å­˜å½“å‰è¦åŠ è½½çš„appï¼Œé€šè¿‡ä¸€ä¸ªasyncLoadProcessè¿”å›ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼ŒasyncLoadProcessæ˜¯asyncå‡½æ•°ï¼Œæ²¡æœ‰awaitï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œresolveçš„æ˜¯appInstanceï¼Œåœ¨asyncLoadProcessä¸­ï¼Œä¹Ÿæ˜¯æ‰§è¡Œäº†appç”Ÿå‘½å‘¨æœŸä¸­çš„å‡ ä¸ªé’©å­ã€‚æˆ‘ä»¬å†ç®€å•äº†è§£ä¸€ä¸‹Appç±»æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œç”±äºä»£ç å¤ªå¤šï¼Œæˆ‘ä»¬åªåˆ—ä¸ªå¤§æ¦‚ï¼Œå¹¶ä¸”è¯´æ˜ç”¨é€”å³å¯ï¼š\n```\n// packages/core/src/module/app.ts\nexport class App {\n  public appId = appId++;\n  public display = false;\n  public mounted = false;\n  public esModule = false;\n  public strictIsolation = false;\n  public name: string;\n  public isHtmlMode: boolean;\n  public global: any = window;\n  public appContainer: HTMLElement;\n  public cjsModules: Record<string, any>;\n  public htmlNode: HTMLElement | ShadowRoot;\n  public customExports: Record<string, any> = {}; // If you don't want to use the CJS export, can use this\n  public sourceList: Array<{ tagName: string; url: string }> = [];\n  public appInfo: AppInfo;\n  public hooks: interfaces.AppHooks;\n  public provider: interfaces.Provider;\n  public entryManager: TemplateManager;\n  public appPerformance: SubAppObserver;\n  /** @deprecated */\n  public customLoader: CustomerLoader;\n\n  private active = false;\n  private mounting = false;\n  private unmounting = false;\n  private context: Garfish;\n  private resources: interfaces.ResourceModules;\n  // Environment variables injected by garfish for linkage with child applications\n  private globalEnvVariables: Record<string, any>;\n  // es-module save lifeCycle to appGlobalIdï¼ŒappGlobalId in script attr\n  private appGlobalId: string;\n\n  constructor(\n    context: Garfish,\n    appInfo: AppInfo,\n    entryManager: TemplateManager,\n    resources: interfaces.ResourceModules,\n    isHtmlMode: boolean,\n    customLoader: CustomerLoader,\n  ) {\n    // ...\n  }\n\n  get rootElement() {\n     // ...\n  }\n\n  getProvider() {\n    // ...\n  }\n\n  execScript(\n    code: string,\n    env: Record<string, any>,\n    url?: string,\n    options?: { async?: boolean; noEntry?: boolean },\n  ) {\n     // ...\n  }\n\n  // `vm sandbox` can override this method\n  runCode(\n    code: string,\n    env: Record<string, any>,\n    url?: string,\n    options?: { async?: boolean; noEntry?: boolean },\n  ) {\n     // ...\n  }\n\n  async show() {\n     // ...\n  }\n\n  hide() {\n     // ...\n  }\n\n  async mount() {\n     // ...\n  }\n\n  unmount() {\n     // ...\n  }\n\n  getExecScriptEnv(noEntry: boolean) {\n     // ...\n  }\n\n  // Performs js resources provided by the module, finally get the content of the export\n  async compileAndRenderContainer() {\n     // ...\n  }\n\n  private canMount() {\n     // ...\n  }\n\n  // If asynchronous task encountered in the rendering process, such as triggering the beforeEval before executing code,\n  // after the asynchronous task, you need to determine whether the application has been destroyed or in the end state.\n  // If in the end state will need to perform the side effects of removing rendering process, adding a mount point to a document,\n  // for example, execute code of the environmental effects, and rendering the state in the end.\n  private stopMountAndClearEffect() {\n     // ...\n  }\n\n  // Calls to render do compatible with two different sandbox\n  private callRender(provider: interfaces.Provider, isMount: boolean) {\n     // ...\n  }\n\n  // Call to destroy do compatible with two different sandbox\n  private callDestroy(provider: interfaces.Provider, isUnmount: boolean) {\n     // ...\n  }\n\n  // Create a container node and add in the document flow\n  // domGetter Have been dealing with\n  private async addContainer() {\n    // ...\n  }\n\n  private async renderTemplate() {\n     // ...\n  }\n\n  private async checkAndGetProvider() {\n    // ...\n  }\n}\n```\næ€»ç»“èµ·æ¥ï¼Œè¿™ä¸ªAppç±»æä¾›çš„èƒ½åŠ›å¦‚ä¸‹ï¼š\n1. æä¾›é™æ€èµ„æºï¼ŒHTMLã€CSSã€jsçš„ç»“æ„ã€‚\n2. å¯ä»¥åœ¨CJSä¸­æå–æˆ–è€…æ¨å¯¼å‡ºå­åº”ç”¨çš„ providerã€‚\n3.é€šè¿‡execCodeä¼ å…¥æ¨¡å—çš„CJSè§„èŒƒã€requireã€exportsç­‰ç¯å¢ƒå˜é‡å®ç°å¯¹å¤–å…±äº«\n4. è§¦å‘æ¸²æŸ“ï¼šåº”ç”¨ç›¸å…³èŠ‚ç‚¹æ”¾ç½®åœ¨æ–‡æ¡£æµä¸­ï¼Œä¾æ¬¡æ‰§è¡Œåº”ç”¨è„šæœ¬ï¼Œæœ€ç»ˆæ¸²æŸ“åŠŸèƒ½ï¼Œæ‰§è¡Œå­åº”ç”¨æä¾›å®Œæ•´çš„åº”ç”¨ç‹¬ç«‹è¿è¡Œæ—¶æ‰§è¡Œã€‚\n5. è§¦å‘é”€æ¯ï¼šæ‰§è¡Œå­åº”ç”¨ç¨‹åºçš„é”€æ¯åŠŸèƒ½ï¼Œåº”ç”¨å­èŠ‚ç‚¹ä»æ–‡æ¡£æµä¸­ç§»é™¤ã€‚\nå†å›åˆ°activeæ–¹æ³•ä¸­ï¼Œæœ€æ ¸å¿ƒçš„åœ°æ–¹æ˜¯callæ–¹æ³•ï¼Œæœ€åè°ƒç”¨äº†Appä¸­çš„showã€mountã€hideã€unmountæ–¹æ³•ã€‚showå’Œhideå¯ä»¥ç†è§£ä¸ºä¹‹å‰å·²ç»åŠ è½½è¿‡äº†ï¼Œå°±æ˜¯showå’Œhideä¸€ä¸‹ï¼Œmountæ˜¯è¦å’Œunmountæ˜¯æŒ‚è½½å’Œå¸è½½ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ä»¥mountä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•åŠ è½½å­åº”ç”¨ç¯å¢ƒå¹¶ä¸”åŠ è½½å­åº”ç”¨çš„ã€‚\n```\n// packages/core/src/module/app.ts\nasync mount() {\n    if (!this.canMount()) return false;\n    this.hooks.lifecycle.beforeMount.emit(this.appInfo, this, false);\n\n    this.active = true;\n    this.mounting = true;\n    try {\n      // add container and compile js with cjs\n      const asyncJsProcess = await this.compileAndRenderContainer();\n\n      // Good provider is set at compile time\n      const provider = await this.getProvider();\n      // Existing asynchronous functions need to decide whether the application has been unloaded\n      if (!this.stopMountAndClearEffect()) return false;\n\n      this.callRender(provider, true);\n      this.display = true;\n      this.mounted = true;\n      this.context.activeApps.push(this);\n      this.hooks.lifecycle.afterMount.emit(this.appInfo, this, false);\n\n      await asyncJsProcess;\n      if (!this.stopMountAndClearEffect()) return false;\n    } catch (e) {\n      this.entryManager.DOMApis.removeElement(this.appContainer);\n      this.hooks.lifecycle.errorMountApp.emit(e, this.appInfo);\n      return false;\n    } finally {\n      this.mounting = false;\n    }\n    return true;\n  }\n```\nå¤§æ¦‚æ„æ€å°±æ˜¯è¯´ï¼Œæ·»åŠ äº†ä¸€ä¸ªå­åº”ç”¨å®¹å™¨ï¼Œæ‹¿åˆ°å­åº”ç”¨èµ„æºï¼ˆä¸»è¦é€šè¿‡fetchæ–¹å¼è·å–ï¼Œç»§ç»­æ·±æŒ–compileAndRenderContainerå°±çŸ¥é“äº†ï¼‰ï¼Œç„¶åè·å–å­åº”ç”¨exportå‡ºæ¥çš„providerï¼Œæœ€åæ‰§è¡Œä»£ç ï¼Œå­åº”ç”¨å°±æˆåŠŸå±•ç¤ºå‡ºæ¥äº†ã€‚\nå†è¯´ä¸€ä¸‹å­åº”ç”¨çš„ä»£ç æ‰§è¡Œï¼Œå­åº”ç”¨ä¸­å¦‚æœä½¿ç”¨äº†windowï¼Œé‚£ä¹ˆåœ¨å­åº”ç”¨æ¥å…¥ä¸»åº”ç”¨åï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œé‚£ä¹ˆä¸¤ä¸ªåº”ç”¨çš„windowæ˜¯ä¸€ä¸ªï¼Œè¿™æ ·å°±ä¼šæœ‰é€»è¾‘é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æœ‰äº†æ²™ç®±æ¦‚å¿µã€‚garfishä¸­æä¾›äº†ä¸¤ç§æ²™ç®±æœºåˆ¶ï¼švmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚\næˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„vmæ²™ç®±åŸç†ï¼š\n```\nconst varBox = {};\nconst fakeWindow = new Proxy(window, {\n    get(target, key) {\n        return varBox[key] || window[key]\n    },\n    set(target, key, value) {\n        varBox[key] = value;\n        return true;\n    }\n})\nconst fn = new Function('window', code);\nfn(fakeWindow);\n```\nä¸»è¦æ˜¯é€šè¿‡es6ä¸­proxyå®ç°çš„ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªåŸç†æ€§ä»£ç ï¼Œå®é™…ä¸­è¿˜ä¼šå…¼å®¹å¾ˆå¤šcaseã€‚å…¶å®åœ¨æœ€åˆæ³¨å†Œgarfishæ’ä»¶çš„æ—¶å€™ï¼Œåˆå§‹åŒ–garfishå®ä¾‹çš„æ—¶å€™ï¼Œå°±åˆå§‹åŒ–äº†vmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚æˆ‘ä»¬å‰é¢ä¹Ÿè¯´äº†ï¼Œåœ¨æ¯ä¸ªæ’ä»¶ä¸­éƒ½ä¼šå®šä¹‰ä¸€äº›ç”Ÿå‘½å‘¨æœŸçš„é’©å­æ–¹æ³•ï¼Œå…¶å®åœ¨Garfish.loadAppçš„æ—¶å€™ï¼Œå°±åœ¨Appä¸ŠæŒ‚è½½äº†vmSandboxå±æ€§ï¼Œåœ¨åç»­çš„å­åº”ç”¨æ‰§è¡Œä»£ç æ—¶ï¼Œç¯å¢ƒéƒ½æ˜¯åœ¨æ²™ç®±ä¸­æ‰§è¡Œã€‚\n","slug":"fe/garfish","published":1,"date":"2021-12-28T09:21:46.644Z","updated":"2021-12-28T12:40:40.133Z","layout":"post","photos":[],"link":"","_id":"ckxq3m95s0011kudod22vnzbz","content":"<h1 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h1><p>é¦–å…ˆï¼Œå¯ä»¥åœ¨githubä¸ŠæŠŠä»£ç æ‹‰åˆ°æœ¬åœ°ï¼Œåœ°å€ä¸ºï¼š<a href=\"https://github.com/modern-js-dev/garfish\" target=\"_blank\" rel=\"noopener\">https://github.com/modern-js-dev/garfish</a><br>ç„¶åå°±éœ€è¦æŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚æ€»å…±å››æ­¥å³å¯ï¼š</p>\n<ol>\n<li>å…¨å±€å®‰è£…pnpmï¼š<blockquote>\n<p>$ npm i -g pnpm</p>\n</blockquote>\n</li>\n<li>å®‰è£…ä¾èµ–<blockquote>\n<p>$ pnpm install</p>\n</blockquote>\n</li>\n<li>å¯åŠ¨build:watch<blockquote>\n<p>$ pnpm build:watch</p>\n</blockquote>\n</li>\n<li>å¯åŠ¨dev<blockquote>\n<p>$ pnpm dev<br>è¿™æ ·å°±è·‘èµ·æ¥äº†ã€‚æ•´ä½“æ¡†æ¶ä»£ç è®²è§£ä¸»è¦ä»¥æµç¨‹ä¸ºä¸»ï¼Œä¸€äº›ç»†èŠ‚æ€§é€»è¾‘å°±ç›´æ¥è·³è¿‡ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç¿»æºç ã€‚</p>\n</blockquote>\n<h1 id=\"åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\"><a href=\"#åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\" class=\"headerlink\" title=\"åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\"></a>åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š</h1>åœ¨ä¸»åº”ç”¨ä¸­ï¼Œé¦–å…ˆå¼•å…¥Garfishå®ä¾‹ï¼š<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// dev/main/src/index.ts</span><br><span class=\"line\">import GarfishInstance from &apos;garfish&apos;;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªå®ä¾‹æ˜¯ä¸ªå•¥ï¼Œè¿½æº¯ä¸€ä¸‹æºç ï¼Œå‘ç°Garfishå®ä¾‹æ˜¯ä¸€ä¸ªå‡½æ•°è¿”å›çš„ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/garfish/src/index.ts</span><br><span class=\"line\">function createContext(): Garfish &#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  // Existing garfish instance, direct return</span><br><span class=\"line\">  if (inBrowser() &amp;&amp; window[&apos;__GARFISH__&apos;] &amp;&amp; window[&apos;Garfish&apos;]) &#123;</span><br><span class=\"line\">    return window[&apos;Garfish&apos;];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  const GarfishInstance = new Garfish(&#123;</span><br><span class=\"line\">    plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()],</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  </span><br><span class=\"line\">  return GarfishInstance;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>createContextå¯ä»¥ç†è§£ä¸ºåˆ›å»ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä»ä¸Šè‡³ä¸‹æ‹ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œå¹¶ä¸”windowä¸Šå­˜åœ¨Garfishå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›ï¼ˆç†Ÿæ‚‰è®¾è®¡æ¨¡å¼çš„åŒå­¦ï¼Œåº”è¯¥çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼‰ã€‚æ¥ä¸‹æ¥newäº†ä¸€ä¸ªGarfishå¯¹è±¡ï¼Œå¹¶ä¸”é»˜è®¤ä¼ å…¥äº†ä¸€ä¸ªå¯¹è±¡ { plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()] }ã€‚è¿™æ˜¯åˆå§‹åŒ–äº†ä¸‰ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ä¸€ä¸‹è¿™ä¸‰ä¸ªæ’ä»¶é•¿ä»€ä¹ˆæ ·å­ã€‚<br>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹GarfishRouter<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/index.ts</span><br><span class=\"line\">export function GarfishRouter(_args?: Options) &#123;</span><br><span class=\"line\">  return function (Garfish: interfaces.Garfish): interfaces.Plugin &#123;</span><br><span class=\"line\">    Garfish.apps = &#123;&#125;;</span><br><span class=\"line\">    Garfish.router = router;</span><br><span class=\"line\"></span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      name: &apos;router&apos;,</span><br><span class=\"line\">      version: __VERSION__,</span><br><span class=\"line\"></span><br><span class=\"line\">      bootstrap(options: interfaces.Options) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      registerApp(appInfos) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥çœ‹åˆ°GarfishRouter()è¿”å›çš„æ˜¯ä¸€ä¸ªfunctionï¼Œå½¢æˆé—­åŒ…ï¼Œæœ€åä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªæ’ä»¶çš„æ ¼å¼ï¼Œæœ‰nameã€versionï¼Œè¿˜æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­bootstrapã€registerAppï¼Œç”Ÿå‘½å‘¨æœŸé’©å­æˆ‘ä»¬åç»­ä¼šä»‹ç»åˆ°ï¼Œè¿™é‡Œå¤§å®¶äº†è§£å°±è¡Œã€‚å†çœ‹çœ‹å…¶ä»–ä¸¤ä¸ªæ’ä»¶æ˜¯ä»€ä¹ˆï¼š<br>GarfishBorwserVm:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/browser-vm/src/pluginify.ts</span><br><span class=\"line\">export function GarfishBrowserVm() &#123;</span><br><span class=\"line\">  return function (Garfish: interfaces.Garfish): interfaces.Plugin &#123;</span><br><span class=\"line\">    Garfish.getGlobalObject = function () &#123;</span><br><span class=\"line\">      return Sandbox.getNativeWindow();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    Garfish.setGlobalValue = function (key, value) &#123;</span><br><span class=\"line\">      return (this.getGlobalObject()[key] = value);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    Garfish.clearEscapeEffect = function (key, value) &#123;</span><br><span class=\"line\">      const global = this.getGlobalObject();</span><br><span class=\"line\">      if (key in global) &#123;</span><br><span class=\"line\">        global[key] = value;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    return createOptions(Garfish);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function createOptions(Garfish: interfaces.Garfish) &#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  const options: interfaces.Plugin = &#123;</span><br><span class=\"line\">    name: &apos;browser-vm&apos;,</span><br><span class=\"line\">    version: __VERSION__,</span><br><span class=\"line\"></span><br><span class=\"line\">    afterLoad(appInfo, appInstance) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    // If the app is uninstalled, the sandbox needs to clear all effects and then reset</span><br><span class=\"line\">    afterUnmount(appInfo, appInstance, isCacheMode) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    afterMount(appInfo, appInstance) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  return options;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>GarfishBrowserSnapshot:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/browser-snapshot/src/index.ts</span><br><span class=\"line\">export function GarfishBrowserSnapshot(op?: BrowserConfig) &#123;</span><br><span class=\"line\">  return function (Garfish: interfaces.Garfish): interfaces.Plugin &#123;</span><br><span class=\"line\">    const config: BrowserConfig = op || &#123; open: true &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    const options = &#123;</span><br><span class=\"line\">      openBrowser: false,</span><br><span class=\"line\">      version: __VERSION__,</span><br><span class=\"line\">      name: &apos;browser-snapshot&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">      afterLoad(appInfo, appInstance) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      beforeMount(appInfo, appInstance) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      afterUnmount(appInfo, appInstance) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    return options;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥çœ‹åˆ°éƒ½æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°çš„è¿”å›æ ¼å¼æœ‰ç‚¹ç±»ä¼¼ï¼Œå…¶å®è¿™å°±æ˜¯garfishæ’ä»¶çš„å½¢å¼ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†è¿™ä¸ªæ’ä»¶çš„ä¸€äº›ä¿¡æ¯ï¼Œå¯ä»¥æ€»ç»“æˆè¿™æ ·ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    name: &apos;&apos;,</span><br><span class=\"line\">    version: &apos;&apos;,</span><br><span class=\"line\">    lifecycle: &apos;&apos; // è¿™é‡Œçš„lifecycleæ˜¯æ³›æŒ‡ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ï¼Œå…·ä½“æŒ‡bootstrapã€beforeBootstrapç­‰ç­‰</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ’ä»¶ä¸­ç”Ÿå‘½å‘¨æœŸçš„å…·ä½“å®ç°ï¼Œæ”¾åœ¨åé¢è®²è¿°ã€‚è¿™é‡Œæš‚æ—¶æŠŠä»£ç è¿è¡Œé“¾è·¯æ‹‰é€šã€‚æ¥ä¸‹æ¥å†è¿”å›Garfishç±»çš„å®ç°ï¼Œå®ƒçš„å®ä¾‹æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚<br>Garfishç±»çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">export class Garfish extends EventEmitter2 &#123;</span><br><span class=\"line\">  public running = false;</span><br><span class=\"line\">  public version = __VERSION__;</span><br><span class=\"line\">  public flag = __GARFISH_FLAG__; // A unique identifier</span><br><span class=\"line\">  public loader = new Loader();</span><br><span class=\"line\">  public hooks = globalLifecycle();</span><br><span class=\"line\">  public channel = new EventEmitter2();</span><br><span class=\"line\">  public options = createDefaultOptions();</span><br><span class=\"line\">  public externals: Record&lt;string, any&gt; = &#123;&#125;;</span><br><span class=\"line\">  public activeApps: Array&lt;interfaces.App&gt; = [];</span><br><span class=\"line\">  public plugins: interfaces.Plugins = &#123;&#125; as any;</span><br><span class=\"line\">  public cacheApps: Record&lt;string, interfaces.App&gt; = &#123;&#125;;</span><br><span class=\"line\">  public appInfos: Record&lt;string, interfaces.AppInfo&gt; = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  private nestedSwitch = false;</span><br><span class=\"line\">  private loading: Record&lt;string, Promise&lt;any&gt; | null&gt; = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  get props(): Record&lt;string, any&gt; &#123;</span><br><span class=\"line\">    return (this.options &amp;&amp; this.options.props) || DEFAULT_PROPS.get(this);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(options: interfaces.Options) &#123;</span><br><span class=\"line\">    super();</span><br><span class=\"line\">    this.setOptions(options);</span><br><span class=\"line\">    DEFAULT_PROPS.set(this, &#123;&#125;);</span><br><span class=\"line\">    this.options.plugins?.forEach((plugin) =&gt; this.usePlugin(plugin));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private setOptions(options: Partial&lt;interfaces.Options&gt;) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  createPluginSystem&lt;T extends (api: typeof HOOKS_API) =&gt; any&gt;(callback: T) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  usePlugin(</span><br><span class=\"line\">    plugin: (context: Garfish) =&gt; interfaces.Plugin,</span><br><span class=\"line\">    ...args: Array&lt;any&gt;</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  run(options: interfaces.Options = &#123;&#125;) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  registerApp(list: interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  setExternal(nameOrExtObj: string | Record&lt;string, any&gt;, value?: any) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  async loadApp(</span><br><span class=\"line\">    appName: string,</span><br><span class=\"line\">    optionsOrUrl?: Omit&lt;interfaces.AppInfo, &apos;name&apos;&gt;,</span><br><span class=\"line\">  ): Promise&lt;interfaces.App | null&gt; &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å…ˆçœ‹ä¸€ä¸‹é’©å­å‡½æ•°ä¸­ï¼Œåšäº†ä»€ä¹ˆï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">constructor(options: interfaces.Options) &#123;</span><br><span class=\"line\">    super();</span><br><span class=\"line\">    // ä¼ å…¥çš„optionsï¼ˆå…¶å®å°±æ˜¯é»˜è®¤çš„é‚£ä¸‰ä¸ªæ’ä»¶ï¼‰ æ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸Šã€‚</span><br><span class=\"line\">    this.setOptions(options);</span><br><span class=\"line\">    DEFAULT_PROPS.set(this, &#123;&#125;);</span><br><span class=\"line\">    // è¿™é‡Œåˆ†åˆ«æ‰§è¡Œé»˜è®¤çš„ä¸‰ä¸ªæ’ä»¶</span><br><span class=\"line\">    this.options.plugins?.forEach((plugin) =&gt; this.usePlugin(plugin));</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>this.setOptions(options)ä¸»è¦æ˜¯æŠŠä¼ å…¥çš„optionsæ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸­ã€‚è€Œä¼ å…¥çš„optionså°±æ˜¯ä¼ å…¥çš„é‚£ä¸‰ä¸ªé»˜è®¤æ’ä»¶ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹é»˜è®¤çš„optionsæœ‰å“ªäº›å±æ€§å§ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/config.ts</span><br><span class=\"line\">export const createDefaultOptions = (nested = false) =&gt; &#123;</span><br><span class=\"line\">  const config: interfaces.Options = &#123;</span><br><span class=\"line\">    // global config</span><br><span class=\"line\">    appID: &apos;&apos;,</span><br><span class=\"line\">    apps: [],</span><br><span class=\"line\">    autoRefreshApp: true,</span><br><span class=\"line\">    disableStatistics: false,</span><br><span class=\"line\">    disablePreloadApp: false,</span><br><span class=\"line\">    // app config</span><br><span class=\"line\">    basename: &apos;/&apos;,</span><br><span class=\"line\">    props: &#123;&#125;,</span><br><span class=\"line\">    // Use an empty div by default</span><br><span class=\"line\">    domGetter: () =&gt; document.createElement(&apos;div&apos;),</span><br><span class=\"line\">    sandbox: &#123;</span><br><span class=\"line\">      snapshot: false,</span><br><span class=\"line\">      disableWith: false,</span><br><span class=\"line\">      strictIsolation: false,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    // global hooks</span><br><span class=\"line\">    beforeLoad: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterLoad: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    errorLoadApp: (e) =&gt; error(e),</span><br><span class=\"line\">    // Router</span><br><span class=\"line\">    onNotMatchRouter: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    // app hooks</span><br><span class=\"line\">    // Code eval hooks</span><br><span class=\"line\">    beforeEval: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterEval: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    // App mount hooks</span><br><span class=\"line\">    beforeMount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterMount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    beforeUnmount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterUnmount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    // Error hooks</span><br><span class=\"line\">    errorMountApp: (e) =&gt; error(e),</span><br><span class=\"line\">    errorUnmountApp: (e) =&gt; error(e),</span><br><span class=\"line\">    customLoader: null, // deprecated</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  if (nested) &#123;</span><br><span class=\"line\">    invalidNestedAttrs.forEach((key) =&gt; delete config[key]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  return config;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>å†å›åˆ°æ„é€ å‡½æ•°ä¸­ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å¯¹pluginsè¿›è¡ŒusePluginæ“ä½œï¼Œå…¶å®å°±æ˜¯ä¸ºäº†æ‹¿åˆ°æ’ä»¶ä¸­çš„ä¸€äº›å±æ€§ï¼Œå¹¶ä¸”è¿›è¡Œä¸€äº›æ³¨å†Œæ“ä½œã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹usePluginåšäº†äº›ä»€ä¹ˆï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">usePlugin(</span><br><span class=\"line\">    plugin: (context: Garfish) =&gt; interfaces.Plugin,</span><br><span class=\"line\">    ...args: Array&lt;any&gt;</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">   // ...</span><br><span class=\"line\">   </span><br><span class=\"line\">    // thisæŒ‡å‘æ˜¯Garfishç±»</span><br><span class=\"line\">    args.unshift(this); </span><br><span class=\"line\">    </span><br><span class=\"line\">    // æ‰§è¡Œä¼ å…¥çš„plugin</span><br><span class=\"line\">    const pluginConfig = plugin.apply(null, args) as interfaces.Plugin;</span><br><span class=\"line\">    assert(pluginConfig.name, &apos;The plugin must have a name.&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // å¦‚æœæ²¡æœ‰æ³¨å†Œè¿‡ï¼Œåˆ™è¿›è¡Œæ³¨å†Œ </span><br><span class=\"line\">    if (!this.plugins[pluginConfig.name]) &#123;</span><br><span class=\"line\">      this.plugins[pluginConfig.name] = pluginConfig;</span><br><span class=\"line\">      // Register hooks, Compatible with the old api</span><br><span class=\"line\">      this.hooks.usePlugin(pluginConfig);</span><br><span class=\"line\">    &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">      warn(&apos;Please do not register the plugin repeatedly.&apos;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return this;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>argsæ•°ç»„é¦–ä½æ˜¯Garfishè‡ªå·±ï¼Œç„¶åè·å–æ’ä»¶é…ç½®ï¼Œå‰é¢æˆ‘ä»¬æåˆ°äº†ï¼Œæ’ä»¶æœ€åçš„è¿”å›æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«nameã€versionã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ç„¶åplugin.apply()å°±æ˜¯è¿”å›çš„è¿™äº›é…ç½®ï¼Œå¹¶ä¸”èµ‹å€¼ç»™äº†pluginConfigã€‚æ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œé€»è¾‘äº†ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æ³¨å†Œè¿‡è¯¥pluginï¼Œåˆ™è¿›è¡Œæ³¨å†Œï¼Œå°±æ˜¯keyä¸ºpluginçš„nameï¼Œvalueä¸ºå…·ä½“çš„é…ç½®å½¢å¼ï¼Œæ”¾åœ¨this.pluginså¯¹è±¡ä¸­ï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œæ¥ä¸‹æ¥æ˜¯è¿›è¡Œthis.hooks.usePlugin(pluginConfig)æ“ä½œï¼Œè¿™ä¸ªå…¶å®æ˜¯ç”¨æ¥æ³¨å†Œç”Ÿå‘½å‘¨æœŸçš„ï¼Œçœ‹ä¸€ä¸‹this.hooksæ˜¯å•¥ï¼Œå†æ„é€ å‡½æ•°ä¸­ï¼Œæ˜¯è¿™ä¹ˆåˆå§‹åŒ–hooksçš„ï¼š<br>// packages/core/src/garfish.ts<br>public hooks = globalLifecycle();<br>é€šè¿‡å‡½æ•°åï¼Œä¹Ÿåº”è¯¥èƒ½çŒœå¾—åˆ°ï¼Œå…¨å±€ç”Ÿå‘½å‘¨æœŸçš„hooksã€‚æ¥ç€çœ‹globalLifeCycleå®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/lifecycle.ts</span><br><span class=\"line\">export function globalLifecycle() &#123;</span><br><span class=\"line\">  return new PluginSystem(&#123;</span><br><span class=\"line\">    beforeBootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">    bootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">    beforeRegisterApp: new SyncHook&lt;[interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">    registerApp: new SyncHook&lt;[Record&lt;string, interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">    beforeLoad: new AsyncHook&lt;[interfaces.AppInfo], Promise&lt;boolean | void&gt; | void | boolean&gt;(),</span><br><span class=\"line\">    afterLoad: new AsyncHook&lt;[interfaces.AppInfo, interfaces.App], void&gt;(),</span><br><span class=\"line\">    errorLoadApp: new SyncHook&lt;[Error, interfaces.AppInfo], void&gt;(),</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿”å›çš„æ˜¯ä¸€ä¸ªpluginSystemå®ä¾‹ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«7ä¸ªç”Ÿå‘½å‘¨æœŸå±æ€§ã€‚å…ˆçœ‹pluginSystemç±»çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/hooks/src/pluginSystem.ts</span><br><span class=\"line\">export class PluginSystem&lt;T extends Record&lt;string, any&gt;&gt; &#123;</span><br><span class=\"line\">  lifecycle: T;</span><br><span class=\"line\">  lifecycleKeys: Array&lt;keyof T&gt;;</span><br><span class=\"line\">  private registerPlugins: Record&lt;string, Plugin&lt;T&gt;&gt; = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(lifecycle: T) &#123;</span><br><span class=\"line\">    /*</span><br><span class=\"line\">      lifecycle: </span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        beforeBootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">        bootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">        beforeRegisterApp: new SyncHook&lt;[interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">        registerApp: new SyncHook&lt;[Record&lt;string, interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">        beforeLoad: new AsyncHook&lt;[interfaces.AppInfo], Promise&lt;boolean | void&gt; | void | boolean&gt;(),</span><br><span class=\"line\">        afterLoad: new AsyncHook&lt;[interfaces.AppInfo, interfaces.App], void&gt;(),</span><br><span class=\"line\">        errorLoadApp: new SyncHook&lt;[Error, interfaces.AppInfo], void&gt;(),</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    */</span><br><span class=\"line\">    this.lifecycle = lifecycle;</span><br><span class=\"line\">    this.lifecycleKeys = Object.keys(lifecycle);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  usePlugin(plugin: Plugin&lt;T&gt;) &#123;</span><br><span class=\"line\">    assert(isPlainObject(plugin), &apos;Invalid plugin configuration.&apos;);</span><br><span class=\"line\">    // Plugin name is required and unique</span><br><span class=\"line\">    const pluginName = plugin.name;</span><br><span class=\"line\">    assert(pluginName, &apos;Plugin must provide a name.&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">    if (!this.registerPlugins[pluginName]) &#123;</span><br><span class=\"line\">      this.registerPlugins[pluginName] = plugin;</span><br><span class=\"line\"></span><br><span class=\"line\">      for (const key in this.lifecycle) &#123;</span><br><span class=\"line\">        const pluginLife = plugin[key as string];</span><br><span class=\"line\">        if (pluginLife) &#123;</span><br><span class=\"line\">          // Differentiate different types of hooks and adopt different registration strategies</span><br><span class=\"line\">          this.lifecycle[key].on(pluginLife);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">      warn(`Repeat to register plugin hooks &quot;$&#123;pluginName&#125;&quot;.`);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  removePlugin(pluginName: string) &#123;</span><br><span class=\"line\">    assert(pluginName, &apos;Must provide a name.&apos;);</span><br><span class=\"line\">    const plugin = this.registerPlugins[pluginName];</span><br><span class=\"line\">    assert(plugin, `plugin &quot;$&#123;pluginName&#125;&quot; is not registered.`);</span><br><span class=\"line\"></span><br><span class=\"line\">    for (const key in plugin) &#123;</span><br><span class=\"line\">      this.lifecycle[key].remove(plugin[key as string]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢æåˆ°çš„this.hooks.usePluginå…¶å®æ˜¯æ‰§è¡Œäº†pluginSystemç±»ä¸­çš„usePluginæ–¹æ³•ï¼Œå®ç°é€»è¾‘ä¹Ÿæ˜¯ä¼šåœ¨pluginSystemç±»ä¸­çš„registerPluginsè¿›è¡Œæ³¨å†Œï¼Œç„¶åä¼šåœ¨å…¨å±€ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé’©å­ä¸Šï¼Œæ³¨å†Œæ¯ä¸ªæ’ä»¶é…ç½®ä¸­å¯¹åº”çš„é’©å­å‡½æ•°ã€‚è¿™ä¸ªå¤§å®¶éœ€è¦å¥½å¥½ç†è§£ä¸€ä¸‹ï¼Œè¿™ä¸ªè®¾è®¡æˆ‘ä»¬åœ¨å†™è‡ªå·±çš„æ¡†æ¶æ—¶å¯ä»¥å­¦ä¹ ä¸€ä¸‹ã€‚å†è¿”å›åˆ°åˆ›å»ºpluginSystemå®ä¾‹ä¸­ï¼Œä¼ å…¥çš„å‡ ä¸ªhooksï¼Œä¸»è¦åŒ…å«ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥çš„SyncHookï¼Œå¦ä¸€ç§æ˜¯å¼‚æ­¥çš„AsyncHookã€‚çœ‹ä¸€ä¸‹è¿™ä¸¤ç±»hooksçš„å®ç°ã€‚<br>SyncHookï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/hooks/src/syncHook.ts</span><br><span class=\"line\">export class SyncHook&lt;T, K&gt; &#123;</span><br><span class=\"line\">  public type: string = &apos;&apos;;</span><br><span class=\"line\">  public listeners = new Set&lt;Callback&lt;T, K&gt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(type?: string) &#123;</span><br><span class=\"line\">    if (type) this.type = type;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  on(fn: Callback&lt;T, K&gt;) &#123;</span><br><span class=\"line\">    if (typeof fn === &apos;function&apos;) &#123;</span><br><span class=\"line\">      this.listeners.add(fn);</span><br><span class=\"line\">    &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">      warn(&apos;Invalid parameter in &quot;Hook&quot;.&apos;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  once(fn: Callback&lt;T, K&gt;) &#123;</span><br><span class=\"line\">    const self = this;</span><br><span class=\"line\">    this.on(function wrapper(...args: Array&lt;any&gt;) &#123;</span><br><span class=\"line\">      self.remove(wrapper);</span><br><span class=\"line\">      return fn.apply(null, args);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  emit(...data: ArgsType&lt;T&gt;) &#123;</span><br><span class=\"line\">    if (this.listeners.size &gt; 0) &#123;</span><br><span class=\"line\">      this.listeners.forEach((fn) =&gt; fn.apply(null, data));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  remove(fn: Callback&lt;T, K&gt;) &#123;</span><br><span class=\"line\">    return this.listeners.delete(fn);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  removeAll() &#123;</span><br><span class=\"line\">    this.listeners.clear();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å°±æ˜¯ä¸€ä¸ªç®€å•çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚<br>AsyncHookï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/hooks/src/asyncHook.ts</span><br><span class=\"line\">export class AsyncHook&lt;T, K&gt; extends SyncHook&lt;T, K&gt; &#123;</span><br><span class=\"line\">  emit(...data: ArgsType&lt;T&gt;): Promise&lt;void | false&gt; &#123;</span><br><span class=\"line\">    let result;</span><br><span class=\"line\">    const ls = Array.from(this.listeners);</span><br><span class=\"line\">    if (ls.length &gt; 0) &#123;</span><br><span class=\"line\">      let i = 0;</span><br><span class=\"line\">      const call = (prev?: any) =&gt; &#123;</span><br><span class=\"line\">        if (prev === false) &#123;</span><br><span class=\"line\">          return false; // Abort process</span><br><span class=\"line\">        &#125; else if (i &lt; ls.length) &#123;</span><br><span class=\"line\">          return Promise.resolve(ls[i++].apply(null, data)).then(call);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      result = call();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return Promise.resolve(result);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>AsyncHookçš„emitå®ç°ï¼Œå¯ä»¥ç†è§£å°†ä¸€ä¸²çš„å¼‚æ­¥å‡½æ•°ï¼Œè¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œä¸Šä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„è¿”å›ï¼Œæ˜¯ä¸‹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„å…¥å‚ï¼Œå¦‚æœçœ‹è¿‡Koaä¸­é—´ä»¶çš„å®ç°ï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½è¿™æ ·é€»è¾‘çš„å®ç°äº†ã€‚<br>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå½“ä¸»åº”ç”¨å¼•å…¥Garfishåï¼Œåˆæ­¥çš„æ³¨å†Œå·¥ä½œåŸºæœ¬å®Œæˆäº†ã€‚</p>\n<h1 id=\"ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\"><a href=\"#ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\" class=\"headerlink\" title=\"ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\"></a>ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish</h1><p>æˆ‘ä»¬å…ˆå‡è®¾ä¸»åº”ç”¨é»˜è®¤è·¯ç”±å°±æ˜¯/ï¼Œä¸é»˜è®¤å±•ç¤ºå­åº”ç”¨ã€‚<br>å†çœ‹ä¸»åº”ç”¨å¦‚ä½•è¿›è¡Œä¸‹ä¸€æ­¥çš„ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// main/src/index.ts</span><br><span class=\"line\">import GarfishInstance from &apos;garfish&apos;; </span><br><span class=\"line\">import &#123; Config &#125; from &apos;./config&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">GarfishInstance.run(Config);</span><br><span class=\"line\">ç¬¬ä¸€è¡Œä»£ç ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢ä»‹ç»è¿‡äº†ï¼Œç»§ç»­å¾€ä¸‹èµ°ï¼Œçœ‹çœ‹Configæ˜¯ä»€ä¹ˆï¼š</span><br><span class=\"line\">// dev/main/src/config.ts</span><br><span class=\"line\">let defaultConfig: interfaces.Options = &#123;</span><br><span class=\"line\">  basename: &apos;/garfish_master&apos;,</span><br><span class=\"line\">  domGetter: () =&gt; &#123;</span><br><span class=\"line\">    // await asyncTime();</span><br><span class=\"line\">    return document.querySelector(&apos;#submoduleByRouter&apos;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  apps: [</span><br><span class=\"line\">    // &#123;</span><br><span class=\"line\">    //   name: &apos;vue&apos;,</span><br><span class=\"line\">    //   activeWhen: &apos;/vue&apos;,</span><br><span class=\"line\">    //   cache: false,</span><br><span class=\"line\">    //   entry: &apos;http://localhost:2666&apos;,</span><br><span class=\"line\">    // &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      name: &apos;vue2&apos;,</span><br><span class=\"line\">      cache: false,</span><br><span class=\"line\">      activeWhen: &apos;/vue2&apos;,</span><br><span class=\"line\">      entry: &apos;http://localhost:2777&apos;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      name: &apos;react&apos;,</span><br><span class=\"line\">      activeWhen: &apos;/react&apos;,</span><br><span class=\"line\">      entry: &apos;http://localhost:2444&apos;,</span><br><span class=\"line\">      props: &#123;</span><br><span class=\"line\">        appName: &apos;react&apos;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  autoRefreshApp: false,</span><br><span class=\"line\">  disablePreloadApp: true,</span><br><span class=\"line\">  protectVariable: [&apos;MonitoringInstance&apos;, &apos;Garfish&apos;],</span><br><span class=\"line\">  sandbox: &#123;</span><br><span class=\"line\">    open: true,</span><br><span class=\"line\">    // strictIsolation: true,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  // beforeMount(appInfo) &#123;</span><br><span class=\"line\">  //   console.log(&apos;beforeMount&apos;, appInfo);</span><br><span class=\"line\">  // &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  // afterLoad(info, app) &#123;</span><br><span class=\"line\">  //   console.log(app.vmSandbox);</span><br><span class=\"line\">  // &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  customLoader() &#123;&#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªé»˜è®¤é…ç½®ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œé€šè¿‡ä¹‹å‰çš„æºç åˆ†æï¼Œè¿™äº›é…ç½®æœ€åä¼šæ·±åº¦mergeåˆ°Garfishç±»ä¸­çš„é»˜è®¤é…ç½®ã€‚æ¥ä¸‹æ¥å°±æ˜¯GarfishInstance.run(Config)ï¼Œå°†é…ç½®ä¼ å…¥ï¼Œç„¶åæ‰§è¡ŒGarfishç±»ä¸­çš„runæ–¹æ³•ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">run(options: interfaces.Options = &#123;&#125;) &#123;</span><br><span class=\"line\">    if (this.running) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    this.setOptions(options);</span><br><span class=\"line\">    // Register plugins</span><br><span class=\"line\">    this.usePlugin(GarfishHMRPlugin());</span><br><span class=\"line\">    this.usePlugin(GarfishPerformance());</span><br><span class=\"line\">    if (!this.options.disablePreloadApp) &#123;</span><br><span class=\"line\">      this.usePlugin(GarfishPreloadPlugin());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options.plugins?.forEach((plugin) =&gt; this.usePlugin(plugin));</span><br><span class=\"line\">    // Put the lifecycle plugin at the end, so that you can get the changes of other plugins</span><br><span class=\"line\">    this.usePlugin(GarfishOptionsLife(this.options, &apos;global-lifecycle&apos;));</span><br><span class=\"line\"></span><br><span class=\"line\">    // Emit hooks and register apps</span><br><span class=\"line\">    this.hooks.lifecycle.beforeBootstrap.emit(this.options);</span><br><span class=\"line\">    this.registerApp(this.options.apps || []);</span><br><span class=\"line\">    this.running = true;</span><br><span class=\"line\">    this.hooks.lifecycle.bootstrap.emit(this.options);</span><br><span class=\"line\">    return this;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>é¦–å…ˆè¿˜æ˜¯æŠŠä¼ å…¥çš„optionså‚æ•°æ·±åº¦mergeåˆ°Garfishé»˜è®¤çš„optionsä¸­ï¼Œæ¥ç€è¿›è¡Œä¸€äº›æ’ä»¶æ³¨å†Œï¼Œæœ€åæ³¨å†Œäº†ä¸€ä¸ªåä¸ºglobal-lifecycleçš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶ä¸»è¦æ˜¯ç”¨æ¥å…œåº•çš„ï¼Œå› ä¸ºæ’ä»¶æ³¨å†Œæ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå…ˆæ³¨å†Œçš„æ’ä»¶ï¼Œåœ¨å®è¡Œç”Ÿå‘½é’©å­æ–¹æ³•æ—¶ï¼Œæ˜¯å…ˆæ‰§è¡Œçš„ï¼Œæ‰€ä»¥global-lifecycleè¿™ä¸ªæ’ä»¶ä¸­ï¼Œä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ–¹æ³•æ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¼ å…¥çš„ï¼Œé‚£ä¹ˆæœ€åæ‰§è¡Œçš„æ—¶å€™ï¼Œglobal-lifecycleæ‹¿åˆ°çš„æ˜¯æ‰€æœ‰æ’ä»¶ä¸­æœ€åçš„æ•°æ®ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚<br>æ¥ä¸‹æ¥å°±æ˜¯è§¦å‘ç”Ÿå‘½å‘¨æœŸä¸­beforeBootstrapï¼Œä¹‹å‰æ‰€æœ‰çš„æ’ä»¶ä¸­ï¼Œæ‰€æœ‰beforeBootstrapçš„é’©å­éƒ½æ³¨å†Œåˆ°äº†å…¨å±€beforeBootstrapä¸­ï¼Œè¿™ä¸ªæ—¶å€™è¿›è¡Œemitæ“ä½œã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ å…¥è‡ªå®šä¹‰plugin(å·²ç»å®šä¹‰äº†beforeBootstrapæ–¹æ³•)çš„è¯ï¼Œè¿™é‡Œåº”è¯¥æ˜¯æ²¡æœ‰å¯æ‰§è¡Œæ–¹æ³•çš„ï¼Œå› ä¸ºæ¡†æ¶å†…ç½®çš„ä¸€äº›æ’ä»¶ä¸­æ²¡æœ‰è¯¥æ–¹æ³•ã€‚<br>æ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œappäº†ï¼Œæˆ‘ä»¬åœ¨ä¸»åº”ç”¨ä¸­çš„optionsä¸­ï¼Œæœ‰ä¸ªappsçš„å±æ€§ï¼Œé‡Œé¢æ³¨å†Œç€æ‰€æœ‰å­åº”ç”¨ã€‚çœ‹ä¸€ä¸‹registreAppçš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">registerApp(list: interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;) &#123;</span><br><span class=\"line\">    const currentAdds = &#123;&#125;;</span><br><span class=\"line\">    this.hooks.lifecycle.beforeRegisterApp.emit(list);</span><br><span class=\"line\">    if (!Array.isArray(list)) list = [list];</span><br><span class=\"line\"></span><br><span class=\"line\">    for (const appInfo of list) &#123;</span><br><span class=\"line\">      assert(appInfo.name, &apos;Miss app.name.&apos;);</span><br><span class=\"line\">      if (!this.appInfos[appInfo.name]) &#123;</span><br><span class=\"line\">        assert(</span><br><span class=\"line\">          appInfo.entry,</span><br><span class=\"line\">          `$&#123;appInfo.name&#125; application entry is not url: $&#123;appInfo.entry&#125;`,</span><br><span class=\"line\">        );</span><br><span class=\"line\">        currentAdds[appInfo.name] = appInfo;</span><br><span class=\"line\">        this.appInfos[appInfo.name] = appInfo;</span><br><span class=\"line\">      &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">        warn(`The &quot;$&#123;appInfo.name&#125;&quot; app is already registered.`);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    this.hooks.lifecycle.registerApp.emit(currentAdds);</span><br><span class=\"line\">    return this;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>é¦–å…ˆæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbeforeRegisterAppä¸­çš„æ–¹æ³•ï¼Œç„¶åå°†appsæ³¨å†Œåˆ°currentAddså’Œthis.appInfosä¸­ï¼Œå†æ‰§è¡ŒregisterAppä¸­çš„æ–¹æ³•ã€‚<br>å†è¿”å›åˆ°runæ–¹æ³•ä¸­ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå°±ä¼šæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbootstrapä¸­çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¸»è¦çœ‹ä¸€ä¸‹routerä¸­çš„bootstrapæ–¹æ³•ï¼Œçœ‹çœ‹åœ¨å¯åŠ¨æ—¶åšäº†ä»€ä¹ˆ<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/index.ts</span><br><span class=\"line\">bootstrap(options: interfaces.Options) &#123;</span><br><span class=\"line\">        let activeApp = null;</span><br><span class=\"line\">        const unmounts: Record&lt;string, Function&gt; = &#123;&#125;;</span><br><span class=\"line\">        const &#123; basename &#125; = options;</span><br><span class=\"line\">        const &#123; autoRefreshApp = true, onNotMatchRouter = () =&gt; null &#125; =</span><br><span class=\"line\">          Garfish.options;</span><br><span class=\"line\"></span><br><span class=\"line\">        async function active(appInfo: interfaces.AppInfo, rootPath: string) &#123;</span><br><span class=\"line\">          const &#123; name, cache = true, active &#125; = appInfo;</span><br><span class=\"line\">          if (active) return active(appInfo, rootPath);</span><br><span class=\"line\">          appInfo.rootPath = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const currentApp = (activeApp = createKey());</span><br><span class=\"line\">          const app = await Garfish.loadApp(appInfo.name, &#123;</span><br><span class=\"line\">            basename: rootPath,</span><br><span class=\"line\">            entry: appInfo.entry,</span><br><span class=\"line\">            cache: true,</span><br><span class=\"line\">            domGetter: appInfo.domGetter,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          app.appInfo.basename = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const call = (app: interfaces.App, isRender: boolean) =&gt; &#123;</span><br><span class=\"line\">            if (!app) return;</span><br><span class=\"line\">            const isDes = cache &amp;&amp; app.mounted;</span><br><span class=\"line\">            const fn = isRender</span><br><span class=\"line\">              ? app[isDes ? &apos;show&apos; : &apos;mount&apos;]</span><br><span class=\"line\">              : app[isDes ? &apos;hide&apos; : &apos;unmount&apos;];</span><br><span class=\"line\">            return fn.call(app);</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">          Garfish.apps[name] = app;</span><br><span class=\"line\">          unmounts[name] = () =&gt; call(app, false);</span><br><span class=\"line\"></span><br><span class=\"line\">          if (currentApp === activeApp) &#123;</span><br><span class=\"line\">            await call(app, true);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        async function deactive(appInfo: interfaces.AppInfo, rootPath: string) &#123;</span><br><span class=\"line\">          activeApp = null;</span><br><span class=\"line\">          const &#123; name, deactive &#125; = appInfo;</span><br><span class=\"line\">          if (deactive) return deactive(appInfo, rootPath);</span><br><span class=\"line\"></span><br><span class=\"line\">          const unmount = unmounts[name];</span><br><span class=\"line\">          unmount &amp;&amp; unmount();</span><br><span class=\"line\">          delete Garfish.apps[name];</span><br><span class=\"line\"></span><br><span class=\"line\">          // Nested scene to remove the current application of nested data</span><br><span class=\"line\">          // To avoid the main application prior to application</span><br><span class=\"line\">          const needToDeleteApps = router.routerConfig.apps.filter((app) =&gt; &#123;</span><br><span class=\"line\">            if (appInfo.rootPath === app.basename) return true;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          if (needToDeleteApps.length &gt; 0) &#123;</span><br><span class=\"line\">            needToDeleteApps.forEach((app) =&gt; &#123;</span><br><span class=\"line\">              delete Garfish.appInfos[app.name];</span><br><span class=\"line\">              delete Garfish.cacheApps[app.name];</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            router.setRouterConfig(&#123;</span><br><span class=\"line\">              apps: router.routerConfig.apps.filter((app) =&gt; &#123;</span><br><span class=\"line\">                return !needToDeleteApps.some(</span><br><span class=\"line\">                  (needDelete) =&gt; app.name === needDelete.name,</span><br><span class=\"line\">                );</span><br><span class=\"line\">              &#125;),</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        const apps = Object.values(Garfish.appInfos);</span><br><span class=\"line\"></span><br><span class=\"line\">        const appList = apps.filter((app) =&gt; &#123;</span><br><span class=\"line\">          if (!app.basename) app.basename = basename;</span><br><span class=\"line\">          return !!app.activeWhen;</span><br><span class=\"line\">        &#125;) as Array&lt;Required&lt;interfaces.AppInfo&gt;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">        const listenOptions = &#123;</span><br><span class=\"line\">          basename,</span><br><span class=\"line\">          active,</span><br><span class=\"line\">          deactive,</span><br><span class=\"line\">          autoRefreshApp,</span><br><span class=\"line\">          notMatch: onNotMatchRouter,</span><br><span class=\"line\">          apps: appList,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        listenRouterAndReDirect(listenOptions);</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥çœ‹æœ€åï¼Œå°±æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªlistenRouterAndReDirectæ–¹æ³•ï¼Œå¹¶ä¼ å…¥äº†listenOptionså¯¹è±¡ã€‚æ¥ç€æ‰¾listenRouterAndReDirectæ–¹æ³•çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/context.ts</span><br><span class=\"line\">export const listenRouterAndReDirect = (&#123;</span><br><span class=\"line\">  apps,</span><br><span class=\"line\">  basename,</span><br><span class=\"line\">  autoRefreshApp,</span><br><span class=\"line\">  active,</span><br><span class=\"line\">  deactive,</span><br><span class=\"line\">  notMatch,</span><br><span class=\"line\">&#125;: Options) =&gt; &#123;</span><br><span class=\"line\">  // æ³¨å†Œå­åº”ç”¨ã€æ³¨å†Œæ¿€æ´»ã€é”€æ¯é’©å­</span><br><span class=\"line\">  registerRouter(apps);</span><br><span class=\"line\"></span><br><span class=\"line\">  // åˆå§‹åŒ–ä¿¡æ¯</span><br><span class=\"line\">  setRouterConfig(&#123;</span><br><span class=\"line\">    basename,</span><br><span class=\"line\">    autoRefreshApp,</span><br><span class=\"line\">    // supportProxy: !!window.Proxy,</span><br><span class=\"line\">    active,</span><br><span class=\"line\">    deactive,</span><br><span class=\"line\">    notMatch,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // å¼€å§‹ç›‘å¬è·¯ç”±å˜åŒ–è§¦å‘ã€å­åº”ç”¨æ›´æ–°ã€‚é‡è½½é»˜è®¤åˆå§‹å­åº”ç”¨</span><br><span class=\"line\">  listen();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>ä¸»è¦å°±æ˜¯æ³¨å†Œå­åº”ç”¨ï¼Œåˆå§‹åŒ–é…ç½®ï¼Œæœ€åè¿›è¡Œç›‘å¬ã€‚å†çœ‹listenæ–¹æ³•çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/agentRouter.ts</span><br><span class=\"line\">export const listen = () =&gt; &#123;</span><br><span class=\"line\">  normalAgent();</span><br><span class=\"line\">  initRedirect();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>ç„¶åæ‰§è¡Œäº†ä¸¤ä¸ªæ–¹æ³•normalAgentå’ŒinitRedirectï¼Œç»§ç»­å¾€ä¸‹çœ‹å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/agentRouter.ts</span><br><span class=\"line\">export const normalAgent = () =&gt; &#123;</span><br><span class=\"line\">  // By identifying whether have finished listening, if finished listening, listening to the routing changes do not need to hijack the original event</span><br><span class=\"line\">  // Support nested scene</span><br><span class=\"line\">  const addRouterListener = function () &#123;</span><br><span class=\"line\">    window.addEventListener(__GARFISH_BEFORE_ROUTER_EVENT__, function (env) &#123;</span><br><span class=\"line\">      RouterConfig.routerChange &amp;&amp; RouterConfig.routerChange(location.pathname);</span><br><span class=\"line\">      linkTo((env as any).detail);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  if (!window[__GARFISH_ROUTER_FLAG__]) &#123;</span><br><span class=\"line\">    // Listen for pushState and replaceState, call linkTo, processing, listen back</span><br><span class=\"line\">    // Rewrite the history API method, triggering events in the call</span><br><span class=\"line\">    const rewrite = function (type: keyof History) &#123;</span><br><span class=\"line\">      const hapi = history[type];</span><br><span class=\"line\">      return function () &#123;</span><br><span class=\"line\">        const urlBefore = window.location.pathname + window.location.hash;</span><br><span class=\"line\">        const stateBefore = history?.state;</span><br><span class=\"line\">        const res = hapi.apply(this as any, arguments);</span><br><span class=\"line\">        const urlAfter = window.location.pathname + window.location.hash;</span><br><span class=\"line\">        const stateAfter = history?.state;</span><br><span class=\"line\"></span><br><span class=\"line\">        const e = createEvent(type);</span><br><span class=\"line\">        (e as any).arguments = arguments;</span><br><span class=\"line\"></span><br><span class=\"line\">        if (urlBefore !== urlAfter || stateBefore !== stateAfter) &#123;</span><br><span class=\"line\">          if (history.state &amp;&amp; history.state === &apos;object&apos;)</span><br><span class=\"line\">            delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];</span><br><span class=\"line\">          window.dispatchEvent(</span><br><span class=\"line\">            new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, &#123;</span><br><span class=\"line\">              detail: &#123;</span><br><span class=\"line\">                toRouterInfo: &#123;</span><br><span class=\"line\">                  fullPath: urlAfter,</span><br><span class=\"line\">                  query: parseQuery(location.search),</span><br><span class=\"line\">                  path: getPath(RouterConfig.basename!, urlAfter),</span><br><span class=\"line\">                  state: stateAfter,</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                fromRouterInfo: &#123;</span><br><span class=\"line\">                  fullPath: urlBefore,</span><br><span class=\"line\">                  query: parseQuery(location.search),</span><br><span class=\"line\">                  path: getPath(RouterConfig.basename!, urlBefore),</span><br><span class=\"line\">                  state: stateBefore,</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                eventType: type,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">            &#125;),</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        // window.dispatchEvent(e);</span><br><span class=\"line\">        return res;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    history.pushState = rewrite(&apos;pushState&apos;);</span><br><span class=\"line\">    history.replaceState = rewrite(&apos;replaceState&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // Before the collection application sub routing, forward backward routing updates between child application</span><br><span class=\"line\">    window.addEventListener(</span><br><span class=\"line\">      &apos;popstate&apos;,</span><br><span class=\"line\">      function (event) &#123;</span><br><span class=\"line\">        // Stop trigger collection function, fire again match rendering</span><br><span class=\"line\">        if (event &amp;&amp; typeof event === &apos;object&apos; &amp;&amp; (event as any).garfish)</span><br><span class=\"line\">          return;</span><br><span class=\"line\">        if (history.state &amp;&amp; history.state === &apos;object&apos;)</span><br><span class=\"line\">          delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];</span><br><span class=\"line\">        window.dispatchEvent(</span><br><span class=\"line\">          new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, &#123;</span><br><span class=\"line\">            detail: &#123;</span><br><span class=\"line\">              toRouterInfo: &#123;</span><br><span class=\"line\">                fullPath: location.pathname,</span><br><span class=\"line\">                query: parseQuery(location.search),</span><br><span class=\"line\">                path: getPath(RouterConfig.basename!),</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              fromRouterInfo: &#123;</span><br><span class=\"line\">                fullPath: RouterConfig.current!.fullPath,</span><br><span class=\"line\">                path: getPath(</span><br><span class=\"line\">                  RouterConfig.basename!,</span><br><span class=\"line\">                  RouterConfig.current!.path,</span><br><span class=\"line\">                ),</span><br><span class=\"line\">                query: RouterConfig.current!.query,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              eventType: &apos;popstate&apos;,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;),</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      false,</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    window[__GARFISH_ROUTER_FLAG__] = true;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  addRouterListener();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>normalAgentæ–¹æ³•çš„å®ç°ï¼Œå…¶å®å°±æ˜¯é‡å†™äº†history.pushStateå’Œhistory.replaceStateä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ä¼šè§¦å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶<strong>GARFISH_BEFORE_ROUTER_EVENT</strong>ï¼Œé‚£ä¹ˆaddRouterListenerå…¶å®å°±æ˜¯æ³¨å†Œäº†<strong>GARFISH_BEFORE_ROUTER_EVENT</strong>è‡ªå®šä¹‰äº‹ä»¶ã€‚è€ŒinitRedirectæ–¹æ³•å°±æ˜¯åˆå§‹é»˜è®¤åŒ–è·¯ç”±çš„ã€‚æ— è®ºæ˜¯normalAgentè¿˜æ˜¯initRedirectï¼Œæœ€åéƒ½ä¼šè¿›å…¥linkToæ–¹æ³•ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/linkTo.ts</span><br><span class=\"line\">export const linkTo = async (&#123;</span><br><span class=\"line\">  toRouterInfo,</span><br><span class=\"line\">  fromRouterInfo,</span><br><span class=\"line\">  eventType,</span><br><span class=\"line\">&#125;: &#123;</span><br><span class=\"line\">  toRouterInfo: RouterInfo;</span><br><span class=\"line\">  fromRouterInfo: RouterInfo;</span><br><span class=\"line\">  eventType: keyof History | &apos;popstate&apos;;</span><br><span class=\"line\">&#125;) =&gt; &#123;</span><br><span class=\"line\">  const &#123;</span><br><span class=\"line\">    current,</span><br><span class=\"line\">    apps,</span><br><span class=\"line\">    deactive,</span><br><span class=\"line\">    active,</span><br><span class=\"line\">    notMatch,</span><br><span class=\"line\">    beforeEach,</span><br><span class=\"line\">    afterEach,</span><br><span class=\"line\">    autoRefreshApp,</span><br><span class=\"line\">  &#125; = RouterConfig;</span><br><span class=\"line\">  const deactiveApps = current!.matched.filter(</span><br><span class=\"line\">    (appInfo) =&gt;</span><br><span class=\"line\">      !hasActive(</span><br><span class=\"line\">        appInfo.activeWhen,</span><br><span class=\"line\">        getPath(appInfo.basename, location.pathname),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  // Activate the corresponding application</span><br><span class=\"line\">  const activeApps = apps.filter((appInfo) =&gt; &#123;</span><br><span class=\"line\">    return hasActive(</span><br><span class=\"line\">      appInfo.activeWhen,</span><br><span class=\"line\">      getPath(appInfo.basename, location.pathname),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  const needToActive = activeApps.filter((&#123; name &#125;) =&gt; &#123;</span><br><span class=\"line\">    return !current!.matched.some((&#123; name: cName &#125;) =&gt; name === cName);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // router infos</span><br><span class=\"line\">  const to = &#123;</span><br><span class=\"line\">    ...toRouterInfo,</span><br><span class=\"line\">    matched: needToActive,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  const from = &#123;</span><br><span class=\"line\">    ...fromRouterInfo,</span><br><span class=\"line\">    matched: deactiveApps,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  await toMiddleWare(to, from, beforeEach!);</span><br><span class=\"line\"></span><br><span class=\"line\">  // Pause the current application of active state</span><br><span class=\"line\">  if (current!.matched.length &gt; 0) &#123;</span><br><span class=\"line\">    await asyncForEach(</span><br><span class=\"line\">      deactiveApps,</span><br><span class=\"line\">      async (appInfo) =&gt;</span><br><span class=\"line\">        await deactive(appInfo, getPath(appInfo.basename, location.pathname)),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  setRouterConfig(&#123;</span><br><span class=\"line\">    current: &#123;</span><br><span class=\"line\">      path: getPath(RouterConfig.basename!),</span><br><span class=\"line\">      fullPath: location.pathname,</span><br><span class=\"line\">      matched: activeApps,</span><br><span class=\"line\">      state: history.state,</span><br><span class=\"line\">      query: parseQuery(location.search),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // Within the application routing jump, by collecting the routing function for processing.</span><br><span class=\"line\">  // Filtering gar-router popstate hijacking of the router</span><br><span class=\"line\">  // In the switch back and forth in the application is provided through routing push method would trigger application updates</span><br><span class=\"line\">  // application will refresh when autoRefresh configuration to true</span><br><span class=\"line\">  const curState = window.history.state || &#123;&#125;;</span><br><span class=\"line\">  if (</span><br><span class=\"line\">    eventType !== &apos;popstate&apos; &amp;&amp;</span><br><span class=\"line\">    (curState[__GARFISH_ROUTER_UPDATE_FLAG__] || autoRefreshApp)</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    callCapturedEventListeners(eventType);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  await asyncForEach(needToActive, async (appInfo) =&gt; &#123;</span><br><span class=\"line\">    // Function using matches character and routing using string matching characters</span><br><span class=\"line\">    const appRootPath = getAppRootPath(appInfo);</span><br><span class=\"line\">    await active(appInfo, appRootPath);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  if (activeApps.length === 0 &amp;&amp; notMatch) notMatch(location.pathname);</span><br><span class=\"line\"></span><br><span class=\"line\">  await toMiddleWare(to, from, afterEach!);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>å†å½’çº³ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å¯ä»¥æ‰§è¡Œï¼ŒafterEachå’ŒbeforeEachï¼Œå°±æ˜¯åœ¨activeä¹‹å‰å’Œä¹‹åçš„æ‰§è¡Œæ—¶æœºã€‚ç„¶åä¸»è¦çš„å°±æ˜¯activeäº†ï¼Œå…¶å®activeè¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯routeræ’ä»¶ä¸­ï¼Œbootstrapé’©å­é‡Œçš„activeæ–¹æ³•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸»åº”ç”¨å°±runèµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é€šè¿‡è·¯ç”±æ¥showæˆ–è€…hideå­åº”ç”¨äº†ã€‚</p>\n<h1 id=\"è·¯ç”±triggerå­åº”ç”¨\"><a href=\"#è·¯ç”±triggerå­åº”ç”¨\" class=\"headerlink\" title=\"è·¯ç”±triggerå­åº”ç”¨\"></a>è·¯ç”±triggerå­åº”ç”¨</h1><p>æ¥ä¸‹æ¥ç‚¹å‡»vueæŒ‰é’®ï¼Œå±•ç¤ºvueå­åº”ç”¨ã€‚<br>æˆ‘ä»¬å‰é¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œåœ¨normalAgentå®ç°ä¸­åŠ«æŒäº†history.pushæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œè·¯ç”±å˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘è‡ªå®šä¹‰äº‹ä»¶<strong>GARFISH_BEFORE_ROUTER_EVENT</strong>ï¼Œç„¶åä¼šå†æ¬¡è¿›å…¥linkToæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™needToActiveå°±æ˜¯trueäº†ï¼Œä¼šæ‰§è¡Œactiveï¼Œè€Œactiveå°±æ˜¯routeræ’ä»¶ä¸­bootstrapçš„activeæ–¹æ³•ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/index.ts</span><br><span class=\"line\">async function active(appInfo: interfaces.AppInfo, rootPath: string) &#123;</span><br><span class=\"line\">          const &#123; name, cache = true, active &#125; = appInfo;</span><br><span class=\"line\">          if (active) return active(appInfo, rootPath);</span><br><span class=\"line\">          appInfo.rootPath = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const currentApp = (activeApp = createKey());</span><br><span class=\"line\">          const app = await Garfish.loadApp(appInfo.name, &#123;</span><br><span class=\"line\">            basename: rootPath,</span><br><span class=\"line\">            entry: appInfo.entry,</span><br><span class=\"line\">            cache: true,</span><br><span class=\"line\">            domGetter: appInfo.domGetter,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          app.appInfo.basename = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const call = (app: interfaces.App, isRender: boolean) =&gt; &#123;</span><br><span class=\"line\">            if (!app) return;</span><br><span class=\"line\">            const isDes = cache &amp;&amp; app.mounted;</span><br><span class=\"line\">            const fn = isRender</span><br><span class=\"line\">              ? app[isDes ? &apos;show&apos; : &apos;mount&apos;]</span><br><span class=\"line\">              : app[isDes ? &apos;hide&apos; : &apos;unmount&apos;];</span><br><span class=\"line\">            return fn.call(app);</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">          Garfish.apps[name] = app;</span><br><span class=\"line\">          unmounts[name] = () =&gt; call(app, false);</span><br><span class=\"line\"></span><br><span class=\"line\">          if (currentApp === activeApp) &#123;</span><br><span class=\"line\">            await call(app, true);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªæ–¹æ³•ä¸­ä¼šæœ‰ä¸ªappï¼Œè¿™ä¸ªappæ˜¯Garfishç±»ä¸­loadAppæ–¹æ³•è¿”å›çš„ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿”å›çš„è¿™ä¸ªappæ˜¯å•¥ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">async loadApp(</span><br><span class=\"line\">    appName: string,</span><br><span class=\"line\">    optionsOrUrl?: Omit&lt;interfaces.AppInfo, &apos;name&apos;&gt;,</span><br><span class=\"line\">  ): Promise&lt;interfaces.App | null&gt; &#123;</span><br><span class=\"line\">    assert(appName, &apos;Miss appName.&apos;);</span><br><span class=\"line\">    const appInfo = generateAppOptions(appName, this, optionsOrUrl);</span><br><span class=\"line\"></span><br><span class=\"line\">    const asyncLoadProcess = async () =&gt; &#123;</span><br><span class=\"line\">      // Return not undefined type data directly to end loading</span><br><span class=\"line\">      const stop = await this.hooks.lifecycle.beforeLoad.emit(appInfo);</span><br><span class=\"line\">      if (stop === false) &#123;</span><br><span class=\"line\">        warn(`Load $&#123;appName&#125; application is terminated by beforeLoad.`);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // Existing cache caching logic</span><br><span class=\"line\">      let appInstance: interfaces.App = null;</span><br><span class=\"line\">      const cacheApp = this.cacheApps[appName];</span><br><span class=\"line\">      if (appInfo.cache &amp;&amp; cacheApp) &#123;</span><br><span class=\"line\">        appInstance = cacheApp;</span><br><span class=\"line\">      &#125; else &#123;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">          const [manager, resources, isHtmlMode] = await processAppResources(</span><br><span class=\"line\">            this.loader,</span><br><span class=\"line\">            appInfo,</span><br><span class=\"line\">          );</span><br><span class=\"line\"></span><br><span class=\"line\">          appInstance = new App(</span><br><span class=\"line\">            this,</span><br><span class=\"line\">            appInfo,</span><br><span class=\"line\">            manager,</span><br><span class=\"line\">            resources,</span><br><span class=\"line\">            isHtmlMode,</span><br><span class=\"line\">            appInfo.customLoader,</span><br><span class=\"line\">          );</span><br><span class=\"line\"></span><br><span class=\"line\">          // The registration hook will automatically remove the duplication</span><br><span class=\"line\">          for (const key in this.plugins) &#123;</span><br><span class=\"line\">            appInstance.hooks.usePlugin(this.plugins[key]);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (appInfo.cache) &#123;</span><br><span class=\"line\">            this.cacheApps[appName] = appInstance;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; catch (e) &#123;</span><br><span class=\"line\">          __DEV__ &amp;&amp; warn(e);</span><br><span class=\"line\">          this.hooks.lifecycle.errorLoadApp.emit(e, appInfo);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      await this.hooks.lifecycle.afterLoad.emit(appInfo, appInstance);</span><br><span class=\"line\">      return appInstance;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    if (!this.loading[appName]) &#123;</span><br><span class=\"line\">      this.loading[appName] = asyncLoadProcess().finally(() =&gt; &#123;</span><br><span class=\"line\">        this.loading[appName] = null;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return this.loading[appName];</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªå‡½æ•°ç¨å¾®æœ‰ç‚¹é•¿ï¼Œæˆ‘æ€»ç»“ä¸€ä¸‹ï¼Œthis.loadingæ˜¯ä¸ºäº†ä¿å­˜å½“å‰è¦åŠ è½½çš„appï¼Œé€šè¿‡ä¸€ä¸ªasyncLoadProcessè¿”å›ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼ŒasyncLoadProcessæ˜¯asyncå‡½æ•°ï¼Œæ²¡æœ‰awaitï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œresolveçš„æ˜¯appInstanceï¼Œåœ¨asyncLoadProcessä¸­ï¼Œä¹Ÿæ˜¯æ‰§è¡Œäº†appç”Ÿå‘½å‘¨æœŸä¸­çš„å‡ ä¸ªé’©å­ã€‚æˆ‘ä»¬å†ç®€å•äº†è§£ä¸€ä¸‹Appç±»æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œç”±äºä»£ç å¤ªå¤šï¼Œæˆ‘ä»¬åªåˆ—ä¸ªå¤§æ¦‚ï¼Œå¹¶ä¸”è¯´æ˜ç”¨é€”å³å¯ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/module/app.ts</span><br><span class=\"line\">export class App &#123;</span><br><span class=\"line\">  public appId = appId++;</span><br><span class=\"line\">  public display = false;</span><br><span class=\"line\">  public mounted = false;</span><br><span class=\"line\">  public esModule = false;</span><br><span class=\"line\">  public strictIsolation = false;</span><br><span class=\"line\">  public name: string;</span><br><span class=\"line\">  public isHtmlMode: boolean;</span><br><span class=\"line\">  public global: any = window;</span><br><span class=\"line\">  public appContainer: HTMLElement;</span><br><span class=\"line\">  public cjsModules: Record&lt;string, any&gt;;</span><br><span class=\"line\">  public htmlNode: HTMLElement | ShadowRoot;</span><br><span class=\"line\">  public customExports: Record&lt;string, any&gt; = &#123;&#125;; // If you don&apos;t want to use the CJS export, can use this</span><br><span class=\"line\">  public sourceList: Array&lt;&#123; tagName: string; url: string &#125;&gt; = [];</span><br><span class=\"line\">  public appInfo: AppInfo;</span><br><span class=\"line\">  public hooks: interfaces.AppHooks;</span><br><span class=\"line\">  public provider: interfaces.Provider;</span><br><span class=\"line\">  public entryManager: TemplateManager;</span><br><span class=\"line\">  public appPerformance: SubAppObserver;</span><br><span class=\"line\">  /** @deprecated */</span><br><span class=\"line\">  public customLoader: CustomerLoader;</span><br><span class=\"line\"></span><br><span class=\"line\">  private active = false;</span><br><span class=\"line\">  private mounting = false;</span><br><span class=\"line\">  private unmounting = false;</span><br><span class=\"line\">  private context: Garfish;</span><br><span class=\"line\">  private resources: interfaces.ResourceModules;</span><br><span class=\"line\">  // Environment variables injected by garfish for linkage with child applications</span><br><span class=\"line\">  private globalEnvVariables: Record&lt;string, any&gt;;</span><br><span class=\"line\">  // es-module save lifeCycle to appGlobalIdï¼ŒappGlobalId in script attr</span><br><span class=\"line\">  private appGlobalId: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(</span><br><span class=\"line\">    context: Garfish,</span><br><span class=\"line\">    appInfo: AppInfo,</span><br><span class=\"line\">    entryManager: TemplateManager,</span><br><span class=\"line\">    resources: interfaces.ResourceModules,</span><br><span class=\"line\">    isHtmlMode: boolean,</span><br><span class=\"line\">    customLoader: CustomerLoader,</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  get rootElement() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getProvider() &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  execScript(</span><br><span class=\"line\">    code: string,</span><br><span class=\"line\">    env: Record&lt;string, any&gt;,</span><br><span class=\"line\">    url?: string,</span><br><span class=\"line\">    options?: &#123; async?: boolean; noEntry?: boolean &#125;,</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // `vm sandbox` can override this method</span><br><span class=\"line\">  runCode(</span><br><span class=\"line\">    code: string,</span><br><span class=\"line\">    env: Record&lt;string, any&gt;,</span><br><span class=\"line\">    url?: string,</span><br><span class=\"line\">    options?: &#123; async?: boolean; noEntry?: boolean &#125;,</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  async show() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  hide() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  async mount() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  unmount() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getExecScriptEnv(noEntry: boolean) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Performs js resources provided by the module, finally get the content of the export</span><br><span class=\"line\">  async compileAndRenderContainer() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private canMount() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // If asynchronous task encountered in the rendering process, such as triggering the beforeEval before executing code,</span><br><span class=\"line\">  // after the asynchronous task, you need to determine whether the application has been destroyed or in the end state.</span><br><span class=\"line\">  // If in the end state will need to perform the side effects of removing rendering process, adding a mount point to a document,</span><br><span class=\"line\">  // for example, execute code of the environmental effects, and rendering the state in the end.</span><br><span class=\"line\">  private stopMountAndClearEffect() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Calls to render do compatible with two different sandbox</span><br><span class=\"line\">  private callRender(provider: interfaces.Provider, isMount: boolean) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Call to destroy do compatible with two different sandbox</span><br><span class=\"line\">  private callDestroy(provider: interfaces.Provider, isUnmount: boolean) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Create a container node and add in the document flow</span><br><span class=\"line\">  // domGetter Have been dealing with</span><br><span class=\"line\">  private async addContainer() &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private async renderTemplate() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private async checkAndGetProvider() &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ€»ç»“èµ·æ¥ï¼Œè¿™ä¸ªAppç±»æä¾›çš„èƒ½åŠ›å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>æä¾›é™æ€èµ„æºï¼ŒHTMLã€CSSã€jsçš„ç»“æ„ã€‚</li>\n<li>å¯ä»¥åœ¨CJSä¸­æå–æˆ–è€…æ¨å¯¼å‡ºå­åº”ç”¨çš„ providerã€‚<br>3.é€šè¿‡execCodeä¼ å…¥æ¨¡å—çš„CJSè§„èŒƒã€requireã€exportsç­‰ç¯å¢ƒå˜é‡å®ç°å¯¹å¤–å…±äº«</li>\n<li>è§¦å‘æ¸²æŸ“ï¼šåº”ç”¨ç›¸å…³èŠ‚ç‚¹æ”¾ç½®åœ¨æ–‡æ¡£æµä¸­ï¼Œä¾æ¬¡æ‰§è¡Œåº”ç”¨è„šæœ¬ï¼Œæœ€ç»ˆæ¸²æŸ“åŠŸèƒ½ï¼Œæ‰§è¡Œå­åº”ç”¨æä¾›å®Œæ•´çš„åº”ç”¨ç‹¬ç«‹è¿è¡Œæ—¶æ‰§è¡Œã€‚</li>\n<li>è§¦å‘é”€æ¯ï¼šæ‰§è¡Œå­åº”ç”¨ç¨‹åºçš„é”€æ¯åŠŸèƒ½ï¼Œåº”ç”¨å­èŠ‚ç‚¹ä»æ–‡æ¡£æµä¸­ç§»é™¤ã€‚<br>å†å›åˆ°activeæ–¹æ³•ä¸­ï¼Œæœ€æ ¸å¿ƒçš„åœ°æ–¹æ˜¯callæ–¹æ³•ï¼Œæœ€åè°ƒç”¨äº†Appä¸­çš„showã€mountã€hideã€unmountæ–¹æ³•ã€‚showå’Œhideå¯ä»¥ç†è§£ä¸ºä¹‹å‰å·²ç»åŠ è½½è¿‡äº†ï¼Œå°±æ˜¯showå’Œhideä¸€ä¸‹ï¼Œmountæ˜¯è¦å’Œunmountæ˜¯æŒ‚è½½å’Œå¸è½½ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ä»¥mountä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•åŠ è½½å­åº”ç”¨ç¯å¢ƒå¹¶ä¸”åŠ è½½å­åº”ç”¨çš„ã€‚<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/module/app.ts</span><br><span class=\"line\">async mount() &#123;</span><br><span class=\"line\">    if (!this.canMount()) return false;</span><br><span class=\"line\">    this.hooks.lifecycle.beforeMount.emit(this.appInfo, this, false);</span><br><span class=\"line\"></span><br><span class=\"line\">    this.active = true;</span><br><span class=\"line\">    this.mounting = true;</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">      // add container and compile js with cjs</span><br><span class=\"line\">      const asyncJsProcess = await this.compileAndRenderContainer();</span><br><span class=\"line\"></span><br><span class=\"line\">      // Good provider is set at compile time</span><br><span class=\"line\">      const provider = await this.getProvider();</span><br><span class=\"line\">      // Existing asynchronous functions need to decide whether the application has been unloaded</span><br><span class=\"line\">      if (!this.stopMountAndClearEffect()) return false;</span><br><span class=\"line\"></span><br><span class=\"line\">      this.callRender(provider, true);</span><br><span class=\"line\">      this.display = true;</span><br><span class=\"line\">      this.mounted = true;</span><br><span class=\"line\">      this.context.activeApps.push(this);</span><br><span class=\"line\">      this.hooks.lifecycle.afterMount.emit(this.appInfo, this, false);</span><br><span class=\"line\"></span><br><span class=\"line\">      await asyncJsProcess;</span><br><span class=\"line\">      if (!this.stopMountAndClearEffect()) return false;</span><br><span class=\"line\">    &#125; catch (e) &#123;</span><br><span class=\"line\">      this.entryManager.DOMApis.removeElement(this.appContainer);</span><br><span class=\"line\">      this.hooks.lifecycle.errorMountApp.emit(e, this.appInfo);</span><br><span class=\"line\">      return false;</span><br><span class=\"line\">    &#125; finally &#123;</span><br><span class=\"line\">      this.mounting = false;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>å¤§æ¦‚æ„æ€å°±æ˜¯è¯´ï¼Œæ·»åŠ äº†ä¸€ä¸ªå­åº”ç”¨å®¹å™¨ï¼Œæ‹¿åˆ°å­åº”ç”¨èµ„æºï¼ˆä¸»è¦é€šè¿‡fetchæ–¹å¼è·å–ï¼Œç»§ç»­æ·±æŒ–compileAndRenderContainerå°±çŸ¥é“äº†ï¼‰ï¼Œç„¶åè·å–å­åº”ç”¨exportå‡ºæ¥çš„providerï¼Œæœ€åæ‰§è¡Œä»£ç ï¼Œå­åº”ç”¨å°±æˆåŠŸå±•ç¤ºå‡ºæ¥äº†ã€‚<br>å†è¯´ä¸€ä¸‹å­åº”ç”¨çš„ä»£ç æ‰§è¡Œï¼Œå­åº”ç”¨ä¸­å¦‚æœä½¿ç”¨äº†windowï¼Œé‚£ä¹ˆåœ¨å­åº”ç”¨æ¥å…¥ä¸»åº”ç”¨åï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œé‚£ä¹ˆä¸¤ä¸ªåº”ç”¨çš„windowæ˜¯ä¸€ä¸ªï¼Œè¿™æ ·å°±ä¼šæœ‰é€»è¾‘é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æœ‰äº†æ²™ç®±æ¦‚å¿µã€‚garfishä¸­æä¾›äº†ä¸¤ç§æ²™ç®±æœºåˆ¶ï¼švmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚<br>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„vmæ²™ç®±åŸç†ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const varBox = &#123;&#125;;</span><br><span class=\"line\">const fakeWindow = new Proxy(window, &#123;</span><br><span class=\"line\">    get(target, key) &#123;</span><br><span class=\"line\">        return varBox[key] || window[key]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    set(target, key, value) &#123;</span><br><span class=\"line\">        varBox[key] = value;</span><br><span class=\"line\">        return true;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">const fn = new Function(&apos;window&apos;, code);</span><br><span class=\"line\">fn(fakeWindow);</span><br></pre></td></tr></table></figure></p>\n<p>ä¸»è¦æ˜¯é€šè¿‡es6ä¸­proxyå®ç°çš„ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªåŸç†æ€§ä»£ç ï¼Œå®é™…ä¸­è¿˜ä¼šå…¼å®¹å¾ˆå¤šcaseã€‚å…¶å®åœ¨æœ€åˆæ³¨å†Œgarfishæ’ä»¶çš„æ—¶å€™ï¼Œåˆå§‹åŒ–garfishå®ä¾‹çš„æ—¶å€™ï¼Œå°±åˆå§‹åŒ–äº†vmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚æˆ‘ä»¬å‰é¢ä¹Ÿè¯´äº†ï¼Œåœ¨æ¯ä¸ªæ’ä»¶ä¸­éƒ½ä¼šå®šä¹‰ä¸€äº›ç”Ÿå‘½å‘¨æœŸçš„é’©å­æ–¹æ³•ï¼Œå…¶å®åœ¨Garfish.loadAppçš„æ—¶å€™ï¼Œå°±åœ¨Appä¸ŠæŒ‚è½½äº†vmSandboxå±æ€§ï¼Œåœ¨åç»­çš„å­åº”ç”¨æ‰§è¡Œä»£ç æ—¶ï¼Œç¯å¢ƒéƒ½æ˜¯åœ¨æ²™ç®±ä¸­æ‰§è¡Œã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h1><p>é¦–å…ˆï¼Œå¯ä»¥åœ¨githubä¸ŠæŠŠä»£ç æ‹‰åˆ°æœ¬åœ°ï¼Œåœ°å€ä¸ºï¼š<a href=\"https://github.com/modern-js-dev/garfish\" target=\"_blank\" rel=\"noopener\">https://github.com/modern-js-dev/garfish</a><br>ç„¶åå°±éœ€è¦æŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚æ€»å…±å››æ­¥å³å¯ï¼š</p>\n<ol>\n<li>å…¨å±€å®‰è£…pnpmï¼š<blockquote>\n<p>$ npm i -g pnpm</p>\n</blockquote>\n</li>\n<li>å®‰è£…ä¾èµ–<blockquote>\n<p>$ pnpm install</p>\n</blockquote>\n</li>\n<li>å¯åŠ¨build:watch<blockquote>\n<p>$ pnpm build:watch</p>\n</blockquote>\n</li>\n<li>å¯åŠ¨dev<blockquote>\n<p>$ pnpm dev<br>è¿™æ ·å°±è·‘èµ·æ¥äº†ã€‚æ•´ä½“æ¡†æ¶ä»£ç è®²è§£ä¸»è¦ä»¥æµç¨‹ä¸ºä¸»ï¼Œä¸€äº›ç»†èŠ‚æ€§é€»è¾‘å°±ç›´æ¥è·³è¿‡ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç¿»æºç ã€‚</p>\n</blockquote>\n<h1 id=\"åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\"><a href=\"#åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\" class=\"headerlink\" title=\"åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š\"></a>åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥Garfishå®ä¾‹ï¼š</h1>åœ¨ä¸»åº”ç”¨ä¸­ï¼Œé¦–å…ˆå¼•å…¥Garfishå®ä¾‹ï¼š<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// dev/main/src/index.ts</span><br><span class=\"line\">import GarfishInstance from &apos;garfish&apos;;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªå®ä¾‹æ˜¯ä¸ªå•¥ï¼Œè¿½æº¯ä¸€ä¸‹æºç ï¼Œå‘ç°Garfishå®ä¾‹æ˜¯ä¸€ä¸ªå‡½æ•°è¿”å›çš„ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/garfish/src/index.ts</span><br><span class=\"line\">function createContext(): Garfish &#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  // Existing garfish instance, direct return</span><br><span class=\"line\">  if (inBrowser() &amp;&amp; window[&apos;__GARFISH__&apos;] &amp;&amp; window[&apos;Garfish&apos;]) &#123;</span><br><span class=\"line\">    return window[&apos;Garfish&apos;];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  const GarfishInstance = new Garfish(&#123;</span><br><span class=\"line\">    plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()],</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  </span><br><span class=\"line\">  return GarfishInstance;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>createContextå¯ä»¥ç†è§£ä¸ºåˆ›å»ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä»ä¸Šè‡³ä¸‹æ‹ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œå¹¶ä¸”windowä¸Šå­˜åœ¨Garfishå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›ï¼ˆç†Ÿæ‚‰è®¾è®¡æ¨¡å¼çš„åŒå­¦ï¼Œåº”è¯¥çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼‰ã€‚æ¥ä¸‹æ¥newäº†ä¸€ä¸ªGarfishå¯¹è±¡ï¼Œå¹¶ä¸”é»˜è®¤ä¼ å…¥äº†ä¸€ä¸ªå¯¹è±¡ { plugins: [GarfishRouter(), GarfishBrowserVm(), GarfishBrowserSnapshot()] }ã€‚è¿™æ˜¯åˆå§‹åŒ–äº†ä¸‰ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ä¸€ä¸‹è¿™ä¸‰ä¸ªæ’ä»¶é•¿ä»€ä¹ˆæ ·å­ã€‚<br>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹GarfishRouter<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/index.ts</span><br><span class=\"line\">export function GarfishRouter(_args?: Options) &#123;</span><br><span class=\"line\">  return function (Garfish: interfaces.Garfish): interfaces.Plugin &#123;</span><br><span class=\"line\">    Garfish.apps = &#123;&#125;;</span><br><span class=\"line\">    Garfish.router = router;</span><br><span class=\"line\"></span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      name: &apos;router&apos;,</span><br><span class=\"line\">      version: __VERSION__,</span><br><span class=\"line\"></span><br><span class=\"line\">      bootstrap(options: interfaces.Options) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      registerApp(appInfos) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥çœ‹åˆ°GarfishRouter()è¿”å›çš„æ˜¯ä¸€ä¸ªfunctionï¼Œå½¢æˆé—­åŒ…ï¼Œæœ€åä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªæ’ä»¶çš„æ ¼å¼ï¼Œæœ‰nameã€versionï¼Œè¿˜æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­bootstrapã€registerAppï¼Œç”Ÿå‘½å‘¨æœŸé’©å­æˆ‘ä»¬åç»­ä¼šä»‹ç»åˆ°ï¼Œè¿™é‡Œå¤§å®¶äº†è§£å°±è¡Œã€‚å†çœ‹çœ‹å…¶ä»–ä¸¤ä¸ªæ’ä»¶æ˜¯ä»€ä¹ˆï¼š<br>GarfishBorwserVm:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/browser-vm/src/pluginify.ts</span><br><span class=\"line\">export function GarfishBrowserVm() &#123;</span><br><span class=\"line\">  return function (Garfish: interfaces.Garfish): interfaces.Plugin &#123;</span><br><span class=\"line\">    Garfish.getGlobalObject = function () &#123;</span><br><span class=\"line\">      return Sandbox.getNativeWindow();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    Garfish.setGlobalValue = function (key, value) &#123;</span><br><span class=\"line\">      return (this.getGlobalObject()[key] = value);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    Garfish.clearEscapeEffect = function (key, value) &#123;</span><br><span class=\"line\">      const global = this.getGlobalObject();</span><br><span class=\"line\">      if (key in global) &#123;</span><br><span class=\"line\">        global[key] = value;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    return createOptions(Garfish);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function createOptions(Garfish: interfaces.Garfish) &#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">  const options: interfaces.Plugin = &#123;</span><br><span class=\"line\">    name: &apos;browser-vm&apos;,</span><br><span class=\"line\">    version: __VERSION__,</span><br><span class=\"line\"></span><br><span class=\"line\">    afterLoad(appInfo, appInstance) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    // If the app is uninstalled, the sandbox needs to clear all effects and then reset</span><br><span class=\"line\">    afterUnmount(appInfo, appInstance, isCacheMode) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    afterMount(appInfo, appInstance) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  return options;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>GarfishBrowserSnapshot:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/browser-snapshot/src/index.ts</span><br><span class=\"line\">export function GarfishBrowserSnapshot(op?: BrowserConfig) &#123;</span><br><span class=\"line\">  return function (Garfish: interfaces.Garfish): interfaces.Plugin &#123;</span><br><span class=\"line\">    const config: BrowserConfig = op || &#123; open: true &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    const options = &#123;</span><br><span class=\"line\">      openBrowser: false,</span><br><span class=\"line\">      version: __VERSION__,</span><br><span class=\"line\">      name: &apos;browser-snapshot&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">      afterLoad(appInfo, appInstance) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      beforeMount(appInfo, appInstance) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      afterUnmount(appInfo, appInstance) &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    return options;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥çœ‹åˆ°éƒ½æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°çš„è¿”å›æ ¼å¼æœ‰ç‚¹ç±»ä¼¼ï¼Œå…¶å®è¿™å°±æ˜¯garfishæ’ä»¶çš„å½¢å¼ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†è¿™ä¸ªæ’ä»¶çš„ä¸€äº›ä¿¡æ¯ï¼Œå¯ä»¥æ€»ç»“æˆè¿™æ ·ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    name: &apos;&apos;,</span><br><span class=\"line\">    version: &apos;&apos;,</span><br><span class=\"line\">    lifecycle: &apos;&apos; // è¿™é‡Œçš„lifecycleæ˜¯æ³›æŒ‡ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ï¼Œå…·ä½“æŒ‡bootstrapã€beforeBootstrapç­‰ç­‰</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ’ä»¶ä¸­ç”Ÿå‘½å‘¨æœŸçš„å…·ä½“å®ç°ï¼Œæ”¾åœ¨åé¢è®²è¿°ã€‚è¿™é‡Œæš‚æ—¶æŠŠä»£ç è¿è¡Œé“¾è·¯æ‹‰é€šã€‚æ¥ä¸‹æ¥å†è¿”å›Garfishç±»çš„å®ç°ï¼Œå®ƒçš„å®ä¾‹æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚<br>Garfishç±»çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">export class Garfish extends EventEmitter2 &#123;</span><br><span class=\"line\">  public running = false;</span><br><span class=\"line\">  public version = __VERSION__;</span><br><span class=\"line\">  public flag = __GARFISH_FLAG__; // A unique identifier</span><br><span class=\"line\">  public loader = new Loader();</span><br><span class=\"line\">  public hooks = globalLifecycle();</span><br><span class=\"line\">  public channel = new EventEmitter2();</span><br><span class=\"line\">  public options = createDefaultOptions();</span><br><span class=\"line\">  public externals: Record&lt;string, any&gt; = &#123;&#125;;</span><br><span class=\"line\">  public activeApps: Array&lt;interfaces.App&gt; = [];</span><br><span class=\"line\">  public plugins: interfaces.Plugins = &#123;&#125; as any;</span><br><span class=\"line\">  public cacheApps: Record&lt;string, interfaces.App&gt; = &#123;&#125;;</span><br><span class=\"line\">  public appInfos: Record&lt;string, interfaces.AppInfo&gt; = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  private nestedSwitch = false;</span><br><span class=\"line\">  private loading: Record&lt;string, Promise&lt;any&gt; | null&gt; = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  get props(): Record&lt;string, any&gt; &#123;</span><br><span class=\"line\">    return (this.options &amp;&amp; this.options.props) || DEFAULT_PROPS.get(this);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(options: interfaces.Options) &#123;</span><br><span class=\"line\">    super();</span><br><span class=\"line\">    this.setOptions(options);</span><br><span class=\"line\">    DEFAULT_PROPS.set(this, &#123;&#125;);</span><br><span class=\"line\">    this.options.plugins?.forEach((plugin) =&gt; this.usePlugin(plugin));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private setOptions(options: Partial&lt;interfaces.Options&gt;) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  createPluginSystem&lt;T extends (api: typeof HOOKS_API) =&gt; any&gt;(callback: T) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  usePlugin(</span><br><span class=\"line\">    plugin: (context: Garfish) =&gt; interfaces.Plugin,</span><br><span class=\"line\">    ...args: Array&lt;any&gt;</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  run(options: interfaces.Options = &#123;&#125;) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  registerApp(list: interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  setExternal(nameOrExtObj: string | Record&lt;string, any&gt;, value?: any) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  async loadApp(</span><br><span class=\"line\">    appName: string,</span><br><span class=\"line\">    optionsOrUrl?: Omit&lt;interfaces.AppInfo, &apos;name&apos;&gt;,</span><br><span class=\"line\">  ): Promise&lt;interfaces.App | null&gt; &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å…ˆçœ‹ä¸€ä¸‹é’©å­å‡½æ•°ä¸­ï¼Œåšäº†ä»€ä¹ˆï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">constructor(options: interfaces.Options) &#123;</span><br><span class=\"line\">    super();</span><br><span class=\"line\">    // ä¼ å…¥çš„optionsï¼ˆå…¶å®å°±æ˜¯é»˜è®¤çš„é‚£ä¸‰ä¸ªæ’ä»¶ï¼‰ æ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸Šã€‚</span><br><span class=\"line\">    this.setOptions(options);</span><br><span class=\"line\">    DEFAULT_PROPS.set(this, &#123;&#125;);</span><br><span class=\"line\">    // è¿™é‡Œåˆ†åˆ«æ‰§è¡Œé»˜è®¤çš„ä¸‰ä¸ªæ’ä»¶</span><br><span class=\"line\">    this.options.plugins?.forEach((plugin) =&gt; this.usePlugin(plugin));</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>this.setOptions(options)ä¸»è¦æ˜¯æŠŠä¼ å…¥çš„optionsæ·±åº¦mergeåˆ°é»˜è®¤çš„optionsä¸­ã€‚è€Œä¼ å…¥çš„optionså°±æ˜¯ä¼ å…¥çš„é‚£ä¸‰ä¸ªé»˜è®¤æ’ä»¶ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹é»˜è®¤çš„optionsæœ‰å“ªäº›å±æ€§å§ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/config.ts</span><br><span class=\"line\">export const createDefaultOptions = (nested = false) =&gt; &#123;</span><br><span class=\"line\">  const config: interfaces.Options = &#123;</span><br><span class=\"line\">    // global config</span><br><span class=\"line\">    appID: &apos;&apos;,</span><br><span class=\"line\">    apps: [],</span><br><span class=\"line\">    autoRefreshApp: true,</span><br><span class=\"line\">    disableStatistics: false,</span><br><span class=\"line\">    disablePreloadApp: false,</span><br><span class=\"line\">    // app config</span><br><span class=\"line\">    basename: &apos;/&apos;,</span><br><span class=\"line\">    props: &#123;&#125;,</span><br><span class=\"line\">    // Use an empty div by default</span><br><span class=\"line\">    domGetter: () =&gt; document.createElement(&apos;div&apos;),</span><br><span class=\"line\">    sandbox: &#123;</span><br><span class=\"line\">      snapshot: false,</span><br><span class=\"line\">      disableWith: false,</span><br><span class=\"line\">      strictIsolation: false,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    // global hooks</span><br><span class=\"line\">    beforeLoad: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterLoad: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    errorLoadApp: (e) =&gt; error(e),</span><br><span class=\"line\">    // Router</span><br><span class=\"line\">    onNotMatchRouter: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    // app hooks</span><br><span class=\"line\">    // Code eval hooks</span><br><span class=\"line\">    beforeEval: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterEval: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    // App mount hooks</span><br><span class=\"line\">    beforeMount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterMount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    beforeUnmount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    afterUnmount: () =&gt; &#123;&#125;,</span><br><span class=\"line\">    // Error hooks</span><br><span class=\"line\">    errorMountApp: (e) =&gt; error(e),</span><br><span class=\"line\">    errorUnmountApp: (e) =&gt; error(e),</span><br><span class=\"line\">    customLoader: null, // deprecated</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  if (nested) &#123;</span><br><span class=\"line\">    invalidNestedAttrs.forEach((key) =&gt; delete config[key]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  return config;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>å†å›åˆ°æ„é€ å‡½æ•°ä¸­ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å¯¹pluginsè¿›è¡ŒusePluginæ“ä½œï¼Œå…¶å®å°±æ˜¯ä¸ºäº†æ‹¿åˆ°æ’ä»¶ä¸­çš„ä¸€äº›å±æ€§ï¼Œå¹¶ä¸”è¿›è¡Œä¸€äº›æ³¨å†Œæ“ä½œã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹usePluginåšäº†äº›ä»€ä¹ˆï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">usePlugin(</span><br><span class=\"line\">    plugin: (context: Garfish) =&gt; interfaces.Plugin,</span><br><span class=\"line\">    ...args: Array&lt;any&gt;</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">   // ...</span><br><span class=\"line\">   </span><br><span class=\"line\">    // thisæŒ‡å‘æ˜¯Garfishç±»</span><br><span class=\"line\">    args.unshift(this); </span><br><span class=\"line\">    </span><br><span class=\"line\">    // æ‰§è¡Œä¼ å…¥çš„plugin</span><br><span class=\"line\">    const pluginConfig = plugin.apply(null, args) as interfaces.Plugin;</span><br><span class=\"line\">    assert(pluginConfig.name, &apos;The plugin must have a name.&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // å¦‚æœæ²¡æœ‰æ³¨å†Œè¿‡ï¼Œåˆ™è¿›è¡Œæ³¨å†Œ </span><br><span class=\"line\">    if (!this.plugins[pluginConfig.name]) &#123;</span><br><span class=\"line\">      this.plugins[pluginConfig.name] = pluginConfig;</span><br><span class=\"line\">      // Register hooks, Compatible with the old api</span><br><span class=\"line\">      this.hooks.usePlugin(pluginConfig);</span><br><span class=\"line\">    &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">      warn(&apos;Please do not register the plugin repeatedly.&apos;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return this;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>argsæ•°ç»„é¦–ä½æ˜¯Garfishè‡ªå·±ï¼Œç„¶åè·å–æ’ä»¶é…ç½®ï¼Œå‰é¢æˆ‘ä»¬æåˆ°äº†ï¼Œæ’ä»¶æœ€åçš„è¿”å›æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«nameã€versionã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ç„¶åplugin.apply()å°±æ˜¯è¿”å›çš„è¿™äº›é…ç½®ï¼Œå¹¶ä¸”èµ‹å€¼ç»™äº†pluginConfigã€‚æ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œé€»è¾‘äº†ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æ³¨å†Œè¿‡è¯¥pluginï¼Œåˆ™è¿›è¡Œæ³¨å†Œï¼Œå°±æ˜¯keyä¸ºpluginçš„nameï¼Œvalueä¸ºå…·ä½“çš„é…ç½®å½¢å¼ï¼Œæ”¾åœ¨this.pluginså¯¹è±¡ä¸­ï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œæ¥ä¸‹æ¥æ˜¯è¿›è¡Œthis.hooks.usePlugin(pluginConfig)æ“ä½œï¼Œè¿™ä¸ªå…¶å®æ˜¯ç”¨æ¥æ³¨å†Œç”Ÿå‘½å‘¨æœŸçš„ï¼Œçœ‹ä¸€ä¸‹this.hooksæ˜¯å•¥ï¼Œå†æ„é€ å‡½æ•°ä¸­ï¼Œæ˜¯è¿™ä¹ˆåˆå§‹åŒ–hooksçš„ï¼š<br>// packages/core/src/garfish.ts<br>public hooks = globalLifecycle();<br>é€šè¿‡å‡½æ•°åï¼Œä¹Ÿåº”è¯¥èƒ½çŒœå¾—åˆ°ï¼Œå…¨å±€ç”Ÿå‘½å‘¨æœŸçš„hooksã€‚æ¥ç€çœ‹globalLifeCycleå®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/lifecycle.ts</span><br><span class=\"line\">export function globalLifecycle() &#123;</span><br><span class=\"line\">  return new PluginSystem(&#123;</span><br><span class=\"line\">    beforeBootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">    bootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">    beforeRegisterApp: new SyncHook&lt;[interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">    registerApp: new SyncHook&lt;[Record&lt;string, interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">    beforeLoad: new AsyncHook&lt;[interfaces.AppInfo], Promise&lt;boolean | void&gt; | void | boolean&gt;(),</span><br><span class=\"line\">    afterLoad: new AsyncHook&lt;[interfaces.AppInfo, interfaces.App], void&gt;(),</span><br><span class=\"line\">    errorLoadApp: new SyncHook&lt;[Error, interfaces.AppInfo], void&gt;(),</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿”å›çš„æ˜¯ä¸€ä¸ªpluginSystemå®ä¾‹ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«7ä¸ªç”Ÿå‘½å‘¨æœŸå±æ€§ã€‚å…ˆçœ‹pluginSystemç±»çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/hooks/src/pluginSystem.ts</span><br><span class=\"line\">export class PluginSystem&lt;T extends Record&lt;string, any&gt;&gt; &#123;</span><br><span class=\"line\">  lifecycle: T;</span><br><span class=\"line\">  lifecycleKeys: Array&lt;keyof T&gt;;</span><br><span class=\"line\">  private registerPlugins: Record&lt;string, Plugin&lt;T&gt;&gt; = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(lifecycle: T) &#123;</span><br><span class=\"line\">    /*</span><br><span class=\"line\">      lifecycle: </span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        beforeBootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">        bootstrap: new SyncHook&lt;[interfaces.Options], void&gt;(),</span><br><span class=\"line\">        beforeRegisterApp: new SyncHook&lt;[interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">        registerApp: new SyncHook&lt;[Record&lt;string, interfaces.AppInfo&gt;], void&gt;(),</span><br><span class=\"line\">        beforeLoad: new AsyncHook&lt;[interfaces.AppInfo], Promise&lt;boolean | void&gt; | void | boolean&gt;(),</span><br><span class=\"line\">        afterLoad: new AsyncHook&lt;[interfaces.AppInfo, interfaces.App], void&gt;(),</span><br><span class=\"line\">        errorLoadApp: new SyncHook&lt;[Error, interfaces.AppInfo], void&gt;(),</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    */</span><br><span class=\"line\">    this.lifecycle = lifecycle;</span><br><span class=\"line\">    this.lifecycleKeys = Object.keys(lifecycle);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  usePlugin(plugin: Plugin&lt;T&gt;) &#123;</span><br><span class=\"line\">    assert(isPlainObject(plugin), &apos;Invalid plugin configuration.&apos;);</span><br><span class=\"line\">    // Plugin name is required and unique</span><br><span class=\"line\">    const pluginName = plugin.name;</span><br><span class=\"line\">    assert(pluginName, &apos;Plugin must provide a name.&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">    if (!this.registerPlugins[pluginName]) &#123;</span><br><span class=\"line\">      this.registerPlugins[pluginName] = plugin;</span><br><span class=\"line\"></span><br><span class=\"line\">      for (const key in this.lifecycle) &#123;</span><br><span class=\"line\">        const pluginLife = plugin[key as string];</span><br><span class=\"line\">        if (pluginLife) &#123;</span><br><span class=\"line\">          // Differentiate different types of hooks and adopt different registration strategies</span><br><span class=\"line\">          this.lifecycle[key].on(pluginLife);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">      warn(`Repeat to register plugin hooks &quot;$&#123;pluginName&#125;&quot;.`);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  removePlugin(pluginName: string) &#123;</span><br><span class=\"line\">    assert(pluginName, &apos;Must provide a name.&apos;);</span><br><span class=\"line\">    const plugin = this.registerPlugins[pluginName];</span><br><span class=\"line\">    assert(plugin, `plugin &quot;$&#123;pluginName&#125;&quot; is not registered.`);</span><br><span class=\"line\"></span><br><span class=\"line\">    for (const key in plugin) &#123;</span><br><span class=\"line\">      this.lifecycle[key].remove(plugin[key as string]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢æåˆ°çš„this.hooks.usePluginå…¶å®æ˜¯æ‰§è¡Œäº†pluginSystemç±»ä¸­çš„usePluginæ–¹æ³•ï¼Œå®ç°é€»è¾‘ä¹Ÿæ˜¯ä¼šåœ¨pluginSystemç±»ä¸­çš„registerPluginsè¿›è¡Œæ³¨å†Œï¼Œç„¶åä¼šåœ¨å…¨å±€ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé’©å­ä¸Šï¼Œæ³¨å†Œæ¯ä¸ªæ’ä»¶é…ç½®ä¸­å¯¹åº”çš„é’©å­å‡½æ•°ã€‚è¿™ä¸ªå¤§å®¶éœ€è¦å¥½å¥½ç†è§£ä¸€ä¸‹ï¼Œè¿™ä¸ªè®¾è®¡æˆ‘ä»¬åœ¨å†™è‡ªå·±çš„æ¡†æ¶æ—¶å¯ä»¥å­¦ä¹ ä¸€ä¸‹ã€‚å†è¿”å›åˆ°åˆ›å»ºpluginSystemå®ä¾‹ä¸­ï¼Œä¼ å…¥çš„å‡ ä¸ªhooksï¼Œä¸»è¦åŒ…å«ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥çš„SyncHookï¼Œå¦ä¸€ç§æ˜¯å¼‚æ­¥çš„AsyncHookã€‚çœ‹ä¸€ä¸‹è¿™ä¸¤ç±»hooksçš„å®ç°ã€‚<br>SyncHookï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/hooks/src/syncHook.ts</span><br><span class=\"line\">export class SyncHook&lt;T, K&gt; &#123;</span><br><span class=\"line\">  public type: string = &apos;&apos;;</span><br><span class=\"line\">  public listeners = new Set&lt;Callback&lt;T, K&gt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(type?: string) &#123;</span><br><span class=\"line\">    if (type) this.type = type;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  on(fn: Callback&lt;T, K&gt;) &#123;</span><br><span class=\"line\">    if (typeof fn === &apos;function&apos;) &#123;</span><br><span class=\"line\">      this.listeners.add(fn);</span><br><span class=\"line\">    &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">      warn(&apos;Invalid parameter in &quot;Hook&quot;.&apos;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  once(fn: Callback&lt;T, K&gt;) &#123;</span><br><span class=\"line\">    const self = this;</span><br><span class=\"line\">    this.on(function wrapper(...args: Array&lt;any&gt;) &#123;</span><br><span class=\"line\">      self.remove(wrapper);</span><br><span class=\"line\">      return fn.apply(null, args);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  emit(...data: ArgsType&lt;T&gt;) &#123;</span><br><span class=\"line\">    if (this.listeners.size &gt; 0) &#123;</span><br><span class=\"line\">      this.listeners.forEach((fn) =&gt; fn.apply(null, data));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  remove(fn: Callback&lt;T, K&gt;) &#123;</span><br><span class=\"line\">    return this.listeners.delete(fn);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  removeAll() &#123;</span><br><span class=\"line\">    this.listeners.clear();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å°±æ˜¯ä¸€ä¸ªç®€å•çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚<br>AsyncHookï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/hooks/src/asyncHook.ts</span><br><span class=\"line\">export class AsyncHook&lt;T, K&gt; extends SyncHook&lt;T, K&gt; &#123;</span><br><span class=\"line\">  emit(...data: ArgsType&lt;T&gt;): Promise&lt;void | false&gt; &#123;</span><br><span class=\"line\">    let result;</span><br><span class=\"line\">    const ls = Array.from(this.listeners);</span><br><span class=\"line\">    if (ls.length &gt; 0) &#123;</span><br><span class=\"line\">      let i = 0;</span><br><span class=\"line\">      const call = (prev?: any) =&gt; &#123;</span><br><span class=\"line\">        if (prev === false) &#123;</span><br><span class=\"line\">          return false; // Abort process</span><br><span class=\"line\">        &#125; else if (i &lt; ls.length) &#123;</span><br><span class=\"line\">          return Promise.resolve(ls[i++].apply(null, data)).then(call);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      result = call();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return Promise.resolve(result);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>AsyncHookçš„emitå®ç°ï¼Œå¯ä»¥ç†è§£å°†ä¸€ä¸²çš„å¼‚æ­¥å‡½æ•°ï¼Œè¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œä¸Šä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„è¿”å›ï¼Œæ˜¯ä¸‹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„å…¥å‚ï¼Œå¦‚æœçœ‹è¿‡Koaä¸­é—´ä»¶çš„å®ç°ï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½è¿™æ ·é€»è¾‘çš„å®ç°äº†ã€‚<br>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå½“ä¸»åº”ç”¨å¼•å…¥Garfishåï¼Œåˆæ­¥çš„æ³¨å†Œå·¥ä½œåŸºæœ¬å®Œæˆäº†ã€‚</p>\n<h1 id=\"ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\"><a href=\"#ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\" class=\"headerlink\" title=\"ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish\"></a>ä¸»åº”ç”¨ä¸­å¯åŠ¨Garfish</h1><p>æˆ‘ä»¬å…ˆå‡è®¾ä¸»åº”ç”¨é»˜è®¤è·¯ç”±å°±æ˜¯/ï¼Œä¸é»˜è®¤å±•ç¤ºå­åº”ç”¨ã€‚<br>å†çœ‹ä¸»åº”ç”¨å¦‚ä½•è¿›è¡Œä¸‹ä¸€æ­¥çš„ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// main/src/index.ts</span><br><span class=\"line\">import GarfishInstance from &apos;garfish&apos;; </span><br><span class=\"line\">import &#123; Config &#125; from &apos;./config&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">GarfishInstance.run(Config);</span><br><span class=\"line\">ç¬¬ä¸€è¡Œä»£ç ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢ä»‹ç»è¿‡äº†ï¼Œç»§ç»­å¾€ä¸‹èµ°ï¼Œçœ‹çœ‹Configæ˜¯ä»€ä¹ˆï¼š</span><br><span class=\"line\">// dev/main/src/config.ts</span><br><span class=\"line\">let defaultConfig: interfaces.Options = &#123;</span><br><span class=\"line\">  basename: &apos;/garfish_master&apos;,</span><br><span class=\"line\">  domGetter: () =&gt; &#123;</span><br><span class=\"line\">    // await asyncTime();</span><br><span class=\"line\">    return document.querySelector(&apos;#submoduleByRouter&apos;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  apps: [</span><br><span class=\"line\">    // &#123;</span><br><span class=\"line\">    //   name: &apos;vue&apos;,</span><br><span class=\"line\">    //   activeWhen: &apos;/vue&apos;,</span><br><span class=\"line\">    //   cache: false,</span><br><span class=\"line\">    //   entry: &apos;http://localhost:2666&apos;,</span><br><span class=\"line\">    // &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      name: &apos;vue2&apos;,</span><br><span class=\"line\">      cache: false,</span><br><span class=\"line\">      activeWhen: &apos;/vue2&apos;,</span><br><span class=\"line\">      entry: &apos;http://localhost:2777&apos;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      name: &apos;react&apos;,</span><br><span class=\"line\">      activeWhen: &apos;/react&apos;,</span><br><span class=\"line\">      entry: &apos;http://localhost:2444&apos;,</span><br><span class=\"line\">      props: &#123;</span><br><span class=\"line\">        appName: &apos;react&apos;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  autoRefreshApp: false,</span><br><span class=\"line\">  disablePreloadApp: true,</span><br><span class=\"line\">  protectVariable: [&apos;MonitoringInstance&apos;, &apos;Garfish&apos;],</span><br><span class=\"line\">  sandbox: &#123;</span><br><span class=\"line\">    open: true,</span><br><span class=\"line\">    // strictIsolation: true,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  // beforeMount(appInfo) &#123;</span><br><span class=\"line\">  //   console.log(&apos;beforeMount&apos;, appInfo);</span><br><span class=\"line\">  // &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  // afterLoad(info, app) &#123;</span><br><span class=\"line\">  //   console.log(app.vmSandbox);</span><br><span class=\"line\">  // &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  customLoader() &#123;&#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªé»˜è®¤é…ç½®ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œé€šè¿‡ä¹‹å‰çš„æºç åˆ†æï¼Œè¿™äº›é…ç½®æœ€åä¼šæ·±åº¦mergeåˆ°Garfishç±»ä¸­çš„é»˜è®¤é…ç½®ã€‚æ¥ä¸‹æ¥å°±æ˜¯GarfishInstance.run(Config)ï¼Œå°†é…ç½®ä¼ å…¥ï¼Œç„¶åæ‰§è¡ŒGarfishç±»ä¸­çš„runæ–¹æ³•ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">run(options: interfaces.Options = &#123;&#125;) &#123;</span><br><span class=\"line\">    if (this.running) &#123;</span><br><span class=\"line\">      // ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    this.setOptions(options);</span><br><span class=\"line\">    // Register plugins</span><br><span class=\"line\">    this.usePlugin(GarfishHMRPlugin());</span><br><span class=\"line\">    this.usePlugin(GarfishPerformance());</span><br><span class=\"line\">    if (!this.options.disablePreloadApp) &#123;</span><br><span class=\"line\">      this.usePlugin(GarfishPreloadPlugin());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options.plugins?.forEach((plugin) =&gt; this.usePlugin(plugin));</span><br><span class=\"line\">    // Put the lifecycle plugin at the end, so that you can get the changes of other plugins</span><br><span class=\"line\">    this.usePlugin(GarfishOptionsLife(this.options, &apos;global-lifecycle&apos;));</span><br><span class=\"line\"></span><br><span class=\"line\">    // Emit hooks and register apps</span><br><span class=\"line\">    this.hooks.lifecycle.beforeBootstrap.emit(this.options);</span><br><span class=\"line\">    this.registerApp(this.options.apps || []);</span><br><span class=\"line\">    this.running = true;</span><br><span class=\"line\">    this.hooks.lifecycle.bootstrap.emit(this.options);</span><br><span class=\"line\">    return this;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>é¦–å…ˆè¿˜æ˜¯æŠŠä¼ å…¥çš„optionså‚æ•°æ·±åº¦mergeåˆ°Garfishé»˜è®¤çš„optionsä¸­ï¼Œæ¥ç€è¿›è¡Œä¸€äº›æ’ä»¶æ³¨å†Œï¼Œæœ€åæ³¨å†Œäº†ä¸€ä¸ªåä¸ºglobal-lifecycleçš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶ä¸»è¦æ˜¯ç”¨æ¥å…œåº•çš„ï¼Œå› ä¸ºæ’ä»¶æ³¨å†Œæ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå…ˆæ³¨å†Œçš„æ’ä»¶ï¼Œåœ¨å®è¡Œç”Ÿå‘½é’©å­æ–¹æ³•æ—¶ï¼Œæ˜¯å…ˆæ‰§è¡Œçš„ï¼Œæ‰€ä»¥global-lifecycleè¿™ä¸ªæ’ä»¶ä¸­ï¼Œä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ–¹æ³•æ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¼ å…¥çš„ï¼Œé‚£ä¹ˆæœ€åæ‰§è¡Œçš„æ—¶å€™ï¼Œglobal-lifecycleæ‹¿åˆ°çš„æ˜¯æ‰€æœ‰æ’ä»¶ä¸­æœ€åçš„æ•°æ®ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚<br>æ¥ä¸‹æ¥å°±æ˜¯è§¦å‘ç”Ÿå‘½å‘¨æœŸä¸­beforeBootstrapï¼Œä¹‹å‰æ‰€æœ‰çš„æ’ä»¶ä¸­ï¼Œæ‰€æœ‰beforeBootstrapçš„é’©å­éƒ½æ³¨å†Œåˆ°äº†å…¨å±€beforeBootstrapä¸­ï¼Œè¿™ä¸ªæ—¶å€™è¿›è¡Œemitæ“ä½œã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ å…¥è‡ªå®šä¹‰plugin(å·²ç»å®šä¹‰äº†beforeBootstrapæ–¹æ³•)çš„è¯ï¼Œè¿™é‡Œåº”è¯¥æ˜¯æ²¡æœ‰å¯æ‰§è¡Œæ–¹æ³•çš„ï¼Œå› ä¸ºæ¡†æ¶å†…ç½®çš„ä¸€äº›æ’ä»¶ä¸­æ²¡æœ‰è¯¥æ–¹æ³•ã€‚<br>æ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œappäº†ï¼Œæˆ‘ä»¬åœ¨ä¸»åº”ç”¨ä¸­çš„optionsä¸­ï¼Œæœ‰ä¸ªappsçš„å±æ€§ï¼Œé‡Œé¢æ³¨å†Œç€æ‰€æœ‰å­åº”ç”¨ã€‚çœ‹ä¸€ä¸‹registreAppçš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">registerApp(list: interfaces.AppInfo | Array&lt;interfaces.AppInfo&gt;) &#123;</span><br><span class=\"line\">    const currentAdds = &#123;&#125;;</span><br><span class=\"line\">    this.hooks.lifecycle.beforeRegisterApp.emit(list);</span><br><span class=\"line\">    if (!Array.isArray(list)) list = [list];</span><br><span class=\"line\"></span><br><span class=\"line\">    for (const appInfo of list) &#123;</span><br><span class=\"line\">      assert(appInfo.name, &apos;Miss app.name.&apos;);</span><br><span class=\"line\">      if (!this.appInfos[appInfo.name]) &#123;</span><br><span class=\"line\">        assert(</span><br><span class=\"line\">          appInfo.entry,</span><br><span class=\"line\">          `$&#123;appInfo.name&#125; application entry is not url: $&#123;appInfo.entry&#125;`,</span><br><span class=\"line\">        );</span><br><span class=\"line\">        currentAdds[appInfo.name] = appInfo;</span><br><span class=\"line\">        this.appInfos[appInfo.name] = appInfo;</span><br><span class=\"line\">      &#125; else if (__DEV__) &#123;</span><br><span class=\"line\">        warn(`The &quot;$&#123;appInfo.name&#125;&quot; app is already registered.`);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    this.hooks.lifecycle.registerApp.emit(currentAdds);</span><br><span class=\"line\">    return this;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>é¦–å…ˆæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbeforeRegisterAppä¸­çš„æ–¹æ³•ï¼Œç„¶åå°†appsæ³¨å†Œåˆ°currentAddså’Œthis.appInfosä¸­ï¼Œå†æ‰§è¡ŒregisterAppä¸­çš„æ–¹æ³•ã€‚<br>å†è¿”å›åˆ°runæ–¹æ³•ä¸­ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå°±ä¼šæ‰§è¡Œç”Ÿå‘½å‘¨æœŸbootstrapä¸­çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¸»è¦çœ‹ä¸€ä¸‹routerä¸­çš„bootstrapæ–¹æ³•ï¼Œçœ‹çœ‹åœ¨å¯åŠ¨æ—¶åšäº†ä»€ä¹ˆ<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/index.ts</span><br><span class=\"line\">bootstrap(options: interfaces.Options) &#123;</span><br><span class=\"line\">        let activeApp = null;</span><br><span class=\"line\">        const unmounts: Record&lt;string, Function&gt; = &#123;&#125;;</span><br><span class=\"line\">        const &#123; basename &#125; = options;</span><br><span class=\"line\">        const &#123; autoRefreshApp = true, onNotMatchRouter = () =&gt; null &#125; =</span><br><span class=\"line\">          Garfish.options;</span><br><span class=\"line\"></span><br><span class=\"line\">        async function active(appInfo: interfaces.AppInfo, rootPath: string) &#123;</span><br><span class=\"line\">          const &#123; name, cache = true, active &#125; = appInfo;</span><br><span class=\"line\">          if (active) return active(appInfo, rootPath);</span><br><span class=\"line\">          appInfo.rootPath = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const currentApp = (activeApp = createKey());</span><br><span class=\"line\">          const app = await Garfish.loadApp(appInfo.name, &#123;</span><br><span class=\"line\">            basename: rootPath,</span><br><span class=\"line\">            entry: appInfo.entry,</span><br><span class=\"line\">            cache: true,</span><br><span class=\"line\">            domGetter: appInfo.domGetter,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          app.appInfo.basename = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const call = (app: interfaces.App, isRender: boolean) =&gt; &#123;</span><br><span class=\"line\">            if (!app) return;</span><br><span class=\"line\">            const isDes = cache &amp;&amp; app.mounted;</span><br><span class=\"line\">            const fn = isRender</span><br><span class=\"line\">              ? app[isDes ? &apos;show&apos; : &apos;mount&apos;]</span><br><span class=\"line\">              : app[isDes ? &apos;hide&apos; : &apos;unmount&apos;];</span><br><span class=\"line\">            return fn.call(app);</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">          Garfish.apps[name] = app;</span><br><span class=\"line\">          unmounts[name] = () =&gt; call(app, false);</span><br><span class=\"line\"></span><br><span class=\"line\">          if (currentApp === activeApp) &#123;</span><br><span class=\"line\">            await call(app, true);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        async function deactive(appInfo: interfaces.AppInfo, rootPath: string) &#123;</span><br><span class=\"line\">          activeApp = null;</span><br><span class=\"line\">          const &#123; name, deactive &#125; = appInfo;</span><br><span class=\"line\">          if (deactive) return deactive(appInfo, rootPath);</span><br><span class=\"line\"></span><br><span class=\"line\">          const unmount = unmounts[name];</span><br><span class=\"line\">          unmount &amp;&amp; unmount();</span><br><span class=\"line\">          delete Garfish.apps[name];</span><br><span class=\"line\"></span><br><span class=\"line\">          // Nested scene to remove the current application of nested data</span><br><span class=\"line\">          // To avoid the main application prior to application</span><br><span class=\"line\">          const needToDeleteApps = router.routerConfig.apps.filter((app) =&gt; &#123;</span><br><span class=\"line\">            if (appInfo.rootPath === app.basename) return true;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          if (needToDeleteApps.length &gt; 0) &#123;</span><br><span class=\"line\">            needToDeleteApps.forEach((app) =&gt; &#123;</span><br><span class=\"line\">              delete Garfish.appInfos[app.name];</span><br><span class=\"line\">              delete Garfish.cacheApps[app.name];</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            router.setRouterConfig(&#123;</span><br><span class=\"line\">              apps: router.routerConfig.apps.filter((app) =&gt; &#123;</span><br><span class=\"line\">                return !needToDeleteApps.some(</span><br><span class=\"line\">                  (needDelete) =&gt; app.name === needDelete.name,</span><br><span class=\"line\">                );</span><br><span class=\"line\">              &#125;),</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        const apps = Object.values(Garfish.appInfos);</span><br><span class=\"line\"></span><br><span class=\"line\">        const appList = apps.filter((app) =&gt; &#123;</span><br><span class=\"line\">          if (!app.basename) app.basename = basename;</span><br><span class=\"line\">          return !!app.activeWhen;</span><br><span class=\"line\">        &#125;) as Array&lt;Required&lt;interfaces.AppInfo&gt;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">        const listenOptions = &#123;</span><br><span class=\"line\">          basename,</span><br><span class=\"line\">          active,</span><br><span class=\"line\">          deactive,</span><br><span class=\"line\">          autoRefreshApp,</span><br><span class=\"line\">          notMatch: onNotMatchRouter,</span><br><span class=\"line\">          apps: appList,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        listenRouterAndReDirect(listenOptions);</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥çœ‹æœ€åï¼Œå°±æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªlistenRouterAndReDirectæ–¹æ³•ï¼Œå¹¶ä¼ å…¥äº†listenOptionså¯¹è±¡ã€‚æ¥ç€æ‰¾listenRouterAndReDirectæ–¹æ³•çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/context.ts</span><br><span class=\"line\">export const listenRouterAndReDirect = (&#123;</span><br><span class=\"line\">  apps,</span><br><span class=\"line\">  basename,</span><br><span class=\"line\">  autoRefreshApp,</span><br><span class=\"line\">  active,</span><br><span class=\"line\">  deactive,</span><br><span class=\"line\">  notMatch,</span><br><span class=\"line\">&#125;: Options) =&gt; &#123;</span><br><span class=\"line\">  // æ³¨å†Œå­åº”ç”¨ã€æ³¨å†Œæ¿€æ´»ã€é”€æ¯é’©å­</span><br><span class=\"line\">  registerRouter(apps);</span><br><span class=\"line\"></span><br><span class=\"line\">  // åˆå§‹åŒ–ä¿¡æ¯</span><br><span class=\"line\">  setRouterConfig(&#123;</span><br><span class=\"line\">    basename,</span><br><span class=\"line\">    autoRefreshApp,</span><br><span class=\"line\">    // supportProxy: !!window.Proxy,</span><br><span class=\"line\">    active,</span><br><span class=\"line\">    deactive,</span><br><span class=\"line\">    notMatch,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // å¼€å§‹ç›‘å¬è·¯ç”±å˜åŒ–è§¦å‘ã€å­åº”ç”¨æ›´æ–°ã€‚é‡è½½é»˜è®¤åˆå§‹å­åº”ç”¨</span><br><span class=\"line\">  listen();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>ä¸»è¦å°±æ˜¯æ³¨å†Œå­åº”ç”¨ï¼Œåˆå§‹åŒ–é…ç½®ï¼Œæœ€åè¿›è¡Œç›‘å¬ã€‚å†çœ‹listenæ–¹æ³•çš„å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/agentRouter.ts</span><br><span class=\"line\">export const listen = () =&gt; &#123;</span><br><span class=\"line\">  normalAgent();</span><br><span class=\"line\">  initRedirect();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>ç„¶åæ‰§è¡Œäº†ä¸¤ä¸ªæ–¹æ³•normalAgentå’ŒinitRedirectï¼Œç»§ç»­å¾€ä¸‹çœ‹å®ç°ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/agentRouter.ts</span><br><span class=\"line\">export const normalAgent = () =&gt; &#123;</span><br><span class=\"line\">  // By identifying whether have finished listening, if finished listening, listening to the routing changes do not need to hijack the original event</span><br><span class=\"line\">  // Support nested scene</span><br><span class=\"line\">  const addRouterListener = function () &#123;</span><br><span class=\"line\">    window.addEventListener(__GARFISH_BEFORE_ROUTER_EVENT__, function (env) &#123;</span><br><span class=\"line\">      RouterConfig.routerChange &amp;&amp; RouterConfig.routerChange(location.pathname);</span><br><span class=\"line\">      linkTo((env as any).detail);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  if (!window[__GARFISH_ROUTER_FLAG__]) &#123;</span><br><span class=\"line\">    // Listen for pushState and replaceState, call linkTo, processing, listen back</span><br><span class=\"line\">    // Rewrite the history API method, triggering events in the call</span><br><span class=\"line\">    const rewrite = function (type: keyof History) &#123;</span><br><span class=\"line\">      const hapi = history[type];</span><br><span class=\"line\">      return function () &#123;</span><br><span class=\"line\">        const urlBefore = window.location.pathname + window.location.hash;</span><br><span class=\"line\">        const stateBefore = history?.state;</span><br><span class=\"line\">        const res = hapi.apply(this as any, arguments);</span><br><span class=\"line\">        const urlAfter = window.location.pathname + window.location.hash;</span><br><span class=\"line\">        const stateAfter = history?.state;</span><br><span class=\"line\"></span><br><span class=\"line\">        const e = createEvent(type);</span><br><span class=\"line\">        (e as any).arguments = arguments;</span><br><span class=\"line\"></span><br><span class=\"line\">        if (urlBefore !== urlAfter || stateBefore !== stateAfter) &#123;</span><br><span class=\"line\">          if (history.state &amp;&amp; history.state === &apos;object&apos;)</span><br><span class=\"line\">            delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];</span><br><span class=\"line\">          window.dispatchEvent(</span><br><span class=\"line\">            new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, &#123;</span><br><span class=\"line\">              detail: &#123;</span><br><span class=\"line\">                toRouterInfo: &#123;</span><br><span class=\"line\">                  fullPath: urlAfter,</span><br><span class=\"line\">                  query: parseQuery(location.search),</span><br><span class=\"line\">                  path: getPath(RouterConfig.basename!, urlAfter),</span><br><span class=\"line\">                  state: stateAfter,</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                fromRouterInfo: &#123;</span><br><span class=\"line\">                  fullPath: urlBefore,</span><br><span class=\"line\">                  query: parseQuery(location.search),</span><br><span class=\"line\">                  path: getPath(RouterConfig.basename!, urlBefore),</span><br><span class=\"line\">                  state: stateBefore,</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                eventType: type,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">            &#125;),</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        // window.dispatchEvent(e);</span><br><span class=\"line\">        return res;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    history.pushState = rewrite(&apos;pushState&apos;);</span><br><span class=\"line\">    history.replaceState = rewrite(&apos;replaceState&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">    // Before the collection application sub routing, forward backward routing updates between child application</span><br><span class=\"line\">    window.addEventListener(</span><br><span class=\"line\">      &apos;popstate&apos;,</span><br><span class=\"line\">      function (event) &#123;</span><br><span class=\"line\">        // Stop trigger collection function, fire again match rendering</span><br><span class=\"line\">        if (event &amp;&amp; typeof event === &apos;object&apos; &amp;&amp; (event as any).garfish)</span><br><span class=\"line\">          return;</span><br><span class=\"line\">        if (history.state &amp;&amp; history.state === &apos;object&apos;)</span><br><span class=\"line\">          delete history.state[__GARFISH_ROUTER_UPDATE_FLAG__];</span><br><span class=\"line\">        window.dispatchEvent(</span><br><span class=\"line\">          new CustomEvent(__GARFISH_BEFORE_ROUTER_EVENT__, &#123;</span><br><span class=\"line\">            detail: &#123;</span><br><span class=\"line\">              toRouterInfo: &#123;</span><br><span class=\"line\">                fullPath: location.pathname,</span><br><span class=\"line\">                query: parseQuery(location.search),</span><br><span class=\"line\">                path: getPath(RouterConfig.basename!),</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              fromRouterInfo: &#123;</span><br><span class=\"line\">                fullPath: RouterConfig.current!.fullPath,</span><br><span class=\"line\">                path: getPath(</span><br><span class=\"line\">                  RouterConfig.basename!,</span><br><span class=\"line\">                  RouterConfig.current!.path,</span><br><span class=\"line\">                ),</span><br><span class=\"line\">                query: RouterConfig.current!.query,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              eventType: &apos;popstate&apos;,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;),</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      false,</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    window[__GARFISH_ROUTER_FLAG__] = true;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  addRouterListener();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>normalAgentæ–¹æ³•çš„å®ç°ï¼Œå…¶å®å°±æ˜¯é‡å†™äº†history.pushStateå’Œhistory.replaceStateä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ä¼šè§¦å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶<strong>GARFISH_BEFORE_ROUTER_EVENT</strong>ï¼Œé‚£ä¹ˆaddRouterListenerå…¶å®å°±æ˜¯æ³¨å†Œäº†<strong>GARFISH_BEFORE_ROUTER_EVENT</strong>è‡ªå®šä¹‰äº‹ä»¶ã€‚è€ŒinitRedirectæ–¹æ³•å°±æ˜¯åˆå§‹é»˜è®¤åŒ–è·¯ç”±çš„ã€‚æ— è®ºæ˜¯normalAgentè¿˜æ˜¯initRedirectï¼Œæœ€åéƒ½ä¼šè¿›å…¥linkToæ–¹æ³•ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/linkTo.ts</span><br><span class=\"line\">export const linkTo = async (&#123;</span><br><span class=\"line\">  toRouterInfo,</span><br><span class=\"line\">  fromRouterInfo,</span><br><span class=\"line\">  eventType,</span><br><span class=\"line\">&#125;: &#123;</span><br><span class=\"line\">  toRouterInfo: RouterInfo;</span><br><span class=\"line\">  fromRouterInfo: RouterInfo;</span><br><span class=\"line\">  eventType: keyof History | &apos;popstate&apos;;</span><br><span class=\"line\">&#125;) =&gt; &#123;</span><br><span class=\"line\">  const &#123;</span><br><span class=\"line\">    current,</span><br><span class=\"line\">    apps,</span><br><span class=\"line\">    deactive,</span><br><span class=\"line\">    active,</span><br><span class=\"line\">    notMatch,</span><br><span class=\"line\">    beforeEach,</span><br><span class=\"line\">    afterEach,</span><br><span class=\"line\">    autoRefreshApp,</span><br><span class=\"line\">  &#125; = RouterConfig;</span><br><span class=\"line\">  const deactiveApps = current!.matched.filter(</span><br><span class=\"line\">    (appInfo) =&gt;</span><br><span class=\"line\">      !hasActive(</span><br><span class=\"line\">        appInfo.activeWhen,</span><br><span class=\"line\">        getPath(appInfo.basename, location.pathname),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">  );</span><br><span class=\"line\"></span><br><span class=\"line\">  // Activate the corresponding application</span><br><span class=\"line\">  const activeApps = apps.filter((appInfo) =&gt; &#123;</span><br><span class=\"line\">    return hasActive(</span><br><span class=\"line\">      appInfo.activeWhen,</span><br><span class=\"line\">      getPath(appInfo.basename, location.pathname),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  const needToActive = activeApps.filter((&#123; name &#125;) =&gt; &#123;</span><br><span class=\"line\">    return !current!.matched.some((&#123; name: cName &#125;) =&gt; name === cName);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // router infos</span><br><span class=\"line\">  const to = &#123;</span><br><span class=\"line\">    ...toRouterInfo,</span><br><span class=\"line\">    matched: needToActive,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  const from = &#123;</span><br><span class=\"line\">    ...fromRouterInfo,</span><br><span class=\"line\">    matched: deactiveApps,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  await toMiddleWare(to, from, beforeEach!);</span><br><span class=\"line\"></span><br><span class=\"line\">  // Pause the current application of active state</span><br><span class=\"line\">  if (current!.matched.length &gt; 0) &#123;</span><br><span class=\"line\">    await asyncForEach(</span><br><span class=\"line\">      deactiveApps,</span><br><span class=\"line\">      async (appInfo) =&gt;</span><br><span class=\"line\">        await deactive(appInfo, getPath(appInfo.basename, location.pathname)),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  setRouterConfig(&#123;</span><br><span class=\"line\">    current: &#123;</span><br><span class=\"line\">      path: getPath(RouterConfig.basename!),</span><br><span class=\"line\">      fullPath: location.pathname,</span><br><span class=\"line\">      matched: activeApps,</span><br><span class=\"line\">      state: history.state,</span><br><span class=\"line\">      query: parseQuery(location.search),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  // Within the application routing jump, by collecting the routing function for processing.</span><br><span class=\"line\">  // Filtering gar-router popstate hijacking of the router</span><br><span class=\"line\">  // In the switch back and forth in the application is provided through routing push method would trigger application updates</span><br><span class=\"line\">  // application will refresh when autoRefresh configuration to true</span><br><span class=\"line\">  const curState = window.history.state || &#123;&#125;;</span><br><span class=\"line\">  if (</span><br><span class=\"line\">    eventType !== &apos;popstate&apos; &amp;&amp;</span><br><span class=\"line\">    (curState[__GARFISH_ROUTER_UPDATE_FLAG__] || autoRefreshApp)</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    callCapturedEventListeners(eventType);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  await asyncForEach(needToActive, async (appInfo) =&gt; &#123;</span><br><span class=\"line\">    // Function using matches character and routing using string matching characters</span><br><span class=\"line\">    const appRootPath = getAppRootPath(appInfo);</span><br><span class=\"line\">    await active(appInfo, appRootPath);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  if (activeApps.length === 0 &amp;&amp; notMatch) notMatch(location.pathname);</span><br><span class=\"line\"></span><br><span class=\"line\">  await toMiddleWare(to, from, afterEach!);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>å†å½’çº³ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å¯ä»¥æ‰§è¡Œï¼ŒafterEachå’ŒbeforeEachï¼Œå°±æ˜¯åœ¨activeä¹‹å‰å’Œä¹‹åçš„æ‰§è¡Œæ—¶æœºã€‚ç„¶åä¸»è¦çš„å°±æ˜¯activeäº†ï¼Œå…¶å®activeè¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯routeræ’ä»¶ä¸­ï¼Œbootstrapé’©å­é‡Œçš„activeæ–¹æ³•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸»åº”ç”¨å°±runèµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é€šè¿‡è·¯ç”±æ¥showæˆ–è€…hideå­åº”ç”¨äº†ã€‚</p>\n<h1 id=\"è·¯ç”±triggerå­åº”ç”¨\"><a href=\"#è·¯ç”±triggerå­åº”ç”¨\" class=\"headerlink\" title=\"è·¯ç”±triggerå­åº”ç”¨\"></a>è·¯ç”±triggerå­åº”ç”¨</h1><p>æ¥ä¸‹æ¥ç‚¹å‡»vueæŒ‰é’®ï¼Œå±•ç¤ºvueå­åº”ç”¨ã€‚<br>æˆ‘ä»¬å‰é¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œåœ¨normalAgentå®ç°ä¸­åŠ«æŒäº†history.pushæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œè·¯ç”±å˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘è‡ªå®šä¹‰äº‹ä»¶<strong>GARFISH_BEFORE_ROUTER_EVENT</strong>ï¼Œç„¶åä¼šå†æ¬¡è¿›å…¥linkToæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™needToActiveå°±æ˜¯trueäº†ï¼Œä¼šæ‰§è¡Œactiveï¼Œè€Œactiveå°±æ˜¯routeræ’ä»¶ä¸­bootstrapçš„activeæ–¹æ³•ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/router/src/index.ts</span><br><span class=\"line\">async function active(appInfo: interfaces.AppInfo, rootPath: string) &#123;</span><br><span class=\"line\">          const &#123; name, cache = true, active &#125; = appInfo;</span><br><span class=\"line\">          if (active) return active(appInfo, rootPath);</span><br><span class=\"line\">          appInfo.rootPath = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const currentApp = (activeApp = createKey());</span><br><span class=\"line\">          const app = await Garfish.loadApp(appInfo.name, &#123;</span><br><span class=\"line\">            basename: rootPath,</span><br><span class=\"line\">            entry: appInfo.entry,</span><br><span class=\"line\">            cache: true,</span><br><span class=\"line\">            domGetter: appInfo.domGetter,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          app.appInfo.basename = rootPath;</span><br><span class=\"line\"></span><br><span class=\"line\">          const call = (app: interfaces.App, isRender: boolean) =&gt; &#123;</span><br><span class=\"line\">            if (!app) return;</span><br><span class=\"line\">            const isDes = cache &amp;&amp; app.mounted;</span><br><span class=\"line\">            const fn = isRender</span><br><span class=\"line\">              ? app[isDes ? &apos;show&apos; : &apos;mount&apos;]</span><br><span class=\"line\">              : app[isDes ? &apos;hide&apos; : &apos;unmount&apos;];</span><br><span class=\"line\">            return fn.call(app);</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">          Garfish.apps[name] = app;</span><br><span class=\"line\">          unmounts[name] = () =&gt; call(app, false);</span><br><span class=\"line\"></span><br><span class=\"line\">          if (currentApp === activeApp) &#123;</span><br><span class=\"line\">            await call(app, true);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªæ–¹æ³•ä¸­ä¼šæœ‰ä¸ªappï¼Œè¿™ä¸ªappæ˜¯Garfishç±»ä¸­loadAppæ–¹æ³•è¿”å›çš„ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿”å›çš„è¿™ä¸ªappæ˜¯å•¥ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/garfish.ts</span><br><span class=\"line\">async loadApp(</span><br><span class=\"line\">    appName: string,</span><br><span class=\"line\">    optionsOrUrl?: Omit&lt;interfaces.AppInfo, &apos;name&apos;&gt;,</span><br><span class=\"line\">  ): Promise&lt;interfaces.App | null&gt; &#123;</span><br><span class=\"line\">    assert(appName, &apos;Miss appName.&apos;);</span><br><span class=\"line\">    const appInfo = generateAppOptions(appName, this, optionsOrUrl);</span><br><span class=\"line\"></span><br><span class=\"line\">    const asyncLoadProcess = async () =&gt; &#123;</span><br><span class=\"line\">      // Return not undefined type data directly to end loading</span><br><span class=\"line\">      const stop = await this.hooks.lifecycle.beforeLoad.emit(appInfo);</span><br><span class=\"line\">      if (stop === false) &#123;</span><br><span class=\"line\">        warn(`Load $&#123;appName&#125; application is terminated by beforeLoad.`);</span><br><span class=\"line\">        return null;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      // Existing cache caching logic</span><br><span class=\"line\">      let appInstance: interfaces.App = null;</span><br><span class=\"line\">      const cacheApp = this.cacheApps[appName];</span><br><span class=\"line\">      if (appInfo.cache &amp;&amp; cacheApp) &#123;</span><br><span class=\"line\">        appInstance = cacheApp;</span><br><span class=\"line\">      &#125; else &#123;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">          const [manager, resources, isHtmlMode] = await processAppResources(</span><br><span class=\"line\">            this.loader,</span><br><span class=\"line\">            appInfo,</span><br><span class=\"line\">          );</span><br><span class=\"line\"></span><br><span class=\"line\">          appInstance = new App(</span><br><span class=\"line\">            this,</span><br><span class=\"line\">            appInfo,</span><br><span class=\"line\">            manager,</span><br><span class=\"line\">            resources,</span><br><span class=\"line\">            isHtmlMode,</span><br><span class=\"line\">            appInfo.customLoader,</span><br><span class=\"line\">          );</span><br><span class=\"line\"></span><br><span class=\"line\">          // The registration hook will automatically remove the duplication</span><br><span class=\"line\">          for (const key in this.plugins) &#123;</span><br><span class=\"line\">            appInstance.hooks.usePlugin(this.plugins[key]);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (appInfo.cache) &#123;</span><br><span class=\"line\">            this.cacheApps[appName] = appInstance;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; catch (e) &#123;</span><br><span class=\"line\">          __DEV__ &amp;&amp; warn(e);</span><br><span class=\"line\">          this.hooks.lifecycle.errorLoadApp.emit(e, appInfo);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      await this.hooks.lifecycle.afterLoad.emit(appInfo, appInstance);</span><br><span class=\"line\">      return appInstance;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    if (!this.loading[appName]) &#123;</span><br><span class=\"line\">      this.loading[appName] = asyncLoadProcess().finally(() =&gt; &#123;</span><br><span class=\"line\">        this.loading[appName] = null;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return this.loading[appName];</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿™ä¸ªå‡½æ•°ç¨å¾®æœ‰ç‚¹é•¿ï¼Œæˆ‘æ€»ç»“ä¸€ä¸‹ï¼Œthis.loadingæ˜¯ä¸ºäº†ä¿å­˜å½“å‰è¦åŠ è½½çš„appï¼Œé€šè¿‡ä¸€ä¸ªasyncLoadProcessè¿”å›ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼ŒasyncLoadProcessæ˜¯asyncå‡½æ•°ï¼Œæ²¡æœ‰awaitï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œresolveçš„æ˜¯appInstanceï¼Œåœ¨asyncLoadProcessä¸­ï¼Œä¹Ÿæ˜¯æ‰§è¡Œäº†appç”Ÿå‘½å‘¨æœŸä¸­çš„å‡ ä¸ªé’©å­ã€‚æˆ‘ä»¬å†ç®€å•äº†è§£ä¸€ä¸‹Appç±»æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œç”±äºä»£ç å¤ªå¤šï¼Œæˆ‘ä»¬åªåˆ—ä¸ªå¤§æ¦‚ï¼Œå¹¶ä¸”è¯´æ˜ç”¨é€”å³å¯ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/module/app.ts</span><br><span class=\"line\">export class App &#123;</span><br><span class=\"line\">  public appId = appId++;</span><br><span class=\"line\">  public display = false;</span><br><span class=\"line\">  public mounted = false;</span><br><span class=\"line\">  public esModule = false;</span><br><span class=\"line\">  public strictIsolation = false;</span><br><span class=\"line\">  public name: string;</span><br><span class=\"line\">  public isHtmlMode: boolean;</span><br><span class=\"line\">  public global: any = window;</span><br><span class=\"line\">  public appContainer: HTMLElement;</span><br><span class=\"line\">  public cjsModules: Record&lt;string, any&gt;;</span><br><span class=\"line\">  public htmlNode: HTMLElement | ShadowRoot;</span><br><span class=\"line\">  public customExports: Record&lt;string, any&gt; = &#123;&#125;; // If you don&apos;t want to use the CJS export, can use this</span><br><span class=\"line\">  public sourceList: Array&lt;&#123; tagName: string; url: string &#125;&gt; = [];</span><br><span class=\"line\">  public appInfo: AppInfo;</span><br><span class=\"line\">  public hooks: interfaces.AppHooks;</span><br><span class=\"line\">  public provider: interfaces.Provider;</span><br><span class=\"line\">  public entryManager: TemplateManager;</span><br><span class=\"line\">  public appPerformance: SubAppObserver;</span><br><span class=\"line\">  /** @deprecated */</span><br><span class=\"line\">  public customLoader: CustomerLoader;</span><br><span class=\"line\"></span><br><span class=\"line\">  private active = false;</span><br><span class=\"line\">  private mounting = false;</span><br><span class=\"line\">  private unmounting = false;</span><br><span class=\"line\">  private context: Garfish;</span><br><span class=\"line\">  private resources: interfaces.ResourceModules;</span><br><span class=\"line\">  // Environment variables injected by garfish for linkage with child applications</span><br><span class=\"line\">  private globalEnvVariables: Record&lt;string, any&gt;;</span><br><span class=\"line\">  // es-module save lifeCycle to appGlobalIdï¼ŒappGlobalId in script attr</span><br><span class=\"line\">  private appGlobalId: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  constructor(</span><br><span class=\"line\">    context: Garfish,</span><br><span class=\"line\">    appInfo: AppInfo,</span><br><span class=\"line\">    entryManager: TemplateManager,</span><br><span class=\"line\">    resources: interfaces.ResourceModules,</span><br><span class=\"line\">    isHtmlMode: boolean,</span><br><span class=\"line\">    customLoader: CustomerLoader,</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  get rootElement() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getProvider() &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  execScript(</span><br><span class=\"line\">    code: string,</span><br><span class=\"line\">    env: Record&lt;string, any&gt;,</span><br><span class=\"line\">    url?: string,</span><br><span class=\"line\">    options?: &#123; async?: boolean; noEntry?: boolean &#125;,</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // `vm sandbox` can override this method</span><br><span class=\"line\">  runCode(</span><br><span class=\"line\">    code: string,</span><br><span class=\"line\">    env: Record&lt;string, any&gt;,</span><br><span class=\"line\">    url?: string,</span><br><span class=\"line\">    options?: &#123; async?: boolean; noEntry?: boolean &#125;,</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  async show() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  hide() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  async mount() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  unmount() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getExecScriptEnv(noEntry: boolean) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Performs js resources provided by the module, finally get the content of the export</span><br><span class=\"line\">  async compileAndRenderContainer() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private canMount() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // If asynchronous task encountered in the rendering process, such as triggering the beforeEval before executing code,</span><br><span class=\"line\">  // after the asynchronous task, you need to determine whether the application has been destroyed or in the end state.</span><br><span class=\"line\">  // If in the end state will need to perform the side effects of removing rendering process, adding a mount point to a document,</span><br><span class=\"line\">  // for example, execute code of the environmental effects, and rendering the state in the end.</span><br><span class=\"line\">  private stopMountAndClearEffect() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Calls to render do compatible with two different sandbox</span><br><span class=\"line\">  private callRender(provider: interfaces.Provider, isMount: boolean) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Call to destroy do compatible with two different sandbox</span><br><span class=\"line\">  private callDestroy(provider: interfaces.Provider, isUnmount: boolean) &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  // Create a container node and add in the document flow</span><br><span class=\"line\">  // domGetter Have been dealing with</span><br><span class=\"line\">  private async addContainer() &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private async renderTemplate() &#123;</span><br><span class=\"line\">     // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  private async checkAndGetProvider() &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ€»ç»“èµ·æ¥ï¼Œè¿™ä¸ªAppç±»æä¾›çš„èƒ½åŠ›å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>æä¾›é™æ€èµ„æºï¼ŒHTMLã€CSSã€jsçš„ç»“æ„ã€‚</li>\n<li>å¯ä»¥åœ¨CJSä¸­æå–æˆ–è€…æ¨å¯¼å‡ºå­åº”ç”¨çš„ providerã€‚<br>3.é€šè¿‡execCodeä¼ å…¥æ¨¡å—çš„CJSè§„èŒƒã€requireã€exportsç­‰ç¯å¢ƒå˜é‡å®ç°å¯¹å¤–å…±äº«</li>\n<li>è§¦å‘æ¸²æŸ“ï¼šåº”ç”¨ç›¸å…³èŠ‚ç‚¹æ”¾ç½®åœ¨æ–‡æ¡£æµä¸­ï¼Œä¾æ¬¡æ‰§è¡Œåº”ç”¨è„šæœ¬ï¼Œæœ€ç»ˆæ¸²æŸ“åŠŸèƒ½ï¼Œæ‰§è¡Œå­åº”ç”¨æä¾›å®Œæ•´çš„åº”ç”¨ç‹¬ç«‹è¿è¡Œæ—¶æ‰§è¡Œã€‚</li>\n<li>è§¦å‘é”€æ¯ï¼šæ‰§è¡Œå­åº”ç”¨ç¨‹åºçš„é”€æ¯åŠŸèƒ½ï¼Œåº”ç”¨å­èŠ‚ç‚¹ä»æ–‡æ¡£æµä¸­ç§»é™¤ã€‚<br>å†å›åˆ°activeæ–¹æ³•ä¸­ï¼Œæœ€æ ¸å¿ƒçš„åœ°æ–¹æ˜¯callæ–¹æ³•ï¼Œæœ€åè°ƒç”¨äº†Appä¸­çš„showã€mountã€hideã€unmountæ–¹æ³•ã€‚showå’Œhideå¯ä»¥ç†è§£ä¸ºä¹‹å‰å·²ç»åŠ è½½è¿‡äº†ï¼Œå°±æ˜¯showå’Œhideä¸€ä¸‹ï¼Œmountæ˜¯è¦å’Œunmountæ˜¯æŒ‚è½½å’Œå¸è½½ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ä»¥mountä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•åŠ è½½å­åº”ç”¨ç¯å¢ƒå¹¶ä¸”åŠ è½½å­åº”ç”¨çš„ã€‚<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// packages/core/src/module/app.ts</span><br><span class=\"line\">async mount() &#123;</span><br><span class=\"line\">    if (!this.canMount()) return false;</span><br><span class=\"line\">    this.hooks.lifecycle.beforeMount.emit(this.appInfo, this, false);</span><br><span class=\"line\"></span><br><span class=\"line\">    this.active = true;</span><br><span class=\"line\">    this.mounting = true;</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">      // add container and compile js with cjs</span><br><span class=\"line\">      const asyncJsProcess = await this.compileAndRenderContainer();</span><br><span class=\"line\"></span><br><span class=\"line\">      // Good provider is set at compile time</span><br><span class=\"line\">      const provider = await this.getProvider();</span><br><span class=\"line\">      // Existing asynchronous functions need to decide whether the application has been unloaded</span><br><span class=\"line\">      if (!this.stopMountAndClearEffect()) return false;</span><br><span class=\"line\"></span><br><span class=\"line\">      this.callRender(provider, true);</span><br><span class=\"line\">      this.display = true;</span><br><span class=\"line\">      this.mounted = true;</span><br><span class=\"line\">      this.context.activeApps.push(this);</span><br><span class=\"line\">      this.hooks.lifecycle.afterMount.emit(this.appInfo, this, false);</span><br><span class=\"line\"></span><br><span class=\"line\">      await asyncJsProcess;</span><br><span class=\"line\">      if (!this.stopMountAndClearEffect()) return false;</span><br><span class=\"line\">    &#125; catch (e) &#123;</span><br><span class=\"line\">      this.entryManager.DOMApis.removeElement(this.appContainer);</span><br><span class=\"line\">      this.hooks.lifecycle.errorMountApp.emit(e, this.appInfo);</span><br><span class=\"line\">      return false;</span><br><span class=\"line\">    &#125; finally &#123;</span><br><span class=\"line\">      this.mounting = false;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>å¤§æ¦‚æ„æ€å°±æ˜¯è¯´ï¼Œæ·»åŠ äº†ä¸€ä¸ªå­åº”ç”¨å®¹å™¨ï¼Œæ‹¿åˆ°å­åº”ç”¨èµ„æºï¼ˆä¸»è¦é€šè¿‡fetchæ–¹å¼è·å–ï¼Œç»§ç»­æ·±æŒ–compileAndRenderContainerå°±çŸ¥é“äº†ï¼‰ï¼Œç„¶åè·å–å­åº”ç”¨exportå‡ºæ¥çš„providerï¼Œæœ€åæ‰§è¡Œä»£ç ï¼Œå­åº”ç”¨å°±æˆåŠŸå±•ç¤ºå‡ºæ¥äº†ã€‚<br>å†è¯´ä¸€ä¸‹å­åº”ç”¨çš„ä»£ç æ‰§è¡Œï¼Œå­åº”ç”¨ä¸­å¦‚æœä½¿ç”¨äº†windowï¼Œé‚£ä¹ˆåœ¨å­åº”ç”¨æ¥å…¥ä¸»åº”ç”¨åï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œé‚£ä¹ˆä¸¤ä¸ªåº”ç”¨çš„windowæ˜¯ä¸€ä¸ªï¼Œè¿™æ ·å°±ä¼šæœ‰é€»è¾‘é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æœ‰äº†æ²™ç®±æ¦‚å¿µã€‚garfishä¸­æä¾›äº†ä¸¤ç§æ²™ç®±æœºåˆ¶ï¼švmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚<br>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„vmæ²™ç®±åŸç†ï¼š<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const varBox = &#123;&#125;;</span><br><span class=\"line\">const fakeWindow = new Proxy(window, &#123;</span><br><span class=\"line\">    get(target, key) &#123;</span><br><span class=\"line\">        return varBox[key] || window[key]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    set(target, key, value) &#123;</span><br><span class=\"line\">        varBox[key] = value;</span><br><span class=\"line\">        return true;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">const fn = new Function(&apos;window&apos;, code);</span><br><span class=\"line\">fn(fakeWindow);</span><br></pre></td></tr></table></figure></p>\n<p>ä¸»è¦æ˜¯é€šè¿‡es6ä¸­proxyå®ç°çš„ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªåŸç†æ€§ä»£ç ï¼Œå®é™…ä¸­è¿˜ä¼šå…¼å®¹å¾ˆå¤šcaseã€‚å…¶å®åœ¨æœ€åˆæ³¨å†Œgarfishæ’ä»¶çš„æ—¶å€™ï¼Œåˆå§‹åŒ–garfishå®ä¾‹çš„æ—¶å€™ï¼Œå°±åˆå§‹åŒ–äº†vmæ²™ç®±å’Œsnapshotæ²™ç®±ã€‚æˆ‘ä»¬å‰é¢ä¹Ÿè¯´äº†ï¼Œåœ¨æ¯ä¸ªæ’ä»¶ä¸­éƒ½ä¼šå®šä¹‰ä¸€äº›ç”Ÿå‘½å‘¨æœŸçš„é’©å­æ–¹æ³•ï¼Œå…¶å®åœ¨Garfish.loadAppçš„æ—¶å€™ï¼Œå°±åœ¨Appä¸ŠæŒ‚è½½äº†vmSandboxå±æ€§ï¼Œåœ¨åç»­çš„å­åº”ç”¨æ‰§è¡Œä»£ç æ—¶ï¼Œç¯å¢ƒéƒ½æ˜¯åœ¨æ²™ç®±ä¸­æ‰§è¡Œã€‚</p>\n"},{"title":"typescriptæ•´ç†","comments":1,"copyright":false,"toc":true,"_content":"\n### **1** **ts** **å®‰è£…å’Œç¼–è¯‘**\n\n-   ç¬¬ä¸€æ­¥ æ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ç”¨æ¥å­¦ä¹  ts\n\n<!---->\n\n-   ç¬¬äºŒæ­¥ å…¨å±€å®‰è£… ts å’Œ ts-node\n\n```\ncnpmÂ iÂ typescriptÂ -gÂ //å…¨å±€å®‰è£…ts\ncnpmÂ iÂ -gÂ ts-nodeÂ //å…¨å±€å®‰è£…ts-node\n```\n\n-   ç¬¬ä¸‰æ­¥ ç”Ÿæˆ tsconfig.js é…ç½®æ–‡ä»¶\n\n```\ntscÂ --init\n```\n\næˆ‘ä»¬å°±å…ˆæŒ‰ç…§è‡ªåŠ¨ç”Ÿæˆçš„ tsconfig é…ç½®é¡¹å»ä½¿ç”¨ é‡Œé¢çš„é…ç½®å’±ä»¬å¯ä»¥å…ˆä¸å»ç®¡ä»– åç»­ç†Ÿç»ƒäº†å†å»é…ç½®\n\n-   ç¬¬å››æ­¥ åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ª`index.ts`ç›´æ¥å†™å…¥\n\n```\nconstÂ a:Â stringÂ =Â \"hello\";\nconsole.log(a);\n```\n\n-   ç¬¬äº”æ­¥ ç¼–è¯‘ ts ä¸º js åœ¨æ§åˆ¶å°ï¼ˆç»ˆç«¯ï¼‰è¾“å…¥å‘½ä»¤\n\n```\ntscÂ index.ts\n```\n\nç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº† é¡¹ç›®ä¸‹å‡ºç°äº†ä¸€ä¸ªåŒåçš„ index.js æ–‡ä»¶ è‡³æ­¤æˆ‘ä»¬å·²ç»å¯ä»¥æŠŠ ts æ–‡ä»¶ç¼–è¯‘æˆ js æ–‡ä»¶äº†\n\nä¸è¿‡åˆ°è¿™é‡Œèªæ˜çš„å°ä¼™ä¼´å°±ä¼šå‘ç°äº† æˆ‘ä»¬å…¨å±€å®‰è£…çš„Â ã€Œts-nodeã€Â æœ‰ä»€ä¹ˆä½œç”¨å‘¢ å…¶å®è¿™ä¸ªåŒ…æ˜¯å¸®åŠ©æˆ‘ä»¬åœ¨ä¸éœ€è¦ç¼–è¯‘æˆ js çš„å‰æä¸‹å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ ts ä»£ç  æ¯”å¦‚ æˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å…¥\n\n```\nts-nodeÂ index.ts\n```\n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‰“å°çš„`hello`å·²ç»è¾“å‡ºäº†\n\né‚£å¯èƒ½ è¿˜æœ‰çš„å°ä¼™ä¼´ä¼šå‘ç° æˆ‘ä»¬æ¯æ¬¡æ”¹åŠ¨éƒ½è¦æ‰‹åŠ¨å»æ‰§è¡Œç¼–è¯‘ è¿™æ ·å¾ˆéº»çƒ¦ å…¶å®æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ªå‚æ•°æ¥å®ç°æ¯æ¬¡æ–‡ä»¶å˜åŠ¨ ts å¸®æˆ‘ä»¬ã€Œè‡ªåŠ¨ç¼–è¯‘æˆ jsã€Â çš„æ•ˆæœ\n\n```\ntscÂ --watchÂ index.ts\n```\n\nå¥½äº† ç¯å¢ƒå®‰è£…å®Œæ¯•äº† æ¥ä¸‹æ¥å‡ºå‘å»å­¦ä¹  ts æ ¸å¿ƒå§\n\n### **2** **TS** **ç±»å‹**\n\n##### **2.1 å¸ƒå°”ç±»å‹(boolean)**\n\n```\nconstÂ flag:Â booleanÂ =Â true;\n```\n\n##### **2.2 Number ç±»å‹**\n\n```\nconstÂ flag:Â numberÂ =Â 1;\n```\n\n##### **2.3 String ç±»å‹**\n\n```\nconstÂ flag:Â stringÂ =Â \"hello\";\n```\n\n##### **2.4** **Enum** **ç±»å‹**\n\nä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„æè¿°ä¸€äº›ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å¹´ä¸­çš„æ˜¥ã€å¤ã€ç§‹ã€å†¬ï¼Œè¿˜æœ‰æ¯å‘¨çš„å‘¨ä¸€åˆ°å‘¨å¤©ï¼Œè¿˜æœ‰å„ç§é¢œè‰²ï¼Œä»¥åŠå¯ä»¥ç”¨å®ƒæ¥æè¿°ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯ç ç­‰\n\n```\n //Â æ™®é€šæšä¸¾Â åˆå§‹å€¼é»˜è®¤ä¸ºÂ 0Â å…¶ä½™çš„æˆå‘˜ä¼šä¼šæŒ‰é¡ºåºè‡ªåŠ¨å¢é•¿Â å¯ä»¥ç†è§£ä¸ºæ•°ç»„ä¸‹æ ‡\nenumÂ ColorÂ {\nÂ Â RED,\nÂ Â PINK,\nÂ Â BLUE,\n}\n\nconstÂ pink:Â ColorÂ =Â Color.PINK;\nconsole.log(pink);Â //Â 1\n\n//Â è®¾ç½®åˆå§‹å€¼\nenumÂ ColorÂ {\nÂ Â REDÂ =Â 10,\nÂ Â PINK,\nÂ Â BLUE,\n}\nconstÂ pink:Â ColorÂ =Â Color.PINK;\nconsole.log(pink);Â //Â 11\n\n//Â å­—ç¬¦ä¸²æšä¸¾Â æ¯ä¸ªéƒ½éœ€è¦å£°æ˜\nenumÂ ColorÂ {\nÂ Â REDÂ =Â \"çº¢è‰²\",\nÂ Â PINKÂ =Â \"ç²‰è‰²\",\nÂ Â BLUEÂ =Â \"è“è‰²\",\n}\n\nconstÂ pink:Â ColorÂ =Â Color.PINK;\nconsole.log(pink);Â //Â ç²‰è‰²\n\n//Â å¸¸é‡æšä¸¾Â å®ƒæ˜¯ä½¿ç”¨Â constÂ å…³é”®å­—ä¿®é¥°çš„æšä¸¾ï¼Œå¸¸é‡æšä¸¾ä¸æ™®é€šæšä¸¾çš„åŒºåˆ«æ˜¯ï¼Œæ•´ä¸ªæšä¸¾ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«åˆ é™¤Â æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ç¼–è¯‘ä¹‹åçš„æ•ˆæœ\n\nconstÂ enumÂ ColorÂ {\nÂ Â RED,\nÂ Â PINK,\nÂ Â BLUE,\n}\n\nconstÂ color:Â Color[]Â =Â [Color.RED,Â Color.PINK,Â Color.BLUE];\n\n//ç¼–è¯‘ä¹‹åçš„jså¦‚ä¸‹ï¼š\nvarÂ colorÂ =Â [0Â /*Â REDÂ */ ,Â 1Â /*Â PINKÂ */ ,Â 2Â /*Â BLUEÂ */ ];\n//Â å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æšä¸¾å¹¶æ²¡æœ‰è¢«ç¼–è¯‘æˆjsä»£ç Â åªæ˜¯æŠŠcolorè¿™ä¸ªæ•°ç»„å˜é‡ç¼–è¯‘å‡ºæ¥äº†\n```\n\n##### **2.5 æ•°ç»„ç±»å‹(array)**\n\n```\nconstÂ flag1:Â number[]Â =Â [1,Â 2,Â 3];\nconstÂ flag2:Â Array<number>Â =Â [1,Â 2,Â 3];\n```\n\n##### **2.6 å…ƒç»„ç±»å‹(tuple)**\n\nåœ¨ TypeScript çš„åŸºç¡€ç±»å‹ä¸­ï¼Œå…ƒç»„ï¼ˆ Tuple ï¼‰è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥ã€Œæ•°é‡ã€å’Œã€Œç±»å‹ã€çš„æ•°ç»„ å…¶å®å¯ä»¥ç†è§£ä¸ºä»–æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„\n\n```\nconstÂ flag:Â [string,Â number]Â =Â [\"hello\",Â 1];\n```\n\n##### **2.7 Symbol**\n\næˆ‘ä»¬åœ¨ä½¿ç”¨ Symbol çš„æ—¶å€™ï¼Œå¿…é¡»æ·»åŠ  es6 çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„Â `libs`Â å­—æ®µåŠ ä¸Š`ES``2015`Symbol çš„å€¼æ˜¯å”¯ä¸€ä¸å˜çš„\n\n```\nconstÂ sym1Â =Â Symbol(\"hello\");\nconstÂ sym2Â =Â Symbol(\"hello\");\nconsole.log(Symbol(\"hello\")Â ===Â Symbol(\"hello\"));\n```\n\n##### **2.8 ä»»æ„ç±»å‹(any)**\n\nä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸ºÂ `any`Â ç±»å‹ è¿™è®©Â `any`Â ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„ é¡¶çº§ç±»å‹ (ä¹Ÿè¢«ç§°ä½œ å…¨å±€è¶…çº§ç±»å‹) TypeScript å…è®¸æˆ‘ä»¬å¯¹Â `any`Â ç±»å‹çš„å€¼æ‰§è¡Œä»»ä½•æ“ä½œ è€Œæ— éœ€äº‹å…ˆæ‰§è¡Œä»»ä½•å½¢å¼çš„æ£€æŸ¥\n\nä¸€èˆ¬ä½¿ç”¨åœºæ™¯ï¼šç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›ç±»å‹æ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨Â `any`ç±»å‹è½¬æ¢é‡åˆ°å›°éš¾æˆ–è€…æ•°æ®ç»“æ„å¤ªå¤æ‚éš¾ä»¥å®šä¹‰ ä¸è¿‡ä¸è¦å¤ªä¾èµ–Â `any`Â å¦åˆ™å°±å¤±å»äº† ts çš„æ„ä¹‰äº†\n\n```\nconstÂ flag:Â anyÂ =Â document.getElementById(\"root\");\n```\n\n##### **2.9 null å’Œ undefined**\n\n`undefined`Â å’ŒÂ `null`Â ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸ºÂ `undefined`Â å’ŒÂ `null`\n\n```\nletÂ u:Â undefinedÂ =Â undefined;\nletÂ n:Â nullÂ =Â null;\n```\n\n##### **2.10 Unknown ç±»å‹**\n\n`unknown`Â å’ŒÂ `any`Â çš„ä¸»è¦åŒºåˆ«æ˜¯Â `unknown`Â ç±»å‹ä¼šæ›´åŠ ä¸¥æ ¼ åœ¨å¯¹Â `unknown`Â ç±»å‹çš„å€¼æ‰§è¡Œå¤§å¤šæ•°æ“ä½œä¹‹å‰ æˆ‘ä»¬å¿…é¡»è¿›è¡ŒæŸç§å½¢å¼çš„æ£€æŸ¥ è€Œåœ¨å¯¹Â `any`Â ç±»å‹çš„å€¼æ‰§è¡Œæ“ä½œä¹‹å‰ æˆ‘ä»¬ä¸å¿…è¿›è¡Œä»»ä½•æ£€æŸ¥ æ‰€æœ‰ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸ºÂ `unknown`Â ä½†`unknown`ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™Â `any`Â ç±»å‹å’ŒÂ `unknown`Â ç±»å‹æœ¬èº« è€ŒÂ `any`Â å•¥éƒ½èƒ½åˆ†é…å’Œè¢«åˆ†é…\n\n```\nletÂ value:Â unknown;\n\nvalueÂ =Â true;Â //Â OK\nvalueÂ =Â 42;Â //Â OK\nvalueÂ =Â \"HelloÂ World\";Â //Â OK\nvalueÂ =Â [];Â //Â OK\nvalueÂ =Â {};Â //Â OK\n\nletÂ value1:Â unknownÂ =Â value;Â //Â OK\nletÂ value2:Â anyÂ =Â value;Â //Â OK\nletÂ value3:Â booleanÂ =Â value;Â //Â Error\nletÂ value4:Â numberÂ =Â value;Â //Â Error\nletÂ value5:Â stringÂ =Â value;Â //Â Error\nletÂ value6:Â objectÂ =Â value;Â //Â Error\n```\n\n##### **2.11 void ç±»å‹**\n\n`void`Â è¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ TS ä¼šè®¤ä¸ºå®ƒçš„è¿”å›å€¼æ˜¯Â `void`Â ç±»å‹ã€‚\n\n```\nfunctionÂ hello(name:Â string):Â voidÂ {}\n```\n\n##### **2.12 never ç±»å‹**\n\n`never`Â ä¸€èˆ¬è¡¨ç¤ºç”¨æˆ·æ— æ³•è¾¾åˆ°çš„ç±»å‹ ä¾‹å¦‚`never`Â ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹\n\n```\nfunctionÂ neverReach():Â neverÂ {\nÂ Â throwÂ newÂ Error(\"anÂ error\");\n}\n```\n\n> **â**\n\n> æ€è€ƒ:never å’Œ void çš„åŒºåˆ« void å¯ä»¥è¢«èµ‹å€¼ä¸º null å’Œ undefined çš„ç±»å‹ã€‚never åˆ™æ˜¯ä¸€ä¸ªä¸åŒ…å«å€¼çš„ç±»å‹ã€‚æ‹¥æœ‰ void è¿”å›å€¼ç±»å‹çš„å‡½æ•°èƒ½æ­£å¸¸è¿è¡Œã€‚æ‹¥æœ‰ never è¿”å›å€¼ç±»å‹çš„å‡½æ•°æ— æ³•æ­£å¸¸è¿”å›ï¼Œæ— æ³•ç»ˆæ­¢ï¼Œæˆ–ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n\n> â\n\n##### **2.13 BigInt å¤§æ•°ç±»å‹**\n\nä½¿ç”¨Â `BigInt`Â å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•° æˆ‘ä»¬åœ¨ä½¿ç”¨Â `BigInt`Â çš„æ—¶å€™ å¿…é¡»æ·»åŠ Â `ESNext`Â çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„Â `libs`Â å­—æ®µåŠ ä¸Š`ESNext`è¦ä½¿ç”¨`1n`éœ€è¦Â `\"target\": \"ESNext\"number`Â å’ŒÂ `BigInt`Â ç±»å‹ä¸ä¸€æ · ä¸å…¼å®¹\n\n```\nconstÂ max1Â =Â Number.MAX_SAFE_INTEGER;Â //Â 2**53-1\nconsole.log(max1Â +Â 1Â ===Â max1Â +Â 2);Â //true\n\nconstÂ max2Â =Â BigInt(Number.MAX_SAFE_INTEGER);\nconsole.log(max2Â +Â 1nÂ ===Â max2Â +Â 2n);Â //false\n\nletÂ foo:Â number;\nletÂ bar:Â bigint;\nfooÂ =Â bar;Â //error\nbarÂ =Â foo;Â //error\n```\n\n##### **2.14 object, Object å’Œ {} ç±»å‹**\n\nã€Œobjectã€Â ç±»å‹ç”¨äºè¡¨ç¤ºéåŸå§‹ç±»å‹\n\n```\nletÂ objectCase:Â object;\nobjectCaseÂ =Â 1;Â //Â error\nobjectCaseÂ =Â \"a\";Â //Â error\nobjectCaseÂ =Â true;Â //Â error\nobjectCaseÂ =Â null;Â //Â error\nobjectCaseÂ =Â undefined;Â //Â error\nobjectCaseÂ =Â {};Â //Â ok\n```\n\nã€Œå¤§ Objectã€Â ä»£è¡¨æ‰€æœ‰æ‹¥æœ‰ toStringã€hasOwnProperty æ–¹æ³•çš„ç±»å‹ æ‰€ä»¥æ‰€æœ‰åŸå§‹ç±»å‹ã€éåŸå§‹ç±»å‹éƒ½å¯ä»¥èµ‹ç»™ Object(ä¸¥æ ¼æ¨¡å¼ä¸‹Â `null`Â å’ŒÂ `undefined`Â ä¸å¯ä»¥)\n\n```\nletÂ ObjectCase:Â Object;\nObjectCaseÂ =Â 1;Â //Â ok\nObjectCaseÂ =Â \"a\";Â //Â ok\nObjectCaseÂ =Â true;Â //Â ok\nObjectCaseÂ =Â null;Â //Â error\nObjectCaseÂ =Â undefined;Â //Â error\nObjectCaseÂ =Â {};Â //Â ok\n```\n\nã€Œ{}ã€Â ç©ºå¯¹è±¡ç±»å‹å’Œå¤§ Object ä¸€æ · ä¹Ÿæ˜¯è¡¨ç¤ºåŸå§‹ç±»å‹å’ŒéåŸå§‹ç±»å‹çš„é›†åˆ\n\n```\nletÂ simpleCase:Â {};\nsimpleCaseÂ =Â 1;Â //Â ok\nsimpleCaseÂ =Â \"a\";Â //Â ok\nsimpleCaseÂ =Â true;Â //Â ok\nsimpleCaseÂ =Â null;Â //Â error\nsimpleCaseÂ =Â undefined;Â //Â error\nsimpleCaseÂ =Â {};Â //Â ok\n```\n\n##### **2.15 ç±»å‹æ¨è®º**\n\næŒ‡ç¼–ç¨‹è¯­è¨€ä¸­èƒ½å¤Ÿè‡ªåŠ¨æ¨å¯¼å‡ºå€¼çš„ç±»å‹çš„èƒ½åŠ› å®ƒæ˜¯ä¸€äº›å¼ºé™æ€ç±»å‹è¯­è¨€ä¸­å‡ºç°çš„ç‰¹æ€§ å®šä¹‰æ—¶æœªèµ‹å€¼å°±ä¼šæ¨è®ºæˆÂ `any`Â ç±»å‹ å¦‚æœå®šä¹‰çš„æ—¶å€™å°±èµ‹å€¼å°±èƒ½åˆ©ç”¨åˆ°ç±»å‹æ¨è®º\n\n```\nletÂ flag;Â //æ¨æ–­ä¸ºany\nletÂ countÂ =Â 123;Â //ä¸ºnumberç±»å‹\nletÂ helloÂ =Â \"hello\";Â //ä¸ºstringç±»å‹\n```\n\n##### **2.16 è”åˆç±»å‹**\n\nè”åˆç±»å‹ï¼ˆUnion Typesï¼‰è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ æœªèµ‹å€¼æ—¶è”åˆç±»å‹ä¸Šåªèƒ½è®¿é—®ä¸¤ä¸ªç±»å‹å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•\n\n```\nletÂ name:Â stringÂ |Â number;\nconsole.log(name.toString());\nnameÂ =Â 1;\nconsole.log(name.toFixed(2));\nnameÂ =Â \"hello\";\nconsole.log(name.length);\n```\n\n##### **2.17 ç±»å‹æ–­è¨€**\n\næœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” TypeScript æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚å…¶å®å°±æ˜¯ä½ éœ€è¦æ‰‹åŠ¨å‘Šè¯‰ ts å°±æŒ‰ç…§ä½ æ–­è¨€çš„é‚£ä¸ªç±»å‹é€šè¿‡ç¼–è¯‘ï¼ˆè¿™ä¸€æ‹›å¾ˆå…³é”® æœ‰æ—¶å€™å¯ä»¥å¸®åŠ©ä½ è§£å†³å¾ˆå¤šç¼–è¯‘æŠ¥é”™ï¼‰\n\nç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ï¼š\n\n```\n //Â å°–æ‹¬å·Â è¯­æ³•\nletÂ someValue:Â anyÂ =Â \"thisÂ isÂ aÂ string\";\nletÂ strLength:Â numberÂ =Â (<string>someValue).length;\n\n//Â asÂ è¯­æ³•\nletÂ someValue:Â anyÂ =Â \"thisÂ isÂ aÂ string\";\nletÂ strLength:Â numberÂ =Â (someValueÂ asÂ string).length;\n```\n\n> **â**\n\n> ä»¥ä¸Šä¸¤ç§æ–¹å¼è™½ç„¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å°–æ‹¬å·æ ¼å¼ä¼šä¸ react ä¸­ JSX äº§ç”Ÿè¯­æ³•å†²çªï¼Œå› æ­¤æˆ‘ä»¬æ›´æ¨èä½¿ç”¨ as è¯­æ³•ã€‚\n\n> â\n\nã€Œéç©ºæ–­è¨€ã€åœ¨ä¸Šä¸‹æ–‡ä¸­å½“ç±»å‹æ£€æŸ¥å™¨æ— æ³•æ–­å®šç±»å‹æ—¶ ä¸€ä¸ªæ–°çš„åç¼€è¡¨è¾¾å¼æ“ä½œç¬¦ ! å¯ä»¥ç”¨äºæ–­è¨€æ“ä½œå¯¹è±¡æ˜¯éÂ `null`Â å’ŒéÂ `undefined`Â ç±»å‹\n\n```\nletÂ flag:Â nullÂ |Â undefinedÂ |Â string;\nflag!.toString();Â //Â ok\nflag.toString();Â //Â error\n```\n\n##### **2.18 å­—é¢é‡ç±»å‹**\n\nåœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œå¯¹åº”çš„å­—ç¬¦ä¸²å­—é¢é‡ã€æ•°å­—å­—é¢é‡ã€å¸ƒå°”å­—é¢é‡åˆ†åˆ«æ‹¥æœ‰ä¸å…¶å€¼ä¸€æ ·çš„å­—é¢é‡ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š\n\n```\nletÂ flag1:Â \"hello\"Â =Â \"hello\";\nletÂ flag2:Â 1Â =Â 1;\nletÂ flag3:Â trueÂ =Â true;\n```\n\n##### **2.19 ç±»å‹åˆ«å**\n\nç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—\n\n```\ntypeÂ flagÂ =Â stringÂ |Â number;\n\nfunctionÂ hello(value:Â flag)Â {}\n```\n\n##### **2.20 äº¤å‰ç±»å‹**\n\näº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚é€šè¿‡ & è¿ç®—ç¬¦å¯ä»¥å°†ç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§\n\n```\ntypeÂ Flag1Â =Â {Â x:Â numberÂ };\ntypeÂ Flag2Â =Â Flag1Â &Â {Â y:Â stringÂ };\n\nletÂ flag3:Â Flag2Â =Â {\nÂ Â x:Â 1,\nÂ Â y:Â \"hello\",\nÂ Â henb,\n};\n```\n\n##### **2.21 ç±»å‹ä¿æŠ¤**\n\nç±»å‹ä¿æŠ¤å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œä»–ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™å°±èƒ½é€šè¿‡ç±»å‹ä¿¡æ¯ç¡®ä¿æŸä¸ªä½œç”¨åŸŸå†…å˜é‡çš„ç±»å‹ å…¶ä¸»è¦æ€æƒ³æ˜¯å°è¯•æ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹ï¼Œä»¥ç¡®å®šå¦‚ä½•å¤„ç†å€¼\n\nã€Œtypeof ç±»å‹ä¿æŠ¤ã€\n\n```\nfunctionÂ double(input:Â stringÂ |Â numberÂ |Â boolean)Â {\nÂ Â ifÂ (typeofÂ inputÂ ===Â \"string\")Â {\nÂ Â Â Â returnÂ inputÂ +Â input;\nÂ Â }Â elseÂ {\nÂ Â Â Â ifÂ (typeofÂ inputÂ ===Â \"number\")Â {\nÂ Â Â Â Â Â returnÂ inputÂ *Â 2;\nÂ Â Â Â }Â elseÂ {\nÂ Â Â Â Â Â returnÂ !input;\nÂ Â Â Â }\nÂ Â }\n}\n```\n\nã€Œin å…³é”®å­—ã€\n\n```\ninterfaceÂ BirdÂ {\nÂ Â fly:Â number;\n}\n\ninterfaceÂ DogÂ {\nÂ Â leg:Â number;\n}\n\nfunctionÂ getNumber(value:Â BirdÂ |Â Dog)Â {\nÂ Â ifÂ (\"fly\"Â inÂ value)Â {\nÂ Â Â Â returnÂ value.fly;\nÂ Â }\nÂ Â returnÂ value.leg;\n}\n```\n\nã€Œinstanceof ç±»å‹ä¿æŠ¤ã€\n\n```\nclassÂ AnimalÂ {\nÂ Â name!:Â string;\n}\nclassÂ BirdÂ extendsÂ AnimalÂ {\nÂ Â fly!:Â number;\n}\nfunctionÂ getName(animal:Â Animal)Â {\nÂ Â ifÂ (animalÂ instanceofÂ Bird)Â {\nÂ Â Â Â console.log(animal.fly);\nÂ Â }Â elseÂ {\nÂ Â Â Â console.log(animal.name);\nÂ Â }\n}\n```\n\nã€Œè‡ªå®šä¹‰ç±»å‹ä¿æŠ¤ã€\n\né€šè¿‡Â `type is xxx`è¿™æ ·çš„ç±»å‹è°“è¯æ¥è¿›è¡Œç±»å‹ä¿æŠ¤\n\nä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­Â `value is object`å°±ä¼šè®¤ä¸ºå¦‚æœå‡½æ•°è¿”å› true é‚£ä¹ˆå®šä¹‰çš„ value å°±æ˜¯ object ç±»å‹\n\n```\nfunctionÂ isObject(value:Â unknown):Â valueÂ isÂ objectÂ {\nÂ Â returnÂ typeofÂ valueÂ ===Â \"object\"Â &&Â valueÂ !==Â null;\n}\n\nfunctionÂ fn(x:Â stringÂ |Â object)Â {\nÂ Â ifÂ (isObject(x))Â {\nÂ Â Â Â //Â ....\nÂ Â }Â elseÂ {\nÂ Â Â Â //Â .....\nÂ Â }\n}\n```\n\n### **3 å‡½æ•°**\n\n##### **3.1 å‡½æ•°çš„å®šä¹‰**\n\nå¯ä»¥æŒ‡å®šå‚æ•°çš„ç±»å‹å’Œè¿”å›å€¼çš„ç±»å‹\n\n```\nfunctionÂ hello(name:Â string):Â voidÂ {\nÂ Â console.log(\"hello\",Â name);\n}\nhello(\"hahaha\");\n```\n\n##### **3.2 å‡½æ•°è¡¨è¾¾å¼**\n\nå®šä¹‰å‡½æ•°ç±»å‹\n\n```\ntypeÂ SumFuncÂ =Â (x:Â number,Â y:Â number)Â =>Â number;\n\nletÂ countNumber:Â SumFuncÂ =Â functionÂ (a,Â b)Â {\nÂ Â returnÂ aÂ +Â b;\n};\n```\n\n##### **3.3 å¯é€‰å‚æ•°**\n\nåœ¨ TS ä¸­å‡½æ•°çš„å½¢å‚å’Œå®å‚å¿…é¡»ä¸€æ ·ï¼Œä¸ä¸€æ ·å°±è¦é…ç½®å¯é€‰å‚æ•°,è€Œä¸”å¿…é¡»æ˜¯ã€Œæœ€åä¸€ä¸ªå‚æ•°ã€\n\n```\nfunctionÂ print(name:Â string,Â age?:Â number):Â voidÂ {\nÂ Â console.log(name,Â age);\n}\nprint(\"hahaha\");\n```\n\n##### **3.4 é»˜è®¤å‚æ•°**\n\n```\nfunctionÂ ajax(url:Â string,Â method:Â stringÂ =Â \"GET\")Â {\nÂ Â console.log(url,Â method);\n}\najax(\"/users\");\n```\n\n##### **3.5 å‰©ä½™å‚æ•°**\n\n```\nfunctionÂ sum(...numbers:Â number[])Â {\nÂ Â returnÂ numbers.reduce((val,Â item)Â =>Â (valÂ +=Â item),Â 0);\n}\nconsole.log(sum(1,Â 2,Â 3));\n```\n\n##### **3.6 å‡½æ•°é‡è½½**\n\nå‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚åœ¨ TypeScript ä¸­ï¼Œè¡¨ç°ä¸ºç»™åŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰\n\n```\nletÂ obj:Â anyÂ =Â {};\nfunctionÂ attr(val:Â string):Â void;\nfunctionÂ attr(val:Â number):Â void;\nfunctionÂ attr(val:Â any):Â voidÂ {\nÂ Â ifÂ (typeofÂ valÂ ===Â \"string\")Â {\nÂ Â Â Â obj.nameÂ =Â val;\nÂ Â }Â elseÂ {\nÂ Â Â Â obj.ageÂ =Â val;\nÂ Â }\n}\nattr(\"hahaha\");\nattr(9);\nattr(true);\nconsole.log(obj);\n```\n\n> **â**\n\n> æ³¨æ„ï¼šå‡½æ•°é‡è½½çœŸæ­£æ‰§è¡Œçš„æ˜¯åŒåå‡½æ•°æœ€åå®šä¹‰çš„å‡½æ•°ä½“ åœ¨æœ€åä¸€ä¸ªå‡½æ•°ä½“å®šä¹‰ä¹‹å‰å…¨éƒ½å±äºå‡½æ•°ç±»å‹å®šä¹‰ ä¸èƒ½å†™å…·ä½“çš„å‡½æ•°å®ç°æ–¹æ³• åªèƒ½å®šä¹‰ç±»å‹\n\n> â\n\n### **4 ç±»**\n\n##### **4.1 ç±»çš„å®šä¹‰**\n\nåœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Â `Class`Â å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»\n\n```\nclassÂ PersonÂ {\nÂ Â name!:Â string;Â //å¦‚æœåˆå§‹å±æ€§æ²¡èµ‹å€¼å°±éœ€è¦åŠ ä¸Š!\nÂ Â constructor(_name:Â string)Â {\nÂ Â Â Â this.nameÂ =Â _name;\nÂ Â }\nÂ Â getName():Â voidÂ {\nÂ Â Â Â console.log(this.name);\nÂ Â }\n}\nletÂ p1Â =Â newÂ Person(\"hello\");\np1.getName();\n```\n\nå½“ç„¶ å¦‚æœæˆ‘ä»¬å›¾çœäº‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå±æ€§å®šä¹‰ç›´æ¥å†™åˆ°æ„é€ å‡½æ•°çš„å‚æ•°é‡Œé¢å»(ä¸è¿‡ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·å†™ å› ä¸ºä¼šè®©ä»£ç å¢åŠ é˜…è¯»éš¾åº¦)\n\n```\nclassÂ PersonÂ {\nÂ Â constructor(publicÂ name:Â string)Â {}\nÂ Â getName():Â voidÂ {\nÂ Â Â Â console.log(this.name);\nÂ Â }\n}\nletÂ p1Â =Â newÂ Person(\"hello\");\np1.getName();\n```\n\n> **â**\n\n> æ³¨æ„ï¼šå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»çš„æ—¶å€™,ä¼šå¾—åˆ°Â ã€Œ2 ä¸ªç±»å‹ã€ä¸€ä¸ªæ˜¯æ„é€ å‡½æ•°ç±»å‹çš„å‡½æ•°ç±»å‹(å½“åšæ™®é€šæ„é€ å‡½æ•°çš„ç±»å‹) å¦ä¸€ä¸ªæ˜¯ç±»çš„å®ä¾‹ç±»å‹ï¼ˆä»£è¡¨å®ä¾‹ï¼‰\n\n> â\n\nå…·ä½“çœ‹ä¾‹å­\n\n```\nclassÂ ComponentÂ {\nÂ Â staticÂ myName:Â stringÂ =Â \"é™æ€åç§°å±æ€§\";\nÂ Â myName:Â stringÂ =Â \"å®ä¾‹åç§°å±æ€§\";\n}\n//tsÂ ä¸€ä¸ªç±»å‹Â ä¸€ä¸ªå«å€¼\n//æ”¾åœ¨=åé¢çš„æ˜¯å€¼\nletÂ comÂ =Â Component;Â //è¿™é‡Œæ˜¯ä»£è¡¨æ„é€ å‡½æ•°\n//å†’å·åé¢çš„æ˜¯ç±»å‹\nletÂ c:Â ComponentÂ =Â newÂ Component();Â //è¿™é‡Œæ˜¯ä»£è¡¨å®ä¾‹ç±»å‹\nletÂ f:Â typeofÂ ComponentÂ =Â com;\n```\n\n##### **4.2 å­˜å–å™¨**\n\nåœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å­˜å–å™¨æ¥æ”¹å˜ä¸€ä¸ªç±»ä¸­å±æ€§çš„è¯»å–å’Œèµ‹å€¼è¡Œä¸º\n\n```\nclassÂ UserÂ {\nÂ Â myname:Â string;\nÂ Â constructor(myname:Â string)Â {\nÂ Â Â Â this.mynameÂ =Â myname;\nÂ Â }\nÂ Â getÂ name()Â {\nÂ Â Â Â returnÂ this.myname;\nÂ Â }\nÂ Â setÂ name(value)Â {\nÂ Â Â Â this.mynameÂ =Â value;\nÂ Â }\n}\n\nletÂ userÂ =Â newÂ User(\"hello\");\nuser.nameÂ =Â \"world\";\nconsole.log(user.name);\n```\n\nå…¶å®æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ç¿»è¯‘æˆ es5 çš„ä»£ç  åŸç†å¾ˆç®€å• å°±æ˜¯ä½¿ç”¨äº† Object.defineProperty åœ¨ç±»çš„åŸå‹ä¸Šé¢æ‹¦æˆªäº†å±æ€§å¯¹åº”çš„ get å’Œ set æ–¹æ³•\n\n```\nvarÂ UserÂ =Â /**Â @classÂ */Â (functionÂ ()Â {\nÂ Â functionÂ User(myname)Â {\nÂ Â Â Â this.mynameÂ =Â myname;\nÂ Â }\nÂ Â Object.defineProperty(User.prototype,Â \"name\",Â {\nÂ Â Â Â get:Â functionÂ ()Â {\nÂ Â Â Â Â Â returnÂ this.myname;\nÂ Â Â Â },\nÂ Â Â Â set:Â functionÂ (value)Â {\nÂ Â Â Â Â Â this.mynameÂ =Â value;\nÂ Â Â Â },\nÂ Â Â Â enumerable:Â false,\nÂ Â Â Â configurable:Â true,\nÂ Â });\nÂ Â returnÂ User;\n})();\nvarÂ userÂ =Â newÂ User(\"hello\");\nuser.nameÂ =Â \"world\";\nconsole.log(user.name);\n```\n\n##### **4.3 readonly åªè¯»å±æ€§**\n\nreadonly ä¿®é¥°çš„å˜é‡åªèƒ½åœ¨ã€Œæ„é€ å‡½æ•°ã€ä¸­åˆå§‹åŒ– TypeScript çš„ç±»å‹ç³»ç»ŸåŒæ ·ä¹Ÿå…è®¸å°† interfaceã€typeã€ class ä¸Šçš„å±æ€§æ ‡è¯†ä¸º readonly readonly å®é™…ä¸Šåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œä»£ç æ£€æŸ¥ã€‚\n\n```\nclassÂ AnimalÂ {\nÂ Â publicÂ readonlyÂ name:Â string;\nÂ Â constructor(name:Â string)Â {\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\nÂ Â changeName(name:Â string)Â {\nÂ Â Â Â this.nameÂ =Â name;Â //è¿™ä¸ªtsæ˜¯æŠ¥é”™çš„\nÂ Â }\n}\n\nletÂ aÂ =Â newÂ Animal(\"hello\");\n```\n\n##### **4.4 ç»§æ‰¿**\n\nå­ç±»ç»§æ‰¿çˆ¶ç±»åå­ç±»çš„å®ä¾‹å°±æ‹¥æœ‰äº†çˆ¶ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥å¢å¼ºä»£ç çš„å¯å¤ç”¨æ€§\n\nå°†å­ç±»å…¬ç”¨çš„æ–¹æ³•æŠ½è±¡å‡ºæ¥æ”¾åœ¨çˆ¶ç±»ä¸­ï¼Œè‡ªå·±çš„ç‰¹æ®Šé€»è¾‘æ”¾åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»çš„é€»è¾‘\n\nsuper å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸Šçš„æ–¹æ³•å’Œå±æ€§\n\nåœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ extends å…³é”®å­—æ¥å®ç°ç»§æ‰¿\n\n```\nclassÂ PersonÂ {\nÂ Â name:Â string;Â //å®šä¹‰å®ä¾‹çš„å±æ€§ï¼Œé»˜è®¤çœç•¥publicä¿®é¥°ç¬¦\nÂ Â age:Â number;\nÂ Â constructor(name:Â string,Â age:Â number)Â {\nÂ Â Â Â //æ„é€ å‡½æ•°\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â Â Â this.ageÂ =Â age;\nÂ Â }\nÂ Â getName():Â stringÂ {\nÂ Â Â Â returnÂ this.name;\nÂ Â }\nÂ Â setName(name:Â string):Â voidÂ {\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\n}\nclassÂ StudentÂ extendsÂ PersonÂ {\nÂ Â no:Â number;\nÂ Â constructor(name:Â string,Â age:Â number,Â no:Â number)Â {\nÂ Â Â Â super(name,Â age);\nÂ Â Â Â this.noÂ =Â no;\nÂ Â }\nÂ Â getNo():Â numberÂ {\nÂ Â Â Â returnÂ this.no;\nÂ Â }\n}\nletÂ s1Â =Â newÂ Student(\"hello\",Â 10,Â 1);\nconsole.log(s1);\n```\n\n##### **4.5 ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦**\n\nã€Œpublicã€Â ç±»é‡Œé¢ å­ç±» å…¶å®ƒä»»ä½•åœ°æ–¹å¤–è¾¹éƒ½å¯ä»¥è®¿é—®ã€Œprotectedã€Â ç±»é‡Œé¢ å­ç±» éƒ½å¯ä»¥è®¿é—®,å…¶å®ƒä»»ä½•åœ°æ–¹ä¸èƒ½è®¿é—®ã€Œprivateã€Â ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œå­ç±»å’Œå…¶å®ƒä»»ä½•åœ°æ–¹éƒ½ä¸å¯ä»¥è®¿é—®\n\n```\nclassÂ ParentÂ {\nÂ Â publicÂ name:Â string;\nÂ Â protectedÂ age:Â number;\nÂ Â privateÂ car:Â number;\nÂ Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â {\nÂ Â Â Â //æ„é€ å‡½æ•°\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â Â Â this.ageÂ =Â age;\nÂ Â Â Â this.carÂ =Â car;\nÂ Â }\nÂ Â getName():Â stringÂ {\nÂ Â Â Â returnÂ this.name;\nÂ Â }\nÂ Â setName(name:Â string):Â voidÂ {\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\n}\nclassÂ ChildÂ extendsÂ ParentÂ {\nÂ Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â {\nÂ Â Â Â super(name,Â age,Â car);\nÂ Â }\nÂ Â desc()Â {\nÂ Â Â Â console.log(`${this.name}Â ${this.age}Â ${this.car}`);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™\nÂ Â }\n}\n\nletÂ childÂ =Â newÂ Child(\"hello\",Â 10,Â 1000);\nconsole.log(child.name);\nconsole.log(child.age);Â //ageè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™\nconsole.log(child.car);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™\n```\n\n##### **4.6 é™æ€å±æ€§ é™æ€æ–¹æ³•**\n\nç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•æ˜¯ç›´æ¥å®šä¹‰åœ¨ç±»æœ¬èº«ä¸Šé¢çš„ æ‰€ä»¥ä¹Ÿåªèƒ½é€šè¿‡ç›´æ¥è°ƒç”¨ç±»çš„æ–¹æ³•å’Œå±æ€§æ¥è®¿é—®\n\n```\nclassÂ ParentÂ {\nÂ Â staticÂ mainNameÂ =Â \"Parent\";\nÂ Â staticÂ getmainName()Â {\nÂ Â Â Â console.log(this);Â //æ³¨æ„é™æ€æ–¹æ³•é‡Œé¢çš„thisæŒ‡å‘çš„æ˜¯ç±»æœ¬èº«Â è€Œä¸æ˜¯ç±»çš„å®ä¾‹å¯¹è±¡Â æ‰€ä»¥é™æ€æ–¹æ³•é‡Œé¢åªèƒ½è®¿é—®ç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•\nÂ Â Â Â returnÂ this.mainName;\nÂ Â }\nÂ Â publicÂ name:Â string;\nÂ Â constructor(name:Â string)Â {\nÂ Â Â Â //æ„é€ å‡½æ•°\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\n}\nconsole.log(Parent.mainName);\nconsole.log(Parent.getmainName());\n```\n\n##### **4.7 æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•**\n\næŠ½è±¡ç±»ï¼Œæ— æ³•è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿å¹¶ä¸”æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹ å­ç±»å¯ä»¥å¯¹æŠ½è±¡ç±»è¿›è¡Œä¸åŒçš„å®ç°\n\næŠ½è±¡æ–¹æ³•åªèƒ½å‡ºç°åœ¨æŠ½è±¡ç±»ä¸­å¹¶ä¸”æŠ½è±¡æ–¹æ³•ä¸èƒ½åœ¨æŠ½è±¡ç±»ä¸­è¢«å…·ä½“å®ç°ï¼Œåªèƒ½åœ¨æŠ½è±¡ç±»çš„å­ç±»ä¸­å®ç°ï¼ˆå¿…é¡»è¦å®ç°ï¼‰\n\nä½¿ç”¨åœºæ™¯ï¼šæˆ‘ä»¬ä¸€èˆ¬ç”¨æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æŠ½ç¦»å‡ºäº‹ç‰©çš„å…±æ€§ ä»¥åæ‰€æœ‰ç»§æ‰¿çš„å­ç±»å¿…é¡»æŒ‰ç…§è§„èŒƒå»å®ç°è‡ªå·±çš„å…·ä½“é€»è¾‘ è¿™æ ·å¯ä»¥å¢åŠ ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§\n\nä½¿ç”¨Â `abstract`Â å…³é”®å­—æ¥å®šä¹‰æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\n\n```\nabstractÂ classÂ AnimalÂ {\nÂ Â name!:Â string;\nÂ Â abstractÂ speak():Â void;\n}\nclassÂ CatÂ extendsÂ AnimalÂ {\nÂ Â speak()Â {\nÂ Â Â Â console.log(\"å–µå–µå–µ\");\nÂ Â }\n}\nletÂ animalÂ =Â newÂ Animal();Â //ç›´æ¥æŠ¥é”™Â æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹\nletÂ catÂ =Â newÂ Cat();\ncat.speak();\n```\n\n> **â**\n\n> æ€è€ƒ 1:é‡å†™(override)å’Œé‡è½½(overload)çš„åŒºåˆ«\n\n> â\n\nã€Œé‡å†™ã€æ˜¯æŒ‡å­ç±»é‡å†™ç»§æ‰¿è‡ªçˆ¶ç±»ä¸­çš„æ–¹æ³•ã€Œé‡è½½ã€æ˜¯æŒ‡ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªç±»å‹å®šä¹‰\n\n```\nclassÂ AnimalÂ {\nÂ Â speak(word:Â string):Â stringÂ {\nÂ Â Â Â returnÂ \"åŠ¨ç‰©:\"Â +Â word;\nÂ Â }\n}\nclassÂ CatÂ extendsÂ AnimalÂ {\nÂ Â speak(word:Â string):Â stringÂ {\nÂ Â Â Â returnÂ \"çŒ«:\"Â +Â word;\nÂ Â }\n}\nletÂ catÂ =Â newÂ Cat();\nconsole.log(cat.speak(\"hello\"));\n//Â ä¸Šé¢æ˜¯é‡å†™\n//--------------------------------------------\n//Â ä¸‹é¢æ˜¯é‡è½½\nfunctionÂ double(val:Â number):Â number;\nfunctionÂ double(val:Â string):Â string;\nfunctionÂ double(val:Â any):Â anyÂ {\nÂ Â ifÂ (typeofÂ valÂ ==Â \"number\")Â {\nÂ Â Â Â returnÂ valÂ *Â 2;\nÂ Â }\nÂ Â returnÂ valÂ +Â val;\n}\n\nletÂ rÂ =Â double(1);\nconsole.log(r);\n```\n\n> **â**\n\n> æ€è€ƒ 2:ä»€ä¹ˆæ˜¯ã€Œå¤šæ€ã€\n\n> â\n\nåœ¨çˆ¶ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­æœ‰å¤šä¸ªå®ç°ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒçš„å¯¹è±¡æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œå®ç°è¿è¡Œæ—¶çš„ç»‘å®šã€‚\n\n```\nabstractÂ classÂ AnimalÂ {\nÂ Â //Â å£°æ˜æŠ½è±¡çš„æ–¹æ³•ï¼Œè®©å­ç±»å»å®ç°\nÂ Â abstractÂ sleep():Â void;\n}\nclassÂ DogÂ extendsÂ AnimalÂ {\nÂ Â sleep()Â {\nÂ Â Â Â console.log(\"dogÂ sleep\");\nÂ Â }\n}\nletÂ dogÂ =Â newÂ Dog();\nclassÂ CatÂ extendsÂ AnimalÂ {\nÂ Â sleep()Â {\nÂ Â Â Â console.log(\"catÂ sleep\");\nÂ Â }\n}\nletÂ catÂ =Â newÂ Cat();\nletÂ animals:Â Animal[]Â =Â [dog,Â cat];\nanimals.forEach((i)Â =>Â {\nÂ Â i.sleep();\n});\n```\n\n### **5 æ¥å£**\n\næ¥å£æ—¢å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æè¿°å¯¹è±¡çš„å½¢çŠ¶\n\næˆ‘ä»¬ç”¨Â `interface`Â å…³é”®å­—æ¥å®šä¹‰æ¥å£ åœ¨æ¥å£ä¸­å¯ä»¥ç”¨åˆ†å·æˆ–è€…é€—å·åˆ†å‰²æ¯ä¸€é¡¹ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸åŠ \n\n##### **5.1 å¯¹è±¡çš„å½¢çŠ¶**\n\n```\n //æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`\n//æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`\ninterfaceÂ SpeakableÂ {\nÂ Â speak():Â void;\nÂ Â readonlyÂ lng:Â string;Â //readonlyè¡¨ç¤ºåªè¯»å±æ€§Â åç»­ä¸å¯ä»¥æ›´æ”¹\nÂ Â name?:Â string;Â //ï¼Ÿè¡¨ç¤ºå¯é€‰å±æ€§\n}\n\nletÂ speakman:Â SpeakableÂ =Â {\nÂ Â //Â Â Â speak()Â {},Â //å°‘å±æ€§ä¼šæŠ¥é”™\nÂ Â name:Â \"hello\",\nÂ Â lng:Â \"en\",\nÂ Â age:Â 111,Â //å¤šå±æ€§ä¹Ÿä¼šæŠ¥é”™\n};\n```\n\n##### **5.2 è¡Œä¸ºçš„æŠ½è±¡**\n\næ¥å£å¯ä»¥æŠŠä¸€äº›ç±»ä¸­å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•æŠ½è±¡å‡ºæ¥,å¯ä»¥ç”¨æ¥çº¦æŸå®ç°æ­¤æ¥å£çš„ç±»\n\nä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥è¢«å¤šä¸ªç±»å®ç°\n\næˆ‘ä»¬ç”¨Â `implements`å…³é”®å­—æ¥ä»£è¡¨ å®ç°\n\n```\n //æ¥å£å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡\ninterfaceÂ SpeakableÂ {\nÂ Â speak():Â void;\n}\ninterfaceÂ EatableÂ {\nÂ Â eat():Â void;\n}\n//ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£\nclassÂ PersonÂ implementsÂ Speakable,Â EatableÂ {\nÂ Â speak()Â {\nÂ Â Â Â console.log(\"Personè¯´è¯\");\nÂ Â }\nÂ Â //Â Â Â eat()Â {}Â //éœ€è¦å®ç°çš„æ¥å£åŒ…å«eatæ–¹æ³•Â ä¸å®ç°ä¼šæŠ¥é”™\n}\n```\n\n##### **5.3 å®šä¹‰ä»»æ„å±æ€§**\n\nå¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰æ¥å£çš„æ—¶å€™æ— æ³•é¢„å…ˆçŸ¥é“æœ‰å“ªäº›å±æ€§çš„æ—¶å€™,å¯ä»¥ä½¿ç”¨Â `[propName:string]:any`,propName åå­—æ˜¯ä»»æ„çš„\n\n```\ninterfaceÂ PersonÂ {\nÂ Â id:Â number;\nÂ Â name:Â string;\nÂ Â [propName:Â string]:Â any;\n}\n\nletÂ p1Â =Â {\nÂ Â id:Â 1,\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\n};\n```\n\nè¿™ä¸ªæ¥å£è¡¨ç¤º å¿…é¡»è¦æœ‰ id å’Œ name è¿™ä¸¤ä¸ªå­—æ®µ ç„¶åè¿˜å¯ä»¥æ–°åŠ å…¶ä½™çš„æœªçŸ¥å­—æ®µ\n\n##### **5.4 æ¥å£çš„ç»§æ‰¿**\n\næˆ‘ä»¬é™¤äº†ç±»å¯ä»¥ç»§æ‰¿ æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿ åŒæ ·çš„ä½¿ç”¨Â `extends`å…³é”®å­—\n\n```\ninterfaceÂ SpeakableÂ {\nÂ Â speak():Â void;\n}\ninterfaceÂ SpeakChineseÂ extendsÂ SpeakableÂ {\nÂ Â speakChinese():Â void;\n}\nclassÂ PersonÂ implementsÂ SpeakChineseÂ {\nÂ Â speak()Â {\nÂ Â Â Â console.log(\"Person\");\nÂ Â }\nÂ Â speakChinese()Â {\nÂ Â Â Â console.log(\"speakChinese\");\nÂ Â }\n}\n```\n\n##### **5.5 å‡½æ•°ç±»å‹æ¥å£**\n\nå¯ä»¥ç”¨æ¥å£æ¥å®šä¹‰å‡½æ•°ç±»å‹\n\n```\ninterfaceÂ discountÂ {\nÂ Â (price:Â number):Â number;\n}\nletÂ cost:Â discountÂ =Â functionÂ (price:Â number):Â numberÂ {\nÂ Â returnÂ priceÂ *Â 0.8;\n};\n```\n\n##### **5.6 æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£**\n\nä½¿ç”¨ç‰¹æ®Šçš„ new()å…³é”®å­—æ¥æè¿°ç±»çš„æ„é€ å‡½æ•°ç±»å‹\n\n```\nclassÂ AnimalÂ {\nÂ Â constructor(publicÂ name:Â string)Â {}\n}\n//ä¸åŠ newæ˜¯ä¿®é¥°å‡½æ•°çš„,åŠ newæ˜¯ä¿®é¥°ç±»çš„\ninterfaceÂ WithNameClassÂ {\nÂ Â newÂ (name:Â string):Â Animal;\n}\nfunctionÂ createAnimal(clazz:Â WithNameClass,Â name:Â string)Â {\nÂ Â returnÂ newÂ clazz(name);\n}\nletÂ aÂ =Â createAnimal(Animal,Â \"hello\");\nconsole.log(a.name);\n```\n\nå…¶å®è¿™æ ·çš„ç”¨æ³•ä¸€èˆ¬å‡ºç°åœ¨ å½“æˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ªç±»ä½œä¸ºå‚æ•°çš„æ—¶å€™ æˆ‘ä»¬éœ€è¦å¯¹ä¼ å…¥çš„ç±»çš„æ„é€ å‡½æ•°ç±»å‹è¿›è¡Œçº¦æŸ æ‰€ä»¥éœ€è¦ä½¿ç”¨ new å…³é”®å­—ä»£è¡¨æ˜¯ç±»çš„æ„é€ å‡½æ•°ç±»å‹ ç”¨ä»¥å’Œæ™®é€šå‡½æ•°è¿›è¡ŒåŒºåˆ†\n\n***\n\n> **â**\n\n> æ€è€ƒï¼šæ¥å£å’Œç±»å‹åˆ«åçš„åŒºåˆ« è¿™ä¸ªé¢˜ç›®æ˜¯ç»å…¸çš„Â ã€Œts é¢è¯•é¢˜ã€\n\n> â\n\nå®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹ä½¿ç”¨æ¥å£ç±»å‹å’Œç±»å‹åˆ«åçš„æ•ˆæœç­‰ä»·ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹å®šçš„åœºæ™¯ä¸‹è¿™ä¸¤è€…è¿˜æ˜¯å­˜åœ¨å¾ˆå¤§åŒºåˆ«ã€‚\n\n1.åŸºç¡€æ•°æ®ç±»å‹ ä¸æ¥å£ä¸åŒï¼Œç±»å‹åˆ«åè¿˜å¯ä»¥ç”¨äºå…¶ä»–ç±»å‹ï¼Œå¦‚åŸºæœ¬ç±»å‹ï¼ˆåŸå§‹å€¼ï¼‰ã€è”åˆç±»å‹ã€å…ƒç»„\n\n```\n //Â primitive\ntypeÂ NameÂ =Â string;\n\n//Â union\ntypeÂ PartialPointÂ =Â PartialPointXÂ |Â PartialPointY;\n\n//Â tuple\ntypeÂ DataÂ =Â [number,Â string];\n\n//Â dom\nletÂ divÂ =Â document.createElement(\"div\");\ntypeÂ BÂ =Â typeofÂ div;\n```\n\n2.é‡å¤å®šä¹‰\n\næ¥å£å¯ä»¥å®šä¹‰å¤šæ¬¡ ä¼šè¢«è‡ªåŠ¨åˆå¹¶ä¸ºå•ä¸ªæ¥å£ ç±»å‹åˆ«åä¸å¯ä»¥é‡å¤å®šä¹‰\n\n```\ninterfaceÂ PointÂ {\nÂ Â x:Â number;\n}\ninterfaceÂ PointÂ {\nÂ Â y:Â number;\n}\nconstÂ point:Â PointÂ =Â {Â x:Â 1,Â y:Â 2Â };\n```\n\n3.æ‰©å±• æ¥å£å¯ä»¥æ‰©å±•ç±»å‹åˆ«åï¼ŒåŒç†ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ‰©å±•æ¥å£ã€‚ä½†æ˜¯ä¸¤è€…å®ç°æ‰©å±•çš„æ–¹å¼ä¸åŒ\n\næ¥å£çš„æ‰©å±•å°±æ˜¯ç»§æ‰¿ï¼Œé€šè¿‡ extends æ¥å®ç°ã€‚ç±»å‹åˆ«åçš„æ‰©å±•å°±æ˜¯äº¤å‰ç±»å‹ï¼Œé€šè¿‡ & æ¥å®ç°ã€‚\n\n```\n //Â æ¥å£æ‰©å±•æ¥å£\ninterfaceÂ PointXÂ {\nÂ Â x:Â number;\n}\n\ninterfaceÂ PointÂ extendsÂ PointXÂ {\nÂ Â y:Â number;\n}\n//Â ----\n//Â ç±»å‹åˆ«åæ‰©å±•ç±»å‹åˆ«å\ntypeÂ PointXÂ =Â {\nÂ Â x:Â number;\n};\n\ntypeÂ PointÂ =Â PointXÂ &Â {\nÂ Â y:Â number;\n};\n//Â ----\n//Â æ¥å£æ‰©å±•ç±»å‹åˆ«å\ntypeÂ PointXÂ =Â {\nÂ Â x:Â number;\n};\ninterfaceÂ PointÂ extendsÂ PointXÂ {\nÂ Â y:Â number;\n}\n//Â ----\n//Â ç±»å‹åˆ«åæ‰©å±•æ¥å£\ninterfaceÂ PointXÂ {\nÂ Â x:Â number;\n}\ntypeÂ PointÂ =Â PointXÂ &Â {\nÂ Â y:Â number;\n};\n```\n\n4.å®ç° è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šæƒ…å†µ ç±»æ— æ³•å®ç°å®šä¹‰äº†è”åˆç±»å‹çš„ç±»å‹åˆ«å\n\n```\ntypeÂ PartialPointÂ =Â {Â x:Â numberÂ }Â |Â {Â y:Â numberÂ };\n\n//Â AÂ classÂ canÂ onlyÂ implementÂ anÂ objectÂ typeÂ or\n//Â intersectionÂ ofÂ objectÂ typesÂ withÂ staticallyÂ knownÂ members.\nclassÂ SomePartialPointÂ implementsÂ PartialPointÂ {\nÂ Â //Â Error\nÂ Â xÂ =Â 1;\nÂ Â yÂ =Â 2;\n}\n```\n\n### **6 æ³›å‹**\n\næ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§\n\nä¸ºäº†æ›´å¥½çš„äº†è§£æ³›å‹çš„ä½œç”¨ æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­\n\n```\nfunctionÂ createArray(length:Â number,Â value:Â any):Â any[]Â {\nÂ Â letÂ resultÂ =Â [];\nÂ Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â length;Â i++)Â {\nÂ Â Â Â result[i]Â =Â value;\nÂ Â }\nÂ Â returnÂ result;\n}\n\ncreateArray(3,Â \"x\");Â //Â ['x',Â 'x',Â 'x'] \n```\n\nä¸Šè¿°è¿™æ®µä»£ç ç”¨æ¥ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º length å€¼ä¸º value çš„æ•°ç»„ ä½†æ˜¯æˆ‘ä»¬å…¶å®å¯ä»¥å‘ç°ä¸€ä¸ªé—®é¢˜ ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹çš„ value è¿”å›å€¼çš„æ•°ç»„æ°¸è¿œæ˜¯ any ç±»å‹ å¦‚æœæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ æˆ‘ä»¬é¢„å…ˆä¸çŸ¥é“ä¼šä¼ å…¥ä»€ä¹ˆç±»å‹ ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹ æˆ‘ä»¬çš„è¿”å›çš„æ•°ç»„çš„æŒ‡é‡Œé¢çš„ç±»å‹åº”è¯¥å’Œå‚æ•°ä¿æŒä¸€è‡´ é‚£ä¹ˆè¿™æ—¶å€™ æ³›å‹å°±ç™»åœºäº†\n\nä½¿ç”¨ã€Œæ³›å‹ã€æ”¹é€ \n\n```\nfunctionÂ createArray<T>(length:Â number,Â value:Â T):Â Array<T>Â {\nÂ Â letÂ result:Â T[]Â =Â [];\nÂ Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â length;Â i++)Â {\nÂ Â Â Â result[i]Â =Â value;\nÂ Â }\nÂ Â returnÂ result;\n}\n\ncreateArray<string>(3,Â \"x\");Â //Â ['x',Â 'x',Â 'x'] \n```\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨<>çš„å†™æ³• ç„¶åå†é¢ä¼ å…¥ä¸€ä¸ªå˜é‡ T ç”¨æ¥è¡¨ç¤ºåç»­å‡½æ•°éœ€è¦ç”¨åˆ°çš„ç±»å‹ å½“æˆ‘ä»¬çœŸæ­£å»è°ƒç”¨å‡½æ•°çš„æ—¶å€™å†ä¼ å…¥ T çš„ç±»å‹å°±å¯ä»¥è§£å†³å¾ˆå¤šé¢„å…ˆæ— æ³•ç¡®å®šç±»å‹ç›¸å…³çš„é—®é¢˜\n\n##### **6.1 å¤šä¸ªç±»å‹å‚æ•°**\n\nå¦‚æœæˆ‘ä»¬éœ€è¦æœ‰å¤šä¸ªæœªçŸ¥çš„ç±»å‹å ä½ é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»»ä½•çš„å­—æ¯æ¥è¡¨ç¤ºä¸åŒçš„ç±»å‹å‚æ•°\n\n```\nfunctionÂ swap<T,Â U>(tuple:Â [T,Â U]):Â [U,Â T]Â {\nÂ Â returnÂ [tuple[1],Â tuple[0]];\n}\n\nswap([7,Â \"seven\"]);Â //Â ['seven',Â 7] \n```\n\n##### **6.2 æ³›å‹çº¦æŸ**\n\nåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹å˜é‡çš„æ—¶å€™ï¼Œç”±äºäº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±æ€§æˆ–æ–¹æ³•ï¼š\n\n```\nfunctionÂ loggingIdentity<T>(arg:Â T):Â TÂ {\nÂ Â console.log(arg.length);\nÂ Â returnÂ arg;\n}\n\n//Â index.ts(2,19):Â errorÂ TS2339:Â PropertyÂ 'length'Â doesÂ notÂ existÂ onÂ typeÂ 'T'. \n```\n\nä¸Šä¾‹ä¸­ï¼Œæ³›å‹ T ä¸ä¸€å®šåŒ…å«å±æ€§ lengthï¼Œæ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™äº†ã€‚\n\nè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ³›å‹è¿›è¡Œçº¦æŸï¼Œåªå…è®¸è¿™ä¸ªå‡½æ•°ä¼ å…¥é‚£äº›åŒ…å« length å±æ€§çš„å˜é‡ã€‚è¿™å°±æ˜¯ã€Œæ³›å‹çº¦æŸã€\n\n```\ninterfaceÂ LengthwiseÂ {\nÂ Â length:Â number;\n}\n\nfunctionÂ loggingIdentity<TÂ extendsÂ Lengthwise>(arg:Â T):Â TÂ {\nÂ Â console.log(arg.length);\nÂ Â returnÂ arg;\n}\n```\n\n> **â**\n\n> æ³¨æ„ï¼šæˆ‘ä»¬åœ¨æ³›å‹é‡Œé¢ä½¿ç”¨`extends`å…³é”®å­—ä»£è¡¨çš„æ˜¯æ³›å‹çº¦æŸ éœ€è¦å’Œç±»çš„ç»§æ‰¿åŒºåˆ†å¼€\n\n> â\n\n##### **6.3 æ³›å‹æ¥å£**\n\nå®šä¹‰æ¥å£çš„æ—¶å€™ä¹Ÿå¯ä»¥æŒ‡å®šæ³›å‹\n\n```\ninterfaceÂ Cart<T>Â {\nÂ Â list:Â T[];\n}\nletÂ cart:Â Cart<{Â name:Â string;Â price:Â numberÂ }>Â =Â {\nÂ Â list:Â [{Â name:Â \"hello\",Â price:Â 10Â }],\n};\nconsole.log(cart.list[0].name,Â cart.list[0].price);\n```\n\næˆ‘ä»¬å®šä¹‰äº†æ¥å£ä¼ å…¥çš„ç±»å‹ T ä¹‹åè¿”å›çš„å¯¹è±¡æ•°ç»„é‡Œé¢ T å°±æ˜¯å½“æ—¶ä¼ å…¥çš„å‚æ•°ç±»å‹\n\n##### **6.4 æ³›å‹ç±»**\n\n```\nclassÂ MyArray<T>Â {\nÂ Â privateÂ list:Â T[]Â =Â [];\nÂ Â add(value:Â T)Â {\nÂ Â Â Â this.list.push(value);\nÂ Â }\nÂ Â getMax():Â TÂ {\nÂ Â Â Â letÂ resultÂ =Â this.list[0];\nÂ Â Â Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â this.list.length;Â i++)Â {\nÂ Â Â Â Â Â ifÂ (this.list[i]Â >Â result)Â {\nÂ Â Â Â Â Â Â Â resultÂ =Â this.list[i];\nÂ Â Â Â Â Â }\nÂ Â Â Â }\nÂ Â Â Â returnÂ result;\nÂ Â }\n}\nletÂ arrÂ =Â newÂ MyArray();\narr.add(1);\narr.add(2);\narr.add(3);\nletÂ retÂ =Â arr.getMax();\nconsole.log(ret);\n```\n\nä¸Šè¯‰ä¾‹å­æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåœ¨æ•°ç»„é‡Œé¢æ·»åŠ æ•°å­—å¹¶ä¸”è·å–æœ€å¤§å€¼çš„æ³›å‹ç±»\n\n##### **6.5 æ³›å‹ç±»å‹åˆ«å**\n\n```\ntypeÂ Cart<T>Â =Â {Â list:Â T[]Â }Â |Â T[];\nletÂ c1:Â Cart<string>Â =Â {Â list:Â [\"1\"]Â };\nletÂ c2:Â Cart<number>Â =Â [1];\n```\n\n##### **6.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹**\n\næˆ‘ä»¬å¯ä»¥ä¸ºæ³›å‹ä¸­çš„ç±»å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰åœ¨ä»£ç ä¸­ç›´æ¥æŒ‡å®šç±»å‹å‚æ•°ï¼Œä»å®é™…å€¼å‚æ•°ä¸­ä¹Ÿæ— æ³•æ¨æµ‹å‡ºæ—¶ï¼Œè¿™ä¸ªé»˜è®¤ç±»å‹å°±ä¼šèµ·ä½œç”¨\n\n```\nfunctionÂ createArray<TÂ =Â string>(length:Â number,Â value:Â T):Â Array<T>Â {\nÂ Â letÂ result:Â T[]Â =Â [];\nÂ Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â length;Â i++)Â {\nÂ Â Â Â result[i]Â =Â value;\nÂ Â }\nÂ Â returnÂ result;\n}\n```\n\n### **7 å®ç”¨æŠ€å·§**\n\n##### **7.1 typeof å…³é”®è¯**\n\n`typeof`Â å…³é”®è¯é™¤äº†åšç±»å‹ä¿æŠ¤ è¿˜å¯ä»¥ä»å®ç°æ¨å‡ºç±»å‹ï¼Œ\n\n```\n //å…ˆå®šä¹‰å˜é‡ï¼Œå†å®šä¹‰ç±»å‹\nletÂ p1Â =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\nÂ Â gender:Â \"male\",\n};\ntypeÂ PeopleÂ =Â typeofÂ p1;\nfunctionÂ getName(p:Â People):Â stringÂ {\nÂ Â returnÂ p.name;\n}\ngetName(p1);\n```\n\nä¸Šé¢çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨ typeof è·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹\n\n##### **7.2 keyof å…³é”®è¯**\n\n`keyof`Â å¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æ¥å£çš„æ‰€æœ‰ key å€¼\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender:Â \"male\"Â |Â \"female\";\n}\n//typeÂ PersonKeyÂ =Â 'name'|'age'|'gender';\ntypeÂ PersonKeyÂ =Â keyofÂ Person;\n\nfunctionÂ getValueByKey(p:Â Person,Â key:Â PersonKey)Â {\nÂ Â returnÂ p[key];\n}\nletÂ valÂ =Â getValueByKey({Â name:Â \"hello\",Â age:Â 10,Â gender:Â \"male\"Â },Â \"name\");\nconsole.log(val);\n```\n\n##### **7.3 ç´¢å¼•è®¿é—®æ“ä½œç¬¦**\n\nä½¿ç”¨ [] æ“ä½œç¬¦å¯ä»¥è¿›è¡Œç´¢å¼•è®¿é—®\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\n}\n\ntypeÂ xÂ =Â Person[\"name\"];Â //Â xÂ isÂ string\n```\n\n##### **7.4 æ˜ å°„ç±»å‹ in**\n\nåœ¨å®šä¹‰çš„æ—¶å€™ç”¨ in æ“ä½œç¬¦å»æ‰¹é‡å®šä¹‰ç±»å‹ä¸­çš„å±æ€§\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender:Â \"male\"Â |Â \"female\";\n}\n//æ‰¹é‡æŠŠä¸€ä¸ªæ¥å£ä¸­çš„å±æ€§éƒ½å˜æˆå¯é€‰çš„\ntypeÂ PartPersonÂ =Â {\nÂ Â [KeyÂ inÂ keyofÂ Person]?:Â Person[Key];\n};\n\nletÂ p1:Â PartPersonÂ =Â {};\n```\n\n##### **7.5 infer å…³é”®å­—**\n\nåœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚\n\n```\ntypeÂ ReturnType<T>Â =Â TÂ extendsÂ (...args:Â any[])Â =>Â inferÂ RÂ ?Â RÂ :Â any;\n```\n\nä»¥ä¸Šä»£ç ä¸­ infer R å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚\n\n##### **7.6 å†…ç½®å·¥å…·ç±»å‹**\n\n1.  Exclude<T,U> ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æ’é™¤ U\n\n```\ntypeÂ Exclude<T,Â U>Â =Â TÂ extendsÂ UÂ ?Â neverÂ :Â T;\n\ntypeÂ EÂ =Â Exclude<stringÂ |Â number,Â string>;\nletÂ e:Â EÂ =Â 10;\n```\n\n2.  Extract<T,U> ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æå– U\n\n```\ntypeÂ Extract<T,Â U>Â =Â TÂ extendsÂ UÂ ?Â TÂ :Â never;\n\ntypeÂ EÂ =Â Extract<stringÂ |Â number,Â string>;\nletÂ e:Â EÂ =Â \"1\";\n```\n\n3.  NonNullableä» T ä¸­æ’é™¤Â `null`Â å’ŒÂ `undefined`\n\n```\ntypeÂ NonNullable<T>Â =Â TÂ extendsÂ nullÂ |Â undefinedÂ ?Â neverÂ :Â T;\n\ntypeÂ EÂ =Â NonNullable<stringÂ |Â numberÂ |Â nullÂ |Â undefined>;\nletÂ e:Â EÂ =Â null;\n```\n\n4.  ReturnType`infer`Â æœ€æ—©å‡ºç°åœ¨æ­¤ PR ä¸­ï¼Œè¡¨ç¤ºåœ¨Â `extends`Â æ¡ä»¶è¯­å¥ä¸­å¾…æ¨æ–­çš„ç±»å‹å˜é‡\n\n```\ntypeÂ ReturnType<TÂ extendsÂ (...args:Â any[])Â =>Â any>Â =Â TÂ extendsÂ (\nÂ Â ...args:Â any[]\n)Â =>Â inferÂ R\nÂ Â ?Â R\nÂ Â :Â any;\nfunctionÂ getUserInfo()Â {\nÂ Â returnÂ {Â name:Â \"hello\",Â age:Â 10Â };\n}\n\n//Â é€šè¿‡Â ReturnTypeÂ å°†Â getUserInfoÂ çš„è¿”å›å€¼ç±»å‹èµ‹ç»™äº†Â UserInfo\ntypeÂ UserInfoÂ =Â ReturnType<typeofÂ getUserInfo>;\n\nconstÂ userA:Â UserInfoÂ =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\n};\n```\n\nå¯è§ è¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„è¿”å›ç±»å‹\n\n5.  Parametersè¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„å‚æ•°ç±»å‹\n\n```\ntypeÂ Parameters<T>Â =Â TÂ extendsÂ (...args:Â inferÂ R)Â =>Â anyÂ ?Â RÂ :Â any;\n\ntypeÂ T0Â =Â Parameters<()Â =>Â string>;Â //Â []\ntypeÂ T1Â =Â Parameters<(s:Â string)Â =>Â void>;Â //Â [string]\ntypeÂ T2Â =Â Parameters<<T>(arg:Â T)Â =>Â T>;Â //Â [unknown] \n```\n\n6.  PartialPartial å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ç”±éå¯é€‰å˜ä¸ºå¯é€‰\n\n```\ntypeÂ Partial<T>Â =Â {Â [PÂ inÂ keyofÂ T]?:Â T[P]Â };\ninterfaceÂ AÂ {\nÂ Â a1:Â string;\nÂ Â a2:Â number;\nÂ Â a3:Â boolean;\n}\ntypeÂ aPartialÂ =Â Partial<A>;\nconstÂ a:Â aPartialÂ =Â {};Â //Â ä¸ä¼šæŠ¥é”™\n```\n\n7.  RequiredRequired å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ä¸­çš„å¯é€‰é¡¹å˜ä¸ºå¿…é€‰é¡¹ï¼Œè¿™é‡Œç”¨äº† -? ä¿®é¥°ç¬¦æ¥å®ç°ã€‚\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender?:Â \"male\"Â |Â \"female\";\n}\n/**\n*Â typeÂ Required<T>Â =Â {Â [PÂ inÂ keyofÂ T]-?:Â T[P]Â };\n*/\nletÂ p:Â Required<Person>Â =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\nÂ Â gender:Â \"male\",\n};\n```\n\n8.  ReadonlyReadonly é€šè¿‡ä¸ºä¼ å…¥çš„å±æ€§æ¯ä¸€é¡¹éƒ½åŠ ä¸Š readonly ä¿®é¥°ç¬¦æ¥å®ç°ã€‚\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender?:Â \"male\"Â |Â \"female\";\n}\n//typeÂ Readonly<T>Â =Â {Â readonlyÂ [PÂ inÂ keyofÂ T]:Â T[P]Â };\nletÂ p:Â Readonly<Person>Â =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\nÂ Â gender:Â \"male\",\n};\np.ageÂ =Â 11;Â //error\n```\n\n9.  Pick<T,K> Pick èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ä»ä¼ å…¥çš„å±æ€§ä¸­æ‘˜å–æŸäº›è¿”å›\n\n```\ninterfaceÂ TodoÂ {\nÂ Â title:Â string;\nÂ Â description:Â string;\nÂ Â done:Â boolean;\n}\n/**\n*Â FromÂ TÂ pickÂ aÂ setÂ ofÂ propertiesÂ K\n*Â typeÂ Pick<T,Â KÂ extendsÂ keyofÂ T>Â =Â {Â [PÂ inÂ K]:Â T[P]Â };\n*/\ntypeÂ TodoBaseÂ =Â Pick<Todo,Â \"title\"Â |Â \"done\">;\n\n//Â =\ntypeÂ TodoBaseÂ =Â {\nÂ Â title:Â string;\nÂ Â done:Â boolean;\n};\n```\n\n10. Record<K,T> æ„é€ ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å…·æœ‰ä¸€ç»„å±æ€§ Kï¼Œæ¯ä¸ªå±æ€§çš„ç±»å‹ä¸º Tã€‚å¯ç”¨äºå°†ä¸€ä¸ªç±»å‹çš„å±æ€§æ˜ å°„ä¸ºå¦ä¸€ä¸ªç±»å‹ã€‚Record åé¢çš„æ³›å‹å°±æ˜¯å¯¹è±¡é”®å’Œå€¼çš„ç±»å‹ã€‚\n\nç®€å•ç†è§£ï¼šK å¯¹åº”å¯¹åº”çš„ keyï¼ŒT å¯¹åº”å¯¹è±¡çš„ valueï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªå£°æ˜å¥½çš„å¯¹è±¡ ä½†æ˜¯ K å¯¹åº”çš„æ³›å‹çº¦æŸæ˜¯`keyof any`Â ä¹Ÿå°±æ„å‘³ç€åªèƒ½ä¼ å…¥Â `string|number|symbol`\n\n```\n //Â typeÂ Record<KÂ extendsÂ keyofÂ any,Â T>Â =Â {\n//Â [PÂ inÂ K]:Â T;\n//Â };\ntypeÂ PointÂ =Â \"x\"Â |Â \"y\";\ntypeÂ PointListÂ =Â Record<Point,Â {Â value:Â numberÂ }>;\nconstÂ cars:Â PointListÂ =Â {\nÂ Â x:Â {Â value:Â 10Â },\nÂ Â y:Â {Â value:Â 20Â },\n};\n```\n\n11. Omit<K,T> åŸºäºå·²ç»å£°æ˜çš„ç±»å‹è¿›è¡Œå±æ€§å‰”é™¤è·å¾—æ–°ç±»å‹\n\n```\n //Â typeÂ Omit=Pick<T,Exclude<keyofÂ T,K>>\ntypeÂ UserÂ =Â {\nid:Â string;\nname:Â string;\nemail:Â string;\n};\ntypeÂ UserWithoutEmailÂ =Â Omit<User,Â \"email\">; //Â UserWithoutEmailÂ ={id:Â string;name:Â string;}\n};\n```\n\n### **8** **TypeScript** **è£…é¥°å™¨**\n\nè£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€å±æ€§æˆ–å‚æ•°ä¸Šï¼Œå¯ä»¥ä¿®æ”¹ç±»çš„è¡Œä¸º\n\nå¸¸è§çš„è£…é¥°å™¨æœ‰ç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨å’Œå‚æ•°è£…é¥°å™¨\n\nè£…é¥°å™¨çš„å†™æ³•åˆ†ä¸ºæ™®é€šè£…é¥°å™¨å’Œè£…é¥°å™¨å·¥å‚\n\nä½¿ç”¨@è£…é¥°å™¨çš„å†™æ³•éœ€è¦æŠŠ tsconfig.json çš„Â `experimentalDecorators`Â å­—æ®µè®¾ç½®ä¸º true\n\n##### **8.1 ç±»è£…é¥°å™¨**\n\nç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰å£°æ˜ï¼Œç”¨æ¥ç›‘è§†ã€ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰\n\n```\nnamespaceÂ aÂ {\nÂ Â //å½“è£…é¥°å™¨ä½œä¸ºä¿®é¥°ç±»çš„æ—¶å€™ï¼Œä¼šæŠŠæ„é€ å™¨ä¼ é€’è¿›å»\nÂ Â functionÂ addNameEat(constructor:Â Function)Â {\nÂ Â Â Â constructor.prototype.nameÂ =Â \"hello\";\nÂ Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â console.log(\"eat\");\nÂ Â Â Â };\nÂ Â }\nÂ Â @addNameEat\nÂ Â classÂ PersonÂ {\nÂ Â Â Â name!:Â string;\nÂ Â Â Â eat!:Â Function;\nÂ Â Â Â constructor()Â {}\nÂ Â }\nÂ Â letÂ p:Â PersonÂ =Â newÂ Person();\nÂ Â console.log(p.name);\nÂ Â p.eat();\n}\n\nnamespaceÂ bÂ {\nÂ Â //è¿˜å¯ä»¥ä½¿ç”¨è£…é¥°å™¨å·¥å‚Â è¿™æ ·å¯ä»¥ä¼ é€’é¢å¤–å‚æ•°\nÂ Â functionÂ addNameEatFactory(name:Â string)Â {\nÂ Â Â Â returnÂ functionÂ (constructor:Â Function)Â {\nÂ Â Â Â Â Â constructor.prototype.nameÂ =Â name;\nÂ Â Â Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â Â Â console.log(\"eat\");\nÂ Â Â Â Â Â };\nÂ Â Â Â };\nÂ Â }\nÂ Â @addNameEatFactory(\"hello\")\nÂ Â classÂ PersonÂ {\nÂ Â Â Â name!:Â string;\nÂ Â Â Â eat!:Â Function;\nÂ Â Â Â constructor()Â {}\nÂ Â }\nÂ Â letÂ p:Â PersonÂ =Â newÂ Person();\nÂ Â console.log(p.name);\nÂ Â p.eat();\n}\n\nnamespaceÂ cÂ {\nÂ Â //è¿˜å¯ä»¥æ›¿æ¢ç±»,ä¸è¿‡æ›¿æ¢çš„ç±»è¦ä¸åŸç±»ç»“æ„ç›¸åŒ\nÂ Â functionÂ enhancer(constructor:Â Function)Â {\nÂ Â Â Â returnÂ classÂ {\nÂ Â Â Â Â Â name:Â stringÂ =Â \"jiagou\";\nÂ Â Â Â Â Â eat()Â {\nÂ Â Â Â Â Â Â Â console.log(\"åƒé¥­é¥­\");\nÂ Â Â Â Â Â }\nÂ Â Â Â };\nÂ Â }\nÂ Â @enhancer\nÂ Â classÂ PersonÂ {\nÂ Â Â Â name!:Â string;\nÂ Â Â Â eat!:Â Function;\nÂ Â Â Â constructor()Â {}\nÂ Â }\nÂ Â letÂ p:Â PersonÂ =Â newÂ Person();\nÂ Â console.log(p.name);\nÂ Â p.eat();\n}\n```\n\n##### **8.2 å±æ€§è£…é¥°å™¨**\n\nå±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ 2 ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§çš„åç§°\n\n```\n //ä¿®é¥°å®ä¾‹å±æ€§\nfunctionÂ upperCase(target:Â any,Â propertyKey:Â string)Â {\nÂ Â letÂ valueÂ =Â target[propertyKey];\nÂ Â constÂ getterÂ =Â functionÂ ()Â {\nÂ Â Â Â returnÂ value;\nÂ Â };\nÂ Â //Â ç”¨æ¥æ›¿æ¢çš„setter\nÂ Â constÂ setterÂ =Â functionÂ (newVal:Â string)Â {\nÂ Â Â Â valueÂ =Â newVal.toUpperCase();\nÂ Â };\nÂ Â //Â æ›¿æ¢å±æ€§ï¼Œå…ˆåˆ é™¤åŸå…ˆçš„å±æ€§ï¼Œå†é‡æ–°å®šä¹‰å±æ€§\nÂ Â ifÂ (deleteÂ target[propertyKey])Â {\nÂ Â Â Â Object.defineProperty(target,Â propertyKey,Â {\nÂ Â Â Â Â Â get:Â getter,\nÂ Â Â Â Â Â set:Â setter,\nÂ Â Â Â Â Â enumerable:Â true,\nÂ Â Â Â Â Â configurable:Â true,\nÂ Â Â Â });\nÂ Â }\n}\n\nclassÂ PersonÂ {\nÂ Â @upperCase\nÂ Â name!:Â string;\n}\nletÂ p:Â PersonÂ =Â newÂ Person();\np.nameÂ =Â \"world\";\nconsole.log(p.name);\n```\n\n##### **8.3 æ–¹æ³•è£…é¥°å™¨**\n\næ–¹æ³•è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„æ–¹æ³•ã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štarget: Object - å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ propertyKey: string | symbol - æ–¹æ³•å descriptor: TypePropertyDescript - å±æ€§æè¿°ç¬¦\n\n```\n //ä¿®é¥°å®ä¾‹æ–¹æ³•\nfunctionÂ noEnumerable(\nÂ Â target:Â any,\nÂ Â property:Â string,\nÂ Â descriptor:Â PropertyDescriptor\n)Â {\nÂ Â console.log(\"target.getName\",Â target.getName);\nÂ Â console.log(\"target.getAge\",Â target.getAge);\nÂ Â descriptor.enumerableÂ =Â false;\n}\n//é‡å†™æ–¹æ³•\nfunctionÂ toNumber(\nÂ Â target:Â any,\nÂ Â methodName:Â string,\nÂ Â descriptor:Â PropertyDescriptor\n)Â {\nÂ Â letÂ oldMethodÂ =Â descriptor.value;\nÂ Â descriptor.valueÂ =Â functionÂ (...args:Â any[])Â {\nÂ Â Â Â argsÂ =Â args.map((item)Â =>Â parseFloat(item));\nÂ Â Â Â returnÂ oldMethod.apply(this,Â args);\nÂ Â };\n}\nclassÂ PersonÂ {\nÂ Â name:Â stringÂ =Â \"hello\";\nÂ Â publicÂ staticÂ age:Â numberÂ =Â 10;\nÂ Â constructor()Â {}\nÂ Â @noEnumerable\nÂ Â getName()Â {\nÂ Â Â Â console.log(this.name);\nÂ Â }\nÂ Â @toNumber\nÂ Â sum(...args:Â any[])Â {\nÂ Â Â Â returnÂ args.reduce((accu:Â number,Â item:Â number)Â =>Â accuÂ +Â item,Â 0);\nÂ Â }\n}\nletÂ p:Â PersonÂ =Â newÂ Person();\nforÂ (letÂ attrÂ inÂ p)Â {\nÂ Â console.log(\"attr=\",Â attr);\n}\np.getName();\nconsole.log(p.sum(\"1\",Â \"2\",Â \"3\"));\n```\n\n##### **8.4 å‚æ•°è£…é¥°å™¨**\n\nå‚æ•°è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”¨æ¥è£…é¥°å‡½æ•°å‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š\n\ntarget: Object - è¢«è£…é¥°çš„ç±» propertyKey: string | symbol - æ–¹æ³•å parameterIndex: number - æ–¹æ³•ä¸­å‚æ•°çš„ç´¢å¼•å€¼\n\n```\nfunctionÂ Log(target:Â Function,Â key:Â string,Â parameterIndex:Â number)Â {\nÂ Â letÂ functionLoggedÂ =Â keyÂ ||Â target.prototype.constructor.name;\nÂ Â console.log(`TheÂ parameterÂ inÂ positionÂ ${parameterIndex}Â atÂ ${functionLogged}Â has\nÂ beenÂ decorated`);\n}\n\nclassÂ GreeterÂ {\nÂ Â greeting:Â string;\nÂ Â constructor(@LogÂ phrase:Â string)Â {\nÂ Â Â Â this.greetingÂ =Â phrase;\nÂ Â }\n}\n```\n\nä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š`\"The parameter in position 0 at Greeter has been decorated\"`\n\n##### **8.5 è£…é¥°å™¨æ‰§è¡Œé¡ºåº**\n\næœ‰å¤šä¸ªå‚æ•°è£…é¥°å™¨æ—¶ï¼šä»æœ€åä¸€ä¸ªå‚æ•°ä¾æ¬¡å‘å‰æ‰§è¡Œ\n\næ–¹æ³•å’Œæ–¹æ³•å‚æ•°ä¸­å‚æ•°è£…é¥°å™¨å…ˆæ‰§è¡Œã€‚æ–¹æ³•å’Œå±æ€§è£…é¥°å™¨ï¼Œè°åœ¨å‰é¢è°å…ˆæ‰§è¡Œã€‚å› ä¸ºå‚æ•°å±äºæ–¹æ³•ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å‚æ•°ä¼šä¸€ç›´ç´§ç´§æŒ¨ç€æ–¹æ³•æ‰§è¡Œ\n\nç±»è£…é¥°å™¨æ€»æ˜¯æœ€åæ‰§è¡Œ\n\n```\nfunctionÂ Class1Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any)Â {\nÂ Â Â Â console.log(\"ç±»1è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ Class2Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any)Â {\nÂ Â Â Â console.log(\"ç±»2è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ MethodDecorator()Â {\nÂ Â returnÂ functionÂ (\nÂ Â Â Â target:Â any,\nÂ Â Â Â methodName:Â string,\nÂ Â Â Â descriptor:Â PropertyDescriptor\nÂ Â )Â {\nÂ Â Â Â console.log(\"æ–¹æ³•è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ Param1Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â {\nÂ Â Â Â console.log(\"å‚æ•°1è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ Param2Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â {\nÂ Â Â Â console.log(\"å‚æ•°2è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ PropertyDecorator(name:Â string)Â {\nÂ Â returnÂ functionÂ (target:Â any,Â propertyName:Â string)Â {\nÂ Â Â Â console.log(nameÂ +Â \"å±æ€§è£…é¥°å™¨\");\nÂ Â };\n}\n\n@Class1Decorator()\n@Class2Decorator()\nclassÂ PersonÂ {\nÂ Â @PropertyDecorator(\"name\")\nÂ Â name:Â stringÂ =Â \"hello\";\nÂ Â @PropertyDecorator(\"age\")\nÂ Â age:Â numberÂ =Â 10;\nÂ Â @MethodDecorator()\nÂ Â greet(@Param1Decorator()Â p1:Â string,Â @Param2Decorator()Â p2:Â string)Â {}\n}\n\n/**\nnameå±æ€§è£…é¥°å™¨\nageå±æ€§è£…é¥°å™¨\nå‚æ•°2è£…é¥°å™¨\nå‚æ•°1è£…é¥°å™¨\næ–¹æ³•è£…é¥°å™¨\nç±»2è£…é¥°å™¨\nç±»1è£…é¥°å™¨\n*/ \n```\n\n### **9 ç¼–è¯‘**\n\n##### **9.1 tsconfig.json çš„ä½œç”¨**\n\n-   ç”¨äºæ ‡è¯† TypeScript é¡¹ç›®çš„æ ¹è·¯å¾„ï¼›\n\n<!---->\n\n-   ç”¨äºé…ç½® TypeScript ç¼–è¯‘å™¨ï¼›\n\n<!---->\n\n-   ç”¨äºæŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶ã€‚\n\n##### **9.2 tsconfig.json é‡è¦å­—æ®µ**\n\n-   files - è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶çš„åç§°ï¼›\n\n<!---->\n\n-   include - è®¾ç½®éœ€è¦è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›\n\n<!---->\n\n-   exclude - è®¾ç½®æ— éœ€è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›\n\n<!---->\n\n-   compilerOptions - è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹ã€‚\n\n##### **9.3 compilerOptions é€‰é¡¹**\n\n```\n{\nÂ Â \"compilerOptions\":Â {\n\nÂ Â Â Â /*Â åŸºæœ¬é€‰é¡¹Â */\nÂ Â Â Â \"target\":Â \"es5\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ ECMAScriptÂ ç›®æ ‡ç‰ˆæœ¬:Â 'ES3'Â (default),Â 'ES5',Â 'ES6'/'ES2015',Â 'ES2016',Â 'ES2017',Â orÂ 'ESNEXT'\nÂ Â Â Â \"module\":Â \"commonjs\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šä½¿ç”¨æ¨¡å—:Â 'commonjs',Â 'amd',Â 'system',Â 'umd'Â orÂ 'es2015'\nÂ Â Â Â \"lib\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶\nÂ Â Â Â \"allowJs\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å…è®¸ç¼–è¯‘Â javascriptÂ æ–‡ä»¶\nÂ Â Â Â \"checkJs\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŠ¥å‘ŠÂ javascriptÂ æ–‡ä»¶ä¸­çš„é”™è¯¯\nÂ Â Â Â \"jsx\":Â \"preserve\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ jsxÂ ä»£ç çš„ç”Ÿæˆ:Â 'preserve',Â 'react-native',Â orÂ 'react'\nÂ Â Â Â \"declaration\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â '.d.ts'Â æ–‡ä»¶\nÂ Â Â Â \"sourceMap\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â '.map'Â æ–‡ä»¶\nÂ Â Â Â \"outFile\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶\nÂ Â Â Â \"outDir\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¾“å‡ºç›®å½•\nÂ Â Â Â \"rootDir\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„Â --outDir.\nÂ Â Â Â \"removeComments\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š\nÂ Â Â Â \"noEmit\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶\nÂ Â Â Â \"importHelpers\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»Â tslibÂ å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°\nÂ Â Â Â \"isolatedModules\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å—Â ï¼ˆä¸Â 'ts.transpileModule'Â ç±»ä¼¼ï¼‰.\n\nÂ Â Â Â /*Â ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹Â */\nÂ Â Â Â \"strict\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹\nÂ Â Â Â \"noImplicitAny\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„Â anyç±»å‹æ—¶æŠ¥é”™\nÂ Â Â Â \"strictNullChecks\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨ä¸¥æ ¼çš„Â nullÂ æ£€æŸ¥\nÂ Â Â Â \"noImplicitThis\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å½“Â thisÂ è¡¨è¾¾å¼å€¼ä¸ºÂ anyÂ ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯\nÂ Â Â Â \"alwaysStrict\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥Â 'useÂ strict'\n\nÂ Â Â Â /*Â é¢å¤–çš„æ£€æŸ¥Â */\nÂ Â Â Â \"noUnusedLocals\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\nÂ Â Â Â \"noUnusedParameters\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\nÂ Â Â Â \"noImplicitReturns\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\nÂ Â Â Â \"noFallthroughCasesInSwitch\":Â true,Â Â Â Â //Â æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰\n\nÂ Â Â Â /*Â æ¨¡å—è§£æé€‰é¡¹Â */\nÂ Â Â Â \"moduleResolution\":Â \"node\",Â Â Â Â Â Â Â Â Â Â Â Â //Â é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼šÂ 'node'Â (Node.js) or 'classic'Â (TypeScript pre-1.6)\nÂ Â Â Â \"baseUrl\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•\nÂ Â Â Â \"paths\":Â {},Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ¨¡å—ååˆ°åŸºäºÂ baseUrlÂ çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨\nÂ Â Â Â \"rootDirs\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹\nÂ Â Â Â \"typeRoots\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨\nÂ Â Â Â \"types\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨\nÂ Â Â Â \"allowSyntheticDefaultImports\":Â true,Â Â //Â å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚\n\nÂ Â Â Â /*Â SourceÂ MapÂ OptionsÂ */\nÂ Â Â Â \"sourceRoot\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°Â TypeScriptÂ æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®\nÂ Â Â Â \"mapRoot\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®\nÂ Â Â Â \"inlineSourceMap\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆå•ä¸ªÂ soucemapsÂ æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°†Â sourcemapsÂ ç”Ÿæˆä¸åŒçš„æ–‡ä»¶\nÂ Â Â Â \"inlineSources\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†ä»£ç ä¸Â sourcemapsÂ ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº†Â --inlineSourceMapÂ æˆ–Â --sourceMapÂ å±æ€§\n\nÂ Â Â Â /*Â å…¶ä»–é€‰é¡¹Â */\nÂ Â Â Â \"experimentalDecorators\":Â true,Â Â Â Â Â Â Â Â //Â å¯ç”¨è£…é¥°å™¨\nÂ Â Â Â \"emitDecoratorMetadata\":Â trueÂ Â Â Â Â Â Â Â Â Â //Â ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ\nÂ Â }\n}\n```\n\n### **10 æ¨¡å—å’Œå£°æ˜æ–‡ä»¶**\n\n##### **10.1 å…¨å±€æ¨¡å—**\n\nåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ å¼€å§‹åœ¨ä¸€ä¸ªæ–°çš„ TypeScript æ–‡ä»¶ä¸­å†™ä¸‹ä»£ç æ—¶ï¼Œå®ƒå¤„äºå…¨å±€å‘½åç©ºé—´ä¸­\n\nä½¿ç”¨å…¨å±€å˜é‡ç©ºé—´æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä¼šä¸æ–‡ä»¶å†…çš„ä»£ç å‘½åå†²çªã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ä¸‹æ–‡ä¸­å°†è¦æåˆ°çš„æ–‡ä»¶æ¨¡å—\n\nfoo.ts\n\n```\nconstÂ fooÂ =Â 123;\n```\n\nbar.ts\n\n```\nconstÂ barÂ =Â foo;Â //Â allowed\n```\n\n##### **10.2 æ–‡ä»¶æ¨¡å—**\n\n-   æ–‡ä»¶æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨æ¨¡å—ã€‚å¦‚æœåœ¨ä½ çš„ TypeScript æ–‡ä»¶çš„æ ¹çº§åˆ«ä½ç½®å«æœ‰ import æˆ–è€… exportï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„ä½œç”¨åŸŸ\n\n<!---->\n\n-   æ¨¡å—æ˜¯ TS ä¸­å¤–éƒ¨æ¨¡å—çš„ç®€ç§°ï¼Œä¾§é‡äºä»£ç å’Œå¤ç”¨\n\n<!---->\n\n-   æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œ\n\n<!---->\n\n-   ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ã€å‡½æ•°ã€ç±»ç­‰åœ¨å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æŠŠå®ƒå¯¼å‡º\n\n<!---->\n\n-   å¦‚æœæƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ¨¡å—é‡Œå¯¼å‡ºçš„å˜é‡ï¼Œåˆ™éœ€è¦å¯¼å…¥\n\nfoo.ts\n\n```\nconstÂ fooÂ =Â 123;\nexportÂ {};\n```\n\nbar.ts\n\n```\nconstÂ barÂ =Â foo;Â //Â error\n```\n\n##### **10.3 å£°æ˜æ–‡ä»¶**\n\n-   æˆ‘ä»¬å¯ä»¥æŠŠç±»å‹å£°æ˜æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­\n\n<!---->\n\n-   æ–‡ä»¶å‘½åè§„èŒƒä¸º*.d.ts\n\n<!---->\n\n-   æŸ¥çœ‹ç±»å‹å£°æ˜æ–‡ä»¶æœ‰åŠ©äºäº†è§£åº“çš„ä½¿ç”¨æ–¹å¼\n\ntypings\\jquery.d.ts\n\n```\ndeclareÂ constÂ $:Â (selector:Â string)Â =>Â {\nÂ Â click():Â void;\nÂ Â width(length:Â number):Â void;\n};\n```\n\n##### **10.4 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶**\n\n-   å¯ä»¥å®‰è£…ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å£°æ˜æ–‡ä»¶\n\n<!---->\n\n-   @types æ˜¯ä¸€ä¸ªçº¦å®šçš„å‰ç¼€ï¼Œæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹å£°æ˜çš„ç±»å‹åº“éƒ½ä¼šå¸¦æœ‰è¿™æ ·çš„å‰ç¼€\n\n<!---->\n\n-   JavaScript ä¸­æœ‰å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥åœ¨ TypeScript ä¸­è¢«å½“åšå£°æ˜å¥½äº†çš„ç±»å‹\n\n<!---->\n\n-   å†…ç½®å¯¹è±¡æ˜¯æŒ‡æ ¹æ®æ ‡å‡†åœ¨å…¨å±€ä½œç”¨åŸŸï¼ˆGlobalï¼‰ä¸Šå­˜åœ¨çš„å¯¹è±¡ã€‚è¿™é‡Œçš„æ ‡å‡†æ˜¯æŒ‡ ECMAScript å’Œå…¶ä»–ç¯å¢ƒï¼ˆæ¯”å¦‚ DOMï¼‰çš„æ ‡å‡†\n\n<!---->\n\n-   è¿™äº›å†…ç½®å¯¹è±¡çš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œå°±åŒ…å«åœ¨ TypeScript æ ¸å¿ƒåº“çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­,å…·ä½“å¯ä»¥æŸ¥çœ‹ts æ ¸å¿ƒå£°æ˜æ–‡ä»¶\n\n##### **10.5 æŸ¥æ‰¾å£°æ˜æ–‡ä»¶**\n\n-   å¦‚æœæ˜¯æ‰‹åŠ¨å†™çš„å£°æ˜æ–‡ä»¶ï¼Œé‚£ä¹ˆéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œæ‰èƒ½è¢«æ­£ç¡®çš„è¯†åˆ«\n\n<!---->\n\n-   ç»™ package.json ä¸­çš„ types æˆ– typings å­—æ®µæŒ‡å®šä¸€ä¸ªç±»å‹å£°æ˜æ–‡ä»¶åœ°å€\n\n<!---->\n\n-   åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç¼–å†™ä¸€ä¸ª index.d.ts æ–‡ä»¶\n\n<!---->\n\n-   é’ˆå¯¹å…¥å£æ–‡ä»¶ï¼ˆpackage.json ä¸­çš„ main å­—æ®µæŒ‡å®šçš„å…¥å£æ–‡ä»¶ï¼‰ï¼Œç¼–å†™ä¸€ä¸ªåŒåä¸åŒåç¼€çš„ .d.ts æ–‡ä»¶\n\n```\n{\nÂ Â Â Â \"name\":Â \"myLib\",\nÂ Â Â Â \"version\":Â \"1.0.0\",\nÂ Â Â Â \"main\":Â \"lib/index.js\",\nÂ Â Â Â \"types\":Â \"myLib.d.ts\",\n}\n```\n\næŸ¥æ‰¾è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n1.å…ˆæ‰¾ myLib.d.ts\n\n2.æ²¡æœ‰å°±å†æ‰¾ index.d.ts\n\n3.è¿˜æ²¡æœ‰å†æ‰¾ lib/index.d.js\n\n4.è¿˜æ‰¾ä¸åˆ°å°±è®¤ä¸ºæ²¡æœ‰ç±»å‹å£°æ˜äº†","source":"_posts/fe/typescript.md","raw":"---\ntitle: typescriptæ•´ç†\ncategories: å‰ç«¯\ntags: [Web]\ncomments: true\ncopyright: false\ntoc: true\n---\n\n### **1** **ts** **å®‰è£…å’Œç¼–è¯‘**\n\n-   ç¬¬ä¸€æ­¥ æ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ç”¨æ¥å­¦ä¹  ts\n\n<!---->\n\n-   ç¬¬äºŒæ­¥ å…¨å±€å®‰è£… ts å’Œ ts-node\n\n```\ncnpmÂ iÂ typescriptÂ -gÂ //å…¨å±€å®‰è£…ts\ncnpmÂ iÂ -gÂ ts-nodeÂ //å…¨å±€å®‰è£…ts-node\n```\n\n-   ç¬¬ä¸‰æ­¥ ç”Ÿæˆ tsconfig.js é…ç½®æ–‡ä»¶\n\n```\ntscÂ --init\n```\n\næˆ‘ä»¬å°±å…ˆæŒ‰ç…§è‡ªåŠ¨ç”Ÿæˆçš„ tsconfig é…ç½®é¡¹å»ä½¿ç”¨ é‡Œé¢çš„é…ç½®å’±ä»¬å¯ä»¥å…ˆä¸å»ç®¡ä»– åç»­ç†Ÿç»ƒäº†å†å»é…ç½®\n\n-   ç¬¬å››æ­¥ åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ª`index.ts`ç›´æ¥å†™å…¥\n\n```\nconstÂ a:Â stringÂ =Â \"hello\";\nconsole.log(a);\n```\n\n-   ç¬¬äº”æ­¥ ç¼–è¯‘ ts ä¸º js åœ¨æ§åˆ¶å°ï¼ˆç»ˆç«¯ï¼‰è¾“å…¥å‘½ä»¤\n\n```\ntscÂ index.ts\n```\n\nç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº† é¡¹ç›®ä¸‹å‡ºç°äº†ä¸€ä¸ªåŒåçš„ index.js æ–‡ä»¶ è‡³æ­¤æˆ‘ä»¬å·²ç»å¯ä»¥æŠŠ ts æ–‡ä»¶ç¼–è¯‘æˆ js æ–‡ä»¶äº†\n\nä¸è¿‡åˆ°è¿™é‡Œèªæ˜çš„å°ä¼™ä¼´å°±ä¼šå‘ç°äº† æˆ‘ä»¬å…¨å±€å®‰è£…çš„Â ã€Œts-nodeã€Â æœ‰ä»€ä¹ˆä½œç”¨å‘¢ å…¶å®è¿™ä¸ªåŒ…æ˜¯å¸®åŠ©æˆ‘ä»¬åœ¨ä¸éœ€è¦ç¼–è¯‘æˆ js çš„å‰æä¸‹å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ ts ä»£ç  æ¯”å¦‚ æˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å…¥\n\n```\nts-nodeÂ index.ts\n```\n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‰“å°çš„`hello`å·²ç»è¾“å‡ºäº†\n\né‚£å¯èƒ½ è¿˜æœ‰çš„å°ä¼™ä¼´ä¼šå‘ç° æˆ‘ä»¬æ¯æ¬¡æ”¹åŠ¨éƒ½è¦æ‰‹åŠ¨å»æ‰§è¡Œç¼–è¯‘ è¿™æ ·å¾ˆéº»çƒ¦ å…¶å®æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ªå‚æ•°æ¥å®ç°æ¯æ¬¡æ–‡ä»¶å˜åŠ¨ ts å¸®æˆ‘ä»¬ã€Œè‡ªåŠ¨ç¼–è¯‘æˆ jsã€Â çš„æ•ˆæœ\n\n```\ntscÂ --watchÂ index.ts\n```\n\nå¥½äº† ç¯å¢ƒå®‰è£…å®Œæ¯•äº† æ¥ä¸‹æ¥å‡ºå‘å»å­¦ä¹  ts æ ¸å¿ƒå§\n\n### **2** **TS** **ç±»å‹**\n\n##### **2.1 å¸ƒå°”ç±»å‹(boolean)**\n\n```\nconstÂ flag:Â booleanÂ =Â true;\n```\n\n##### **2.2 Number ç±»å‹**\n\n```\nconstÂ flag:Â numberÂ =Â 1;\n```\n\n##### **2.3 String ç±»å‹**\n\n```\nconstÂ flag:Â stringÂ =Â \"hello\";\n```\n\n##### **2.4** **Enum** **ç±»å‹**\n\nä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„æè¿°ä¸€äº›ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å¹´ä¸­çš„æ˜¥ã€å¤ã€ç§‹ã€å†¬ï¼Œè¿˜æœ‰æ¯å‘¨çš„å‘¨ä¸€åˆ°å‘¨å¤©ï¼Œè¿˜æœ‰å„ç§é¢œè‰²ï¼Œä»¥åŠå¯ä»¥ç”¨å®ƒæ¥æè¿°ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯ç ç­‰\n\n```\n //Â æ™®é€šæšä¸¾Â åˆå§‹å€¼é»˜è®¤ä¸ºÂ 0Â å…¶ä½™çš„æˆå‘˜ä¼šä¼šæŒ‰é¡ºåºè‡ªåŠ¨å¢é•¿Â å¯ä»¥ç†è§£ä¸ºæ•°ç»„ä¸‹æ ‡\nenumÂ ColorÂ {\nÂ Â RED,\nÂ Â PINK,\nÂ Â BLUE,\n}\n\nconstÂ pink:Â ColorÂ =Â Color.PINK;\nconsole.log(pink);Â //Â 1\n\n//Â è®¾ç½®åˆå§‹å€¼\nenumÂ ColorÂ {\nÂ Â REDÂ =Â 10,\nÂ Â PINK,\nÂ Â BLUE,\n}\nconstÂ pink:Â ColorÂ =Â Color.PINK;\nconsole.log(pink);Â //Â 11\n\n//Â å­—ç¬¦ä¸²æšä¸¾Â æ¯ä¸ªéƒ½éœ€è¦å£°æ˜\nenumÂ ColorÂ {\nÂ Â REDÂ =Â \"çº¢è‰²\",\nÂ Â PINKÂ =Â \"ç²‰è‰²\",\nÂ Â BLUEÂ =Â \"è“è‰²\",\n}\n\nconstÂ pink:Â ColorÂ =Â Color.PINK;\nconsole.log(pink);Â //Â ç²‰è‰²\n\n//Â å¸¸é‡æšä¸¾Â å®ƒæ˜¯ä½¿ç”¨Â constÂ å…³é”®å­—ä¿®é¥°çš„æšä¸¾ï¼Œå¸¸é‡æšä¸¾ä¸æ™®é€šæšä¸¾çš„åŒºåˆ«æ˜¯ï¼Œæ•´ä¸ªæšä¸¾ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«åˆ é™¤Â æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ç¼–è¯‘ä¹‹åçš„æ•ˆæœ\n\nconstÂ enumÂ ColorÂ {\nÂ Â RED,\nÂ Â PINK,\nÂ Â BLUE,\n}\n\nconstÂ color:Â Color[]Â =Â [Color.RED,Â Color.PINK,Â Color.BLUE];\n\n//ç¼–è¯‘ä¹‹åçš„jså¦‚ä¸‹ï¼š\nvarÂ colorÂ =Â [0Â /*Â REDÂ */ ,Â 1Â /*Â PINKÂ */ ,Â 2Â /*Â BLUEÂ */ ];\n//Â å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æšä¸¾å¹¶æ²¡æœ‰è¢«ç¼–è¯‘æˆjsä»£ç Â åªæ˜¯æŠŠcolorè¿™ä¸ªæ•°ç»„å˜é‡ç¼–è¯‘å‡ºæ¥äº†\n```\n\n##### **2.5 æ•°ç»„ç±»å‹(array)**\n\n```\nconstÂ flag1:Â number[]Â =Â [1,Â 2,Â 3];\nconstÂ flag2:Â Array<number>Â =Â [1,Â 2,Â 3];\n```\n\n##### **2.6 å…ƒç»„ç±»å‹(tuple)**\n\nåœ¨ TypeScript çš„åŸºç¡€ç±»å‹ä¸­ï¼Œå…ƒç»„ï¼ˆ Tuple ï¼‰è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥ã€Œæ•°é‡ã€å’Œã€Œç±»å‹ã€çš„æ•°ç»„ å…¶å®å¯ä»¥ç†è§£ä¸ºä»–æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„\n\n```\nconstÂ flag:Â [string,Â number]Â =Â [\"hello\",Â 1];\n```\n\n##### **2.7 Symbol**\n\næˆ‘ä»¬åœ¨ä½¿ç”¨ Symbol çš„æ—¶å€™ï¼Œå¿…é¡»æ·»åŠ  es6 çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„Â `libs`Â å­—æ®µåŠ ä¸Š`ES``2015`Symbol çš„å€¼æ˜¯å”¯ä¸€ä¸å˜çš„\n\n```\nconstÂ sym1Â =Â Symbol(\"hello\");\nconstÂ sym2Â =Â Symbol(\"hello\");\nconsole.log(Symbol(\"hello\")Â ===Â Symbol(\"hello\"));\n```\n\n##### **2.8 ä»»æ„ç±»å‹(any)**\n\nä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸ºÂ `any`Â ç±»å‹ è¿™è®©Â `any`Â ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„ é¡¶çº§ç±»å‹ (ä¹Ÿè¢«ç§°ä½œ å…¨å±€è¶…çº§ç±»å‹) TypeScript å…è®¸æˆ‘ä»¬å¯¹Â `any`Â ç±»å‹çš„å€¼æ‰§è¡Œä»»ä½•æ“ä½œ è€Œæ— éœ€äº‹å…ˆæ‰§è¡Œä»»ä½•å½¢å¼çš„æ£€æŸ¥\n\nä¸€èˆ¬ä½¿ç”¨åœºæ™¯ï¼šç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›ç±»å‹æ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨Â `any`ç±»å‹è½¬æ¢é‡åˆ°å›°éš¾æˆ–è€…æ•°æ®ç»“æ„å¤ªå¤æ‚éš¾ä»¥å®šä¹‰ ä¸è¿‡ä¸è¦å¤ªä¾èµ–Â `any`Â å¦åˆ™å°±å¤±å»äº† ts çš„æ„ä¹‰äº†\n\n```\nconstÂ flag:Â anyÂ =Â document.getElementById(\"root\");\n```\n\n##### **2.9 null å’Œ undefined**\n\n`undefined`Â å’ŒÂ `null`Â ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸ºÂ `undefined`Â å’ŒÂ `null`\n\n```\nletÂ u:Â undefinedÂ =Â undefined;\nletÂ n:Â nullÂ =Â null;\n```\n\n##### **2.10 Unknown ç±»å‹**\n\n`unknown`Â å’ŒÂ `any`Â çš„ä¸»è¦åŒºåˆ«æ˜¯Â `unknown`Â ç±»å‹ä¼šæ›´åŠ ä¸¥æ ¼ åœ¨å¯¹Â `unknown`Â ç±»å‹çš„å€¼æ‰§è¡Œå¤§å¤šæ•°æ“ä½œä¹‹å‰ æˆ‘ä»¬å¿…é¡»è¿›è¡ŒæŸç§å½¢å¼çš„æ£€æŸ¥ è€Œåœ¨å¯¹Â `any`Â ç±»å‹çš„å€¼æ‰§è¡Œæ“ä½œä¹‹å‰ æˆ‘ä»¬ä¸å¿…è¿›è¡Œä»»ä½•æ£€æŸ¥ æ‰€æœ‰ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸ºÂ `unknown`Â ä½†`unknown`ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™Â `any`Â ç±»å‹å’ŒÂ `unknown`Â ç±»å‹æœ¬èº« è€ŒÂ `any`Â å•¥éƒ½èƒ½åˆ†é…å’Œè¢«åˆ†é…\n\n```\nletÂ value:Â unknown;\n\nvalueÂ =Â true;Â //Â OK\nvalueÂ =Â 42;Â //Â OK\nvalueÂ =Â \"HelloÂ World\";Â //Â OK\nvalueÂ =Â [];Â //Â OK\nvalueÂ =Â {};Â //Â OK\n\nletÂ value1:Â unknownÂ =Â value;Â //Â OK\nletÂ value2:Â anyÂ =Â value;Â //Â OK\nletÂ value3:Â booleanÂ =Â value;Â //Â Error\nletÂ value4:Â numberÂ =Â value;Â //Â Error\nletÂ value5:Â stringÂ =Â value;Â //Â Error\nletÂ value6:Â objectÂ =Â value;Â //Â Error\n```\n\n##### **2.11 void ç±»å‹**\n\n`void`Â è¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ TS ä¼šè®¤ä¸ºå®ƒçš„è¿”å›å€¼æ˜¯Â `void`Â ç±»å‹ã€‚\n\n```\nfunctionÂ hello(name:Â string):Â voidÂ {}\n```\n\n##### **2.12 never ç±»å‹**\n\n`never`Â ä¸€èˆ¬è¡¨ç¤ºç”¨æˆ·æ— æ³•è¾¾åˆ°çš„ç±»å‹ ä¾‹å¦‚`never`Â ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹\n\n```\nfunctionÂ neverReach():Â neverÂ {\nÂ Â throwÂ newÂ Error(\"anÂ error\");\n}\n```\n\n> **â**\n\n> æ€è€ƒ:never å’Œ void çš„åŒºåˆ« void å¯ä»¥è¢«èµ‹å€¼ä¸º null å’Œ undefined çš„ç±»å‹ã€‚never åˆ™æ˜¯ä¸€ä¸ªä¸åŒ…å«å€¼çš„ç±»å‹ã€‚æ‹¥æœ‰ void è¿”å›å€¼ç±»å‹çš„å‡½æ•°èƒ½æ­£å¸¸è¿è¡Œã€‚æ‹¥æœ‰ never è¿”å›å€¼ç±»å‹çš„å‡½æ•°æ— æ³•æ­£å¸¸è¿”å›ï¼Œæ— æ³•ç»ˆæ­¢ï¼Œæˆ–ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n\n> â\n\n##### **2.13 BigInt å¤§æ•°ç±»å‹**\n\nä½¿ç”¨Â `BigInt`Â å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•° æˆ‘ä»¬åœ¨ä½¿ç”¨Â `BigInt`Â çš„æ—¶å€™ å¿…é¡»æ·»åŠ Â `ESNext`Â çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„Â `libs`Â å­—æ®µåŠ ä¸Š`ESNext`è¦ä½¿ç”¨`1n`éœ€è¦Â `\"target\": \"ESNext\"number`Â å’ŒÂ `BigInt`Â ç±»å‹ä¸ä¸€æ · ä¸å…¼å®¹\n\n```\nconstÂ max1Â =Â Number.MAX_SAFE_INTEGER;Â //Â 2**53-1\nconsole.log(max1Â +Â 1Â ===Â max1Â +Â 2);Â //true\n\nconstÂ max2Â =Â BigInt(Number.MAX_SAFE_INTEGER);\nconsole.log(max2Â +Â 1nÂ ===Â max2Â +Â 2n);Â //false\n\nletÂ foo:Â number;\nletÂ bar:Â bigint;\nfooÂ =Â bar;Â //error\nbarÂ =Â foo;Â //error\n```\n\n##### **2.14 object, Object å’Œ {} ç±»å‹**\n\nã€Œobjectã€Â ç±»å‹ç”¨äºè¡¨ç¤ºéåŸå§‹ç±»å‹\n\n```\nletÂ objectCase:Â object;\nobjectCaseÂ =Â 1;Â //Â error\nobjectCaseÂ =Â \"a\";Â //Â error\nobjectCaseÂ =Â true;Â //Â error\nobjectCaseÂ =Â null;Â //Â error\nobjectCaseÂ =Â undefined;Â //Â error\nobjectCaseÂ =Â {};Â //Â ok\n```\n\nã€Œå¤§ Objectã€Â ä»£è¡¨æ‰€æœ‰æ‹¥æœ‰ toStringã€hasOwnProperty æ–¹æ³•çš„ç±»å‹ æ‰€ä»¥æ‰€æœ‰åŸå§‹ç±»å‹ã€éåŸå§‹ç±»å‹éƒ½å¯ä»¥èµ‹ç»™ Object(ä¸¥æ ¼æ¨¡å¼ä¸‹Â `null`Â å’ŒÂ `undefined`Â ä¸å¯ä»¥)\n\n```\nletÂ ObjectCase:Â Object;\nObjectCaseÂ =Â 1;Â //Â ok\nObjectCaseÂ =Â \"a\";Â //Â ok\nObjectCaseÂ =Â true;Â //Â ok\nObjectCaseÂ =Â null;Â //Â error\nObjectCaseÂ =Â undefined;Â //Â error\nObjectCaseÂ =Â {};Â //Â ok\n```\n\nã€Œ{}ã€Â ç©ºå¯¹è±¡ç±»å‹å’Œå¤§ Object ä¸€æ · ä¹Ÿæ˜¯è¡¨ç¤ºåŸå§‹ç±»å‹å’ŒéåŸå§‹ç±»å‹çš„é›†åˆ\n\n```\nletÂ simpleCase:Â {};\nsimpleCaseÂ =Â 1;Â //Â ok\nsimpleCaseÂ =Â \"a\";Â //Â ok\nsimpleCaseÂ =Â true;Â //Â ok\nsimpleCaseÂ =Â null;Â //Â error\nsimpleCaseÂ =Â undefined;Â //Â error\nsimpleCaseÂ =Â {};Â //Â ok\n```\n\n##### **2.15 ç±»å‹æ¨è®º**\n\næŒ‡ç¼–ç¨‹è¯­è¨€ä¸­èƒ½å¤Ÿè‡ªåŠ¨æ¨å¯¼å‡ºå€¼çš„ç±»å‹çš„èƒ½åŠ› å®ƒæ˜¯ä¸€äº›å¼ºé™æ€ç±»å‹è¯­è¨€ä¸­å‡ºç°çš„ç‰¹æ€§ å®šä¹‰æ—¶æœªèµ‹å€¼å°±ä¼šæ¨è®ºæˆÂ `any`Â ç±»å‹ å¦‚æœå®šä¹‰çš„æ—¶å€™å°±èµ‹å€¼å°±èƒ½åˆ©ç”¨åˆ°ç±»å‹æ¨è®º\n\n```\nletÂ flag;Â //æ¨æ–­ä¸ºany\nletÂ countÂ =Â 123;Â //ä¸ºnumberç±»å‹\nletÂ helloÂ =Â \"hello\";Â //ä¸ºstringç±»å‹\n```\n\n##### **2.16 è”åˆç±»å‹**\n\nè”åˆç±»å‹ï¼ˆUnion Typesï¼‰è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ æœªèµ‹å€¼æ—¶è”åˆç±»å‹ä¸Šåªèƒ½è®¿é—®ä¸¤ä¸ªç±»å‹å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•\n\n```\nletÂ name:Â stringÂ |Â number;\nconsole.log(name.toString());\nnameÂ =Â 1;\nconsole.log(name.toFixed(2));\nnameÂ =Â \"hello\";\nconsole.log(name.length);\n```\n\n##### **2.17 ç±»å‹æ–­è¨€**\n\næœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” TypeScript æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚å…¶å®å°±æ˜¯ä½ éœ€è¦æ‰‹åŠ¨å‘Šè¯‰ ts å°±æŒ‰ç…§ä½ æ–­è¨€çš„é‚£ä¸ªç±»å‹é€šè¿‡ç¼–è¯‘ï¼ˆè¿™ä¸€æ‹›å¾ˆå…³é”® æœ‰æ—¶å€™å¯ä»¥å¸®åŠ©ä½ è§£å†³å¾ˆå¤šç¼–è¯‘æŠ¥é”™ï¼‰\n\nç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ï¼š\n\n```\n //Â å°–æ‹¬å·Â è¯­æ³•\nletÂ someValue:Â anyÂ =Â \"thisÂ isÂ aÂ string\";\nletÂ strLength:Â numberÂ =Â (<string>someValue).length;\n\n//Â asÂ è¯­æ³•\nletÂ someValue:Â anyÂ =Â \"thisÂ isÂ aÂ string\";\nletÂ strLength:Â numberÂ =Â (someValueÂ asÂ string).length;\n```\n\n> **â**\n\n> ä»¥ä¸Šä¸¤ç§æ–¹å¼è™½ç„¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å°–æ‹¬å·æ ¼å¼ä¼šä¸ react ä¸­ JSX äº§ç”Ÿè¯­æ³•å†²çªï¼Œå› æ­¤æˆ‘ä»¬æ›´æ¨èä½¿ç”¨ as è¯­æ³•ã€‚\n\n> â\n\nã€Œéç©ºæ–­è¨€ã€åœ¨ä¸Šä¸‹æ–‡ä¸­å½“ç±»å‹æ£€æŸ¥å™¨æ— æ³•æ–­å®šç±»å‹æ—¶ ä¸€ä¸ªæ–°çš„åç¼€è¡¨è¾¾å¼æ“ä½œç¬¦ ! å¯ä»¥ç”¨äºæ–­è¨€æ“ä½œå¯¹è±¡æ˜¯éÂ `null`Â å’ŒéÂ `undefined`Â ç±»å‹\n\n```\nletÂ flag:Â nullÂ |Â undefinedÂ |Â string;\nflag!.toString();Â //Â ok\nflag.toString();Â //Â error\n```\n\n##### **2.18 å­—é¢é‡ç±»å‹**\n\nåœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œå¯¹åº”çš„å­—ç¬¦ä¸²å­—é¢é‡ã€æ•°å­—å­—é¢é‡ã€å¸ƒå°”å­—é¢é‡åˆ†åˆ«æ‹¥æœ‰ä¸å…¶å€¼ä¸€æ ·çš„å­—é¢é‡ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š\n\n```\nletÂ flag1:Â \"hello\"Â =Â \"hello\";\nletÂ flag2:Â 1Â =Â 1;\nletÂ flag3:Â trueÂ =Â true;\n```\n\n##### **2.19 ç±»å‹åˆ«å**\n\nç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—\n\n```\ntypeÂ flagÂ =Â stringÂ |Â number;\n\nfunctionÂ hello(value:Â flag)Â {}\n```\n\n##### **2.20 äº¤å‰ç±»å‹**\n\näº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚é€šè¿‡ & è¿ç®—ç¬¦å¯ä»¥å°†ç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§\n\n```\ntypeÂ Flag1Â =Â {Â x:Â numberÂ };\ntypeÂ Flag2Â =Â Flag1Â &Â {Â y:Â stringÂ };\n\nletÂ flag3:Â Flag2Â =Â {\nÂ Â x:Â 1,\nÂ Â y:Â \"hello\",\nÂ Â henb,\n};\n```\n\n##### **2.21 ç±»å‹ä¿æŠ¤**\n\nç±»å‹ä¿æŠ¤å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œä»–ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™å°±èƒ½é€šè¿‡ç±»å‹ä¿¡æ¯ç¡®ä¿æŸä¸ªä½œç”¨åŸŸå†…å˜é‡çš„ç±»å‹ å…¶ä¸»è¦æ€æƒ³æ˜¯å°è¯•æ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹ï¼Œä»¥ç¡®å®šå¦‚ä½•å¤„ç†å€¼\n\nã€Œtypeof ç±»å‹ä¿æŠ¤ã€\n\n```\nfunctionÂ double(input:Â stringÂ |Â numberÂ |Â boolean)Â {\nÂ Â ifÂ (typeofÂ inputÂ ===Â \"string\")Â {\nÂ Â Â Â returnÂ inputÂ +Â input;\nÂ Â }Â elseÂ {\nÂ Â Â Â ifÂ (typeofÂ inputÂ ===Â \"number\")Â {\nÂ Â Â Â Â Â returnÂ inputÂ *Â 2;\nÂ Â Â Â }Â elseÂ {\nÂ Â Â Â Â Â returnÂ !input;\nÂ Â Â Â }\nÂ Â }\n}\n```\n\nã€Œin å…³é”®å­—ã€\n\n```\ninterfaceÂ BirdÂ {\nÂ Â fly:Â number;\n}\n\ninterfaceÂ DogÂ {\nÂ Â leg:Â number;\n}\n\nfunctionÂ getNumber(value:Â BirdÂ |Â Dog)Â {\nÂ Â ifÂ (\"fly\"Â inÂ value)Â {\nÂ Â Â Â returnÂ value.fly;\nÂ Â }\nÂ Â returnÂ value.leg;\n}\n```\n\nã€Œinstanceof ç±»å‹ä¿æŠ¤ã€\n\n```\nclassÂ AnimalÂ {\nÂ Â name!:Â string;\n}\nclassÂ BirdÂ extendsÂ AnimalÂ {\nÂ Â fly!:Â number;\n}\nfunctionÂ getName(animal:Â Animal)Â {\nÂ Â ifÂ (animalÂ instanceofÂ Bird)Â {\nÂ Â Â Â console.log(animal.fly);\nÂ Â }Â elseÂ {\nÂ Â Â Â console.log(animal.name);\nÂ Â }\n}\n```\n\nã€Œè‡ªå®šä¹‰ç±»å‹ä¿æŠ¤ã€\n\né€šè¿‡Â `type is xxx`è¿™æ ·çš„ç±»å‹è°“è¯æ¥è¿›è¡Œç±»å‹ä¿æŠ¤\n\nä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­Â `value is object`å°±ä¼šè®¤ä¸ºå¦‚æœå‡½æ•°è¿”å› true é‚£ä¹ˆå®šä¹‰çš„ value å°±æ˜¯ object ç±»å‹\n\n```\nfunctionÂ isObject(value:Â unknown):Â valueÂ isÂ objectÂ {\nÂ Â returnÂ typeofÂ valueÂ ===Â \"object\"Â &&Â valueÂ !==Â null;\n}\n\nfunctionÂ fn(x:Â stringÂ |Â object)Â {\nÂ Â ifÂ (isObject(x))Â {\nÂ Â Â Â //Â ....\nÂ Â }Â elseÂ {\nÂ Â Â Â //Â .....\nÂ Â }\n}\n```\n\n### **3 å‡½æ•°**\n\n##### **3.1 å‡½æ•°çš„å®šä¹‰**\n\nå¯ä»¥æŒ‡å®šå‚æ•°çš„ç±»å‹å’Œè¿”å›å€¼çš„ç±»å‹\n\n```\nfunctionÂ hello(name:Â string):Â voidÂ {\nÂ Â console.log(\"hello\",Â name);\n}\nhello(\"hahaha\");\n```\n\n##### **3.2 å‡½æ•°è¡¨è¾¾å¼**\n\nå®šä¹‰å‡½æ•°ç±»å‹\n\n```\ntypeÂ SumFuncÂ =Â (x:Â number,Â y:Â number)Â =>Â number;\n\nletÂ countNumber:Â SumFuncÂ =Â functionÂ (a,Â b)Â {\nÂ Â returnÂ aÂ +Â b;\n};\n```\n\n##### **3.3 å¯é€‰å‚æ•°**\n\nåœ¨ TS ä¸­å‡½æ•°çš„å½¢å‚å’Œå®å‚å¿…é¡»ä¸€æ ·ï¼Œä¸ä¸€æ ·å°±è¦é…ç½®å¯é€‰å‚æ•°,è€Œä¸”å¿…é¡»æ˜¯ã€Œæœ€åä¸€ä¸ªå‚æ•°ã€\n\n```\nfunctionÂ print(name:Â string,Â age?:Â number):Â voidÂ {\nÂ Â console.log(name,Â age);\n}\nprint(\"hahaha\");\n```\n\n##### **3.4 é»˜è®¤å‚æ•°**\n\n```\nfunctionÂ ajax(url:Â string,Â method:Â stringÂ =Â \"GET\")Â {\nÂ Â console.log(url,Â method);\n}\najax(\"/users\");\n```\n\n##### **3.5 å‰©ä½™å‚æ•°**\n\n```\nfunctionÂ sum(...numbers:Â number[])Â {\nÂ Â returnÂ numbers.reduce((val,Â item)Â =>Â (valÂ +=Â item),Â 0);\n}\nconsole.log(sum(1,Â 2,Â 3));\n```\n\n##### **3.6 å‡½æ•°é‡è½½**\n\nå‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚åœ¨ TypeScript ä¸­ï¼Œè¡¨ç°ä¸ºç»™åŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰\n\n```\nletÂ obj:Â anyÂ =Â {};\nfunctionÂ attr(val:Â string):Â void;\nfunctionÂ attr(val:Â number):Â void;\nfunctionÂ attr(val:Â any):Â voidÂ {\nÂ Â ifÂ (typeofÂ valÂ ===Â \"string\")Â {\nÂ Â Â Â obj.nameÂ =Â val;\nÂ Â }Â elseÂ {\nÂ Â Â Â obj.ageÂ =Â val;\nÂ Â }\n}\nattr(\"hahaha\");\nattr(9);\nattr(true);\nconsole.log(obj);\n```\n\n> **â**\n\n> æ³¨æ„ï¼šå‡½æ•°é‡è½½çœŸæ­£æ‰§è¡Œçš„æ˜¯åŒåå‡½æ•°æœ€åå®šä¹‰çš„å‡½æ•°ä½“ åœ¨æœ€åä¸€ä¸ªå‡½æ•°ä½“å®šä¹‰ä¹‹å‰å…¨éƒ½å±äºå‡½æ•°ç±»å‹å®šä¹‰ ä¸èƒ½å†™å…·ä½“çš„å‡½æ•°å®ç°æ–¹æ³• åªèƒ½å®šä¹‰ç±»å‹\n\n> â\n\n### **4 ç±»**\n\n##### **4.1 ç±»çš„å®šä¹‰**\n\nåœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Â `Class`Â å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»\n\n```\nclassÂ PersonÂ {\nÂ Â name!:Â string;Â //å¦‚æœåˆå§‹å±æ€§æ²¡èµ‹å€¼å°±éœ€è¦åŠ ä¸Š!\nÂ Â constructor(_name:Â string)Â {\nÂ Â Â Â this.nameÂ =Â _name;\nÂ Â }\nÂ Â getName():Â voidÂ {\nÂ Â Â Â console.log(this.name);\nÂ Â }\n}\nletÂ p1Â =Â newÂ Person(\"hello\");\np1.getName();\n```\n\nå½“ç„¶ å¦‚æœæˆ‘ä»¬å›¾çœäº‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå±æ€§å®šä¹‰ç›´æ¥å†™åˆ°æ„é€ å‡½æ•°çš„å‚æ•°é‡Œé¢å»(ä¸è¿‡ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·å†™ å› ä¸ºä¼šè®©ä»£ç å¢åŠ é˜…è¯»éš¾åº¦)\n\n```\nclassÂ PersonÂ {\nÂ Â constructor(publicÂ name:Â string)Â {}\nÂ Â getName():Â voidÂ {\nÂ Â Â Â console.log(this.name);\nÂ Â }\n}\nletÂ p1Â =Â newÂ Person(\"hello\");\np1.getName();\n```\n\n> **â**\n\n> æ³¨æ„ï¼šå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»çš„æ—¶å€™,ä¼šå¾—åˆ°Â ã€Œ2 ä¸ªç±»å‹ã€ä¸€ä¸ªæ˜¯æ„é€ å‡½æ•°ç±»å‹çš„å‡½æ•°ç±»å‹(å½“åšæ™®é€šæ„é€ å‡½æ•°çš„ç±»å‹) å¦ä¸€ä¸ªæ˜¯ç±»çš„å®ä¾‹ç±»å‹ï¼ˆä»£è¡¨å®ä¾‹ï¼‰\n\n> â\n\nå…·ä½“çœ‹ä¾‹å­\n\n```\nclassÂ ComponentÂ {\nÂ Â staticÂ myName:Â stringÂ =Â \"é™æ€åç§°å±æ€§\";\nÂ Â myName:Â stringÂ =Â \"å®ä¾‹åç§°å±æ€§\";\n}\n//tsÂ ä¸€ä¸ªç±»å‹Â ä¸€ä¸ªå«å€¼\n//æ”¾åœ¨=åé¢çš„æ˜¯å€¼\nletÂ comÂ =Â Component;Â //è¿™é‡Œæ˜¯ä»£è¡¨æ„é€ å‡½æ•°\n//å†’å·åé¢çš„æ˜¯ç±»å‹\nletÂ c:Â ComponentÂ =Â newÂ Component();Â //è¿™é‡Œæ˜¯ä»£è¡¨å®ä¾‹ç±»å‹\nletÂ f:Â typeofÂ ComponentÂ =Â com;\n```\n\n##### **4.2 å­˜å–å™¨**\n\nåœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å­˜å–å™¨æ¥æ”¹å˜ä¸€ä¸ªç±»ä¸­å±æ€§çš„è¯»å–å’Œèµ‹å€¼è¡Œä¸º\n\n```\nclassÂ UserÂ {\nÂ Â myname:Â string;\nÂ Â constructor(myname:Â string)Â {\nÂ Â Â Â this.mynameÂ =Â myname;\nÂ Â }\nÂ Â getÂ name()Â {\nÂ Â Â Â returnÂ this.myname;\nÂ Â }\nÂ Â setÂ name(value)Â {\nÂ Â Â Â this.mynameÂ =Â value;\nÂ Â }\n}\n\nletÂ userÂ =Â newÂ User(\"hello\");\nuser.nameÂ =Â \"world\";\nconsole.log(user.name);\n```\n\nå…¶å®æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ç¿»è¯‘æˆ es5 çš„ä»£ç  åŸç†å¾ˆç®€å• å°±æ˜¯ä½¿ç”¨äº† Object.defineProperty åœ¨ç±»çš„åŸå‹ä¸Šé¢æ‹¦æˆªäº†å±æ€§å¯¹åº”çš„ get å’Œ set æ–¹æ³•\n\n```\nvarÂ UserÂ =Â /**Â @classÂ */Â (functionÂ ()Â {\nÂ Â functionÂ User(myname)Â {\nÂ Â Â Â this.mynameÂ =Â myname;\nÂ Â }\nÂ Â Object.defineProperty(User.prototype,Â \"name\",Â {\nÂ Â Â Â get:Â functionÂ ()Â {\nÂ Â Â Â Â Â returnÂ this.myname;\nÂ Â Â Â },\nÂ Â Â Â set:Â functionÂ (value)Â {\nÂ Â Â Â Â Â this.mynameÂ =Â value;\nÂ Â Â Â },\nÂ Â Â Â enumerable:Â false,\nÂ Â Â Â configurable:Â true,\nÂ Â });\nÂ Â returnÂ User;\n})();\nvarÂ userÂ =Â newÂ User(\"hello\");\nuser.nameÂ =Â \"world\";\nconsole.log(user.name);\n```\n\n##### **4.3 readonly åªè¯»å±æ€§**\n\nreadonly ä¿®é¥°çš„å˜é‡åªèƒ½åœ¨ã€Œæ„é€ å‡½æ•°ã€ä¸­åˆå§‹åŒ– TypeScript çš„ç±»å‹ç³»ç»ŸåŒæ ·ä¹Ÿå…è®¸å°† interfaceã€typeã€ class ä¸Šçš„å±æ€§æ ‡è¯†ä¸º readonly readonly å®é™…ä¸Šåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œä»£ç æ£€æŸ¥ã€‚\n\n```\nclassÂ AnimalÂ {\nÂ Â publicÂ readonlyÂ name:Â string;\nÂ Â constructor(name:Â string)Â {\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\nÂ Â changeName(name:Â string)Â {\nÂ Â Â Â this.nameÂ =Â name;Â //è¿™ä¸ªtsæ˜¯æŠ¥é”™çš„\nÂ Â }\n}\n\nletÂ aÂ =Â newÂ Animal(\"hello\");\n```\n\n##### **4.4 ç»§æ‰¿**\n\nå­ç±»ç»§æ‰¿çˆ¶ç±»åå­ç±»çš„å®ä¾‹å°±æ‹¥æœ‰äº†çˆ¶ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥å¢å¼ºä»£ç çš„å¯å¤ç”¨æ€§\n\nå°†å­ç±»å…¬ç”¨çš„æ–¹æ³•æŠ½è±¡å‡ºæ¥æ”¾åœ¨çˆ¶ç±»ä¸­ï¼Œè‡ªå·±çš„ç‰¹æ®Šé€»è¾‘æ”¾åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»çš„é€»è¾‘\n\nsuper å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸Šçš„æ–¹æ³•å’Œå±æ€§\n\nåœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ extends å…³é”®å­—æ¥å®ç°ç»§æ‰¿\n\n```\nclassÂ PersonÂ {\nÂ Â name:Â string;Â //å®šä¹‰å®ä¾‹çš„å±æ€§ï¼Œé»˜è®¤çœç•¥publicä¿®é¥°ç¬¦\nÂ Â age:Â number;\nÂ Â constructor(name:Â string,Â age:Â number)Â {\nÂ Â Â Â //æ„é€ å‡½æ•°\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â Â Â this.ageÂ =Â age;\nÂ Â }\nÂ Â getName():Â stringÂ {\nÂ Â Â Â returnÂ this.name;\nÂ Â }\nÂ Â setName(name:Â string):Â voidÂ {\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\n}\nclassÂ StudentÂ extendsÂ PersonÂ {\nÂ Â no:Â number;\nÂ Â constructor(name:Â string,Â age:Â number,Â no:Â number)Â {\nÂ Â Â Â super(name,Â age);\nÂ Â Â Â this.noÂ =Â no;\nÂ Â }\nÂ Â getNo():Â numberÂ {\nÂ Â Â Â returnÂ this.no;\nÂ Â }\n}\nletÂ s1Â =Â newÂ Student(\"hello\",Â 10,Â 1);\nconsole.log(s1);\n```\n\n##### **4.5 ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦**\n\nã€Œpublicã€Â ç±»é‡Œé¢ å­ç±» å…¶å®ƒä»»ä½•åœ°æ–¹å¤–è¾¹éƒ½å¯ä»¥è®¿é—®ã€Œprotectedã€Â ç±»é‡Œé¢ å­ç±» éƒ½å¯ä»¥è®¿é—®,å…¶å®ƒä»»ä½•åœ°æ–¹ä¸èƒ½è®¿é—®ã€Œprivateã€Â ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œå­ç±»å’Œå…¶å®ƒä»»ä½•åœ°æ–¹éƒ½ä¸å¯ä»¥è®¿é—®\n\n```\nclassÂ ParentÂ {\nÂ Â publicÂ name:Â string;\nÂ Â protectedÂ age:Â number;\nÂ Â privateÂ car:Â number;\nÂ Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â {\nÂ Â Â Â //æ„é€ å‡½æ•°\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â Â Â this.ageÂ =Â age;\nÂ Â Â Â this.carÂ =Â car;\nÂ Â }\nÂ Â getName():Â stringÂ {\nÂ Â Â Â returnÂ this.name;\nÂ Â }\nÂ Â setName(name:Â string):Â voidÂ {\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\n}\nclassÂ ChildÂ extendsÂ ParentÂ {\nÂ Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â {\nÂ Â Â Â super(name,Â age,Â car);\nÂ Â }\nÂ Â desc()Â {\nÂ Â Â Â console.log(`${this.name}Â ${this.age}Â ${this.car}`);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™\nÂ Â }\n}\n\nletÂ childÂ =Â newÂ Child(\"hello\",Â 10,Â 1000);\nconsole.log(child.name);\nconsole.log(child.age);Â //ageè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™\nconsole.log(child.car);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™\n```\n\n##### **4.6 é™æ€å±æ€§ é™æ€æ–¹æ³•**\n\nç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•æ˜¯ç›´æ¥å®šä¹‰åœ¨ç±»æœ¬èº«ä¸Šé¢çš„ æ‰€ä»¥ä¹Ÿåªèƒ½é€šè¿‡ç›´æ¥è°ƒç”¨ç±»çš„æ–¹æ³•å’Œå±æ€§æ¥è®¿é—®\n\n```\nclassÂ ParentÂ {\nÂ Â staticÂ mainNameÂ =Â \"Parent\";\nÂ Â staticÂ getmainName()Â {\nÂ Â Â Â console.log(this);Â //æ³¨æ„é™æ€æ–¹æ³•é‡Œé¢çš„thisæŒ‡å‘çš„æ˜¯ç±»æœ¬èº«Â è€Œä¸æ˜¯ç±»çš„å®ä¾‹å¯¹è±¡Â æ‰€ä»¥é™æ€æ–¹æ³•é‡Œé¢åªèƒ½è®¿é—®ç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•\nÂ Â Â Â returnÂ this.mainName;\nÂ Â }\nÂ Â publicÂ name:Â string;\nÂ Â constructor(name:Â string)Â {\nÂ Â Â Â //æ„é€ å‡½æ•°\nÂ Â Â Â this.nameÂ =Â name;\nÂ Â }\n}\nconsole.log(Parent.mainName);\nconsole.log(Parent.getmainName());\n```\n\n##### **4.7 æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•**\n\næŠ½è±¡ç±»ï¼Œæ— æ³•è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿å¹¶ä¸”æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹ å­ç±»å¯ä»¥å¯¹æŠ½è±¡ç±»è¿›è¡Œä¸åŒçš„å®ç°\n\næŠ½è±¡æ–¹æ³•åªèƒ½å‡ºç°åœ¨æŠ½è±¡ç±»ä¸­å¹¶ä¸”æŠ½è±¡æ–¹æ³•ä¸èƒ½åœ¨æŠ½è±¡ç±»ä¸­è¢«å…·ä½“å®ç°ï¼Œåªèƒ½åœ¨æŠ½è±¡ç±»çš„å­ç±»ä¸­å®ç°ï¼ˆå¿…é¡»è¦å®ç°ï¼‰\n\nä½¿ç”¨åœºæ™¯ï¼šæˆ‘ä»¬ä¸€èˆ¬ç”¨æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æŠ½ç¦»å‡ºäº‹ç‰©çš„å…±æ€§ ä»¥åæ‰€æœ‰ç»§æ‰¿çš„å­ç±»å¿…é¡»æŒ‰ç…§è§„èŒƒå»å®ç°è‡ªå·±çš„å…·ä½“é€»è¾‘ è¿™æ ·å¯ä»¥å¢åŠ ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§\n\nä½¿ç”¨Â `abstract`Â å…³é”®å­—æ¥å®šä¹‰æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\n\n```\nabstractÂ classÂ AnimalÂ {\nÂ Â name!:Â string;\nÂ Â abstractÂ speak():Â void;\n}\nclassÂ CatÂ extendsÂ AnimalÂ {\nÂ Â speak()Â {\nÂ Â Â Â console.log(\"å–µå–µå–µ\");\nÂ Â }\n}\nletÂ animalÂ =Â newÂ Animal();Â //ç›´æ¥æŠ¥é”™Â æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹\nletÂ catÂ =Â newÂ Cat();\ncat.speak();\n```\n\n> **â**\n\n> æ€è€ƒ 1:é‡å†™(override)å’Œé‡è½½(overload)çš„åŒºåˆ«\n\n> â\n\nã€Œé‡å†™ã€æ˜¯æŒ‡å­ç±»é‡å†™ç»§æ‰¿è‡ªçˆ¶ç±»ä¸­çš„æ–¹æ³•ã€Œé‡è½½ã€æ˜¯æŒ‡ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªç±»å‹å®šä¹‰\n\n```\nclassÂ AnimalÂ {\nÂ Â speak(word:Â string):Â stringÂ {\nÂ Â Â Â returnÂ \"åŠ¨ç‰©:\"Â +Â word;\nÂ Â }\n}\nclassÂ CatÂ extendsÂ AnimalÂ {\nÂ Â speak(word:Â string):Â stringÂ {\nÂ Â Â Â returnÂ \"çŒ«:\"Â +Â word;\nÂ Â }\n}\nletÂ catÂ =Â newÂ Cat();\nconsole.log(cat.speak(\"hello\"));\n//Â ä¸Šé¢æ˜¯é‡å†™\n//--------------------------------------------\n//Â ä¸‹é¢æ˜¯é‡è½½\nfunctionÂ double(val:Â number):Â number;\nfunctionÂ double(val:Â string):Â string;\nfunctionÂ double(val:Â any):Â anyÂ {\nÂ Â ifÂ (typeofÂ valÂ ==Â \"number\")Â {\nÂ Â Â Â returnÂ valÂ *Â 2;\nÂ Â }\nÂ Â returnÂ valÂ +Â val;\n}\n\nletÂ rÂ =Â double(1);\nconsole.log(r);\n```\n\n> **â**\n\n> æ€è€ƒ 2:ä»€ä¹ˆæ˜¯ã€Œå¤šæ€ã€\n\n> â\n\nåœ¨çˆ¶ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­æœ‰å¤šä¸ªå®ç°ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒçš„å¯¹è±¡æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œå®ç°è¿è¡Œæ—¶çš„ç»‘å®šã€‚\n\n```\nabstractÂ classÂ AnimalÂ {\nÂ Â //Â å£°æ˜æŠ½è±¡çš„æ–¹æ³•ï¼Œè®©å­ç±»å»å®ç°\nÂ Â abstractÂ sleep():Â void;\n}\nclassÂ DogÂ extendsÂ AnimalÂ {\nÂ Â sleep()Â {\nÂ Â Â Â console.log(\"dogÂ sleep\");\nÂ Â }\n}\nletÂ dogÂ =Â newÂ Dog();\nclassÂ CatÂ extendsÂ AnimalÂ {\nÂ Â sleep()Â {\nÂ Â Â Â console.log(\"catÂ sleep\");\nÂ Â }\n}\nletÂ catÂ =Â newÂ Cat();\nletÂ animals:Â Animal[]Â =Â [dog,Â cat];\nanimals.forEach((i)Â =>Â {\nÂ Â i.sleep();\n});\n```\n\n### **5 æ¥å£**\n\næ¥å£æ—¢å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æè¿°å¯¹è±¡çš„å½¢çŠ¶\n\næˆ‘ä»¬ç”¨Â `interface`Â å…³é”®å­—æ¥å®šä¹‰æ¥å£ åœ¨æ¥å£ä¸­å¯ä»¥ç”¨åˆ†å·æˆ–è€…é€—å·åˆ†å‰²æ¯ä¸€é¡¹ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸åŠ \n\n##### **5.1 å¯¹è±¡çš„å½¢çŠ¶**\n\n```\n //æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`\n//æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`\ninterfaceÂ SpeakableÂ {\nÂ Â speak():Â void;\nÂ Â readonlyÂ lng:Â string;Â //readonlyè¡¨ç¤ºåªè¯»å±æ€§Â åç»­ä¸å¯ä»¥æ›´æ”¹\nÂ Â name?:Â string;Â //ï¼Ÿè¡¨ç¤ºå¯é€‰å±æ€§\n}\n\nletÂ speakman:Â SpeakableÂ =Â {\nÂ Â //Â Â Â speak()Â {},Â //å°‘å±æ€§ä¼šæŠ¥é”™\nÂ Â name:Â \"hello\",\nÂ Â lng:Â \"en\",\nÂ Â age:Â 111,Â //å¤šå±æ€§ä¹Ÿä¼šæŠ¥é”™\n};\n```\n\n##### **5.2 è¡Œä¸ºçš„æŠ½è±¡**\n\næ¥å£å¯ä»¥æŠŠä¸€äº›ç±»ä¸­å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•æŠ½è±¡å‡ºæ¥,å¯ä»¥ç”¨æ¥çº¦æŸå®ç°æ­¤æ¥å£çš„ç±»\n\nä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥è¢«å¤šä¸ªç±»å®ç°\n\næˆ‘ä»¬ç”¨Â `implements`å…³é”®å­—æ¥ä»£è¡¨ å®ç°\n\n```\n //æ¥å£å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡\ninterfaceÂ SpeakableÂ {\nÂ Â speak():Â void;\n}\ninterfaceÂ EatableÂ {\nÂ Â eat():Â void;\n}\n//ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£\nclassÂ PersonÂ implementsÂ Speakable,Â EatableÂ {\nÂ Â speak()Â {\nÂ Â Â Â console.log(\"Personè¯´è¯\");\nÂ Â }\nÂ Â //Â Â Â eat()Â {}Â //éœ€è¦å®ç°çš„æ¥å£åŒ…å«eatæ–¹æ³•Â ä¸å®ç°ä¼šæŠ¥é”™\n}\n```\n\n##### **5.3 å®šä¹‰ä»»æ„å±æ€§**\n\nå¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰æ¥å£çš„æ—¶å€™æ— æ³•é¢„å…ˆçŸ¥é“æœ‰å“ªäº›å±æ€§çš„æ—¶å€™,å¯ä»¥ä½¿ç”¨Â `[propName:string]:any`,propName åå­—æ˜¯ä»»æ„çš„\n\n```\ninterfaceÂ PersonÂ {\nÂ Â id:Â number;\nÂ Â name:Â string;\nÂ Â [propName:Â string]:Â any;\n}\n\nletÂ p1Â =Â {\nÂ Â id:Â 1,\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\n};\n```\n\nè¿™ä¸ªæ¥å£è¡¨ç¤º å¿…é¡»è¦æœ‰ id å’Œ name è¿™ä¸¤ä¸ªå­—æ®µ ç„¶åè¿˜å¯ä»¥æ–°åŠ å…¶ä½™çš„æœªçŸ¥å­—æ®µ\n\n##### **5.4 æ¥å£çš„ç»§æ‰¿**\n\næˆ‘ä»¬é™¤äº†ç±»å¯ä»¥ç»§æ‰¿ æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿ åŒæ ·çš„ä½¿ç”¨Â `extends`å…³é”®å­—\n\n```\ninterfaceÂ SpeakableÂ {\nÂ Â speak():Â void;\n}\ninterfaceÂ SpeakChineseÂ extendsÂ SpeakableÂ {\nÂ Â speakChinese():Â void;\n}\nclassÂ PersonÂ implementsÂ SpeakChineseÂ {\nÂ Â speak()Â {\nÂ Â Â Â console.log(\"Person\");\nÂ Â }\nÂ Â speakChinese()Â {\nÂ Â Â Â console.log(\"speakChinese\");\nÂ Â }\n}\n```\n\n##### **5.5 å‡½æ•°ç±»å‹æ¥å£**\n\nå¯ä»¥ç”¨æ¥å£æ¥å®šä¹‰å‡½æ•°ç±»å‹\n\n```\ninterfaceÂ discountÂ {\nÂ Â (price:Â number):Â number;\n}\nletÂ cost:Â discountÂ =Â functionÂ (price:Â number):Â numberÂ {\nÂ Â returnÂ priceÂ *Â 0.8;\n};\n```\n\n##### **5.6 æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£**\n\nä½¿ç”¨ç‰¹æ®Šçš„ new()å…³é”®å­—æ¥æè¿°ç±»çš„æ„é€ å‡½æ•°ç±»å‹\n\n```\nclassÂ AnimalÂ {\nÂ Â constructor(publicÂ name:Â string)Â {}\n}\n//ä¸åŠ newæ˜¯ä¿®é¥°å‡½æ•°çš„,åŠ newæ˜¯ä¿®é¥°ç±»çš„\ninterfaceÂ WithNameClassÂ {\nÂ Â newÂ (name:Â string):Â Animal;\n}\nfunctionÂ createAnimal(clazz:Â WithNameClass,Â name:Â string)Â {\nÂ Â returnÂ newÂ clazz(name);\n}\nletÂ aÂ =Â createAnimal(Animal,Â \"hello\");\nconsole.log(a.name);\n```\n\nå…¶å®è¿™æ ·çš„ç”¨æ³•ä¸€èˆ¬å‡ºç°åœ¨ å½“æˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ªç±»ä½œä¸ºå‚æ•°çš„æ—¶å€™ æˆ‘ä»¬éœ€è¦å¯¹ä¼ å…¥çš„ç±»çš„æ„é€ å‡½æ•°ç±»å‹è¿›è¡Œçº¦æŸ æ‰€ä»¥éœ€è¦ä½¿ç”¨ new å…³é”®å­—ä»£è¡¨æ˜¯ç±»çš„æ„é€ å‡½æ•°ç±»å‹ ç”¨ä»¥å’Œæ™®é€šå‡½æ•°è¿›è¡ŒåŒºåˆ†\n\n***\n\n> **â**\n\n> æ€è€ƒï¼šæ¥å£å’Œç±»å‹åˆ«åçš„åŒºåˆ« è¿™ä¸ªé¢˜ç›®æ˜¯ç»å…¸çš„Â ã€Œts é¢è¯•é¢˜ã€\n\n> â\n\nå®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹ä½¿ç”¨æ¥å£ç±»å‹å’Œç±»å‹åˆ«åçš„æ•ˆæœç­‰ä»·ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹å®šçš„åœºæ™¯ä¸‹è¿™ä¸¤è€…è¿˜æ˜¯å­˜åœ¨å¾ˆå¤§åŒºåˆ«ã€‚\n\n1.åŸºç¡€æ•°æ®ç±»å‹ ä¸æ¥å£ä¸åŒï¼Œç±»å‹åˆ«åè¿˜å¯ä»¥ç”¨äºå…¶ä»–ç±»å‹ï¼Œå¦‚åŸºæœ¬ç±»å‹ï¼ˆåŸå§‹å€¼ï¼‰ã€è”åˆç±»å‹ã€å…ƒç»„\n\n```\n //Â primitive\ntypeÂ NameÂ =Â string;\n\n//Â union\ntypeÂ PartialPointÂ =Â PartialPointXÂ |Â PartialPointY;\n\n//Â tuple\ntypeÂ DataÂ =Â [number,Â string];\n\n//Â dom\nletÂ divÂ =Â document.createElement(\"div\");\ntypeÂ BÂ =Â typeofÂ div;\n```\n\n2.é‡å¤å®šä¹‰\n\næ¥å£å¯ä»¥å®šä¹‰å¤šæ¬¡ ä¼šè¢«è‡ªåŠ¨åˆå¹¶ä¸ºå•ä¸ªæ¥å£ ç±»å‹åˆ«åä¸å¯ä»¥é‡å¤å®šä¹‰\n\n```\ninterfaceÂ PointÂ {\nÂ Â x:Â number;\n}\ninterfaceÂ PointÂ {\nÂ Â y:Â number;\n}\nconstÂ point:Â PointÂ =Â {Â x:Â 1,Â y:Â 2Â };\n```\n\n3.æ‰©å±• æ¥å£å¯ä»¥æ‰©å±•ç±»å‹åˆ«åï¼ŒåŒç†ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ‰©å±•æ¥å£ã€‚ä½†æ˜¯ä¸¤è€…å®ç°æ‰©å±•çš„æ–¹å¼ä¸åŒ\n\næ¥å£çš„æ‰©å±•å°±æ˜¯ç»§æ‰¿ï¼Œé€šè¿‡ extends æ¥å®ç°ã€‚ç±»å‹åˆ«åçš„æ‰©å±•å°±æ˜¯äº¤å‰ç±»å‹ï¼Œé€šè¿‡ & æ¥å®ç°ã€‚\n\n```\n //Â æ¥å£æ‰©å±•æ¥å£\ninterfaceÂ PointXÂ {\nÂ Â x:Â number;\n}\n\ninterfaceÂ PointÂ extendsÂ PointXÂ {\nÂ Â y:Â number;\n}\n//Â ----\n//Â ç±»å‹åˆ«åæ‰©å±•ç±»å‹åˆ«å\ntypeÂ PointXÂ =Â {\nÂ Â x:Â number;\n};\n\ntypeÂ PointÂ =Â PointXÂ &Â {\nÂ Â y:Â number;\n};\n//Â ----\n//Â æ¥å£æ‰©å±•ç±»å‹åˆ«å\ntypeÂ PointXÂ =Â {\nÂ Â x:Â number;\n};\ninterfaceÂ PointÂ extendsÂ PointXÂ {\nÂ Â y:Â number;\n}\n//Â ----\n//Â ç±»å‹åˆ«åæ‰©å±•æ¥å£\ninterfaceÂ PointXÂ {\nÂ Â x:Â number;\n}\ntypeÂ PointÂ =Â PointXÂ &Â {\nÂ Â y:Â number;\n};\n```\n\n4.å®ç° è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šæƒ…å†µ ç±»æ— æ³•å®ç°å®šä¹‰äº†è”åˆç±»å‹çš„ç±»å‹åˆ«å\n\n```\ntypeÂ PartialPointÂ =Â {Â x:Â numberÂ }Â |Â {Â y:Â numberÂ };\n\n//Â AÂ classÂ canÂ onlyÂ implementÂ anÂ objectÂ typeÂ or\n//Â intersectionÂ ofÂ objectÂ typesÂ withÂ staticallyÂ knownÂ members.\nclassÂ SomePartialPointÂ implementsÂ PartialPointÂ {\nÂ Â //Â Error\nÂ Â xÂ =Â 1;\nÂ Â yÂ =Â 2;\n}\n```\n\n### **6 æ³›å‹**\n\næ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§\n\nä¸ºäº†æ›´å¥½çš„äº†è§£æ³›å‹çš„ä½œç”¨ æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­\n\n```\nfunctionÂ createArray(length:Â number,Â value:Â any):Â any[]Â {\nÂ Â letÂ resultÂ =Â [];\nÂ Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â length;Â i++)Â {\nÂ Â Â Â result[i]Â =Â value;\nÂ Â }\nÂ Â returnÂ result;\n}\n\ncreateArray(3,Â \"x\");Â //Â ['x',Â 'x',Â 'x'] \n```\n\nä¸Šè¿°è¿™æ®µä»£ç ç”¨æ¥ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º length å€¼ä¸º value çš„æ•°ç»„ ä½†æ˜¯æˆ‘ä»¬å…¶å®å¯ä»¥å‘ç°ä¸€ä¸ªé—®é¢˜ ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹çš„ value è¿”å›å€¼çš„æ•°ç»„æ°¸è¿œæ˜¯ any ç±»å‹ å¦‚æœæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ æˆ‘ä»¬é¢„å…ˆä¸çŸ¥é“ä¼šä¼ å…¥ä»€ä¹ˆç±»å‹ ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹ æˆ‘ä»¬çš„è¿”å›çš„æ•°ç»„çš„æŒ‡é‡Œé¢çš„ç±»å‹åº”è¯¥å’Œå‚æ•°ä¿æŒä¸€è‡´ é‚£ä¹ˆè¿™æ—¶å€™ æ³›å‹å°±ç™»åœºäº†\n\nä½¿ç”¨ã€Œæ³›å‹ã€æ”¹é€ \n\n```\nfunctionÂ createArray<T>(length:Â number,Â value:Â T):Â Array<T>Â {\nÂ Â letÂ result:Â T[]Â =Â [];\nÂ Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â length;Â i++)Â {\nÂ Â Â Â result[i]Â =Â value;\nÂ Â }\nÂ Â returnÂ result;\n}\n\ncreateArray<string>(3,Â \"x\");Â //Â ['x',Â 'x',Â 'x'] \n```\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨<>çš„å†™æ³• ç„¶åå†é¢ä¼ å…¥ä¸€ä¸ªå˜é‡ T ç”¨æ¥è¡¨ç¤ºåç»­å‡½æ•°éœ€è¦ç”¨åˆ°çš„ç±»å‹ å½“æˆ‘ä»¬çœŸæ­£å»è°ƒç”¨å‡½æ•°çš„æ—¶å€™å†ä¼ å…¥ T çš„ç±»å‹å°±å¯ä»¥è§£å†³å¾ˆå¤šé¢„å…ˆæ— æ³•ç¡®å®šç±»å‹ç›¸å…³çš„é—®é¢˜\n\n##### **6.1 å¤šä¸ªç±»å‹å‚æ•°**\n\nå¦‚æœæˆ‘ä»¬éœ€è¦æœ‰å¤šä¸ªæœªçŸ¥çš„ç±»å‹å ä½ é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»»ä½•çš„å­—æ¯æ¥è¡¨ç¤ºä¸åŒçš„ç±»å‹å‚æ•°\n\n```\nfunctionÂ swap<T,Â U>(tuple:Â [T,Â U]):Â [U,Â T]Â {\nÂ Â returnÂ [tuple[1],Â tuple[0]];\n}\n\nswap([7,Â \"seven\"]);Â //Â ['seven',Â 7] \n```\n\n##### **6.2 æ³›å‹çº¦æŸ**\n\nåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹å˜é‡çš„æ—¶å€™ï¼Œç”±äºäº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±æ€§æˆ–æ–¹æ³•ï¼š\n\n```\nfunctionÂ loggingIdentity<T>(arg:Â T):Â TÂ {\nÂ Â console.log(arg.length);\nÂ Â returnÂ arg;\n}\n\n//Â index.ts(2,19):Â errorÂ TS2339:Â PropertyÂ 'length'Â doesÂ notÂ existÂ onÂ typeÂ 'T'. \n```\n\nä¸Šä¾‹ä¸­ï¼Œæ³›å‹ T ä¸ä¸€å®šåŒ…å«å±æ€§ lengthï¼Œæ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™äº†ã€‚\n\nè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ³›å‹è¿›è¡Œçº¦æŸï¼Œåªå…è®¸è¿™ä¸ªå‡½æ•°ä¼ å…¥é‚£äº›åŒ…å« length å±æ€§çš„å˜é‡ã€‚è¿™å°±æ˜¯ã€Œæ³›å‹çº¦æŸã€\n\n```\ninterfaceÂ LengthwiseÂ {\nÂ Â length:Â number;\n}\n\nfunctionÂ loggingIdentity<TÂ extendsÂ Lengthwise>(arg:Â T):Â TÂ {\nÂ Â console.log(arg.length);\nÂ Â returnÂ arg;\n}\n```\n\n> **â**\n\n> æ³¨æ„ï¼šæˆ‘ä»¬åœ¨æ³›å‹é‡Œé¢ä½¿ç”¨`extends`å…³é”®å­—ä»£è¡¨çš„æ˜¯æ³›å‹çº¦æŸ éœ€è¦å’Œç±»çš„ç»§æ‰¿åŒºåˆ†å¼€\n\n> â\n\n##### **6.3 æ³›å‹æ¥å£**\n\nå®šä¹‰æ¥å£çš„æ—¶å€™ä¹Ÿå¯ä»¥æŒ‡å®šæ³›å‹\n\n```\ninterfaceÂ Cart<T>Â {\nÂ Â list:Â T[];\n}\nletÂ cart:Â Cart<{Â name:Â string;Â price:Â numberÂ }>Â =Â {\nÂ Â list:Â [{Â name:Â \"hello\",Â price:Â 10Â }],\n};\nconsole.log(cart.list[0].name,Â cart.list[0].price);\n```\n\næˆ‘ä»¬å®šä¹‰äº†æ¥å£ä¼ å…¥çš„ç±»å‹ T ä¹‹åè¿”å›çš„å¯¹è±¡æ•°ç»„é‡Œé¢ T å°±æ˜¯å½“æ—¶ä¼ å…¥çš„å‚æ•°ç±»å‹\n\n##### **6.4 æ³›å‹ç±»**\n\n```\nclassÂ MyArray<T>Â {\nÂ Â privateÂ list:Â T[]Â =Â [];\nÂ Â add(value:Â T)Â {\nÂ Â Â Â this.list.push(value);\nÂ Â }\nÂ Â getMax():Â TÂ {\nÂ Â Â Â letÂ resultÂ =Â this.list[0];\nÂ Â Â Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â this.list.length;Â i++)Â {\nÂ Â Â Â Â Â ifÂ (this.list[i]Â >Â result)Â {\nÂ Â Â Â Â Â Â Â resultÂ =Â this.list[i];\nÂ Â Â Â Â Â }\nÂ Â Â Â }\nÂ Â Â Â returnÂ result;\nÂ Â }\n}\nletÂ arrÂ =Â newÂ MyArray();\narr.add(1);\narr.add(2);\narr.add(3);\nletÂ retÂ =Â arr.getMax();\nconsole.log(ret);\n```\n\nä¸Šè¯‰ä¾‹å­æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåœ¨æ•°ç»„é‡Œé¢æ·»åŠ æ•°å­—å¹¶ä¸”è·å–æœ€å¤§å€¼çš„æ³›å‹ç±»\n\n##### **6.5 æ³›å‹ç±»å‹åˆ«å**\n\n```\ntypeÂ Cart<T>Â =Â {Â list:Â T[]Â }Â |Â T[];\nletÂ c1:Â Cart<string>Â =Â {Â list:Â [\"1\"]Â };\nletÂ c2:Â Cart<number>Â =Â [1];\n```\n\n##### **6.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹**\n\næˆ‘ä»¬å¯ä»¥ä¸ºæ³›å‹ä¸­çš„ç±»å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰åœ¨ä»£ç ä¸­ç›´æ¥æŒ‡å®šç±»å‹å‚æ•°ï¼Œä»å®é™…å€¼å‚æ•°ä¸­ä¹Ÿæ— æ³•æ¨æµ‹å‡ºæ—¶ï¼Œè¿™ä¸ªé»˜è®¤ç±»å‹å°±ä¼šèµ·ä½œç”¨\n\n```\nfunctionÂ createArray<TÂ =Â string>(length:Â number,Â value:Â T):Â Array<T>Â {\nÂ Â letÂ result:Â T[]Â =Â [];\nÂ Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â length;Â i++)Â {\nÂ Â Â Â result[i]Â =Â value;\nÂ Â }\nÂ Â returnÂ result;\n}\n```\n\n### **7 å®ç”¨æŠ€å·§**\n\n##### **7.1 typeof å…³é”®è¯**\n\n`typeof`Â å…³é”®è¯é™¤äº†åšç±»å‹ä¿æŠ¤ è¿˜å¯ä»¥ä»å®ç°æ¨å‡ºç±»å‹ï¼Œ\n\n```\n //å…ˆå®šä¹‰å˜é‡ï¼Œå†å®šä¹‰ç±»å‹\nletÂ p1Â =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\nÂ Â gender:Â \"male\",\n};\ntypeÂ PeopleÂ =Â typeofÂ p1;\nfunctionÂ getName(p:Â People):Â stringÂ {\nÂ Â returnÂ p.name;\n}\ngetName(p1);\n```\n\nä¸Šé¢çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨ typeof è·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹\n\n##### **7.2 keyof å…³é”®è¯**\n\n`keyof`Â å¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æ¥å£çš„æ‰€æœ‰ key å€¼\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender:Â \"male\"Â |Â \"female\";\n}\n//typeÂ PersonKeyÂ =Â 'name'|'age'|'gender';\ntypeÂ PersonKeyÂ =Â keyofÂ Person;\n\nfunctionÂ getValueByKey(p:Â Person,Â key:Â PersonKey)Â {\nÂ Â returnÂ p[key];\n}\nletÂ valÂ =Â getValueByKey({Â name:Â \"hello\",Â age:Â 10,Â gender:Â \"male\"Â },Â \"name\");\nconsole.log(val);\n```\n\n##### **7.3 ç´¢å¼•è®¿é—®æ“ä½œç¬¦**\n\nä½¿ç”¨ [] æ“ä½œç¬¦å¯ä»¥è¿›è¡Œç´¢å¼•è®¿é—®\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\n}\n\ntypeÂ xÂ =Â Person[\"name\"];Â //Â xÂ isÂ string\n```\n\n##### **7.4 æ˜ å°„ç±»å‹ in**\n\nåœ¨å®šä¹‰çš„æ—¶å€™ç”¨ in æ“ä½œç¬¦å»æ‰¹é‡å®šä¹‰ç±»å‹ä¸­çš„å±æ€§\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender:Â \"male\"Â |Â \"female\";\n}\n//æ‰¹é‡æŠŠä¸€ä¸ªæ¥å£ä¸­çš„å±æ€§éƒ½å˜æˆå¯é€‰çš„\ntypeÂ PartPersonÂ =Â {\nÂ Â [KeyÂ inÂ keyofÂ Person]?:Â Person[Key];\n};\n\nletÂ p1:Â PartPersonÂ =Â {};\n```\n\n##### **7.5 infer å…³é”®å­—**\n\nåœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚\n\n```\ntypeÂ ReturnType<T>Â =Â TÂ extendsÂ (...args:Â any[])Â =>Â inferÂ RÂ ?Â RÂ :Â any;\n```\n\nä»¥ä¸Šä»£ç ä¸­ infer R å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚\n\n##### **7.6 å†…ç½®å·¥å…·ç±»å‹**\n\n1.  Exclude<T,U> ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æ’é™¤ U\n\n```\ntypeÂ Exclude<T,Â U>Â =Â TÂ extendsÂ UÂ ?Â neverÂ :Â T;\n\ntypeÂ EÂ =Â Exclude<stringÂ |Â number,Â string>;\nletÂ e:Â EÂ =Â 10;\n```\n\n2.  Extract<T,U> ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æå– U\n\n```\ntypeÂ Extract<T,Â U>Â =Â TÂ extendsÂ UÂ ?Â TÂ :Â never;\n\ntypeÂ EÂ =Â Extract<stringÂ |Â number,Â string>;\nletÂ e:Â EÂ =Â \"1\";\n```\n\n3.  NonNullableä» T ä¸­æ’é™¤Â `null`Â å’ŒÂ `undefined`\n\n```\ntypeÂ NonNullable<T>Â =Â TÂ extendsÂ nullÂ |Â undefinedÂ ?Â neverÂ :Â T;\n\ntypeÂ EÂ =Â NonNullable<stringÂ |Â numberÂ |Â nullÂ |Â undefined>;\nletÂ e:Â EÂ =Â null;\n```\n\n4.  ReturnType`infer`Â æœ€æ—©å‡ºç°åœ¨æ­¤ PR ä¸­ï¼Œè¡¨ç¤ºåœ¨Â `extends`Â æ¡ä»¶è¯­å¥ä¸­å¾…æ¨æ–­çš„ç±»å‹å˜é‡\n\n```\ntypeÂ ReturnType<TÂ extendsÂ (...args:Â any[])Â =>Â any>Â =Â TÂ extendsÂ (\nÂ Â ...args:Â any[]\n)Â =>Â inferÂ R\nÂ Â ?Â R\nÂ Â :Â any;\nfunctionÂ getUserInfo()Â {\nÂ Â returnÂ {Â name:Â \"hello\",Â age:Â 10Â };\n}\n\n//Â é€šè¿‡Â ReturnTypeÂ å°†Â getUserInfoÂ çš„è¿”å›å€¼ç±»å‹èµ‹ç»™äº†Â UserInfo\ntypeÂ UserInfoÂ =Â ReturnType<typeofÂ getUserInfo>;\n\nconstÂ userA:Â UserInfoÂ =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\n};\n```\n\nå¯è§ è¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„è¿”å›ç±»å‹\n\n5.  Parametersè¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„å‚æ•°ç±»å‹\n\n```\ntypeÂ Parameters<T>Â =Â TÂ extendsÂ (...args:Â inferÂ R)Â =>Â anyÂ ?Â RÂ :Â any;\n\ntypeÂ T0Â =Â Parameters<()Â =>Â string>;Â //Â []\ntypeÂ T1Â =Â Parameters<(s:Â string)Â =>Â void>;Â //Â [string]\ntypeÂ T2Â =Â Parameters<<T>(arg:Â T)Â =>Â T>;Â //Â [unknown] \n```\n\n6.  PartialPartial å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ç”±éå¯é€‰å˜ä¸ºå¯é€‰\n\n```\ntypeÂ Partial<T>Â =Â {Â [PÂ inÂ keyofÂ T]?:Â T[P]Â };\ninterfaceÂ AÂ {\nÂ Â a1:Â string;\nÂ Â a2:Â number;\nÂ Â a3:Â boolean;\n}\ntypeÂ aPartialÂ =Â Partial<A>;\nconstÂ a:Â aPartialÂ =Â {};Â //Â ä¸ä¼šæŠ¥é”™\n```\n\n7.  RequiredRequired å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ä¸­çš„å¯é€‰é¡¹å˜ä¸ºå¿…é€‰é¡¹ï¼Œè¿™é‡Œç”¨äº† -? ä¿®é¥°ç¬¦æ¥å®ç°ã€‚\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender?:Â \"male\"Â |Â \"female\";\n}\n/**\n*Â typeÂ Required<T>Â =Â {Â [PÂ inÂ keyofÂ T]-?:Â T[P]Â };\n*/\nletÂ p:Â Required<Person>Â =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\nÂ Â gender:Â \"male\",\n};\n```\n\n8.  ReadonlyReadonly é€šè¿‡ä¸ºä¼ å…¥çš„å±æ€§æ¯ä¸€é¡¹éƒ½åŠ ä¸Š readonly ä¿®é¥°ç¬¦æ¥å®ç°ã€‚\n\n```\ninterfaceÂ PersonÂ {\nÂ Â name:Â string;\nÂ Â age:Â number;\nÂ Â gender?:Â \"male\"Â |Â \"female\";\n}\n//typeÂ Readonly<T>Â =Â {Â readonlyÂ [PÂ inÂ keyofÂ T]:Â T[P]Â };\nletÂ p:Â Readonly<Person>Â =Â {\nÂ Â name:Â \"hello\",\nÂ Â age:Â 10,\nÂ Â gender:Â \"male\",\n};\np.ageÂ =Â 11;Â //error\n```\n\n9.  Pick<T,K> Pick èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ä»ä¼ å…¥çš„å±æ€§ä¸­æ‘˜å–æŸäº›è¿”å›\n\n```\ninterfaceÂ TodoÂ {\nÂ Â title:Â string;\nÂ Â description:Â string;\nÂ Â done:Â boolean;\n}\n/**\n*Â FromÂ TÂ pickÂ aÂ setÂ ofÂ propertiesÂ K\n*Â typeÂ Pick<T,Â KÂ extendsÂ keyofÂ T>Â =Â {Â [PÂ inÂ K]:Â T[P]Â };\n*/\ntypeÂ TodoBaseÂ =Â Pick<Todo,Â \"title\"Â |Â \"done\">;\n\n//Â =\ntypeÂ TodoBaseÂ =Â {\nÂ Â title:Â string;\nÂ Â done:Â boolean;\n};\n```\n\n10. Record<K,T> æ„é€ ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å…·æœ‰ä¸€ç»„å±æ€§ Kï¼Œæ¯ä¸ªå±æ€§çš„ç±»å‹ä¸º Tã€‚å¯ç”¨äºå°†ä¸€ä¸ªç±»å‹çš„å±æ€§æ˜ å°„ä¸ºå¦ä¸€ä¸ªç±»å‹ã€‚Record åé¢çš„æ³›å‹å°±æ˜¯å¯¹è±¡é”®å’Œå€¼çš„ç±»å‹ã€‚\n\nç®€å•ç†è§£ï¼šK å¯¹åº”å¯¹åº”çš„ keyï¼ŒT å¯¹åº”å¯¹è±¡çš„ valueï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªå£°æ˜å¥½çš„å¯¹è±¡ ä½†æ˜¯ K å¯¹åº”çš„æ³›å‹çº¦æŸæ˜¯`keyof any`Â ä¹Ÿå°±æ„å‘³ç€åªèƒ½ä¼ å…¥Â `string|number|symbol`\n\n```\n //Â typeÂ Record<KÂ extendsÂ keyofÂ any,Â T>Â =Â {\n//Â [PÂ inÂ K]:Â T;\n//Â };\ntypeÂ PointÂ =Â \"x\"Â |Â \"y\";\ntypeÂ PointListÂ =Â Record<Point,Â {Â value:Â numberÂ }>;\nconstÂ cars:Â PointListÂ =Â {\nÂ Â x:Â {Â value:Â 10Â },\nÂ Â y:Â {Â value:Â 20Â },\n};\n```\n\n11. Omit<K,T> åŸºäºå·²ç»å£°æ˜çš„ç±»å‹è¿›è¡Œå±æ€§å‰”é™¤è·å¾—æ–°ç±»å‹\n\n```\n //Â typeÂ Omit=Pick<T,Exclude<keyofÂ T,K>>\ntypeÂ UserÂ =Â {\nid:Â string;\nname:Â string;\nemail:Â string;\n};\ntypeÂ UserWithoutEmailÂ =Â Omit<User,Â \"email\">; //Â UserWithoutEmailÂ ={id:Â string;name:Â string;}\n};\n```\n\n### **8** **TypeScript** **è£…é¥°å™¨**\n\nè£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€å±æ€§æˆ–å‚æ•°ä¸Šï¼Œå¯ä»¥ä¿®æ”¹ç±»çš„è¡Œä¸º\n\nå¸¸è§çš„è£…é¥°å™¨æœ‰ç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨å’Œå‚æ•°è£…é¥°å™¨\n\nè£…é¥°å™¨çš„å†™æ³•åˆ†ä¸ºæ™®é€šè£…é¥°å™¨å’Œè£…é¥°å™¨å·¥å‚\n\nä½¿ç”¨@è£…é¥°å™¨çš„å†™æ³•éœ€è¦æŠŠ tsconfig.json çš„Â `experimentalDecorators`Â å­—æ®µè®¾ç½®ä¸º true\n\n##### **8.1 ç±»è£…é¥°å™¨**\n\nç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰å£°æ˜ï¼Œç”¨æ¥ç›‘è§†ã€ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰\n\n```\nnamespaceÂ aÂ {\nÂ Â //å½“è£…é¥°å™¨ä½œä¸ºä¿®é¥°ç±»çš„æ—¶å€™ï¼Œä¼šæŠŠæ„é€ å™¨ä¼ é€’è¿›å»\nÂ Â functionÂ addNameEat(constructor:Â Function)Â {\nÂ Â Â Â constructor.prototype.nameÂ =Â \"hello\";\nÂ Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â console.log(\"eat\");\nÂ Â Â Â };\nÂ Â }\nÂ Â @addNameEat\nÂ Â classÂ PersonÂ {\nÂ Â Â Â name!:Â string;\nÂ Â Â Â eat!:Â Function;\nÂ Â Â Â constructor()Â {}\nÂ Â }\nÂ Â letÂ p:Â PersonÂ =Â newÂ Person();\nÂ Â console.log(p.name);\nÂ Â p.eat();\n}\n\nnamespaceÂ bÂ {\nÂ Â //è¿˜å¯ä»¥ä½¿ç”¨è£…é¥°å™¨å·¥å‚Â è¿™æ ·å¯ä»¥ä¼ é€’é¢å¤–å‚æ•°\nÂ Â functionÂ addNameEatFactory(name:Â string)Â {\nÂ Â Â Â returnÂ functionÂ (constructor:Â Function)Â {\nÂ Â Â Â Â Â constructor.prototype.nameÂ =Â name;\nÂ Â Â Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â Â Â console.log(\"eat\");\nÂ Â Â Â Â Â };\nÂ Â Â Â };\nÂ Â }\nÂ Â @addNameEatFactory(\"hello\")\nÂ Â classÂ PersonÂ {\nÂ Â Â Â name!:Â string;\nÂ Â Â Â eat!:Â Function;\nÂ Â Â Â constructor()Â {}\nÂ Â }\nÂ Â letÂ p:Â PersonÂ =Â newÂ Person();\nÂ Â console.log(p.name);\nÂ Â p.eat();\n}\n\nnamespaceÂ cÂ {\nÂ Â //è¿˜å¯ä»¥æ›¿æ¢ç±»,ä¸è¿‡æ›¿æ¢çš„ç±»è¦ä¸åŸç±»ç»“æ„ç›¸åŒ\nÂ Â functionÂ enhancer(constructor:Â Function)Â {\nÂ Â Â Â returnÂ classÂ {\nÂ Â Â Â Â Â name:Â stringÂ =Â \"jiagou\";\nÂ Â Â Â Â Â eat()Â {\nÂ Â Â Â Â Â Â Â console.log(\"åƒé¥­é¥­\");\nÂ Â Â Â Â Â }\nÂ Â Â Â };\nÂ Â }\nÂ Â @enhancer\nÂ Â classÂ PersonÂ {\nÂ Â Â Â name!:Â string;\nÂ Â Â Â eat!:Â Function;\nÂ Â Â Â constructor()Â {}\nÂ Â }\nÂ Â letÂ p:Â PersonÂ =Â newÂ Person();\nÂ Â console.log(p.name);\nÂ Â p.eat();\n}\n```\n\n##### **8.2 å±æ€§è£…é¥°å™¨**\n\nå±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ 2 ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§çš„åç§°\n\n```\n //ä¿®é¥°å®ä¾‹å±æ€§\nfunctionÂ upperCase(target:Â any,Â propertyKey:Â string)Â {\nÂ Â letÂ valueÂ =Â target[propertyKey];\nÂ Â constÂ getterÂ =Â functionÂ ()Â {\nÂ Â Â Â returnÂ value;\nÂ Â };\nÂ Â //Â ç”¨æ¥æ›¿æ¢çš„setter\nÂ Â constÂ setterÂ =Â functionÂ (newVal:Â string)Â {\nÂ Â Â Â valueÂ =Â newVal.toUpperCase();\nÂ Â };\nÂ Â //Â æ›¿æ¢å±æ€§ï¼Œå…ˆåˆ é™¤åŸå…ˆçš„å±æ€§ï¼Œå†é‡æ–°å®šä¹‰å±æ€§\nÂ Â ifÂ (deleteÂ target[propertyKey])Â {\nÂ Â Â Â Object.defineProperty(target,Â propertyKey,Â {\nÂ Â Â Â Â Â get:Â getter,\nÂ Â Â Â Â Â set:Â setter,\nÂ Â Â Â Â Â enumerable:Â true,\nÂ Â Â Â Â Â configurable:Â true,\nÂ Â Â Â });\nÂ Â }\n}\n\nclassÂ PersonÂ {\nÂ Â @upperCase\nÂ Â name!:Â string;\n}\nletÂ p:Â PersonÂ =Â newÂ Person();\np.nameÂ =Â \"world\";\nconsole.log(p.name);\n```\n\n##### **8.3 æ–¹æ³•è£…é¥°å™¨**\n\næ–¹æ³•è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„æ–¹æ³•ã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štarget: Object - å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ propertyKey: string | symbol - æ–¹æ³•å descriptor: TypePropertyDescript - å±æ€§æè¿°ç¬¦\n\n```\n //ä¿®é¥°å®ä¾‹æ–¹æ³•\nfunctionÂ noEnumerable(\nÂ Â target:Â any,\nÂ Â property:Â string,\nÂ Â descriptor:Â PropertyDescriptor\n)Â {\nÂ Â console.log(\"target.getName\",Â target.getName);\nÂ Â console.log(\"target.getAge\",Â target.getAge);\nÂ Â descriptor.enumerableÂ =Â false;\n}\n//é‡å†™æ–¹æ³•\nfunctionÂ toNumber(\nÂ Â target:Â any,\nÂ Â methodName:Â string,\nÂ Â descriptor:Â PropertyDescriptor\n)Â {\nÂ Â letÂ oldMethodÂ =Â descriptor.value;\nÂ Â descriptor.valueÂ =Â functionÂ (...args:Â any[])Â {\nÂ Â Â Â argsÂ =Â args.map((item)Â =>Â parseFloat(item));\nÂ Â Â Â returnÂ oldMethod.apply(this,Â args);\nÂ Â };\n}\nclassÂ PersonÂ {\nÂ Â name:Â stringÂ =Â \"hello\";\nÂ Â publicÂ staticÂ age:Â numberÂ =Â 10;\nÂ Â constructor()Â {}\nÂ Â @noEnumerable\nÂ Â getName()Â {\nÂ Â Â Â console.log(this.name);\nÂ Â }\nÂ Â @toNumber\nÂ Â sum(...args:Â any[])Â {\nÂ Â Â Â returnÂ args.reduce((accu:Â number,Â item:Â number)Â =>Â accuÂ +Â item,Â 0);\nÂ Â }\n}\nletÂ p:Â PersonÂ =Â newÂ Person();\nforÂ (letÂ attrÂ inÂ p)Â {\nÂ Â console.log(\"attr=\",Â attr);\n}\np.getName();\nconsole.log(p.sum(\"1\",Â \"2\",Â \"3\"));\n```\n\n##### **8.4 å‚æ•°è£…é¥°å™¨**\n\nå‚æ•°è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”¨æ¥è£…é¥°å‡½æ•°å‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š\n\ntarget: Object - è¢«è£…é¥°çš„ç±» propertyKey: string | symbol - æ–¹æ³•å parameterIndex: number - æ–¹æ³•ä¸­å‚æ•°çš„ç´¢å¼•å€¼\n\n```\nfunctionÂ Log(target:Â Function,Â key:Â string,Â parameterIndex:Â number)Â {\nÂ Â letÂ functionLoggedÂ =Â keyÂ ||Â target.prototype.constructor.name;\nÂ Â console.log(`TheÂ parameterÂ inÂ positionÂ ${parameterIndex}Â atÂ ${functionLogged}Â has\nÂ beenÂ decorated`);\n}\n\nclassÂ GreeterÂ {\nÂ Â greeting:Â string;\nÂ Â constructor(@LogÂ phrase:Â string)Â {\nÂ Â Â Â this.greetingÂ =Â phrase;\nÂ Â }\n}\n```\n\nä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š`\"The parameter in position 0 at Greeter has been decorated\"`\n\n##### **8.5 è£…é¥°å™¨æ‰§è¡Œé¡ºåº**\n\næœ‰å¤šä¸ªå‚æ•°è£…é¥°å™¨æ—¶ï¼šä»æœ€åä¸€ä¸ªå‚æ•°ä¾æ¬¡å‘å‰æ‰§è¡Œ\n\næ–¹æ³•å’Œæ–¹æ³•å‚æ•°ä¸­å‚æ•°è£…é¥°å™¨å…ˆæ‰§è¡Œã€‚æ–¹æ³•å’Œå±æ€§è£…é¥°å™¨ï¼Œè°åœ¨å‰é¢è°å…ˆæ‰§è¡Œã€‚å› ä¸ºå‚æ•°å±äºæ–¹æ³•ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å‚æ•°ä¼šä¸€ç›´ç´§ç´§æŒ¨ç€æ–¹æ³•æ‰§è¡Œ\n\nç±»è£…é¥°å™¨æ€»æ˜¯æœ€åæ‰§è¡Œ\n\n```\nfunctionÂ Class1Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any)Â {\nÂ Â Â Â console.log(\"ç±»1è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ Class2Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any)Â {\nÂ Â Â Â console.log(\"ç±»2è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ MethodDecorator()Â {\nÂ Â returnÂ functionÂ (\nÂ Â Â Â target:Â any,\nÂ Â Â Â methodName:Â string,\nÂ Â Â Â descriptor:Â PropertyDescriptor\nÂ Â )Â {\nÂ Â Â Â console.log(\"æ–¹æ³•è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ Param1Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â {\nÂ Â Â Â console.log(\"å‚æ•°1è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ Param2Decorator()Â {\nÂ Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â {\nÂ Â Â Â console.log(\"å‚æ•°2è£…é¥°å™¨\");\nÂ Â };\n}\nfunctionÂ PropertyDecorator(name:Â string)Â {\nÂ Â returnÂ functionÂ (target:Â any,Â propertyName:Â string)Â {\nÂ Â Â Â console.log(nameÂ +Â \"å±æ€§è£…é¥°å™¨\");\nÂ Â };\n}\n\n@Class1Decorator()\n@Class2Decorator()\nclassÂ PersonÂ {\nÂ Â @PropertyDecorator(\"name\")\nÂ Â name:Â stringÂ =Â \"hello\";\nÂ Â @PropertyDecorator(\"age\")\nÂ Â age:Â numberÂ =Â 10;\nÂ Â @MethodDecorator()\nÂ Â greet(@Param1Decorator()Â p1:Â string,Â @Param2Decorator()Â p2:Â string)Â {}\n}\n\n/**\nnameå±æ€§è£…é¥°å™¨\nageå±æ€§è£…é¥°å™¨\nå‚æ•°2è£…é¥°å™¨\nå‚æ•°1è£…é¥°å™¨\næ–¹æ³•è£…é¥°å™¨\nç±»2è£…é¥°å™¨\nç±»1è£…é¥°å™¨\n*/ \n```\n\n### **9 ç¼–è¯‘**\n\n##### **9.1 tsconfig.json çš„ä½œç”¨**\n\n-   ç”¨äºæ ‡è¯† TypeScript é¡¹ç›®çš„æ ¹è·¯å¾„ï¼›\n\n<!---->\n\n-   ç”¨äºé…ç½® TypeScript ç¼–è¯‘å™¨ï¼›\n\n<!---->\n\n-   ç”¨äºæŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶ã€‚\n\n##### **9.2 tsconfig.json é‡è¦å­—æ®µ**\n\n-   files - è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶çš„åç§°ï¼›\n\n<!---->\n\n-   include - è®¾ç½®éœ€è¦è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›\n\n<!---->\n\n-   exclude - è®¾ç½®æ— éœ€è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›\n\n<!---->\n\n-   compilerOptions - è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹ã€‚\n\n##### **9.3 compilerOptions é€‰é¡¹**\n\n```\n{\nÂ Â \"compilerOptions\":Â {\n\nÂ Â Â Â /*Â åŸºæœ¬é€‰é¡¹Â */\nÂ Â Â Â \"target\":Â \"es5\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ ECMAScriptÂ ç›®æ ‡ç‰ˆæœ¬:Â 'ES3'Â (default),Â 'ES5',Â 'ES6'/'ES2015',Â 'ES2016',Â 'ES2017',Â orÂ 'ESNEXT'\nÂ Â Â Â \"module\":Â \"commonjs\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šä½¿ç”¨æ¨¡å—:Â 'commonjs',Â 'amd',Â 'system',Â 'umd'Â orÂ 'es2015'\nÂ Â Â Â \"lib\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶\nÂ Â Â Â \"allowJs\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å…è®¸ç¼–è¯‘Â javascriptÂ æ–‡ä»¶\nÂ Â Â Â \"checkJs\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŠ¥å‘ŠÂ javascriptÂ æ–‡ä»¶ä¸­çš„é”™è¯¯\nÂ Â Â Â \"jsx\":Â \"preserve\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ jsxÂ ä»£ç çš„ç”Ÿæˆ:Â 'preserve',Â 'react-native',Â orÂ 'react'\nÂ Â Â Â \"declaration\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â '.d.ts'Â æ–‡ä»¶\nÂ Â Â Â \"sourceMap\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â '.map'Â æ–‡ä»¶\nÂ Â Â Â \"outFile\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶\nÂ Â Â Â \"outDir\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¾“å‡ºç›®å½•\nÂ Â Â Â \"rootDir\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„Â --outDir.\nÂ Â Â Â \"removeComments\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š\nÂ Â Â Â \"noEmit\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶\nÂ Â Â Â \"importHelpers\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»Â tslibÂ å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°\nÂ Â Â Â \"isolatedModules\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å—Â ï¼ˆä¸Â 'ts.transpileModule'Â ç±»ä¼¼ï¼‰.\n\nÂ Â Â Â /*Â ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹Â */\nÂ Â Â Â \"strict\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹\nÂ Â Â Â \"noImplicitAny\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„Â anyç±»å‹æ—¶æŠ¥é”™\nÂ Â Â Â \"strictNullChecks\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨ä¸¥æ ¼çš„Â nullÂ æ£€æŸ¥\nÂ Â Â Â \"noImplicitThis\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å½“Â thisÂ è¡¨è¾¾å¼å€¼ä¸ºÂ anyÂ ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯\nÂ Â Â Â \"alwaysStrict\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥Â 'useÂ strict'\n\nÂ Â Â Â /*Â é¢å¤–çš„æ£€æŸ¥Â */\nÂ Â Â Â \"noUnusedLocals\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\nÂ Â Â Â \"noUnusedParameters\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\nÂ Â Â Â \"noImplicitReturns\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\nÂ Â Â Â \"noFallthroughCasesInSwitch\":Â true,Â Â Â Â //Â æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰\n\nÂ Â Â Â /*Â æ¨¡å—è§£æé€‰é¡¹Â */\nÂ Â Â Â \"moduleResolution\":Â \"node\",Â Â Â Â Â Â Â Â Â Â Â Â //Â é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼šÂ 'node'Â (Node.js) or 'classic'Â (TypeScript pre-1.6)\nÂ Â Â Â \"baseUrl\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•\nÂ Â Â Â \"paths\":Â {},Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ¨¡å—ååˆ°åŸºäºÂ baseUrlÂ çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨\nÂ Â Â Â \"rootDirs\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹\nÂ Â Â Â \"typeRoots\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨\nÂ Â Â Â \"types\":Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨\nÂ Â Â Â \"allowSyntheticDefaultImports\":Â true,Â Â //Â å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚\n\nÂ Â Â Â /*Â SourceÂ MapÂ OptionsÂ */\nÂ Â Â Â \"sourceRoot\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°Â TypeScriptÂ æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®\nÂ Â Â Â \"mapRoot\":Â \"./\",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®\nÂ Â Â Â \"inlineSourceMap\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆå•ä¸ªÂ soucemapsÂ æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°†Â sourcemapsÂ ç”Ÿæˆä¸åŒçš„æ–‡ä»¶\nÂ Â Â Â \"inlineSources\":Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†ä»£ç ä¸Â sourcemapsÂ ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº†Â --inlineSourceMapÂ æˆ–Â --sourceMapÂ å±æ€§\n\nÂ Â Â Â /*Â å…¶ä»–é€‰é¡¹Â */\nÂ Â Â Â \"experimentalDecorators\":Â true,Â Â Â Â Â Â Â Â //Â å¯ç”¨è£…é¥°å™¨\nÂ Â Â Â \"emitDecoratorMetadata\":Â trueÂ Â Â Â Â Â Â Â Â Â //Â ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ\nÂ Â }\n}\n```\n\n### **10 æ¨¡å—å’Œå£°æ˜æ–‡ä»¶**\n\n##### **10.1 å…¨å±€æ¨¡å—**\n\nåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ å¼€å§‹åœ¨ä¸€ä¸ªæ–°çš„ TypeScript æ–‡ä»¶ä¸­å†™ä¸‹ä»£ç æ—¶ï¼Œå®ƒå¤„äºå…¨å±€å‘½åç©ºé—´ä¸­\n\nä½¿ç”¨å…¨å±€å˜é‡ç©ºé—´æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä¼šä¸æ–‡ä»¶å†…çš„ä»£ç å‘½åå†²çªã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ä¸‹æ–‡ä¸­å°†è¦æåˆ°çš„æ–‡ä»¶æ¨¡å—\n\nfoo.ts\n\n```\nconstÂ fooÂ =Â 123;\n```\n\nbar.ts\n\n```\nconstÂ barÂ =Â foo;Â //Â allowed\n```\n\n##### **10.2 æ–‡ä»¶æ¨¡å—**\n\n-   æ–‡ä»¶æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨æ¨¡å—ã€‚å¦‚æœåœ¨ä½ çš„ TypeScript æ–‡ä»¶çš„æ ¹çº§åˆ«ä½ç½®å«æœ‰ import æˆ–è€… exportï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„ä½œç”¨åŸŸ\n\n<!---->\n\n-   æ¨¡å—æ˜¯ TS ä¸­å¤–éƒ¨æ¨¡å—çš„ç®€ç§°ï¼Œä¾§é‡äºä»£ç å’Œå¤ç”¨\n\n<!---->\n\n-   æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œ\n\n<!---->\n\n-   ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ã€å‡½æ•°ã€ç±»ç­‰åœ¨å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æŠŠå®ƒå¯¼å‡º\n\n<!---->\n\n-   å¦‚æœæƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ¨¡å—é‡Œå¯¼å‡ºçš„å˜é‡ï¼Œåˆ™éœ€è¦å¯¼å…¥\n\nfoo.ts\n\n```\nconstÂ fooÂ =Â 123;\nexportÂ {};\n```\n\nbar.ts\n\n```\nconstÂ barÂ =Â foo;Â //Â error\n```\n\n##### **10.3 å£°æ˜æ–‡ä»¶**\n\n-   æˆ‘ä»¬å¯ä»¥æŠŠç±»å‹å£°æ˜æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­\n\n<!---->\n\n-   æ–‡ä»¶å‘½åè§„èŒƒä¸º*.d.ts\n\n<!---->\n\n-   æŸ¥çœ‹ç±»å‹å£°æ˜æ–‡ä»¶æœ‰åŠ©äºäº†è§£åº“çš„ä½¿ç”¨æ–¹å¼\n\ntypings\\jquery.d.ts\n\n```\ndeclareÂ constÂ $:Â (selector:Â string)Â =>Â {\nÂ Â click():Â void;\nÂ Â width(length:Â number):Â void;\n};\n```\n\n##### **10.4 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶**\n\n-   å¯ä»¥å®‰è£…ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å£°æ˜æ–‡ä»¶\n\n<!---->\n\n-   @types æ˜¯ä¸€ä¸ªçº¦å®šçš„å‰ç¼€ï¼Œæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹å£°æ˜çš„ç±»å‹åº“éƒ½ä¼šå¸¦æœ‰è¿™æ ·çš„å‰ç¼€\n\n<!---->\n\n-   JavaScript ä¸­æœ‰å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥åœ¨ TypeScript ä¸­è¢«å½“åšå£°æ˜å¥½äº†çš„ç±»å‹\n\n<!---->\n\n-   å†…ç½®å¯¹è±¡æ˜¯æŒ‡æ ¹æ®æ ‡å‡†åœ¨å…¨å±€ä½œç”¨åŸŸï¼ˆGlobalï¼‰ä¸Šå­˜åœ¨çš„å¯¹è±¡ã€‚è¿™é‡Œçš„æ ‡å‡†æ˜¯æŒ‡ ECMAScript å’Œå…¶ä»–ç¯å¢ƒï¼ˆæ¯”å¦‚ DOMï¼‰çš„æ ‡å‡†\n\n<!---->\n\n-   è¿™äº›å†…ç½®å¯¹è±¡çš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œå°±åŒ…å«åœ¨ TypeScript æ ¸å¿ƒåº“çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­,å…·ä½“å¯ä»¥æŸ¥çœ‹ts æ ¸å¿ƒå£°æ˜æ–‡ä»¶\n\n##### **10.5 æŸ¥æ‰¾å£°æ˜æ–‡ä»¶**\n\n-   å¦‚æœæ˜¯æ‰‹åŠ¨å†™çš„å£°æ˜æ–‡ä»¶ï¼Œé‚£ä¹ˆéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œæ‰èƒ½è¢«æ­£ç¡®çš„è¯†åˆ«\n\n<!---->\n\n-   ç»™ package.json ä¸­çš„ types æˆ– typings å­—æ®µæŒ‡å®šä¸€ä¸ªç±»å‹å£°æ˜æ–‡ä»¶åœ°å€\n\n<!---->\n\n-   åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç¼–å†™ä¸€ä¸ª index.d.ts æ–‡ä»¶\n\n<!---->\n\n-   é’ˆå¯¹å…¥å£æ–‡ä»¶ï¼ˆpackage.json ä¸­çš„ main å­—æ®µæŒ‡å®šçš„å…¥å£æ–‡ä»¶ï¼‰ï¼Œç¼–å†™ä¸€ä¸ªåŒåä¸åŒåç¼€çš„ .d.ts æ–‡ä»¶\n\n```\n{\nÂ Â Â Â \"name\":Â \"myLib\",\nÂ Â Â Â \"version\":Â \"1.0.0\",\nÂ Â Â Â \"main\":Â \"lib/index.js\",\nÂ Â Â Â \"types\":Â \"myLib.d.ts\",\n}\n```\n\næŸ¥æ‰¾è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n1.å…ˆæ‰¾ myLib.d.ts\n\n2.æ²¡æœ‰å°±å†æ‰¾ index.d.ts\n\n3.è¿˜æ²¡æœ‰å†æ‰¾ lib/index.d.js\n\n4.è¿˜æ‰¾ä¸åˆ°å°±è®¤ä¸ºæ²¡æœ‰ç±»å‹å£°æ˜äº†","slug":"fe/typescript","published":1,"date":"2021-12-28T10:16:41.992Z","updated":"2021-12-28T12:33:48.163Z","layout":"post","photos":[],"link":"","_id":"ckxq3m95v0016kudoufl51f8x","content":"<h3 id=\"1-ts-å®‰è£…å’Œç¼–è¯‘\"><a href=\"#1-ts-å®‰è£…å’Œç¼–è¯‘\" class=\"headerlink\" title=\"1 ts å®‰è£…å’Œç¼–è¯‘\"></a><strong>1</strong> <strong>ts</strong> <strong>å®‰è£…å’Œç¼–è¯‘</strong></h3><ul>\n<li>ç¬¬ä¸€æ­¥ æ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ç”¨æ¥å­¦ä¹  ts</li>\n</ul>\n<!---->\n<ul>\n<li>ç¬¬äºŒæ­¥ å…¨å±€å®‰è£… ts å’Œ ts-node</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpmÂ iÂ typescriptÂ -gÂ //å…¨å±€å®‰è£…ts</span><br><span class=\"line\">cnpmÂ iÂ -gÂ ts-nodeÂ //å…¨å±€å®‰è£…ts-node</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ç¬¬ä¸‰æ­¥ ç”Ÿæˆ tsconfig.js é…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tscÂ --init</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å°±å…ˆæŒ‰ç…§è‡ªåŠ¨ç”Ÿæˆçš„ tsconfig é…ç½®é¡¹å»ä½¿ç”¨ é‡Œé¢çš„é…ç½®å’±ä»¬å¯ä»¥å…ˆä¸å»ç®¡ä»– åç»­ç†Ÿç»ƒäº†å†å»é…ç½®</p>\n<ul>\n<li>ç¬¬å››æ­¥ åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ª<code>index.ts</code>ç›´æ¥å†™å…¥</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ a:Â stringÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">console.log(a);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ç¬¬äº”æ­¥ ç¼–è¯‘ ts ä¸º js åœ¨æ§åˆ¶å°ï¼ˆç»ˆç«¯ï¼‰è¾“å…¥å‘½ä»¤</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tscÂ index.ts</span><br></pre></td></tr></table></figure>\n<p>ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº† é¡¹ç›®ä¸‹å‡ºç°äº†ä¸€ä¸ªåŒåçš„ index.js æ–‡ä»¶ è‡³æ­¤æˆ‘ä»¬å·²ç»å¯ä»¥æŠŠ ts æ–‡ä»¶ç¼–è¯‘æˆ js æ–‡ä»¶äº†</p>\n<p>ä¸è¿‡åˆ°è¿™é‡Œèªæ˜çš„å°ä¼™ä¼´å°±ä¼šå‘ç°äº† æˆ‘ä»¬å…¨å±€å®‰è£…çš„ ã€Œts-nodeã€ æœ‰ä»€ä¹ˆä½œç”¨å‘¢ å…¶å®è¿™ä¸ªåŒ…æ˜¯å¸®åŠ©æˆ‘ä»¬åœ¨ä¸éœ€è¦ç¼–è¯‘æˆ js çš„å‰æä¸‹å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ ts ä»£ç  æ¯”å¦‚ æˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å…¥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ts-nodeÂ index.ts</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‰“å°çš„<code>hello</code>å·²ç»è¾“å‡ºäº†</p>\n<p>é‚£å¯èƒ½ è¿˜æœ‰çš„å°ä¼™ä¼´ä¼šå‘ç° æˆ‘ä»¬æ¯æ¬¡æ”¹åŠ¨éƒ½è¦æ‰‹åŠ¨å»æ‰§è¡Œç¼–è¯‘ è¿™æ ·å¾ˆéº»çƒ¦ å…¶å®æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ªå‚æ•°æ¥å®ç°æ¯æ¬¡æ–‡ä»¶å˜åŠ¨ ts å¸®æˆ‘ä»¬ã€Œè‡ªåŠ¨ç¼–è¯‘æˆ jsã€ çš„æ•ˆæœ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tscÂ --watchÂ index.ts</span><br></pre></td></tr></table></figure>\n<p>å¥½äº† ç¯å¢ƒå®‰è£…å®Œæ¯•äº† æ¥ä¸‹æ¥å‡ºå‘å»å­¦ä¹  ts æ ¸å¿ƒå§</p>\n<h3 id=\"2-TS-ç±»å‹\"><a href=\"#2-TS-ç±»å‹\" class=\"headerlink\" title=\"2 TS ç±»å‹\"></a><strong>2</strong> <strong>TS</strong> <strong>ç±»å‹</strong></h3><h5 id=\"2-1-å¸ƒå°”ç±»å‹-boolean\"><a href=\"#2-1-å¸ƒå°”ç±»å‹-boolean\" class=\"headerlink\" title=\"2.1 å¸ƒå°”ç±»å‹(boolean)\"></a><strong>2.1 å¸ƒå°”ç±»å‹(boolean)</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â booleanÂ =Â true;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-2-Number-ç±»å‹\"><a href=\"#2-2-Number-ç±»å‹\" class=\"headerlink\" title=\"2.2 Number ç±»å‹\"></a><strong>2.2 Number ç±»å‹</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â numberÂ =Â 1;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-3-String-ç±»å‹\"><a href=\"#2-3-String-ç±»å‹\" class=\"headerlink\" title=\"2.3 String ç±»å‹\"></a><strong>2.3 String ç±»å‹</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â stringÂ =Â &quot;hello&quot;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-4-Enum-ç±»å‹\"><a href=\"#2-4-Enum-ç±»å‹\" class=\"headerlink\" title=\"2.4 Enum ç±»å‹\"></a><strong>2.4</strong> <strong>Enum</strong> <strong>ç±»å‹</strong></h5><p>ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„æè¿°ä¸€äº›ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å¹´ä¸­çš„æ˜¥ã€å¤ã€ç§‹ã€å†¬ï¼Œè¿˜æœ‰æ¯å‘¨çš„å‘¨ä¸€åˆ°å‘¨å¤©ï¼Œè¿˜æœ‰å„ç§é¢œè‰²ï¼Œä»¥åŠå¯ä»¥ç”¨å®ƒæ¥æè¿°ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯ç ç­‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â æ™®é€šæšä¸¾Â åˆå§‹å€¼é»˜è®¤ä¸ºÂ 0Â å…¶ä½™çš„æˆå‘˜ä¼šä¼šæŒ‰é¡ºåºè‡ªåŠ¨å¢é•¿Â å¯ä»¥ç†è§£ä¸ºæ•°ç»„ä¸‹æ ‡</span><br><span class=\"line\">enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â RED,</span><br><span class=\"line\">Â Â PINK,</span><br><span class=\"line\">Â Â BLUE,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ pink:Â ColorÂ =Â Color.PINK;</span><br><span class=\"line\">console.log(pink);Â //Â 1</span><br><span class=\"line\"></span><br><span class=\"line\">//Â è®¾ç½®åˆå§‹å€¼</span><br><span class=\"line\">enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â REDÂ =Â 10,</span><br><span class=\"line\">Â Â PINK,</span><br><span class=\"line\">Â Â BLUE,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">constÂ pink:Â ColorÂ =Â Color.PINK;</span><br><span class=\"line\">console.log(pink);Â //Â 11</span><br><span class=\"line\"></span><br><span class=\"line\">//Â å­—ç¬¦ä¸²æšä¸¾Â æ¯ä¸ªéƒ½éœ€è¦å£°æ˜</span><br><span class=\"line\">enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â REDÂ =Â &quot;çº¢è‰²&quot;,</span><br><span class=\"line\">Â Â PINKÂ =Â &quot;ç²‰è‰²&quot;,</span><br><span class=\"line\">Â Â BLUEÂ =Â &quot;è“è‰²&quot;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ pink:Â ColorÂ =Â Color.PINK;</span><br><span class=\"line\">console.log(pink);Â //Â ç²‰è‰²</span><br><span class=\"line\"></span><br><span class=\"line\">//Â å¸¸é‡æšä¸¾Â å®ƒæ˜¯ä½¿ç”¨Â constÂ å…³é”®å­—ä¿®é¥°çš„æšä¸¾ï¼Œå¸¸é‡æšä¸¾ä¸æ™®é€šæšä¸¾çš„åŒºåˆ«æ˜¯ï¼Œæ•´ä¸ªæšä¸¾ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«åˆ é™¤Â æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ç¼–è¯‘ä¹‹åçš„æ•ˆæœ</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â RED,</span><br><span class=\"line\">Â Â PINK,</span><br><span class=\"line\">Â Â BLUE,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ color:Â Color[]Â =Â [Color.RED,Â Color.PINK,Â Color.BLUE];</span><br><span class=\"line\"></span><br><span class=\"line\">//ç¼–è¯‘ä¹‹åçš„jså¦‚ä¸‹ï¼š</span><br><span class=\"line\">varÂ colorÂ =Â [0Â /*Â REDÂ */ ,Â 1Â /*Â PINKÂ */ ,Â 2Â /*Â BLUEÂ */ ];</span><br><span class=\"line\">//Â å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æšä¸¾å¹¶æ²¡æœ‰è¢«ç¼–è¯‘æˆjsä»£ç Â åªæ˜¯æŠŠcolorè¿™ä¸ªæ•°ç»„å˜é‡ç¼–è¯‘å‡ºæ¥äº†</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-5-æ•°ç»„ç±»å‹-array\"><a href=\"#2-5-æ•°ç»„ç±»å‹-array\" class=\"headerlink\" title=\"2.5 æ•°ç»„ç±»å‹(array)\"></a><strong>2.5 æ•°ç»„ç±»å‹(array)</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag1:Â number[]Â =Â [1,Â 2,Â 3];</span><br><span class=\"line\">constÂ flag2:Â Array&lt;number&gt;Â =Â [1,Â 2,Â 3];</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-6-å…ƒç»„ç±»å‹-tuple\"><a href=\"#2-6-å…ƒç»„ç±»å‹-tuple\" class=\"headerlink\" title=\"2.6 å…ƒç»„ç±»å‹(tuple)\"></a><strong>2.6 å…ƒç»„ç±»å‹(tuple)</strong></h5><p>åœ¨ TypeScript çš„åŸºç¡€ç±»å‹ä¸­ï¼Œå…ƒç»„ï¼ˆ Tuple ï¼‰è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥ã€Œæ•°é‡ã€å’Œã€Œç±»å‹ã€çš„æ•°ç»„ å…¶å®å¯ä»¥ç†è§£ä¸ºä»–æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â [string,Â number]Â =Â [&quot;hello&quot;,Â 1];</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-7-Symbol\"><a href=\"#2-7-Symbol\" class=\"headerlink\" title=\"2.7 Symbol\"></a><strong>2.7 Symbol</strong></h5><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Symbol çš„æ—¶å€™ï¼Œå¿…é¡»æ·»åŠ  es6 çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„ <code>libs</code> å­—æ®µåŠ ä¸Š<code>ES`</code>2015`Symbol çš„å€¼æ˜¯å”¯ä¸€ä¸å˜çš„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ sym1Â =Â Symbol(&quot;hello&quot;);</span><br><span class=\"line\">constÂ sym2Â =Â Symbol(&quot;hello&quot;);</span><br><span class=\"line\">console.log(Symbol(&quot;hello&quot;)Â ===Â Symbol(&quot;hello&quot;));</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-8-ä»»æ„ç±»å‹-any\"><a href=\"#2-8-ä»»æ„ç±»å‹-any\" class=\"headerlink\" title=\"2.8 ä»»æ„ç±»å‹(any)\"></a><strong>2.8 ä»»æ„ç±»å‹(any)</strong></h5><p>ä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º <code>any</code> ç±»å‹ è¿™è®© <code>any</code> ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„ é¡¶çº§ç±»å‹ (ä¹Ÿè¢«ç§°ä½œ å…¨å±€è¶…çº§ç±»å‹) TypeScript å…è®¸æˆ‘ä»¬å¯¹ <code>any</code> ç±»å‹çš„å€¼æ‰§è¡Œä»»ä½•æ“ä½œ è€Œæ— éœ€äº‹å…ˆæ‰§è¡Œä»»ä½•å½¢å¼çš„æ£€æŸ¥</p>\n<p>ä¸€èˆ¬ä½¿ç”¨åœºæ™¯ï¼šç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›ç±»å‹æ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨ <code>any</code>ç±»å‹è½¬æ¢é‡åˆ°å›°éš¾æˆ–è€…æ•°æ®ç»“æ„å¤ªå¤æ‚éš¾ä»¥å®šä¹‰ ä¸è¿‡ä¸è¦å¤ªä¾èµ– <code>any</code> å¦åˆ™å°±å¤±å»äº† ts çš„æ„ä¹‰äº†</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â anyÂ =Â document.getElementById(&quot;root&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-9-null-å’Œ-undefined\"><a href=\"#2-9-null-å’Œ-undefined\" class=\"headerlink\" title=\"2.9 null å’Œ undefined\"></a><strong>2.9 null å’Œ undefined</strong></h5><p><code>undefined</code> å’Œ <code>null</code> ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸º <code>undefined</code> å’Œ <code>null</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ u:Â undefinedÂ =Â undefined;</span><br><span class=\"line\">letÂ n:Â nullÂ =Â null;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-10-Unknown-ç±»å‹\"><a href=\"#2-10-Unknown-ç±»å‹\" class=\"headerlink\" title=\"2.10 Unknown ç±»å‹\"></a><strong>2.10 Unknown ç±»å‹</strong></h5><p><code>unknown</code> å’Œ <code>any</code> çš„ä¸»è¦åŒºåˆ«æ˜¯ <code>unknown</code> ç±»å‹ä¼šæ›´åŠ ä¸¥æ ¼ åœ¨å¯¹ <code>unknown</code> ç±»å‹çš„å€¼æ‰§è¡Œå¤§å¤šæ•°æ“ä½œä¹‹å‰ æˆ‘ä»¬å¿…é¡»è¿›è¡ŒæŸç§å½¢å¼çš„æ£€æŸ¥ è€Œåœ¨å¯¹ <code>any</code> ç±»å‹çš„å€¼æ‰§è¡Œæ“ä½œä¹‹å‰ æˆ‘ä»¬ä¸å¿…è¿›è¡Œä»»ä½•æ£€æŸ¥ æ‰€æœ‰ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º <code>unknown</code> ä½†<code>unknown</code>ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™ <code>any</code> ç±»å‹å’Œ <code>unknown</code> ç±»å‹æœ¬èº« è€Œ <code>any</code> å•¥éƒ½èƒ½åˆ†é…å’Œè¢«åˆ†é…</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ value:Â unknown;</span><br><span class=\"line\"></span><br><span class=\"line\">valueÂ =Â true;Â //Â OK</span><br><span class=\"line\">valueÂ =Â 42;Â //Â OK</span><br><span class=\"line\">valueÂ =Â &quot;HelloÂ World&quot;;Â //Â OK</span><br><span class=\"line\">valueÂ =Â [];Â //Â OK</span><br><span class=\"line\">valueÂ =Â &#123;&#125;;Â //Â OK</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ value1:Â unknownÂ =Â value;Â //Â OK</span><br><span class=\"line\">letÂ value2:Â anyÂ =Â value;Â //Â OK</span><br><span class=\"line\">letÂ value3:Â booleanÂ =Â value;Â //Â Error</span><br><span class=\"line\">letÂ value4:Â numberÂ =Â value;Â //Â Error</span><br><span class=\"line\">letÂ value5:Â stringÂ =Â value;Â //Â Error</span><br><span class=\"line\">letÂ value6:Â objectÂ =Â value;Â //Â Error</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-11-void-ç±»å‹\"><a href=\"#2-11-void-ç±»å‹\" class=\"headerlink\" title=\"2.11 void ç±»å‹\"></a><strong>2.11 void ç±»å‹</strong></h5><p><code>void</code> è¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ TS ä¼šè®¤ä¸ºå®ƒçš„è¿”å›å€¼æ˜¯ <code>void</code> ç±»å‹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ hello(name:Â string):Â voidÂ &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-12-never-ç±»å‹\"><a href=\"#2-12-never-ç±»å‹\" class=\"headerlink\" title=\"2.12 never ç±»å‹\"></a><strong>2.12 never ç±»å‹</strong></h5><p><code>never</code> ä¸€èˆ¬è¡¨ç¤ºç”¨æˆ·æ— æ³•è¾¾åˆ°çš„ç±»å‹ ä¾‹å¦‚<code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ neverReach():Â neverÂ &#123;</span><br><span class=\"line\">Â Â throwÂ newÂ Error(&quot;anÂ error&quot;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒ:never å’Œ void çš„åŒºåˆ« void å¯ä»¥è¢«èµ‹å€¼ä¸º null å’Œ undefined çš„ç±»å‹ã€‚never åˆ™æ˜¯ä¸€ä¸ªä¸åŒ…å«å€¼çš„ç±»å‹ã€‚æ‹¥æœ‰ void è¿”å›å€¼ç±»å‹çš„å‡½æ•°èƒ½æ­£å¸¸è¿è¡Œã€‚æ‹¥æœ‰ never è¿”å›å€¼ç±»å‹çš„å‡½æ•°æ— æ³•æ­£å¸¸è¿”å›ï¼Œæ— æ³•ç»ˆæ­¢ï¼Œæˆ–ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<h5 id=\"2-13-BigInt-å¤§æ•°ç±»å‹\"><a href=\"#2-13-BigInt-å¤§æ•°ç±»å‹\" class=\"headerlink\" title=\"2.13 BigInt å¤§æ•°ç±»å‹\"></a><strong>2.13 BigInt å¤§æ•°ç±»å‹</strong></h5><p>ä½¿ç”¨ <code>BigInt</code> å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•° æˆ‘ä»¬åœ¨ä½¿ç”¨ <code>BigInt</code> çš„æ—¶å€™ å¿…é¡»æ·»åŠ  <code>ESNext</code> çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„ <code>libs</code> å­—æ®µåŠ ä¸Š<code>ESNext</code>è¦ä½¿ç”¨<code>1n</code>éœ€è¦ <code>&quot;target&quot;: &quot;ESNext&quot;number</code> å’Œ <code>BigInt</code> ç±»å‹ä¸ä¸€æ · ä¸å…¼å®¹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ max1Â =Â Number.MAX_SAFE_INTEGER;Â //Â 2**53-1</span><br><span class=\"line\">console.log(max1Â +Â 1Â ===Â max1Â +Â 2);Â //true</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ max2Â =Â BigInt(Number.MAX_SAFE_INTEGER);</span><br><span class=\"line\">console.log(max2Â +Â 1nÂ ===Â max2Â +Â 2n);Â //false</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ foo:Â number;</span><br><span class=\"line\">letÂ bar:Â bigint;</span><br><span class=\"line\">fooÂ =Â bar;Â //error</span><br><span class=\"line\">barÂ =Â foo;Â //error</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-14-object-Object-å’Œ-ç±»å‹\"><a href=\"#2-14-object-Object-å’Œ-ç±»å‹\" class=\"headerlink\" title=\"2.14 object, Object å’Œ {} ç±»å‹\"></a><strong>2.14 object, Object å’Œ {} ç±»å‹</strong></h5><p>ã€Œobjectã€ ç±»å‹ç”¨äºè¡¨ç¤ºéåŸå§‹ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ objectCase:Â object;</span><br><span class=\"line\">objectCaseÂ =Â 1;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â &quot;a&quot;;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â true;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â null;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â undefined;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â &#123;&#125;;Â //Â ok</span><br></pre></td></tr></table></figure>\n<p>ã€Œå¤§ Objectã€ ä»£è¡¨æ‰€æœ‰æ‹¥æœ‰ toStringã€hasOwnProperty æ–¹æ³•çš„ç±»å‹ æ‰€ä»¥æ‰€æœ‰åŸå§‹ç±»å‹ã€éåŸå§‹ç±»å‹éƒ½å¯ä»¥èµ‹ç»™ Object(ä¸¥æ ¼æ¨¡å¼ä¸‹ <code>null</code> å’Œ <code>undefined</code> ä¸å¯ä»¥)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ ObjectCase:Â Object;</span><br><span class=\"line\">ObjectCaseÂ =Â 1;Â //Â ok</span><br><span class=\"line\">ObjectCaseÂ =Â &quot;a&quot;;Â //Â ok</span><br><span class=\"line\">ObjectCaseÂ =Â true;Â //Â ok</span><br><span class=\"line\">ObjectCaseÂ =Â null;Â //Â error</span><br><span class=\"line\">ObjectCaseÂ =Â undefined;Â //Â error</span><br><span class=\"line\">ObjectCaseÂ =Â &#123;&#125;;Â //Â ok</span><br></pre></td></tr></table></figure>\n<p>ã€Œ{}ã€ ç©ºå¯¹è±¡ç±»å‹å’Œå¤§ Object ä¸€æ · ä¹Ÿæ˜¯è¡¨ç¤ºåŸå§‹ç±»å‹å’ŒéåŸå§‹ç±»å‹çš„é›†åˆ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ simpleCase:Â &#123;&#125;;</span><br><span class=\"line\">simpleCaseÂ =Â 1;Â //Â ok</span><br><span class=\"line\">simpleCaseÂ =Â &quot;a&quot;;Â //Â ok</span><br><span class=\"line\">simpleCaseÂ =Â true;Â //Â ok</span><br><span class=\"line\">simpleCaseÂ =Â null;Â //Â error</span><br><span class=\"line\">simpleCaseÂ =Â undefined;Â //Â error</span><br><span class=\"line\">simpleCaseÂ =Â &#123;&#125;;Â //Â ok</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-15-ç±»å‹æ¨è®º\"><a href=\"#2-15-ç±»å‹æ¨è®º\" class=\"headerlink\" title=\"2.15 ç±»å‹æ¨è®º\"></a><strong>2.15 ç±»å‹æ¨è®º</strong></h5><p>æŒ‡ç¼–ç¨‹è¯­è¨€ä¸­èƒ½å¤Ÿè‡ªåŠ¨æ¨å¯¼å‡ºå€¼çš„ç±»å‹çš„èƒ½åŠ› å®ƒæ˜¯ä¸€äº›å¼ºé™æ€ç±»å‹è¯­è¨€ä¸­å‡ºç°çš„ç‰¹æ€§ å®šä¹‰æ—¶æœªèµ‹å€¼å°±ä¼šæ¨è®ºæˆ <code>any</code> ç±»å‹ å¦‚æœå®šä¹‰çš„æ—¶å€™å°±èµ‹å€¼å°±èƒ½åˆ©ç”¨åˆ°ç±»å‹æ¨è®º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ flag;Â //æ¨æ–­ä¸ºany</span><br><span class=\"line\">letÂ countÂ =Â 123;Â //ä¸ºnumberç±»å‹</span><br><span class=\"line\">letÂ helloÂ =Â &quot;hello&quot;;Â //ä¸ºstringç±»å‹</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-16-è”åˆç±»å‹\"><a href=\"#2-16-è”åˆç±»å‹\" class=\"headerlink\" title=\"2.16 è”åˆç±»å‹\"></a><strong>2.16 è”åˆç±»å‹</strong></h5><p>è”åˆç±»å‹ï¼ˆUnion Typesï¼‰è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ æœªèµ‹å€¼æ—¶è”åˆç±»å‹ä¸Šåªèƒ½è®¿é—®ä¸¤ä¸ªç±»å‹å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ name:Â stringÂ |Â number;</span><br><span class=\"line\">console.log(name.toString());</span><br><span class=\"line\">nameÂ =Â 1;</span><br><span class=\"line\">console.log(name.toFixed(2));</span><br><span class=\"line\">nameÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">console.log(name.length);</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-17-ç±»å‹æ–­è¨€\"><a href=\"#2-17-ç±»å‹æ–­è¨€\" class=\"headerlink\" title=\"2.17 ç±»å‹æ–­è¨€\"></a><strong>2.17 ç±»å‹æ–­è¨€</strong></h5><p>æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” TypeScript æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚å…¶å®å°±æ˜¯ä½ éœ€è¦æ‰‹åŠ¨å‘Šè¯‰ ts å°±æŒ‰ç…§ä½ æ–­è¨€çš„é‚£ä¸ªç±»å‹é€šè¿‡ç¼–è¯‘ï¼ˆè¿™ä¸€æ‹›å¾ˆå…³é”® æœ‰æ—¶å€™å¯ä»¥å¸®åŠ©ä½ è§£å†³å¾ˆå¤šç¼–è¯‘æŠ¥é”™ï¼‰</p>\n<p>ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â å°–æ‹¬å·Â è¯­æ³•</span><br><span class=\"line\">letÂ someValue:Â anyÂ =Â &quot;thisÂ isÂ aÂ string&quot;;</span><br><span class=\"line\">letÂ strLength:Â numberÂ =Â (&lt;string&gt;someValue).length;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â asÂ è¯­æ³•</span><br><span class=\"line\">letÂ someValue:Â anyÂ =Â &quot;thisÂ isÂ aÂ string&quot;;</span><br><span class=\"line\">letÂ strLength:Â numberÂ =Â (someValueÂ asÂ string).length;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>ä»¥ä¸Šä¸¤ç§æ–¹å¼è™½ç„¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å°–æ‹¬å·æ ¼å¼ä¼šä¸ react ä¸­ JSX äº§ç”Ÿè¯­æ³•å†²çªï¼Œå› æ­¤æˆ‘ä»¬æ›´æ¨èä½¿ç”¨ as è¯­æ³•ã€‚</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>ã€Œéç©ºæ–­è¨€ã€åœ¨ä¸Šä¸‹æ–‡ä¸­å½“ç±»å‹æ£€æŸ¥å™¨æ— æ³•æ–­å®šç±»å‹æ—¶ ä¸€ä¸ªæ–°çš„åç¼€è¡¨è¾¾å¼æ“ä½œç¬¦ ! å¯ä»¥ç”¨äºæ–­è¨€æ“ä½œå¯¹è±¡æ˜¯é <code>null</code> å’Œé <code>undefined</code> ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ flag:Â nullÂ |Â undefinedÂ |Â string;</span><br><span class=\"line\">flag!.toString();Â //Â ok</span><br><span class=\"line\">flag.toString();Â //Â error</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-18-å­—é¢é‡ç±»å‹\"><a href=\"#2-18-å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"2.18 å­—é¢é‡ç±»å‹\"></a><strong>2.18 å­—é¢é‡ç±»å‹</strong></h5><p>åœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œå¯¹åº”çš„å­—ç¬¦ä¸²å­—é¢é‡ã€æ•°å­—å­—é¢é‡ã€å¸ƒå°”å­—é¢é‡åˆ†åˆ«æ‹¥æœ‰ä¸å…¶å€¼ä¸€æ ·çš„å­—é¢é‡ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ flag1:Â &quot;hello&quot;Â =Â &quot;hello&quot;;</span><br><span class=\"line\">letÂ flag2:Â 1Â =Â 1;</span><br><span class=\"line\">letÂ flag3:Â trueÂ =Â true;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-19-ç±»å‹åˆ«å\"><a href=\"#2-19-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"2.19 ç±»å‹åˆ«å\"></a><strong>2.19 ç±»å‹åˆ«å</strong></h5><p>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ flagÂ =Â stringÂ |Â number;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ hello(value:Â flag)Â &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-20-äº¤å‰ç±»å‹\"><a href=\"#2-20-äº¤å‰ç±»å‹\" class=\"headerlink\" title=\"2.20 äº¤å‰ç±»å‹\"></a><strong>2.20 äº¤å‰ç±»å‹</strong></h5><p>äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚é€šè¿‡ &amp; è¿ç®—ç¬¦å¯ä»¥å°†ç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Flag1Â =Â &#123;Â x:Â numberÂ &#125;;</span><br><span class=\"line\">typeÂ Flag2Â =Â Flag1Â &amp;Â &#123;Â y:Â stringÂ &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ flag3:Â Flag2Â =Â &#123;</span><br><span class=\"line\">Â Â x:Â 1,</span><br><span class=\"line\">Â Â y:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â henb,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-21-ç±»å‹ä¿æŠ¤\"><a href=\"#2-21-ç±»å‹ä¿æŠ¤\" class=\"headerlink\" title=\"2.21 ç±»å‹ä¿æŠ¤\"></a><strong>2.21 ç±»å‹ä¿æŠ¤</strong></h5><p>ç±»å‹ä¿æŠ¤å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œä»–ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™å°±èƒ½é€šè¿‡ç±»å‹ä¿¡æ¯ç¡®ä¿æŸä¸ªä½œç”¨åŸŸå†…å˜é‡çš„ç±»å‹ å…¶ä¸»è¦æ€æƒ³æ˜¯å°è¯•æ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹ï¼Œä»¥ç¡®å®šå¦‚ä½•å¤„ç†å€¼</p>\n<p>ã€Œtypeof ç±»å‹ä¿æŠ¤ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ double(input:Â stringÂ |Â numberÂ |Â boolean)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (typeofÂ inputÂ ===Â &quot;string&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ inputÂ +Â input;</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â ifÂ (typeofÂ inputÂ ===Â &quot;number&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â returnÂ inputÂ *Â 2;</span><br><span class=\"line\">Â Â Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â Â Â returnÂ !input;</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ã€Œin å…³é”®å­—ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ BirdÂ &#123;</span><br><span class=\"line\">Â Â fly:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">interfaceÂ DogÂ &#123;</span><br><span class=\"line\">Â Â leg:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ getNumber(value:Â BirdÂ |Â Dog)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (&quot;fly&quot;Â inÂ value)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ value.fly;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ value.leg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ã€Œinstanceof ç±»å‹ä¿æŠ¤ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â name!:Â string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ BirdÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â fly!:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ getName(animal:Â Animal)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (animalÂ instanceofÂ Bird)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(animal.fly);</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â console.log(animal.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ã€Œè‡ªå®šä¹‰ç±»å‹ä¿æŠ¤ã€</p>\n<p>é€šè¿‡ <code>type is xxx</code>è¿™æ ·çš„ç±»å‹è°“è¯æ¥è¿›è¡Œç±»å‹ä¿æŠ¤</p>\n<p>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ <code>value is object</code>å°±ä¼šè®¤ä¸ºå¦‚æœå‡½æ•°è¿”å› true é‚£ä¹ˆå®šä¹‰çš„ value å°±æ˜¯ object ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ isObject(value:Â unknown):Â valueÂ isÂ objectÂ &#123;</span><br><span class=\"line\">Â Â returnÂ typeofÂ valueÂ ===Â &quot;object&quot;Â &amp;&amp;Â valueÂ !==Â null;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ fn(x:Â stringÂ |Â object)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (isObject(x))Â &#123;</span><br><span class=\"line\">Â Â Â Â //Â ....</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â //Â .....</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-å‡½æ•°\"><a href=\"#3-å‡½æ•°\" class=\"headerlink\" title=\"3 å‡½æ•°\"></a><strong>3 å‡½æ•°</strong></h3><h5 id=\"3-1-å‡½æ•°çš„å®šä¹‰\"><a href=\"#3-1-å‡½æ•°çš„å®šä¹‰\" class=\"headerlink\" title=\"3.1 å‡½æ•°çš„å®šä¹‰\"></a><strong>3.1 å‡½æ•°çš„å®šä¹‰</strong></h5><p>å¯ä»¥æŒ‡å®šå‚æ•°çš„ç±»å‹å’Œè¿”å›å€¼çš„ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ hello(name:Â string):Â voidÂ &#123;</span><br><span class=\"line\">Â Â console.log(&quot;hello&quot;,Â name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">hello(&quot;hahaha&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-2-å‡½æ•°è¡¨è¾¾å¼\"><a href=\"#3-2-å‡½æ•°è¡¨è¾¾å¼\" class=\"headerlink\" title=\"3.2 å‡½æ•°è¡¨è¾¾å¼\"></a><strong>3.2 å‡½æ•°è¡¨è¾¾å¼</strong></h5><p>å®šä¹‰å‡½æ•°ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ SumFuncÂ =Â (x:Â number,Â y:Â number)Â =&gt;Â number;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ countNumber:Â SumFuncÂ =Â functionÂ (a,Â b)Â &#123;</span><br><span class=\"line\">Â Â returnÂ aÂ +Â b;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-3-å¯é€‰å‚æ•°\"><a href=\"#3-3-å¯é€‰å‚æ•°\" class=\"headerlink\" title=\"3.3 å¯é€‰å‚æ•°\"></a><strong>3.3 å¯é€‰å‚æ•°</strong></h5><p>åœ¨ TS ä¸­å‡½æ•°çš„å½¢å‚å’Œå®å‚å¿…é¡»ä¸€æ ·ï¼Œä¸ä¸€æ ·å°±è¦é…ç½®å¯é€‰å‚æ•°,è€Œä¸”å¿…é¡»æ˜¯ã€Œæœ€åä¸€ä¸ªå‚æ•°ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ print(name:Â string,Â age?:Â number):Â voidÂ &#123;</span><br><span class=\"line\">Â Â console.log(name,Â age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">print(&quot;hahaha&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-4-é»˜è®¤å‚æ•°\"><a href=\"#3-4-é»˜è®¤å‚æ•°\" class=\"headerlink\" title=\"3.4 é»˜è®¤å‚æ•°\"></a><strong>3.4 é»˜è®¤å‚æ•°</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ ajax(url:Â string,Â method:Â stringÂ =Â &quot;GET&quot;)Â &#123;</span><br><span class=\"line\">Â Â console.log(url,Â method);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&quot;/users&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-5-å‰©ä½™å‚æ•°\"><a href=\"#3-5-å‰©ä½™å‚æ•°\" class=\"headerlink\" title=\"3.5 å‰©ä½™å‚æ•°\"></a><strong>3.5 å‰©ä½™å‚æ•°</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ sum(...numbers:Â number[])Â &#123;</span><br><span class=\"line\">Â Â returnÂ numbers.reduce((val,Â item)Â =&gt;Â (valÂ +=Â item),Â 0);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(sum(1,Â 2,Â 3));</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-6-å‡½æ•°é‡è½½\"><a href=\"#3-6-å‡½æ•°é‡è½½\" class=\"headerlink\" title=\"3.6 å‡½æ•°é‡è½½\"></a><strong>3.6 å‡½æ•°é‡è½½</strong></h5><p>å‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚åœ¨ TypeScript ä¸­ï¼Œè¡¨ç°ä¸ºç»™åŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ obj:Â anyÂ =Â &#123;&#125;;</span><br><span class=\"line\">functionÂ attr(val:Â string):Â void;</span><br><span class=\"line\">functionÂ attr(val:Â number):Â void;</span><br><span class=\"line\">functionÂ attr(val:Â any):Â voidÂ &#123;</span><br><span class=\"line\">Â Â ifÂ (typeofÂ valÂ ===Â &quot;string&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â obj.nameÂ =Â val;</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â obj.ageÂ =Â val;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">attr(&quot;hahaha&quot;);</span><br><span class=\"line\">attr(9);</span><br><span class=\"line\">attr(true);</span><br><span class=\"line\">console.log(obj);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå‡½æ•°é‡è½½çœŸæ­£æ‰§è¡Œçš„æ˜¯åŒåå‡½æ•°æœ€åå®šä¹‰çš„å‡½æ•°ä½“ åœ¨æœ€åä¸€ä¸ªå‡½æ•°ä½“å®šä¹‰ä¹‹å‰å…¨éƒ½å±äºå‡½æ•°ç±»å‹å®šä¹‰ ä¸èƒ½å†™å…·ä½“çš„å‡½æ•°å®ç°æ–¹æ³• åªèƒ½å®šä¹‰ç±»å‹</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<h3 id=\"4-ç±»\"><a href=\"#4-ç±»\" class=\"headerlink\" title=\"4 ç±»\"></a><strong>4 ç±»</strong></h3><h5 id=\"4-1-ç±»çš„å®šä¹‰\"><a href=\"#4-1-ç±»çš„å®šä¹‰\" class=\"headerlink\" title=\"4.1 ç±»çš„å®šä¹‰\"></a><strong>4.1 ç±»çš„å®šä¹‰</strong></h5><p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Class</code> å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name!:Â string;Â //å¦‚æœåˆå§‹å±æ€§æ²¡èµ‹å€¼å°±éœ€è¦åŠ ä¸Š!</span><br><span class=\"line\">Â Â constructor(_name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â _name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getName():Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p1Â =Â newÂ Person(&quot;hello&quot;);</span><br><span class=\"line\">p1.getName();</span><br></pre></td></tr></table></figure>\n<p>å½“ç„¶ å¦‚æœæˆ‘ä»¬å›¾çœäº‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå±æ€§å®šä¹‰ç›´æ¥å†™åˆ°æ„é€ å‡½æ•°çš„å‚æ•°é‡Œé¢å»(ä¸è¿‡ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·å†™ å› ä¸ºä¼šè®©ä»£ç å¢åŠ é˜…è¯»éš¾åº¦)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â constructor(publicÂ name:Â string)Â &#123;&#125;</span><br><span class=\"line\">Â Â getName():Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p1Â =Â newÂ Person(&quot;hello&quot;);</span><br><span class=\"line\">p1.getName();</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»çš„æ—¶å€™,ä¼šå¾—åˆ° ã€Œ2 ä¸ªç±»å‹ã€ä¸€ä¸ªæ˜¯æ„é€ å‡½æ•°ç±»å‹çš„å‡½æ•°ç±»å‹(å½“åšæ™®é€šæ„é€ å‡½æ•°çš„ç±»å‹) å¦ä¸€ä¸ªæ˜¯ç±»çš„å®ä¾‹ç±»å‹ï¼ˆä»£è¡¨å®ä¾‹ï¼‰</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>å…·ä½“çœ‹ä¾‹å­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ ComponentÂ &#123;</span><br><span class=\"line\">Â Â staticÂ myName:Â stringÂ =Â &quot;é™æ€åç§°å±æ€§&quot;;</span><br><span class=\"line\">Â Â myName:Â stringÂ =Â &quot;å®ä¾‹åç§°å±æ€§&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//tsÂ ä¸€ä¸ªç±»å‹Â ä¸€ä¸ªå«å€¼</span><br><span class=\"line\">//æ”¾åœ¨=åé¢çš„æ˜¯å€¼</span><br><span class=\"line\">letÂ comÂ =Â Component;Â //è¿™é‡Œæ˜¯ä»£è¡¨æ„é€ å‡½æ•°</span><br><span class=\"line\">//å†’å·åé¢çš„æ˜¯ç±»å‹</span><br><span class=\"line\">letÂ c:Â ComponentÂ =Â newÂ Component();Â //è¿™é‡Œæ˜¯ä»£è¡¨å®ä¾‹ç±»å‹</span><br><span class=\"line\">letÂ f:Â typeofÂ ComponentÂ =Â com;</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-2-å­˜å–å™¨\"><a href=\"#4-2-å­˜å–å™¨\" class=\"headerlink\" title=\"4.2 å­˜å–å™¨\"></a><strong>4.2 å­˜å–å™¨</strong></h5><p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å­˜å–å™¨æ¥æ”¹å˜ä¸€ä¸ªç±»ä¸­å±æ€§çš„è¯»å–å’Œèµ‹å€¼è¡Œä¸º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ UserÂ &#123;</span><br><span class=\"line\">Â Â myname:Â string;</span><br><span class=\"line\">Â Â constructor(myname:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.mynameÂ =Â myname;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getÂ name()Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.myname;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â setÂ name(value)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.mynameÂ =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ userÂ =Â newÂ User(&quot;hello&quot;);</span><br><span class=\"line\">user.nameÂ =Â &quot;world&quot;;</span><br><span class=\"line\">console.log(user.name);</span><br></pre></td></tr></table></figure>\n<p>å…¶å®æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ç¿»è¯‘æˆ es5 çš„ä»£ç  åŸç†å¾ˆç®€å• å°±æ˜¯ä½¿ç”¨äº† Object.defineProperty åœ¨ç±»çš„åŸå‹ä¸Šé¢æ‹¦æˆªäº†å±æ€§å¯¹åº”çš„ get å’Œ set æ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">varÂ UserÂ =Â /**Â @classÂ */Â (functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â functionÂ User(myname)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.mynameÂ =Â myname;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â Object.defineProperty(User.prototype,Â &quot;name&quot;,Â &#123;</span><br><span class=\"line\">Â Â Â Â get:Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â returnÂ this.myname;</span><br><span class=\"line\">Â Â Â Â &#125;,</span><br><span class=\"line\">Â Â Â Â set:Â functionÂ (value)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â this.mynameÂ =Â value;</span><br><span class=\"line\">Â Â Â Â &#125;,</span><br><span class=\"line\">Â Â Â Â enumerable:Â false,</span><br><span class=\"line\">Â Â Â Â configurable:Â true,</span><br><span class=\"line\">Â Â &#125;);</span><br><span class=\"line\">Â Â returnÂ User;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\">varÂ userÂ =Â newÂ User(&quot;hello&quot;);</span><br><span class=\"line\">user.nameÂ =Â &quot;world&quot;;</span><br><span class=\"line\">console.log(user.name);</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-3-readonly-åªè¯»å±æ€§\"><a href=\"#4-3-readonly-åªè¯»å±æ€§\" class=\"headerlink\" title=\"4.3 readonly åªè¯»å±æ€§\"></a><strong>4.3 readonly åªè¯»å±æ€§</strong></h5><p>readonly ä¿®é¥°çš„å˜é‡åªèƒ½åœ¨ã€Œæ„é€ å‡½æ•°ã€ä¸­åˆå§‹åŒ– TypeScript çš„ç±»å‹ç³»ç»ŸåŒæ ·ä¹Ÿå…è®¸å°† interfaceã€typeã€ class ä¸Šçš„å±æ€§æ ‡è¯†ä¸º readonly readonly å®é™…ä¸Šåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œä»£ç æ£€æŸ¥ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â publicÂ readonlyÂ name:Â string;</span><br><span class=\"line\">Â Â constructor(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â changeName(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;Â //è¿™ä¸ªtsæ˜¯æŠ¥é”™çš„</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ aÂ =Â newÂ Animal(&quot;hello&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-4-ç»§æ‰¿\"><a href=\"#4-4-ç»§æ‰¿\" class=\"headerlink\" title=\"4.4 ç»§æ‰¿\"></a><strong>4.4 ç»§æ‰¿</strong></h5><p>å­ç±»ç»§æ‰¿çˆ¶ç±»åå­ç±»çš„å®ä¾‹å°±æ‹¥æœ‰äº†çˆ¶ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥å¢å¼ºä»£ç çš„å¯å¤ç”¨æ€§</p>\n<p>å°†å­ç±»å…¬ç”¨çš„æ–¹æ³•æŠ½è±¡å‡ºæ¥æ”¾åœ¨çˆ¶ç±»ä¸­ï¼Œè‡ªå·±çš„ç‰¹æ®Šé€»è¾‘æ”¾åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»çš„é€»è¾‘</p>\n<p>super å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸Šçš„æ–¹æ³•å’Œå±æ€§</p>\n<p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ extends å…³é”®å­—æ¥å®ç°ç»§æ‰¿</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;Â //å®šä¹‰å®ä¾‹çš„å±æ€§ï¼Œé»˜è®¤çœç•¥publicä¿®é¥°ç¬¦</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â //æ„é€ å‡½æ•°</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â Â Â this.ageÂ =Â age;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getName():Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â setName(name:Â string):Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ StudentÂ extendsÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â no:Â number;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number,Â no:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â super(name,Â age);</span><br><span class=\"line\">Â Â Â Â this.noÂ =Â no;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getNo():Â numberÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.no;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ s1Â =Â newÂ Student(&quot;hello&quot;,Â 10,Â 1);</span><br><span class=\"line\">console.log(s1);</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-5-ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦\"><a href=\"#4-5-ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦\" class=\"headerlink\" title=\"4.5 ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦\"></a><strong>4.5 ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦</strong></h5><p>ã€Œpublicã€ ç±»é‡Œé¢ å­ç±» å…¶å®ƒä»»ä½•åœ°æ–¹å¤–è¾¹éƒ½å¯ä»¥è®¿é—®ã€Œprotectedã€ ç±»é‡Œé¢ å­ç±» éƒ½å¯ä»¥è®¿é—®,å…¶å®ƒä»»ä½•åœ°æ–¹ä¸èƒ½è®¿é—®ã€Œprivateã€ ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œå­ç±»å’Œå…¶å®ƒä»»ä½•åœ°æ–¹éƒ½ä¸å¯ä»¥è®¿é—®</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ ParentÂ &#123;</span><br><span class=\"line\">Â Â publicÂ name:Â string;</span><br><span class=\"line\">Â Â protectedÂ age:Â number;</span><br><span class=\"line\">Â Â privateÂ car:Â number;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â //æ„é€ å‡½æ•°</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â Â Â this.ageÂ =Â age;</span><br><span class=\"line\">Â Â Â Â this.carÂ =Â car;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getName():Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â setName(name:Â string):Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ ChildÂ extendsÂ ParentÂ &#123;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â super(name,Â age,Â car);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â desc()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(`$&#123;this.name&#125;Â $&#123;this.age&#125;Â $&#123;this.car&#125;`);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ childÂ =Â newÂ Child(&quot;hello&quot;,Â 10,Â 1000);</span><br><span class=\"line\">console.log(child.name);</span><br><span class=\"line\">console.log(child.age);Â //ageè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™</span><br><span class=\"line\">console.log(child.car);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-6-é™æ€å±æ€§-é™æ€æ–¹æ³•\"><a href=\"#4-6-é™æ€å±æ€§-é™æ€æ–¹æ³•\" class=\"headerlink\" title=\"4.6 é™æ€å±æ€§ é™æ€æ–¹æ³•\"></a><strong>4.6 é™æ€å±æ€§ é™æ€æ–¹æ³•</strong></h5><p>ç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•æ˜¯ç›´æ¥å®šä¹‰åœ¨ç±»æœ¬èº«ä¸Šé¢çš„ æ‰€ä»¥ä¹Ÿåªèƒ½é€šè¿‡ç›´æ¥è°ƒç”¨ç±»çš„æ–¹æ³•å’Œå±æ€§æ¥è®¿é—®</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ ParentÂ &#123;</span><br><span class=\"line\">Â Â staticÂ mainNameÂ =Â &quot;Parent&quot;;</span><br><span class=\"line\">Â Â staticÂ getmainName()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this);Â //æ³¨æ„é™æ€æ–¹æ³•é‡Œé¢çš„thisæŒ‡å‘çš„æ˜¯ç±»æœ¬èº«Â è€Œä¸æ˜¯ç±»çš„å®ä¾‹å¯¹è±¡Â æ‰€ä»¥é™æ€æ–¹æ³•é‡Œé¢åªèƒ½è®¿é—®ç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•</span><br><span class=\"line\">Â Â Â Â returnÂ this.mainName;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â publicÂ name:Â string;</span><br><span class=\"line\">Â Â constructor(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â //æ„é€ å‡½æ•°</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(Parent.mainName);</span><br><span class=\"line\">console.log(Parent.getmainName());</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-7-æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\"><a href=\"#4-7-æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\" class=\"headerlink\" title=\"4.7 æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\"></a><strong>4.7 æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•</strong></h5><p>æŠ½è±¡ç±»ï¼Œæ— æ³•è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿å¹¶ä¸”æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹ å­ç±»å¯ä»¥å¯¹æŠ½è±¡ç±»è¿›è¡Œä¸åŒçš„å®ç°</p>\n<p>æŠ½è±¡æ–¹æ³•åªèƒ½å‡ºç°åœ¨æŠ½è±¡ç±»ä¸­å¹¶ä¸”æŠ½è±¡æ–¹æ³•ä¸èƒ½åœ¨æŠ½è±¡ç±»ä¸­è¢«å…·ä½“å®ç°ï¼Œåªèƒ½åœ¨æŠ½è±¡ç±»çš„å­ç±»ä¸­å®ç°ï¼ˆå¿…é¡»è¦å®ç°ï¼‰</p>\n<p>ä½¿ç”¨åœºæ™¯ï¼šæˆ‘ä»¬ä¸€èˆ¬ç”¨æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æŠ½ç¦»å‡ºäº‹ç‰©çš„å…±æ€§ ä»¥åæ‰€æœ‰ç»§æ‰¿çš„å­ç±»å¿…é¡»æŒ‰ç…§è§„èŒƒå»å®ç°è‡ªå·±çš„å…·ä½“é€»è¾‘ è¿™æ ·å¯ä»¥å¢åŠ ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§</p>\n<p>ä½¿ç”¨ <code>abstract</code> å…³é”®å­—æ¥å®šä¹‰æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abstractÂ classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â name!:Â string;</span><br><span class=\"line\">Â Â abstractÂ speak():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ CatÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â speak()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;å–µå–µå–µ&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ animalÂ =Â newÂ Animal();Â //ç›´æ¥æŠ¥é”™Â æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹</span><br><span class=\"line\">letÂ catÂ =Â newÂ Cat();</span><br><span class=\"line\">cat.speak();</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒ 1:é‡å†™(override)å’Œé‡è½½(overload)çš„åŒºåˆ«</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>ã€Œé‡å†™ã€æ˜¯æŒ‡å­ç±»é‡å†™ç»§æ‰¿è‡ªçˆ¶ç±»ä¸­çš„æ–¹æ³•ã€Œé‡è½½ã€æ˜¯æŒ‡ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªç±»å‹å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â speak(word:Â string):Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ &quot;åŠ¨ç‰©:&quot;Â +Â word;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ CatÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â speak(word:Â string):Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ &quot;çŒ«:&quot;Â +Â word;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ catÂ =Â newÂ Cat();</span><br><span class=\"line\">console.log(cat.speak(&quot;hello&quot;));</span><br><span class=\"line\">//Â ä¸Šé¢æ˜¯é‡å†™</span><br><span class=\"line\">//--------------------------------------------</span><br><span class=\"line\">//Â ä¸‹é¢æ˜¯é‡è½½</span><br><span class=\"line\">functionÂ double(val:Â number):Â number;</span><br><span class=\"line\">functionÂ double(val:Â string):Â string;</span><br><span class=\"line\">functionÂ double(val:Â any):Â anyÂ &#123;</span><br><span class=\"line\">Â Â ifÂ (typeofÂ valÂ ==Â &quot;number&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ valÂ *Â 2;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ valÂ +Â val;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ rÂ =Â double(1);</span><br><span class=\"line\">console.log(r);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒ 2:ä»€ä¹ˆæ˜¯ã€Œå¤šæ€ã€</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>åœ¨çˆ¶ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­æœ‰å¤šä¸ªå®ç°ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒçš„å¯¹è±¡æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œå®ç°è¿è¡Œæ—¶çš„ç»‘å®šã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abstractÂ classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â //Â å£°æ˜æŠ½è±¡çš„æ–¹æ³•ï¼Œè®©å­ç±»å»å®ç°</span><br><span class=\"line\">Â Â abstractÂ sleep():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ DogÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â sleep()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;dogÂ sleep&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ dogÂ =Â newÂ Dog();</span><br><span class=\"line\">classÂ CatÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â sleep()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;catÂ sleep&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ catÂ =Â newÂ Cat();</span><br><span class=\"line\">letÂ animals:Â Animal[]Â =Â [dog,Â cat];</span><br><span class=\"line\">animals.forEach((i)Â =&gt;Â &#123;</span><br><span class=\"line\">Â Â i.sleep();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-æ¥å£\"><a href=\"#5-æ¥å£\" class=\"headerlink\" title=\"5 æ¥å£\"></a><strong>5 æ¥å£</strong></h3><p>æ¥å£æ—¢å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æè¿°å¯¹è±¡çš„å½¢çŠ¶</p>\n<p>æˆ‘ä»¬ç”¨ <code>interface</code> å…³é”®å­—æ¥å®šä¹‰æ¥å£ åœ¨æ¥å£ä¸­å¯ä»¥ç”¨åˆ†å·æˆ–è€…é€—å·åˆ†å‰²æ¯ä¸€é¡¹ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸åŠ </p>\n<h5 id=\"5-1-å¯¹è±¡çš„å½¢çŠ¶\"><a href=\"#5-1-å¯¹è±¡çš„å½¢çŠ¶\" class=\"headerlink\" title=\"5.1 å¯¹è±¡çš„å½¢çŠ¶\"></a><strong>5.1 å¯¹è±¡çš„å½¢çŠ¶</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`</span><br><span class=\"line\">//æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`</span><br><span class=\"line\">interfaceÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speak():Â void;</span><br><span class=\"line\">Â Â readonlyÂ lng:Â string;Â //readonlyè¡¨ç¤ºåªè¯»å±æ€§Â åç»­ä¸å¯ä»¥æ›´æ”¹</span><br><span class=\"line\">Â Â name?:Â string;Â //ï¼Ÿè¡¨ç¤ºå¯é€‰å±æ€§</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ speakman:Â SpeakableÂ =Â &#123;</span><br><span class=\"line\">Â Â //Â Â Â speak()Â &#123;&#125;,Â //å°‘å±æ€§ä¼šæŠ¥é”™</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â lng:Â &quot;en&quot;,</span><br><span class=\"line\">Â Â age:Â 111,Â //å¤šå±æ€§ä¹Ÿä¼šæŠ¥é”™</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-2-è¡Œä¸ºçš„æŠ½è±¡\"><a href=\"#5-2-è¡Œä¸ºçš„æŠ½è±¡\" class=\"headerlink\" title=\"5.2 è¡Œä¸ºçš„æŠ½è±¡\"></a><strong>5.2 è¡Œä¸ºçš„æŠ½è±¡</strong></h5><p>æ¥å£å¯ä»¥æŠŠä¸€äº›ç±»ä¸­å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•æŠ½è±¡å‡ºæ¥,å¯ä»¥ç”¨æ¥çº¦æŸå®ç°æ­¤æ¥å£çš„ç±»</p>\n<p>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥è¢«å¤šä¸ªç±»å®ç°</p>\n<p>æˆ‘ä»¬ç”¨ <code>implements</code>å…³é”®å­—æ¥ä»£è¡¨ å®ç°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //æ¥å£å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡</span><br><span class=\"line\">interfaceÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speak():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interfaceÂ EatableÂ &#123;</span><br><span class=\"line\">Â Â eat():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</span><br><span class=\"line\">classÂ PersonÂ implementsÂ Speakable,Â EatableÂ &#123;</span><br><span class=\"line\">Â Â speak()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;Personè¯´è¯&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â //Â Â Â eat()Â &#123;&#125;Â //éœ€è¦å®ç°çš„æ¥å£åŒ…å«eatæ–¹æ³•Â ä¸å®ç°ä¼šæŠ¥é”™</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-3-å®šä¹‰ä»»æ„å±æ€§\"><a href=\"#5-3-å®šä¹‰ä»»æ„å±æ€§\" class=\"headerlink\" title=\"5.3 å®šä¹‰ä»»æ„å±æ€§\"></a><strong>5.3 å®šä¹‰ä»»æ„å±æ€§</strong></h5><p>å¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰æ¥å£çš„æ—¶å€™æ— æ³•é¢„å…ˆçŸ¥é“æœ‰å“ªäº›å±æ€§çš„æ—¶å€™,å¯ä»¥ä½¿ç”¨ <code>[propName:string]:any</code>,propName åå­—æ˜¯ä»»æ„çš„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â id:Â number;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â [propName:Â string]:Â any;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ p1Â =Â &#123;</span><br><span class=\"line\">Â Â id:Â 1,</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ªæ¥å£è¡¨ç¤º å¿…é¡»è¦æœ‰ id å’Œ name è¿™ä¸¤ä¸ªå­—æ®µ ç„¶åè¿˜å¯ä»¥æ–°åŠ å…¶ä½™çš„æœªçŸ¥å­—æ®µ</p>\n<h5 id=\"5-4-æ¥å£çš„ç»§æ‰¿\"><a href=\"#5-4-æ¥å£çš„ç»§æ‰¿\" class=\"headerlink\" title=\"5.4 æ¥å£çš„ç»§æ‰¿\"></a><strong>5.4 æ¥å£çš„ç»§æ‰¿</strong></h5><p>æˆ‘ä»¬é™¤äº†ç±»å¯ä»¥ç»§æ‰¿ æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿ åŒæ ·çš„ä½¿ç”¨ <code>extends</code>å…³é”®å­—</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speak():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interfaceÂ SpeakChineseÂ extendsÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speakChinese():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ PersonÂ implementsÂ SpeakChineseÂ &#123;</span><br><span class=\"line\">Â Â speak()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;Person&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â speakChinese()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;speakChinese&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-5-å‡½æ•°ç±»å‹æ¥å£\"><a href=\"#5-5-å‡½æ•°ç±»å‹æ¥å£\" class=\"headerlink\" title=\"5.5 å‡½æ•°ç±»å‹æ¥å£\"></a><strong>5.5 å‡½æ•°ç±»å‹æ¥å£</strong></h5><p>å¯ä»¥ç”¨æ¥å£æ¥å®šä¹‰å‡½æ•°ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ discountÂ &#123;</span><br><span class=\"line\">Â Â (price:Â number):Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ cost:Â discountÂ =Â functionÂ (price:Â number):Â numberÂ &#123;</span><br><span class=\"line\">Â Â returnÂ priceÂ *Â 0.8;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-6-æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£\"><a href=\"#5-6-æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£\" class=\"headerlink\" title=\"5.6 æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£\"></a><strong>5.6 æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£</strong></h5><p>ä½¿ç”¨ç‰¹æ®Šçš„ new()å…³é”®å­—æ¥æè¿°ç±»çš„æ„é€ å‡½æ•°ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â constructor(publicÂ name:Â string)Â &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//ä¸åŠ newæ˜¯ä¿®é¥°å‡½æ•°çš„,åŠ newæ˜¯ä¿®é¥°ç±»çš„</span><br><span class=\"line\">interfaceÂ WithNameClassÂ &#123;</span><br><span class=\"line\">Â Â newÂ (name:Â string):Â Animal;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ createAnimal(clazz:Â WithNameClass,Â name:Â string)Â &#123;</span><br><span class=\"line\">Â Â returnÂ newÂ clazz(name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ aÂ =Â createAnimal(Animal,Â &quot;hello&quot;);</span><br><span class=\"line\">console.log(a.name);</span><br></pre></td></tr></table></figure>\n<p>å…¶å®è¿™æ ·çš„ç”¨æ³•ä¸€èˆ¬å‡ºç°åœ¨ å½“æˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ªç±»ä½œä¸ºå‚æ•°çš„æ—¶å€™ æˆ‘ä»¬éœ€è¦å¯¹ä¼ å…¥çš„ç±»çš„æ„é€ å‡½æ•°ç±»å‹è¿›è¡Œçº¦æŸ æ‰€ä»¥éœ€è¦ä½¿ç”¨ new å…³é”®å­—ä»£è¡¨æ˜¯ç±»çš„æ„é€ å‡½æ•°ç±»å‹ ç”¨ä»¥å’Œæ™®é€šå‡½æ•°è¿›è¡ŒåŒºåˆ†</p>\n<hr>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒï¼šæ¥å£å’Œç±»å‹åˆ«åçš„åŒºåˆ« è¿™ä¸ªé¢˜ç›®æ˜¯ç»å…¸çš„ ã€Œts é¢è¯•é¢˜ã€</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>å®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹ä½¿ç”¨æ¥å£ç±»å‹å’Œç±»å‹åˆ«åçš„æ•ˆæœç­‰ä»·ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹å®šçš„åœºæ™¯ä¸‹è¿™ä¸¤è€…è¿˜æ˜¯å­˜åœ¨å¾ˆå¤§åŒºåˆ«ã€‚</p>\n<p>1.åŸºç¡€æ•°æ®ç±»å‹ ä¸æ¥å£ä¸åŒï¼Œç±»å‹åˆ«åè¿˜å¯ä»¥ç”¨äºå…¶ä»–ç±»å‹ï¼Œå¦‚åŸºæœ¬ç±»å‹ï¼ˆåŸå§‹å€¼ï¼‰ã€è”åˆç±»å‹ã€å…ƒç»„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â primitive</span><br><span class=\"line\">typeÂ NameÂ =Â string;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â union</span><br><span class=\"line\">typeÂ PartialPointÂ =Â PartialPointXÂ |Â PartialPointY;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â tuple</span><br><span class=\"line\">typeÂ DataÂ =Â [number,Â string];</span><br><span class=\"line\"></span><br><span class=\"line\">//Â dom</span><br><span class=\"line\">letÂ divÂ =Â document.createElement(&quot;div&quot;);</span><br><span class=\"line\">typeÂ BÂ =Â typeofÂ div;</span><br></pre></td></tr></table></figure>\n<p>2.é‡å¤å®šä¹‰</p>\n<p>æ¥å£å¯ä»¥å®šä¹‰å¤šæ¬¡ ä¼šè¢«è‡ªåŠ¨åˆå¹¶ä¸ºå•ä¸ªæ¥å£ ç±»å‹åˆ«åä¸å¯ä»¥é‡å¤å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PointÂ &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interfaceÂ PointÂ &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">constÂ point:Â PointÂ =Â &#123;Â x:Â 1,Â y:Â 2Â &#125;;</span><br></pre></td></tr></table></figure>\n<p>3.æ‰©å±• æ¥å£å¯ä»¥æ‰©å±•ç±»å‹åˆ«åï¼ŒåŒç†ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ‰©å±•æ¥å£ã€‚ä½†æ˜¯ä¸¤è€…å®ç°æ‰©å±•çš„æ–¹å¼ä¸åŒ</p>\n<p>æ¥å£çš„æ‰©å±•å°±æ˜¯ç»§æ‰¿ï¼Œé€šè¿‡ extends æ¥å®ç°ã€‚ç±»å‹åˆ«åçš„æ‰©å±•å°±æ˜¯äº¤å‰ç±»å‹ï¼Œé€šè¿‡ &amp; æ¥å®ç°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â æ¥å£æ‰©å±•æ¥å£</span><br><span class=\"line\">interfaceÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">interfaceÂ PointÂ extendsÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//Â ----</span><br><span class=\"line\">//Â ç±»å‹åˆ«åæ‰©å±•ç±»å‹åˆ«å</span><br><span class=\"line\">typeÂ PointXÂ =Â &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ PointÂ =Â PointXÂ &amp;Â &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">//Â ----</span><br><span class=\"line\">//Â æ¥å£æ‰©å±•ç±»å‹åˆ«å</span><br><span class=\"line\">typeÂ PointXÂ =Â &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">interfaceÂ PointÂ extendsÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//Â ----</span><br><span class=\"line\">//Â ç±»å‹åˆ«åæ‰©å±•æ¥å£</span><br><span class=\"line\">interfaceÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">typeÂ PointÂ =Â PointXÂ &amp;Â &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>4.å®ç° è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šæƒ…å†µ ç±»æ— æ³•å®ç°å®šä¹‰äº†è”åˆç±»å‹çš„ç±»å‹åˆ«å</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ PartialPointÂ =Â &#123;Â x:Â numberÂ &#125;Â |Â &#123;Â y:Â numberÂ &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â AÂ classÂ canÂ onlyÂ implementÂ anÂ objectÂ typeÂ or</span><br><span class=\"line\">//Â intersectionÂ ofÂ objectÂ typesÂ withÂ staticallyÂ knownÂ members.</span><br><span class=\"line\">classÂ SomePartialPointÂ implementsÂ PartialPointÂ &#123;</span><br><span class=\"line\">Â Â //Â Error</span><br><span class=\"line\">Â Â xÂ =Â 1;</span><br><span class=\"line\">Â Â yÂ =Â 2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-æ³›å‹\"><a href=\"#6-æ³›å‹\" class=\"headerlink\" title=\"6 æ³›å‹\"></a><strong>6 æ³›å‹</strong></h3><p>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§</p>\n<p>ä¸ºäº†æ›´å¥½çš„äº†è§£æ³›å‹çš„ä½œç”¨ æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ createArray(length:Â number,Â value:Â any):Â any[]Â &#123;</span><br><span class=\"line\">Â Â letÂ resultÂ =Â [];</span><br><span class=\"line\">Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â result[i]Â =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ result;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">createArray(3,Â &quot;x&quot;);Â //Â [&apos;x&apos;,Â &apos;x&apos;,Â &apos;x&apos;]</span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¿°è¿™æ®µä»£ç ç”¨æ¥ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º length å€¼ä¸º value çš„æ•°ç»„ ä½†æ˜¯æˆ‘ä»¬å…¶å®å¯ä»¥å‘ç°ä¸€ä¸ªé—®é¢˜ ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹çš„ value è¿”å›å€¼çš„æ•°ç»„æ°¸è¿œæ˜¯ any ç±»å‹ å¦‚æœæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ æˆ‘ä»¬é¢„å…ˆä¸çŸ¥é“ä¼šä¼ å…¥ä»€ä¹ˆç±»å‹ ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹ æˆ‘ä»¬çš„è¿”å›çš„æ•°ç»„çš„æŒ‡é‡Œé¢çš„ç±»å‹åº”è¯¥å’Œå‚æ•°ä¿æŒä¸€è‡´ é‚£ä¹ˆè¿™æ—¶å€™ æ³›å‹å°±ç™»åœºäº†</p>\n<p>ä½¿ç”¨ã€Œæ³›å‹ã€æ”¹é€ </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ createArray&lt;T&gt;(length:Â number,Â value:Â T):Â Array&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â letÂ result:Â T[]Â =Â [];</span><br><span class=\"line\">Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â result[i]Â =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ result;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">createArray&lt;string&gt;(3,Â &quot;x&quot;);Â //Â [&apos;x&apos;,Â &apos;x&apos;,Â &apos;x&apos;]</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;&gt;çš„å†™æ³• ç„¶åå†é¢ä¼ å…¥ä¸€ä¸ªå˜é‡ T ç”¨æ¥è¡¨ç¤ºåç»­å‡½æ•°éœ€è¦ç”¨åˆ°çš„ç±»å‹ å½“æˆ‘ä»¬çœŸæ­£å»è°ƒç”¨å‡½æ•°çš„æ—¶å€™å†ä¼ å…¥ T çš„ç±»å‹å°±å¯ä»¥è§£å†³å¾ˆå¤šé¢„å…ˆæ— æ³•ç¡®å®šç±»å‹ç›¸å…³çš„é—®é¢˜</p>\n<h5 id=\"6-1-å¤šä¸ªç±»å‹å‚æ•°\"><a href=\"#6-1-å¤šä¸ªç±»å‹å‚æ•°\" class=\"headerlink\" title=\"6.1 å¤šä¸ªç±»å‹å‚æ•°\"></a><strong>6.1 å¤šä¸ªç±»å‹å‚æ•°</strong></h5><p>å¦‚æœæˆ‘ä»¬éœ€è¦æœ‰å¤šä¸ªæœªçŸ¥çš„ç±»å‹å ä½ é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»»ä½•çš„å­—æ¯æ¥è¡¨ç¤ºä¸åŒçš„ç±»å‹å‚æ•°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ swap&lt;T,Â U&gt;(tuple:Â [T,Â U]):Â [U,Â T]Â &#123;</span><br><span class=\"line\">Â Â returnÂ [tuple[1],Â tuple[0]];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">swap([7,Â &quot;seven&quot;]);Â //Â [&apos;seven&apos;,Â 7]</span><br></pre></td></tr></table></figure>\n<h5 id=\"6-2-æ³›å‹çº¦æŸ\"><a href=\"#6-2-æ³›å‹çº¦æŸ\" class=\"headerlink\" title=\"6.2 æ³›å‹çº¦æŸ\"></a><strong>6.2 æ³›å‹çº¦æŸ</strong></h5><p>åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹å˜é‡çš„æ—¶å€™ï¼Œç”±äºäº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±æ€§æˆ–æ–¹æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ loggingIdentity&lt;T&gt;(arg:Â T):Â TÂ &#123;</span><br><span class=\"line\">Â Â console.log(arg.length);</span><br><span class=\"line\">Â Â returnÂ arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â index.ts(2,19):Â errorÂ TS2339:Â PropertyÂ &apos;length&apos;Â doesÂ notÂ existÂ onÂ typeÂ &apos;T&apos;.</span><br></pre></td></tr></table></figure>\n<p>ä¸Šä¾‹ä¸­ï¼Œæ³›å‹ T ä¸ä¸€å®šåŒ…å«å±æ€§ lengthï¼Œæ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™äº†ã€‚</p>\n<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ³›å‹è¿›è¡Œçº¦æŸï¼Œåªå…è®¸è¿™ä¸ªå‡½æ•°ä¼ å…¥é‚£äº›åŒ…å« length å±æ€§çš„å˜é‡ã€‚è¿™å°±æ˜¯ã€Œæ³›å‹çº¦æŸã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ LengthwiseÂ &#123;</span><br><span class=\"line\">Â Â length:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ loggingIdentity&lt;TÂ extendsÂ Lengthwise&gt;(arg:Â T):Â TÂ &#123;</span><br><span class=\"line\">Â Â console.log(arg.length);</span><br><span class=\"line\">Â Â returnÂ arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šæˆ‘ä»¬åœ¨æ³›å‹é‡Œé¢ä½¿ç”¨<code>extends</code>å…³é”®å­—ä»£è¡¨çš„æ˜¯æ³›å‹çº¦æŸ éœ€è¦å’Œç±»çš„ç»§æ‰¿åŒºåˆ†å¼€</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<h5 id=\"6-3-æ³›å‹æ¥å£\"><a href=\"#6-3-æ³›å‹æ¥å£\" class=\"headerlink\" title=\"6.3 æ³›å‹æ¥å£\"></a><strong>6.3 æ³›å‹æ¥å£</strong></h5><p>å®šä¹‰æ¥å£çš„æ—¶å€™ä¹Ÿå¯ä»¥æŒ‡å®šæ³›å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ Cart&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â list:Â T[];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ cart:Â Cart&lt;&#123;Â name:Â string;Â price:Â numberÂ &#125;&gt;Â =Â &#123;</span><br><span class=\"line\">Â Â list:Â [&#123;Â name:Â &quot;hello&quot;,Â price:Â 10Â &#125;],</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">console.log(cart.list[0].name,Â cart.list[0].price);</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å®šä¹‰äº†æ¥å£ä¼ å…¥çš„ç±»å‹ T ä¹‹åè¿”å›çš„å¯¹è±¡æ•°ç»„é‡Œé¢ T å°±æ˜¯å½“æ—¶ä¼ å…¥çš„å‚æ•°ç±»å‹</p>\n<h5 id=\"6-4-æ³›å‹ç±»\"><a href=\"#6-4-æ³›å‹ç±»\" class=\"headerlink\" title=\"6.4 æ³›å‹ç±»\"></a><strong>6.4 æ³›å‹ç±»</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ MyArray&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â privateÂ list:Â T[]Â =Â [];</span><br><span class=\"line\">Â Â add(value:Â T)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.list.push(value);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getMax():Â TÂ &#123;</span><br><span class=\"line\">Â Â Â Â letÂ resultÂ =Â this.list[0];</span><br><span class=\"line\">Â Â Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â this.list.length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â ifÂ (this.list[i]Â &gt;Â result)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â resultÂ =Â this.list[i];</span><br><span class=\"line\">Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â returnÂ result;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ arrÂ =Â newÂ MyArray();</span><br><span class=\"line\">arr.add(1);</span><br><span class=\"line\">arr.add(2);</span><br><span class=\"line\">arr.add(3);</span><br><span class=\"line\">letÂ retÂ =Â arr.getMax();</span><br><span class=\"line\">console.log(ret);</span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¯‰ä¾‹å­æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåœ¨æ•°ç»„é‡Œé¢æ·»åŠ æ•°å­—å¹¶ä¸”è·å–æœ€å¤§å€¼çš„æ³›å‹ç±»</p>\n<h5 id=\"6-5-æ³›å‹ç±»å‹åˆ«å\"><a href=\"#6-5-æ³›å‹ç±»å‹åˆ«å\" class=\"headerlink\" title=\"6.5 æ³›å‹ç±»å‹åˆ«å\"></a><strong>6.5 æ³›å‹ç±»å‹åˆ«å</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Cart&lt;T&gt;Â =Â &#123;Â list:Â T[]Â &#125;Â |Â T[];</span><br><span class=\"line\">letÂ c1:Â Cart&lt;string&gt;Â =Â &#123;Â list:Â [&quot;1&quot;]Â &#125;;</span><br><span class=\"line\">letÂ c2:Â Cart&lt;number&gt;Â =Â [1];</span><br></pre></td></tr></table></figure>\n<h5 id=\"6-6-æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹\"><a href=\"#6-6-æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹\" class=\"headerlink\" title=\"6.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹\"></a><strong>6.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹</strong></h5><p>æˆ‘ä»¬å¯ä»¥ä¸ºæ³›å‹ä¸­çš„ç±»å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰åœ¨ä»£ç ä¸­ç›´æ¥æŒ‡å®šç±»å‹å‚æ•°ï¼Œä»å®é™…å€¼å‚æ•°ä¸­ä¹Ÿæ— æ³•æ¨æµ‹å‡ºæ—¶ï¼Œè¿™ä¸ªé»˜è®¤ç±»å‹å°±ä¼šèµ·ä½œç”¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ createArray&lt;TÂ =Â string&gt;(length:Â number,Â value:Â T):Â Array&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â letÂ result:Â T[]Â =Â [];</span><br><span class=\"line\">Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â result[i]Â =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"7-å®ç”¨æŠ€å·§\"><a href=\"#7-å®ç”¨æŠ€å·§\" class=\"headerlink\" title=\"7 å®ç”¨æŠ€å·§\"></a><strong>7 å®ç”¨æŠ€å·§</strong></h3><h5 id=\"7-1-typeof-å…³é”®è¯\"><a href=\"#7-1-typeof-å…³é”®è¯\" class=\"headerlink\" title=\"7.1 typeof å…³é”®è¯\"></a><strong>7.1 typeof å…³é”®è¯</strong></h5><p><code>typeof</code> å…³é”®è¯é™¤äº†åšç±»å‹ä¿æŠ¤ è¿˜å¯ä»¥ä»å®ç°æ¨å‡ºç±»å‹ï¼Œ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //å…ˆå®šä¹‰å˜é‡ï¼Œå†å®šä¹‰ç±»å‹</span><br><span class=\"line\">letÂ p1Â =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">typeÂ PeopleÂ =Â typeofÂ p1;</span><br><span class=\"line\">functionÂ getName(p:Â People):Â stringÂ &#123;</span><br><span class=\"line\">Â Â returnÂ p.name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getName(p1);</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨ typeof è·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹</p>\n<h5 id=\"7-2-keyof-å…³é”®è¯\"><a href=\"#7-2-keyof-å…³é”®è¯\" class=\"headerlink\" title=\"7.2 keyof å…³é”®è¯\"></a><strong>7.2 keyof å…³é”®è¯</strong></h5><p><code>keyof</code> å¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æ¥å£çš„æ‰€æœ‰ key å€¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//typeÂ PersonKeyÂ =Â &apos;name&apos;|&apos;age&apos;|&apos;gender&apos;;</span><br><span class=\"line\">typeÂ PersonKeyÂ =Â keyofÂ Person;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ getValueByKey(p:Â Person,Â key:Â PersonKey)Â &#123;</span><br><span class=\"line\">Â Â returnÂ p[key];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ valÂ =Â getValueByKey(&#123;Â name:Â &quot;hello&quot;,Â age:Â 10,Â gender:Â &quot;male&quot;Â &#125;,Â &quot;name&quot;);</span><br><span class=\"line\">console.log(val);</span><br></pre></td></tr></table></figure>\n<h5 id=\"7-3-ç´¢å¼•è®¿é—®æ“ä½œç¬¦\"><a href=\"#7-3-ç´¢å¼•è®¿é—®æ“ä½œç¬¦\" class=\"headerlink\" title=\"7.3 ç´¢å¼•è®¿é—®æ“ä½œç¬¦\"></a><strong>7.3 ç´¢å¼•è®¿é—®æ“ä½œç¬¦</strong></h5><p>ä½¿ç”¨ [] æ“ä½œç¬¦å¯ä»¥è¿›è¡Œç´¢å¼•è®¿é—®</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ xÂ =Â Person[&quot;name&quot;];Â //Â xÂ isÂ string</span><br></pre></td></tr></table></figure>\n<h5 id=\"7-4-æ˜ å°„ç±»å‹-in\"><a href=\"#7-4-æ˜ å°„ç±»å‹-in\" class=\"headerlink\" title=\"7.4 æ˜ å°„ç±»å‹ in\"></a><strong>7.4 æ˜ å°„ç±»å‹ in</strong></h5><p>åœ¨å®šä¹‰çš„æ—¶å€™ç”¨ in æ“ä½œç¬¦å»æ‰¹é‡å®šä¹‰ç±»å‹ä¸­çš„å±æ€§</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//æ‰¹é‡æŠŠä¸€ä¸ªæ¥å£ä¸­çš„å±æ€§éƒ½å˜æˆå¯é€‰çš„</span><br><span class=\"line\">typeÂ PartPersonÂ =Â &#123;</span><br><span class=\"line\">Â Â [KeyÂ inÂ keyofÂ Person]?:Â Person[Key];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ p1:Â PartPersonÂ =Â &#123;&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"7-5-infer-å…³é”®å­—\"><a href=\"#7-5-infer-å…³é”®å­—\" class=\"headerlink\" title=\"7.5 infer å…³é”®å­—\"></a><strong>7.5 infer å…³é”®å­—</strong></h5><p>åœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ ReturnType&lt;T&gt;Â =Â TÂ extendsÂ (...args:Â any[])Â =&gt;Â inferÂ RÂ ?Â RÂ :Â any;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä»£ç ä¸­ infer R å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚</p>\n<h5 id=\"7-6-å†…ç½®å·¥å…·ç±»å‹\"><a href=\"#7-6-å†…ç½®å·¥å…·ç±»å‹\" class=\"headerlink\" title=\"7.6 å†…ç½®å·¥å…·ç±»å‹\"></a><strong>7.6 å†…ç½®å·¥å…·ç±»å‹</strong></h5><ol>\n<li>Exclude&lt;T,U&gt; ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æ’é™¤ U</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Exclude&lt;T,Â U&gt;Â =Â TÂ extendsÂ UÂ ?Â neverÂ :Â T;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ EÂ =Â Exclude&lt;stringÂ |Â number,Â string&gt;;</span><br><span class=\"line\">letÂ e:Â EÂ =Â 10;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>Extract&lt;T,U&gt; ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æå– U</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Extract&lt;T,Â U&gt;Â =Â TÂ extendsÂ UÂ ?Â TÂ :Â never;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ EÂ =Â Extract&lt;stringÂ |Â number,Â string&gt;;</span><br><span class=\"line\">letÂ e:Â EÂ =Â &quot;1&quot;;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>NonNullableä» T ä¸­æ’é™¤ <code>null</code> å’Œ <code>undefined</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ NonNullable&lt;T&gt;Â =Â TÂ extendsÂ nullÂ |Â undefinedÂ ?Â neverÂ :Â T;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ EÂ =Â NonNullable&lt;stringÂ |Â numberÂ |Â nullÂ |Â undefined&gt;;</span><br><span class=\"line\">letÂ e:Â EÂ =Â null;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>ReturnType<code>infer</code> æœ€æ—©å‡ºç°åœ¨æ­¤ PR ä¸­ï¼Œè¡¨ç¤ºåœ¨ <code>extends</code> æ¡ä»¶è¯­å¥ä¸­å¾…æ¨æ–­çš„ç±»å‹å˜é‡</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ ReturnType&lt;TÂ extendsÂ (...args:Â any[])Â =&gt;Â any&gt;Â =Â TÂ extendsÂ (</span><br><span class=\"line\">Â Â ...args:Â any[]</span><br><span class=\"line\">)Â =&gt;Â inferÂ R</span><br><span class=\"line\">Â Â ?Â R</span><br><span class=\"line\">Â Â :Â any;</span><br><span class=\"line\">functionÂ getUserInfo()Â &#123;</span><br><span class=\"line\">Â Â returnÂ &#123;Â name:Â &quot;hello&quot;,Â age:Â 10Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â é€šè¿‡Â ReturnTypeÂ å°†Â getUserInfoÂ çš„è¿”å›å€¼ç±»å‹èµ‹ç»™äº†Â UserInfo</span><br><span class=\"line\">typeÂ UserInfoÂ =Â ReturnType&lt;typeofÂ getUserInfo&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ userA:Â UserInfoÂ =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>å¯è§ è¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„è¿”å›ç±»å‹</p>\n<ol start=\"5\">\n<li>Parametersè¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„å‚æ•°ç±»å‹</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Parameters&lt;T&gt;Â =Â TÂ extendsÂ (...args:Â inferÂ R)Â =&gt;Â anyÂ ?Â RÂ :Â any;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ T0Â =Â Parameters&lt;()Â =&gt;Â string&gt;;Â //Â []</span><br><span class=\"line\">typeÂ T1Â =Â Parameters&lt;(s:Â string)Â =&gt;Â void&gt;;Â //Â [string]</span><br><span class=\"line\">typeÂ T2Â =Â Parameters&lt;&lt;T&gt;(arg:Â T)Â =&gt;Â T&gt;;Â //Â [unknown]</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>PartialPartial å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ç”±éå¯é€‰å˜ä¸ºå¯é€‰</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Partial&lt;T&gt;Â =Â &#123;Â [PÂ inÂ keyofÂ T]?:Â T[P]Â &#125;;</span><br><span class=\"line\">interfaceÂ AÂ &#123;</span><br><span class=\"line\">Â Â a1:Â string;</span><br><span class=\"line\">Â Â a2:Â number;</span><br><span class=\"line\">Â Â a3:Â boolean;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">typeÂ aPartialÂ =Â Partial&lt;A&gt;;</span><br><span class=\"line\">constÂ a:Â aPartialÂ =Â &#123;&#125;;Â //Â ä¸ä¼šæŠ¥é”™</span><br></pre></td></tr></table></figure>\n<ol start=\"7\">\n<li>RequiredRequired å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ä¸­çš„å¯é€‰é¡¹å˜ä¸ºå¿…é€‰é¡¹ï¼Œè¿™é‡Œç”¨äº† -? ä¿®é¥°ç¬¦æ¥å®ç°ã€‚</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender?:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/**</span><br><span class=\"line\">*Â typeÂ Required&lt;T&gt;Â =Â &#123;Â [PÂ inÂ keyofÂ T]-?:Â T[P]Â &#125;;</span><br><span class=\"line\">*/</span><br><span class=\"line\">letÂ p:Â Required&lt;Person&gt;Â =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"8\">\n<li>ReadonlyReadonly é€šè¿‡ä¸ºä¼ å…¥çš„å±æ€§æ¯ä¸€é¡¹éƒ½åŠ ä¸Š readonly ä¿®é¥°ç¬¦æ¥å®ç°ã€‚</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender?:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//typeÂ Readonly&lt;T&gt;Â =Â &#123;Â readonlyÂ [PÂ inÂ keyofÂ T]:Â T[P]Â &#125;;</span><br><span class=\"line\">letÂ p:Â Readonly&lt;Person&gt;Â =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">p.ageÂ =Â 11;Â //error</span><br></pre></td></tr></table></figure>\n<ol start=\"9\">\n<li>Pick&lt;T,K&gt; Pick èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ä»ä¼ å…¥çš„å±æ€§ä¸­æ‘˜å–æŸäº›è¿”å›</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ TodoÂ &#123;</span><br><span class=\"line\">Â Â title:Â string;</span><br><span class=\"line\">Â Â description:Â string;</span><br><span class=\"line\">Â Â done:Â boolean;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/**</span><br><span class=\"line\">*Â FromÂ TÂ pickÂ aÂ setÂ ofÂ propertiesÂ K</span><br><span class=\"line\">*Â typeÂ Pick&lt;T,Â KÂ extendsÂ keyofÂ T&gt;Â =Â &#123;Â [PÂ inÂ K]:Â T[P]Â &#125;;</span><br><span class=\"line\">*/</span><br><span class=\"line\">typeÂ TodoBaseÂ =Â Pick&lt;Todo,Â &quot;title&quot;Â |Â &quot;done&quot;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â =</span><br><span class=\"line\">typeÂ TodoBaseÂ =Â &#123;</span><br><span class=\"line\">Â Â title:Â string;</span><br><span class=\"line\">Â Â done:Â boolean;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"10\">\n<li>Record&lt;K,T&gt; æ„é€ ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å…·æœ‰ä¸€ç»„å±æ€§ Kï¼Œæ¯ä¸ªå±æ€§çš„ç±»å‹ä¸º Tã€‚å¯ç”¨äºå°†ä¸€ä¸ªç±»å‹çš„å±æ€§æ˜ å°„ä¸ºå¦ä¸€ä¸ªç±»å‹ã€‚Record åé¢çš„æ³›å‹å°±æ˜¯å¯¹è±¡é”®å’Œå€¼çš„ç±»å‹ã€‚</li>\n</ol>\n<p>ç®€å•ç†è§£ï¼šK å¯¹åº”å¯¹åº”çš„ keyï¼ŒT å¯¹åº”å¯¹è±¡çš„ valueï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªå£°æ˜å¥½çš„å¯¹è±¡ ä½†æ˜¯ K å¯¹åº”çš„æ³›å‹çº¦æŸæ˜¯<code>keyof any</code> ä¹Ÿå°±æ„å‘³ç€åªèƒ½ä¼ å…¥ <code>string|number|symbol</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â typeÂ Record&lt;KÂ extendsÂ keyofÂ any,Â T&gt;Â =Â &#123;</span><br><span class=\"line\">//Â [PÂ inÂ K]:Â T;</span><br><span class=\"line\">//Â &#125;;</span><br><span class=\"line\">typeÂ PointÂ =Â &quot;x&quot;Â |Â &quot;y&quot;;</span><br><span class=\"line\">typeÂ PointListÂ =Â Record&lt;Point,Â &#123;Â value:Â numberÂ &#125;&gt;;</span><br><span class=\"line\">constÂ cars:Â PointListÂ =Â &#123;</span><br><span class=\"line\">Â Â x:Â &#123;Â value:Â 10Â &#125;,</span><br><span class=\"line\">Â Â y:Â &#123;Â value:Â 20Â &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"11\">\n<li>Omit&lt;K,T&gt; åŸºäºå·²ç»å£°æ˜çš„ç±»å‹è¿›è¡Œå±æ€§å‰”é™¤è·å¾—æ–°ç±»å‹</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â typeÂ Omit=Pick&lt;T,Exclude&lt;keyofÂ T,K&gt;&gt;</span><br><span class=\"line\">typeÂ UserÂ =Â &#123;</span><br><span class=\"line\">id:Â string;</span><br><span class=\"line\">name:Â string;</span><br><span class=\"line\">email:Â string;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">typeÂ UserWithoutEmailÂ =Â Omit&lt;User,Â &quot;email&quot;&gt;; //Â UserWithoutEmailÂ =&#123;id:Â string;name:Â string;&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"8-TypeScript-è£…é¥°å™¨\"><a href=\"#8-TypeScript-è£…é¥°å™¨\" class=\"headerlink\" title=\"8 TypeScript è£…é¥°å™¨\"></a><strong>8</strong> <strong>TypeScript</strong> <strong>è£…é¥°å™¨</strong></h3><p>è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€å±æ€§æˆ–å‚æ•°ä¸Šï¼Œå¯ä»¥ä¿®æ”¹ç±»çš„è¡Œä¸º</p>\n<p>å¸¸è§çš„è£…é¥°å™¨æœ‰ç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨å’Œå‚æ•°è£…é¥°å™¨</p>\n<p>è£…é¥°å™¨çš„å†™æ³•åˆ†ä¸ºæ™®é€šè£…é¥°å™¨å’Œè£…é¥°å™¨å·¥å‚</p>\n<p>ä½¿ç”¨@è£…é¥°å™¨çš„å†™æ³•éœ€è¦æŠŠ tsconfig.json çš„ <code>experimentalDecorators</code> å­—æ®µè®¾ç½®ä¸º true</p>\n<h5 id=\"8-1-ç±»è£…é¥°å™¨\"><a href=\"#8-1-ç±»è£…é¥°å™¨\" class=\"headerlink\" title=\"8.1 ç±»è£…é¥°å™¨\"></a><strong>8.1 ç±»è£…é¥°å™¨</strong></h5><p>ç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰å£°æ˜ï¼Œç”¨æ¥ç›‘è§†ã€ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">namespaceÂ aÂ &#123;</span><br><span class=\"line\">Â Â //å½“è£…é¥°å™¨ä½œä¸ºä¿®é¥°ç±»çš„æ—¶å€™ï¼Œä¼šæŠŠæ„é€ å™¨ä¼ é€’è¿›å»</span><br><span class=\"line\">Â Â functionÂ addNameEat(constructor:Â Function)Â &#123;</span><br><span class=\"line\">Â Â Â Â constructor.prototype.nameÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">Â Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â console.log(&quot;eat&quot;);</span><br><span class=\"line\">Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @addNameEat</span><br><span class=\"line\">Â Â classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â Â Â name!:Â string;</span><br><span class=\"line\">Â Â Â Â eat!:Â Function;</span><br><span class=\"line\">Â Â Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">Â Â console.log(p.name);</span><br><span class=\"line\">Â Â p.eat();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">namespaceÂ bÂ &#123;</span><br><span class=\"line\">Â Â //è¿˜å¯ä»¥ä½¿ç”¨è£…é¥°å™¨å·¥å‚Â è¿™æ ·å¯ä»¥ä¼ é€’é¢å¤–å‚æ•°</span><br><span class=\"line\">Â Â functionÂ addNameEatFactory(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ functionÂ (constructor:Â Function)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â constructor.prototype.nameÂ =Â name;</span><br><span class=\"line\">Â Â Â Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â console.log(&quot;eat&quot;);</span><br><span class=\"line\">Â Â Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @addNameEatFactory(&quot;hello&quot;)</span><br><span class=\"line\">Â Â classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â Â Â name!:Â string;</span><br><span class=\"line\">Â Â Â Â eat!:Â Function;</span><br><span class=\"line\">Â Â Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">Â Â console.log(p.name);</span><br><span class=\"line\">Â Â p.eat();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">namespaceÂ cÂ &#123;</span><br><span class=\"line\">Â Â //è¿˜å¯ä»¥æ›¿æ¢ç±»,ä¸è¿‡æ›¿æ¢çš„ç±»è¦ä¸åŸç±»ç»“æ„ç›¸åŒ</span><br><span class=\"line\">Â Â functionÂ enhancer(constructor:Â Function)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ classÂ &#123;</span><br><span class=\"line\">Â Â Â Â Â Â name:Â stringÂ =Â &quot;jiagou&quot;;</span><br><span class=\"line\">Â Â Â Â Â Â eat()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â console.log(&quot;åƒé¥­é¥­&quot;);</span><br><span class=\"line\">Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @enhancer</span><br><span class=\"line\">Â Â classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â Â Â name!:Â string;</span><br><span class=\"line\">Â Â Â Â eat!:Â Function;</span><br><span class=\"line\">Â Â Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">Â Â console.log(p.name);</span><br><span class=\"line\">Â Â p.eat();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"8-2-å±æ€§è£…é¥°å™¨\"><a href=\"#8-2-å±æ€§è£…é¥°å™¨\" class=\"headerlink\" title=\"8.2 å±æ€§è£…é¥°å™¨\"></a><strong>8.2 å±æ€§è£…é¥°å™¨</strong></h5><p>å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ 2 ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§çš„åç§°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //ä¿®é¥°å®ä¾‹å±æ€§</span><br><span class=\"line\">functionÂ upperCase(target:Â any,Â propertyKey:Â string)Â &#123;</span><br><span class=\"line\">Â Â letÂ valueÂ =Â target[propertyKey];</span><br><span class=\"line\">Â Â constÂ getterÂ =Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ value;</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">Â Â //Â ç”¨æ¥æ›¿æ¢çš„setter</span><br><span class=\"line\">Â Â constÂ setterÂ =Â functionÂ (newVal:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â valueÂ =Â newVal.toUpperCase();</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">Â Â //Â æ›¿æ¢å±æ€§ï¼Œå…ˆåˆ é™¤åŸå…ˆçš„å±æ€§ï¼Œå†é‡æ–°å®šä¹‰å±æ€§</span><br><span class=\"line\">Â Â ifÂ (deleteÂ target[propertyKey])Â &#123;</span><br><span class=\"line\">Â Â Â Â Object.defineProperty(target,Â propertyKey,Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â get:Â getter,</span><br><span class=\"line\">Â Â Â Â Â Â set:Â setter,</span><br><span class=\"line\">Â Â Â Â Â Â enumerable:Â true,</span><br><span class=\"line\">Â Â Â Â Â Â configurable:Â true,</span><br><span class=\"line\">Â Â Â Â &#125;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â @upperCase</span><br><span class=\"line\">Â Â name!:Â string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">p.nameÂ =Â &quot;world&quot;;</span><br><span class=\"line\">console.log(p.name);</span><br></pre></td></tr></table></figure>\n<h5 id=\"8-3-æ–¹æ³•è£…é¥°å™¨\"><a href=\"#8-3-æ–¹æ³•è£…é¥°å™¨\" class=\"headerlink\" title=\"8.3 æ–¹æ³•è£…é¥°å™¨\"></a><strong>8.3 æ–¹æ³•è£…é¥°å™¨</strong></h5><p>æ–¹æ³•è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„æ–¹æ³•ã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štarget: Object - å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ propertyKey: string | symbol - æ–¹æ³•å descriptor: TypePropertyDescript - å±æ€§æè¿°ç¬¦</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //ä¿®é¥°å®ä¾‹æ–¹æ³•</span><br><span class=\"line\">functionÂ noEnumerable(</span><br><span class=\"line\">Â Â target:Â any,</span><br><span class=\"line\">Â Â property:Â string,</span><br><span class=\"line\">Â Â descriptor:Â PropertyDescriptor</span><br><span class=\"line\">)Â &#123;</span><br><span class=\"line\">Â Â console.log(&quot;target.getName&quot;,Â target.getName);</span><br><span class=\"line\">Â Â console.log(&quot;target.getAge&quot;,Â target.getAge);</span><br><span class=\"line\">Â Â descriptor.enumerableÂ =Â false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//é‡å†™æ–¹æ³•</span><br><span class=\"line\">functionÂ toNumber(</span><br><span class=\"line\">Â Â target:Â any,</span><br><span class=\"line\">Â Â methodName:Â string,</span><br><span class=\"line\">Â Â descriptor:Â PropertyDescriptor</span><br><span class=\"line\">)Â &#123;</span><br><span class=\"line\">Â Â letÂ oldMethodÂ =Â descriptor.value;</span><br><span class=\"line\">Â Â descriptor.valueÂ =Â functionÂ (...args:Â any[])Â &#123;</span><br><span class=\"line\">Â Â Â Â argsÂ =Â args.map((item)Â =&gt;Â parseFloat(item));</span><br><span class=\"line\">Â Â Â Â returnÂ oldMethod.apply(this,Â args);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â stringÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">Â Â publicÂ staticÂ age:Â numberÂ =Â 10;</span><br><span class=\"line\">Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â @noEnumerable</span><br><span class=\"line\">Â Â getName()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @toNumber</span><br><span class=\"line\">Â Â sum(...args:Â any[])Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ args.reduce((accu:Â number,Â item:Â number)Â =&gt;Â accuÂ +Â item,Â 0);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">forÂ (letÂ attrÂ inÂ p)Â &#123;</span><br><span class=\"line\">Â Â console.log(&quot;attr=&quot;,Â attr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">p.getName();</span><br><span class=\"line\">console.log(p.sum(&quot;1&quot;,Â &quot;2&quot;,Â &quot;3&quot;));</span><br></pre></td></tr></table></figure>\n<h5 id=\"8-4-å‚æ•°è£…é¥°å™¨\"><a href=\"#8-4-å‚æ•°è£…é¥°å™¨\" class=\"headerlink\" title=\"8.4 å‚æ•°è£…é¥°å™¨\"></a><strong>8.4 å‚æ•°è£…é¥°å™¨</strong></h5><p>å‚æ•°è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”¨æ¥è£…é¥°å‡½æ•°å‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<p>target: Object - è¢«è£…é¥°çš„ç±» propertyKey: string | symbol - æ–¹æ³•å parameterIndex: number - æ–¹æ³•ä¸­å‚æ•°çš„ç´¢å¼•å€¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ Log(target:Â Function,Â key:Â string,Â parameterIndex:Â number)Â &#123;</span><br><span class=\"line\">Â Â letÂ functionLoggedÂ =Â keyÂ ||Â target.prototype.constructor.name;</span><br><span class=\"line\">Â Â console.log(`TheÂ parameterÂ inÂ positionÂ $&#123;parameterIndex&#125;Â atÂ $&#123;functionLogged&#125;Â has</span><br><span class=\"line\">Â beenÂ decorated`);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">classÂ GreeterÂ &#123;</span><br><span class=\"line\">Â Â greeting:Â string;</span><br><span class=\"line\">Â Â constructor(@LogÂ phrase:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.greetingÂ =Â phrase;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š<code>&quot;The parameter in position 0 at Greeter has been decorated&quot;</code></p>\n<h5 id=\"8-5-è£…é¥°å™¨æ‰§è¡Œé¡ºåº\"><a href=\"#8-5-è£…é¥°å™¨æ‰§è¡Œé¡ºåº\" class=\"headerlink\" title=\"8.5 è£…é¥°å™¨æ‰§è¡Œé¡ºåº\"></a><strong>8.5 è£…é¥°å™¨æ‰§è¡Œé¡ºåº</strong></h5><p>æœ‰å¤šä¸ªå‚æ•°è£…é¥°å™¨æ—¶ï¼šä»æœ€åä¸€ä¸ªå‚æ•°ä¾æ¬¡å‘å‰æ‰§è¡Œ</p>\n<p>æ–¹æ³•å’Œæ–¹æ³•å‚æ•°ä¸­å‚æ•°è£…é¥°å™¨å…ˆæ‰§è¡Œã€‚æ–¹æ³•å’Œå±æ€§è£…é¥°å™¨ï¼Œè°åœ¨å‰é¢è°å…ˆæ‰§è¡Œã€‚å› ä¸ºå‚æ•°å±äºæ–¹æ³•ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å‚æ•°ä¼šä¸€ç›´ç´§ç´§æŒ¨ç€æ–¹æ³•æ‰§è¡Œ</p>\n<p>ç±»è£…é¥°å™¨æ€»æ˜¯æœ€åæ‰§è¡Œ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ Class1Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;ç±»1è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ Class2Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;ç±»2è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ MethodDecorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (</span><br><span class=\"line\">Â Â Â Â target:Â any,</span><br><span class=\"line\">Â Â Â Â methodName:Â string,</span><br><span class=\"line\">Â Â Â Â descriptor:Â PropertyDescriptor</span><br><span class=\"line\">Â Â )Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;æ–¹æ³•è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ Param1Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;å‚æ•°1è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ Param2Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;å‚æ•°2è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ PropertyDecorator(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any,Â propertyName:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(nameÂ +Â &quot;å±æ€§è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@Class1Decorator()</span><br><span class=\"line\">@Class2Decorator()</span><br><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â @PropertyDecorator(&quot;name&quot;)</span><br><span class=\"line\">Â Â name:Â stringÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">Â Â @PropertyDecorator(&quot;age&quot;)</span><br><span class=\"line\">Â Â age:Â numberÂ =Â 10;</span><br><span class=\"line\">Â Â @MethodDecorator()</span><br><span class=\"line\">Â Â greet(@Param1Decorator()Â p1:Â string,Â @Param2Decorator()Â p2:Â string)Â &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\">nameå±æ€§è£…é¥°å™¨</span><br><span class=\"line\">ageå±æ€§è£…é¥°å™¨</span><br><span class=\"line\">å‚æ•°2è£…é¥°å™¨</span><br><span class=\"line\">å‚æ•°1è£…é¥°å™¨</span><br><span class=\"line\">æ–¹æ³•è£…é¥°å™¨</span><br><span class=\"line\">ç±»2è£…é¥°å™¨</span><br><span class=\"line\">ç±»1è£…é¥°å™¨</span><br><span class=\"line\">*/</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-ç¼–è¯‘\"><a href=\"#9-ç¼–è¯‘\" class=\"headerlink\" title=\"9 ç¼–è¯‘\"></a><strong>9 ç¼–è¯‘</strong></h3><h5 id=\"9-1-tsconfig-json-çš„ä½œç”¨\"><a href=\"#9-1-tsconfig-json-çš„ä½œç”¨\" class=\"headerlink\" title=\"9.1 tsconfig.json çš„ä½œç”¨\"></a><strong>9.1 tsconfig.json çš„ä½œç”¨</strong></h5><ul>\n<li>ç”¨äºæ ‡è¯† TypeScript é¡¹ç›®çš„æ ¹è·¯å¾„ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>ç”¨äºé…ç½® TypeScript ç¼–è¯‘å™¨ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>ç”¨äºæŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶ã€‚</li>\n</ul>\n<h5 id=\"9-2-tsconfig-json-é‡è¦å­—æ®µ\"><a href=\"#9-2-tsconfig-json-é‡è¦å­—æ®µ\" class=\"headerlink\" title=\"9.2 tsconfig.json é‡è¦å­—æ®µ\"></a><strong>9.2 tsconfig.json é‡è¦å­—æ®µ</strong></h5><ul>\n<li>files - è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶çš„åç§°ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>include - è®¾ç½®éœ€è¦è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>exclude - è®¾ç½®æ— éœ€è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>compilerOptions - è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹ã€‚</li>\n</ul>\n<h5 id=\"9-3-compilerOptions-é€‰é¡¹\"><a href=\"#9-3-compilerOptions-é€‰é¡¹\" class=\"headerlink\" title=\"9.3 compilerOptions é€‰é¡¹\"></a><strong>9.3 compilerOptions é€‰é¡¹</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">Â Â &quot;compilerOptions&quot;:Â &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â åŸºæœ¬é€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;target&quot;:Â &quot;es5&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ ECMAScriptÂ ç›®æ ‡ç‰ˆæœ¬:Â &apos;ES3&apos;Â (default),Â &apos;ES5&apos;,Â &apos;ES6&apos;/&apos;ES2015&apos;,Â &apos;ES2016&apos;,Â &apos;ES2017&apos;,Â orÂ &apos;ESNEXT&apos;</span><br><span class=\"line\">Â Â Â Â &quot;module&quot;:Â &quot;commonjs&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šä½¿ç”¨æ¨¡å—:Â &apos;commonjs&apos;,Â &apos;amd&apos;,Â &apos;system&apos;,Â &apos;umd&apos;Â orÂ &apos;es2015&apos;</span><br><span class=\"line\">Â Â Â Â &quot;lib&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;allowJs&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å…è®¸ç¼–è¯‘Â javascriptÂ æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;checkJs&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŠ¥å‘ŠÂ javascriptÂ æ–‡ä»¶ä¸­çš„é”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;jsx&quot;:Â &quot;preserve&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ jsxÂ ä»£ç çš„ç”Ÿæˆ:Â &apos;preserve&apos;,Â &apos;react-native&apos;,Â orÂ &apos;react&apos;</span><br><span class=\"line\">Â Â Â Â &quot;declaration&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â &apos;.d.ts&apos;Â æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;sourceMap&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â &apos;.map&apos;Â æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;outFile&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;outDir&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¾“å‡ºç›®å½•</span><br><span class=\"line\">Â Â Â Â &quot;rootDir&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„Â --outDir.</span><br><span class=\"line\">Â Â Â Â &quot;removeComments&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š</span><br><span class=\"line\">Â Â Â Â &quot;noEmit&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;importHelpers&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»Â tslibÂ å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°</span><br><span class=\"line\">Â Â Â Â &quot;isolatedModules&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å—Â ï¼ˆä¸Â &apos;ts.transpileModule&apos;Â ç±»ä¼¼ï¼‰.</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;strict&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span><br><span class=\"line\">Â Â Â Â &quot;noImplicitAny&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„Â anyç±»å‹æ—¶æŠ¥é”™</span><br><span class=\"line\">Â Â Â Â &quot;strictNullChecks&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨ä¸¥æ ¼çš„Â nullÂ æ£€æŸ¥</span><br><span class=\"line\">Â Â Â Â &quot;noImplicitThis&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å½“Â thisÂ è¡¨è¾¾å¼å€¼ä¸ºÂ anyÂ ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;alwaysStrict&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥Â &apos;useÂ strict&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â é¢å¤–çš„æ£€æŸ¥Â */</span><br><span class=\"line\">Â Â Â Â &quot;noUnusedLocals&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;noUnusedParameters&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;noImplicitReturns&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;noFallthroughCasesInSwitch&quot;:Â true,Â Â Â Â //Â æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â æ¨¡å—è§£æé€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;moduleResolution&quot;:Â &quot;node&quot;,Â Â Â Â Â Â Â Â Â Â Â Â //Â é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼šÂ &apos;node&apos;Â (Node.js) or &apos;classic&apos;Â (TypeScript pre-1.6)</span><br><span class=\"line\">Â Â Â Â &quot;baseUrl&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•</span><br><span class=\"line\">Â Â Â Â &quot;paths&quot;:Â &#123;&#125;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ¨¡å—ååˆ°åŸºäºÂ baseUrlÂ çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</span><br><span class=\"line\">Â Â Â Â &quot;rootDirs&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹</span><br><span class=\"line\">Â Â Â Â &quot;typeRoots&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨</span><br><span class=\"line\">Â Â Â Â &quot;types&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨</span><br><span class=\"line\">Â Â Â Â &quot;allowSyntheticDefaultImports&quot;:Â true,Â Â //Â å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â SourceÂ MapÂ OptionsÂ */</span><br><span class=\"line\">Â Â Â Â &quot;sourceRoot&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°Â TypeScriptÂ æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®</span><br><span class=\"line\">Â Â Â Â &quot;mapRoot&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®</span><br><span class=\"line\">Â Â Â Â &quot;inlineSourceMap&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆå•ä¸ªÂ soucemapsÂ æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°†Â sourcemapsÂ ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;inlineSources&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†ä»£ç ä¸Â sourcemapsÂ ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº†Â --inlineSourceMapÂ æˆ–Â --sourceMapÂ å±æ€§</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â å…¶ä»–é€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;experimentalDecorators&quot;:Â true,Â Â Â Â Â Â Â Â //Â å¯ç”¨è£…é¥°å™¨</span><br><span class=\"line\">Â Â Â Â &quot;emitDecoratorMetadata&quot;:Â trueÂ Â Â Â Â Â Â Â Â Â //Â ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"10-æ¨¡å—å’Œå£°æ˜æ–‡ä»¶\"><a href=\"#10-æ¨¡å—å’Œå£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10 æ¨¡å—å’Œå£°æ˜æ–‡ä»¶\"></a><strong>10 æ¨¡å—å’Œå£°æ˜æ–‡ä»¶</strong></h3><h5 id=\"10-1-å…¨å±€æ¨¡å—\"><a href=\"#10-1-å…¨å±€æ¨¡å—\" class=\"headerlink\" title=\"10.1 å…¨å±€æ¨¡å—\"></a><strong>10.1 å…¨å±€æ¨¡å—</strong></h5><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ å¼€å§‹åœ¨ä¸€ä¸ªæ–°çš„ TypeScript æ–‡ä»¶ä¸­å†™ä¸‹ä»£ç æ—¶ï¼Œå®ƒå¤„äºå…¨å±€å‘½åç©ºé—´ä¸­</p>\n<p>ä½¿ç”¨å…¨å±€å˜é‡ç©ºé—´æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä¼šä¸æ–‡ä»¶å†…çš„ä»£ç å‘½åå†²çªã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ä¸‹æ–‡ä¸­å°†è¦æåˆ°çš„æ–‡ä»¶æ¨¡å—</p>\n<p>foo.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ fooÂ =Â 123;</span><br></pre></td></tr></table></figure>\n<p>bar.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ barÂ =Â foo;Â //Â allowed</span><br></pre></td></tr></table></figure>\n<h5 id=\"10-2-æ–‡ä»¶æ¨¡å—\"><a href=\"#10-2-æ–‡ä»¶æ¨¡å—\" class=\"headerlink\" title=\"10.2 æ–‡ä»¶æ¨¡å—\"></a><strong>10.2 æ–‡ä»¶æ¨¡å—</strong></h5><ul>\n<li>æ–‡ä»¶æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨æ¨¡å—ã€‚å¦‚æœåœ¨ä½ çš„ TypeScript æ–‡ä»¶çš„æ ¹çº§åˆ«ä½ç½®å«æœ‰ import æˆ–è€… exportï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„ä½œç”¨åŸŸ</li>\n</ul>\n<!---->\n<ul>\n<li>æ¨¡å—æ˜¯ TS ä¸­å¤–éƒ¨æ¨¡å—çš„ç®€ç§°ï¼Œä¾§é‡äºä»£ç å’Œå¤ç”¨</li>\n</ul>\n<!---->\n<ul>\n<li>æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œ</li>\n</ul>\n<!---->\n<ul>\n<li>ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ã€å‡½æ•°ã€ç±»ç­‰åœ¨å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æŠŠå®ƒå¯¼å‡º</li>\n</ul>\n<!---->\n<ul>\n<li>å¦‚æœæƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ¨¡å—é‡Œå¯¼å‡ºçš„å˜é‡ï¼Œåˆ™éœ€è¦å¯¼å…¥</li>\n</ul>\n<p>foo.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ fooÂ =Â 123;</span><br><span class=\"line\">exportÂ &#123;&#125;;</span><br></pre></td></tr></table></figure>\n<p>bar.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ barÂ =Â foo;Â //Â error</span><br></pre></td></tr></table></figure>\n<h5 id=\"10-3-å£°æ˜æ–‡ä»¶\"><a href=\"#10-3-å£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10.3 å£°æ˜æ–‡ä»¶\"></a><strong>10.3 å£°æ˜æ–‡ä»¶</strong></h5><ul>\n<li>æˆ‘ä»¬å¯ä»¥æŠŠç±»å‹å£°æ˜æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­</li>\n</ul>\n<!---->\n<ul>\n<li>æ–‡ä»¶å‘½åè§„èŒƒä¸º*.d.ts</li>\n</ul>\n<!---->\n<ul>\n<li>æŸ¥çœ‹ç±»å‹å£°æ˜æ–‡ä»¶æœ‰åŠ©äºäº†è§£åº“çš„ä½¿ç”¨æ–¹å¼</li>\n</ul>\n<p>typings\\jquery.d.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declareÂ constÂ $:Â (selector:Â string)Â =&gt;Â &#123;</span><br><span class=\"line\">Â Â click():Â void;</span><br><span class=\"line\">Â Â width(length:Â number):Â void;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"10-4-ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶\"><a href=\"#10-4-ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10.4 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶\"></a><strong>10.4 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶</strong></h5><ul>\n<li>å¯ä»¥å®‰è£…ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å£°æ˜æ–‡ä»¶</li>\n</ul>\n<!---->\n<ul>\n<li>@types æ˜¯ä¸€ä¸ªçº¦å®šçš„å‰ç¼€ï¼Œæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹å£°æ˜çš„ç±»å‹åº“éƒ½ä¼šå¸¦æœ‰è¿™æ ·çš„å‰ç¼€</li>\n</ul>\n<!---->\n<ul>\n<li>JavaScript ä¸­æœ‰å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥åœ¨ TypeScript ä¸­è¢«å½“åšå£°æ˜å¥½äº†çš„ç±»å‹</li>\n</ul>\n<!---->\n<ul>\n<li>å†…ç½®å¯¹è±¡æ˜¯æŒ‡æ ¹æ®æ ‡å‡†åœ¨å…¨å±€ä½œç”¨åŸŸï¼ˆGlobalï¼‰ä¸Šå­˜åœ¨çš„å¯¹è±¡ã€‚è¿™é‡Œçš„æ ‡å‡†æ˜¯æŒ‡ ECMAScript å’Œå…¶ä»–ç¯å¢ƒï¼ˆæ¯”å¦‚ DOMï¼‰çš„æ ‡å‡†</li>\n</ul>\n<!---->\n<ul>\n<li>è¿™äº›å†…ç½®å¯¹è±¡çš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œå°±åŒ…å«åœ¨ TypeScript æ ¸å¿ƒåº“çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­,å…·ä½“å¯ä»¥æŸ¥çœ‹ts æ ¸å¿ƒå£°æ˜æ–‡ä»¶</li>\n</ul>\n<h5 id=\"10-5-æŸ¥æ‰¾å£°æ˜æ–‡ä»¶\"><a href=\"#10-5-æŸ¥æ‰¾å£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10.5 æŸ¥æ‰¾å£°æ˜æ–‡ä»¶\"></a><strong>10.5 æŸ¥æ‰¾å£°æ˜æ–‡ä»¶</strong></h5><ul>\n<li>å¦‚æœæ˜¯æ‰‹åŠ¨å†™çš„å£°æ˜æ–‡ä»¶ï¼Œé‚£ä¹ˆéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œæ‰èƒ½è¢«æ­£ç¡®çš„è¯†åˆ«</li>\n</ul>\n<!---->\n<ul>\n<li>ç»™ package.json ä¸­çš„ types æˆ– typings å­—æ®µæŒ‡å®šä¸€ä¸ªç±»å‹å£°æ˜æ–‡ä»¶åœ°å€</li>\n</ul>\n<!---->\n<ul>\n<li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç¼–å†™ä¸€ä¸ª index.d.ts æ–‡ä»¶</li>\n</ul>\n<!---->\n<ul>\n<li>é’ˆå¯¹å…¥å£æ–‡ä»¶ï¼ˆpackage.json ä¸­çš„ main å­—æ®µæŒ‡å®šçš„å…¥å£æ–‡ä»¶ï¼‰ï¼Œç¼–å†™ä¸€ä¸ªåŒåä¸åŒåç¼€çš„ .d.ts æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">Â Â Â Â &quot;name&quot;:Â &quot;myLib&quot;,</span><br><span class=\"line\">Â Â Â Â &quot;version&quot;:Â &quot;1.0.0&quot;,</span><br><span class=\"line\">Â Â Â Â &quot;main&quot;:Â &quot;lib/index.js&quot;,</span><br><span class=\"line\">Â Â Â Â &quot;types&quot;:Â &quot;myLib.d.ts&quot;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æŸ¥æ‰¾è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>\n<p>1.å…ˆæ‰¾ myLib.d.ts</p>\n<p>2.æ²¡æœ‰å°±å†æ‰¾ index.d.ts</p>\n<p>3.è¿˜æ²¡æœ‰å†æ‰¾ lib/index.d.js</p>\n<p>4.è¿˜æ‰¾ä¸åˆ°å°±è®¤ä¸ºæ²¡æœ‰ç±»å‹å£°æ˜äº†</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1-ts-å®‰è£…å’Œç¼–è¯‘\"><a href=\"#1-ts-å®‰è£…å’Œç¼–è¯‘\" class=\"headerlink\" title=\"1 ts å®‰è£…å’Œç¼–è¯‘\"></a><strong>1</strong> <strong>ts</strong> <strong>å®‰è£…å’Œç¼–è¯‘</strong></h3><ul>\n<li>ç¬¬ä¸€æ­¥ æ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ç”¨æ¥å­¦ä¹  ts</li>\n</ul>\n<!---->\n<ul>\n<li>ç¬¬äºŒæ­¥ å…¨å±€å®‰è£… ts å’Œ ts-node</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpmÂ iÂ typescriptÂ -gÂ //å…¨å±€å®‰è£…ts</span><br><span class=\"line\">cnpmÂ iÂ -gÂ ts-nodeÂ //å…¨å±€å®‰è£…ts-node</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ç¬¬ä¸‰æ­¥ ç”Ÿæˆ tsconfig.js é…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tscÂ --init</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å°±å…ˆæŒ‰ç…§è‡ªåŠ¨ç”Ÿæˆçš„ tsconfig é…ç½®é¡¹å»ä½¿ç”¨ é‡Œé¢çš„é…ç½®å’±ä»¬å¯ä»¥å…ˆä¸å»ç®¡ä»– åç»­ç†Ÿç»ƒäº†å†å»é…ç½®</p>\n<ul>\n<li>ç¬¬å››æ­¥ åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ª<code>index.ts</code>ç›´æ¥å†™å…¥</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ a:Â stringÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">console.log(a);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ç¬¬äº”æ­¥ ç¼–è¯‘ ts ä¸º js åœ¨æ§åˆ¶å°ï¼ˆç»ˆç«¯ï¼‰è¾“å…¥å‘½ä»¤</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tscÂ index.ts</span><br></pre></td></tr></table></figure>\n<p>ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº† é¡¹ç›®ä¸‹å‡ºç°äº†ä¸€ä¸ªåŒåçš„ index.js æ–‡ä»¶ è‡³æ­¤æˆ‘ä»¬å·²ç»å¯ä»¥æŠŠ ts æ–‡ä»¶ç¼–è¯‘æˆ js æ–‡ä»¶äº†</p>\n<p>ä¸è¿‡åˆ°è¿™é‡Œèªæ˜çš„å°ä¼™ä¼´å°±ä¼šå‘ç°äº† æˆ‘ä»¬å…¨å±€å®‰è£…çš„ ã€Œts-nodeã€ æœ‰ä»€ä¹ˆä½œç”¨å‘¢ å…¶å®è¿™ä¸ªåŒ…æ˜¯å¸®åŠ©æˆ‘ä»¬åœ¨ä¸éœ€è¦ç¼–è¯‘æˆ js çš„å‰æä¸‹å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ ts ä»£ç  æ¯”å¦‚ æˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å…¥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ts-nodeÂ index.ts</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‰“å°çš„<code>hello</code>å·²ç»è¾“å‡ºäº†</p>\n<p>é‚£å¯èƒ½ è¿˜æœ‰çš„å°ä¼™ä¼´ä¼šå‘ç° æˆ‘ä»¬æ¯æ¬¡æ”¹åŠ¨éƒ½è¦æ‰‹åŠ¨å»æ‰§è¡Œç¼–è¯‘ è¿™æ ·å¾ˆéº»çƒ¦ å…¶å®æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ªå‚æ•°æ¥å®ç°æ¯æ¬¡æ–‡ä»¶å˜åŠ¨ ts å¸®æˆ‘ä»¬ã€Œè‡ªåŠ¨ç¼–è¯‘æˆ jsã€ çš„æ•ˆæœ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tscÂ --watchÂ index.ts</span><br></pre></td></tr></table></figure>\n<p>å¥½äº† ç¯å¢ƒå®‰è£…å®Œæ¯•äº† æ¥ä¸‹æ¥å‡ºå‘å»å­¦ä¹  ts æ ¸å¿ƒå§</p>\n<h3 id=\"2-TS-ç±»å‹\"><a href=\"#2-TS-ç±»å‹\" class=\"headerlink\" title=\"2 TS ç±»å‹\"></a><strong>2</strong> <strong>TS</strong> <strong>ç±»å‹</strong></h3><h5 id=\"2-1-å¸ƒå°”ç±»å‹-boolean\"><a href=\"#2-1-å¸ƒå°”ç±»å‹-boolean\" class=\"headerlink\" title=\"2.1 å¸ƒå°”ç±»å‹(boolean)\"></a><strong>2.1 å¸ƒå°”ç±»å‹(boolean)</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â booleanÂ =Â true;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-2-Number-ç±»å‹\"><a href=\"#2-2-Number-ç±»å‹\" class=\"headerlink\" title=\"2.2 Number ç±»å‹\"></a><strong>2.2 Number ç±»å‹</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â numberÂ =Â 1;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-3-String-ç±»å‹\"><a href=\"#2-3-String-ç±»å‹\" class=\"headerlink\" title=\"2.3 String ç±»å‹\"></a><strong>2.3 String ç±»å‹</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â stringÂ =Â &quot;hello&quot;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-4-Enum-ç±»å‹\"><a href=\"#2-4-Enum-ç±»å‹\" class=\"headerlink\" title=\"2.4 Enum ç±»å‹\"></a><strong>2.4</strong> <strong>Enum</strong> <strong>ç±»å‹</strong></h5><p>ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„æè¿°ä¸€äº›ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å¹´ä¸­çš„æ˜¥ã€å¤ã€ç§‹ã€å†¬ï¼Œè¿˜æœ‰æ¯å‘¨çš„å‘¨ä¸€åˆ°å‘¨å¤©ï¼Œè¿˜æœ‰å„ç§é¢œè‰²ï¼Œä»¥åŠå¯ä»¥ç”¨å®ƒæ¥æè¿°ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯ç ç­‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â æ™®é€šæšä¸¾Â åˆå§‹å€¼é»˜è®¤ä¸ºÂ 0Â å…¶ä½™çš„æˆå‘˜ä¼šä¼šæŒ‰é¡ºåºè‡ªåŠ¨å¢é•¿Â å¯ä»¥ç†è§£ä¸ºæ•°ç»„ä¸‹æ ‡</span><br><span class=\"line\">enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â RED,</span><br><span class=\"line\">Â Â PINK,</span><br><span class=\"line\">Â Â BLUE,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ pink:Â ColorÂ =Â Color.PINK;</span><br><span class=\"line\">console.log(pink);Â //Â 1</span><br><span class=\"line\"></span><br><span class=\"line\">//Â è®¾ç½®åˆå§‹å€¼</span><br><span class=\"line\">enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â REDÂ =Â 10,</span><br><span class=\"line\">Â Â PINK,</span><br><span class=\"line\">Â Â BLUE,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">constÂ pink:Â ColorÂ =Â Color.PINK;</span><br><span class=\"line\">console.log(pink);Â //Â 11</span><br><span class=\"line\"></span><br><span class=\"line\">//Â å­—ç¬¦ä¸²æšä¸¾Â æ¯ä¸ªéƒ½éœ€è¦å£°æ˜</span><br><span class=\"line\">enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â REDÂ =Â &quot;çº¢è‰²&quot;,</span><br><span class=\"line\">Â Â PINKÂ =Â &quot;ç²‰è‰²&quot;,</span><br><span class=\"line\">Â Â BLUEÂ =Â &quot;è“è‰²&quot;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ pink:Â ColorÂ =Â Color.PINK;</span><br><span class=\"line\">console.log(pink);Â //Â ç²‰è‰²</span><br><span class=\"line\"></span><br><span class=\"line\">//Â å¸¸é‡æšä¸¾Â å®ƒæ˜¯ä½¿ç”¨Â constÂ å…³é”®å­—ä¿®é¥°çš„æšä¸¾ï¼Œå¸¸é‡æšä¸¾ä¸æ™®é€šæšä¸¾çš„åŒºåˆ«æ˜¯ï¼Œæ•´ä¸ªæšä¸¾ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«åˆ é™¤Â æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ç¼–è¯‘ä¹‹åçš„æ•ˆæœ</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ enumÂ ColorÂ &#123;</span><br><span class=\"line\">Â Â RED,</span><br><span class=\"line\">Â Â PINK,</span><br><span class=\"line\">Â Â BLUE,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ color:Â Color[]Â =Â [Color.RED,Â Color.PINK,Â Color.BLUE];</span><br><span class=\"line\"></span><br><span class=\"line\">//ç¼–è¯‘ä¹‹åçš„jså¦‚ä¸‹ï¼š</span><br><span class=\"line\">varÂ colorÂ =Â [0Â /*Â REDÂ */ ,Â 1Â /*Â PINKÂ */ ,Â 2Â /*Â BLUEÂ */ ];</span><br><span class=\"line\">//Â å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æšä¸¾å¹¶æ²¡æœ‰è¢«ç¼–è¯‘æˆjsä»£ç Â åªæ˜¯æŠŠcolorè¿™ä¸ªæ•°ç»„å˜é‡ç¼–è¯‘å‡ºæ¥äº†</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-5-æ•°ç»„ç±»å‹-array\"><a href=\"#2-5-æ•°ç»„ç±»å‹-array\" class=\"headerlink\" title=\"2.5 æ•°ç»„ç±»å‹(array)\"></a><strong>2.5 æ•°ç»„ç±»å‹(array)</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag1:Â number[]Â =Â [1,Â 2,Â 3];</span><br><span class=\"line\">constÂ flag2:Â Array&lt;number&gt;Â =Â [1,Â 2,Â 3];</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-6-å…ƒç»„ç±»å‹-tuple\"><a href=\"#2-6-å…ƒç»„ç±»å‹-tuple\" class=\"headerlink\" title=\"2.6 å…ƒç»„ç±»å‹(tuple)\"></a><strong>2.6 å…ƒç»„ç±»å‹(tuple)</strong></h5><p>åœ¨ TypeScript çš„åŸºç¡€ç±»å‹ä¸­ï¼Œå…ƒç»„ï¼ˆ Tuple ï¼‰è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥ã€Œæ•°é‡ã€å’Œã€Œç±»å‹ã€çš„æ•°ç»„ å…¶å®å¯ä»¥ç†è§£ä¸ºä»–æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â [string,Â number]Â =Â [&quot;hello&quot;,Â 1];</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-7-Symbol\"><a href=\"#2-7-Symbol\" class=\"headerlink\" title=\"2.7 Symbol\"></a><strong>2.7 Symbol</strong></h5><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Symbol çš„æ—¶å€™ï¼Œå¿…é¡»æ·»åŠ  es6 çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„ <code>libs</code> å­—æ®µåŠ ä¸Š<code>ES`</code>2015`Symbol çš„å€¼æ˜¯å”¯ä¸€ä¸å˜çš„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ sym1Â =Â Symbol(&quot;hello&quot;);</span><br><span class=\"line\">constÂ sym2Â =Â Symbol(&quot;hello&quot;);</span><br><span class=\"line\">console.log(Symbol(&quot;hello&quot;)Â ===Â Symbol(&quot;hello&quot;));</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-8-ä»»æ„ç±»å‹-any\"><a href=\"#2-8-ä»»æ„ç±»å‹-any\" class=\"headerlink\" title=\"2.8 ä»»æ„ç±»å‹(any)\"></a><strong>2.8 ä»»æ„ç±»å‹(any)</strong></h5><p>ä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º <code>any</code> ç±»å‹ è¿™è®© <code>any</code> ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„ é¡¶çº§ç±»å‹ (ä¹Ÿè¢«ç§°ä½œ å…¨å±€è¶…çº§ç±»å‹) TypeScript å…è®¸æˆ‘ä»¬å¯¹ <code>any</code> ç±»å‹çš„å€¼æ‰§è¡Œä»»ä½•æ“ä½œ è€Œæ— éœ€äº‹å…ˆæ‰§è¡Œä»»ä½•å½¢å¼çš„æ£€æŸ¥</p>\n<p>ä¸€èˆ¬ä½¿ç”¨åœºæ™¯ï¼šç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›ç±»å‹æ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨ <code>any</code>ç±»å‹è½¬æ¢é‡åˆ°å›°éš¾æˆ–è€…æ•°æ®ç»“æ„å¤ªå¤æ‚éš¾ä»¥å®šä¹‰ ä¸è¿‡ä¸è¦å¤ªä¾èµ– <code>any</code> å¦åˆ™å°±å¤±å»äº† ts çš„æ„ä¹‰äº†</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ flag:Â anyÂ =Â document.getElementById(&quot;root&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-9-null-å’Œ-undefined\"><a href=\"#2-9-null-å’Œ-undefined\" class=\"headerlink\" title=\"2.9 null å’Œ undefined\"></a><strong>2.9 null å’Œ undefined</strong></h5><p><code>undefined</code> å’Œ <code>null</code> ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸º <code>undefined</code> å’Œ <code>null</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ u:Â undefinedÂ =Â undefined;</span><br><span class=\"line\">letÂ n:Â nullÂ =Â null;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-10-Unknown-ç±»å‹\"><a href=\"#2-10-Unknown-ç±»å‹\" class=\"headerlink\" title=\"2.10 Unknown ç±»å‹\"></a><strong>2.10 Unknown ç±»å‹</strong></h5><p><code>unknown</code> å’Œ <code>any</code> çš„ä¸»è¦åŒºåˆ«æ˜¯ <code>unknown</code> ç±»å‹ä¼šæ›´åŠ ä¸¥æ ¼ åœ¨å¯¹ <code>unknown</code> ç±»å‹çš„å€¼æ‰§è¡Œå¤§å¤šæ•°æ“ä½œä¹‹å‰ æˆ‘ä»¬å¿…é¡»è¿›è¡ŒæŸç§å½¢å¼çš„æ£€æŸ¥ è€Œåœ¨å¯¹ <code>any</code> ç±»å‹çš„å€¼æ‰§è¡Œæ“ä½œä¹‹å‰ æˆ‘ä»¬ä¸å¿…è¿›è¡Œä»»ä½•æ£€æŸ¥ æ‰€æœ‰ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º <code>unknown</code> ä½†<code>unknown</code>ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™ <code>any</code> ç±»å‹å’Œ <code>unknown</code> ç±»å‹æœ¬èº« è€Œ <code>any</code> å•¥éƒ½èƒ½åˆ†é…å’Œè¢«åˆ†é…</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ value:Â unknown;</span><br><span class=\"line\"></span><br><span class=\"line\">valueÂ =Â true;Â //Â OK</span><br><span class=\"line\">valueÂ =Â 42;Â //Â OK</span><br><span class=\"line\">valueÂ =Â &quot;HelloÂ World&quot;;Â //Â OK</span><br><span class=\"line\">valueÂ =Â [];Â //Â OK</span><br><span class=\"line\">valueÂ =Â &#123;&#125;;Â //Â OK</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ value1:Â unknownÂ =Â value;Â //Â OK</span><br><span class=\"line\">letÂ value2:Â anyÂ =Â value;Â //Â OK</span><br><span class=\"line\">letÂ value3:Â booleanÂ =Â value;Â //Â Error</span><br><span class=\"line\">letÂ value4:Â numberÂ =Â value;Â //Â Error</span><br><span class=\"line\">letÂ value5:Â stringÂ =Â value;Â //Â Error</span><br><span class=\"line\">letÂ value6:Â objectÂ =Â value;Â //Â Error</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-11-void-ç±»å‹\"><a href=\"#2-11-void-ç±»å‹\" class=\"headerlink\" title=\"2.11 void ç±»å‹\"></a><strong>2.11 void ç±»å‹</strong></h5><p><code>void</code> è¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ TS ä¼šè®¤ä¸ºå®ƒçš„è¿”å›å€¼æ˜¯ <code>void</code> ç±»å‹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ hello(name:Â string):Â voidÂ &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-12-never-ç±»å‹\"><a href=\"#2-12-never-ç±»å‹\" class=\"headerlink\" title=\"2.12 never ç±»å‹\"></a><strong>2.12 never ç±»å‹</strong></h5><p><code>never</code> ä¸€èˆ¬è¡¨ç¤ºç”¨æˆ·æ— æ³•è¾¾åˆ°çš„ç±»å‹ ä¾‹å¦‚<code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ neverReach():Â neverÂ &#123;</span><br><span class=\"line\">Â Â throwÂ newÂ Error(&quot;anÂ error&quot;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒ:never å’Œ void çš„åŒºåˆ« void å¯ä»¥è¢«èµ‹å€¼ä¸º null å’Œ undefined çš„ç±»å‹ã€‚never åˆ™æ˜¯ä¸€ä¸ªä¸åŒ…å«å€¼çš„ç±»å‹ã€‚æ‹¥æœ‰ void è¿”å›å€¼ç±»å‹çš„å‡½æ•°èƒ½æ­£å¸¸è¿è¡Œã€‚æ‹¥æœ‰ never è¿”å›å€¼ç±»å‹çš„å‡½æ•°æ— æ³•æ­£å¸¸è¿”å›ï¼Œæ— æ³•ç»ˆæ­¢ï¼Œæˆ–ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<h5 id=\"2-13-BigInt-å¤§æ•°ç±»å‹\"><a href=\"#2-13-BigInt-å¤§æ•°ç±»å‹\" class=\"headerlink\" title=\"2.13 BigInt å¤§æ•°ç±»å‹\"></a><strong>2.13 BigInt å¤§æ•°ç±»å‹</strong></h5><p>ä½¿ç”¨ <code>BigInt</code> å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•° æˆ‘ä»¬åœ¨ä½¿ç”¨ <code>BigInt</code> çš„æ—¶å€™ å¿…é¡»æ·»åŠ  <code>ESNext</code> çš„ç¼–è¯‘è¾…åŠ©åº“ éœ€è¦åœ¨ tsconfig.json çš„ <code>libs</code> å­—æ®µåŠ ä¸Š<code>ESNext</code>è¦ä½¿ç”¨<code>1n</code>éœ€è¦ <code>&quot;target&quot;: &quot;ESNext&quot;number</code> å’Œ <code>BigInt</code> ç±»å‹ä¸ä¸€æ · ä¸å…¼å®¹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ max1Â =Â Number.MAX_SAFE_INTEGER;Â //Â 2**53-1</span><br><span class=\"line\">console.log(max1Â +Â 1Â ===Â max1Â +Â 2);Â //true</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ max2Â =Â BigInt(Number.MAX_SAFE_INTEGER);</span><br><span class=\"line\">console.log(max2Â +Â 1nÂ ===Â max2Â +Â 2n);Â //false</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ foo:Â number;</span><br><span class=\"line\">letÂ bar:Â bigint;</span><br><span class=\"line\">fooÂ =Â bar;Â //error</span><br><span class=\"line\">barÂ =Â foo;Â //error</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-14-object-Object-å’Œ-ç±»å‹\"><a href=\"#2-14-object-Object-å’Œ-ç±»å‹\" class=\"headerlink\" title=\"2.14 object, Object å’Œ {} ç±»å‹\"></a><strong>2.14 object, Object å’Œ {} ç±»å‹</strong></h5><p>ã€Œobjectã€ ç±»å‹ç”¨äºè¡¨ç¤ºéåŸå§‹ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ objectCase:Â object;</span><br><span class=\"line\">objectCaseÂ =Â 1;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â &quot;a&quot;;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â true;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â null;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â undefined;Â //Â error</span><br><span class=\"line\">objectCaseÂ =Â &#123;&#125;;Â //Â ok</span><br></pre></td></tr></table></figure>\n<p>ã€Œå¤§ Objectã€ ä»£è¡¨æ‰€æœ‰æ‹¥æœ‰ toStringã€hasOwnProperty æ–¹æ³•çš„ç±»å‹ æ‰€ä»¥æ‰€æœ‰åŸå§‹ç±»å‹ã€éåŸå§‹ç±»å‹éƒ½å¯ä»¥èµ‹ç»™ Object(ä¸¥æ ¼æ¨¡å¼ä¸‹ <code>null</code> å’Œ <code>undefined</code> ä¸å¯ä»¥)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ ObjectCase:Â Object;</span><br><span class=\"line\">ObjectCaseÂ =Â 1;Â //Â ok</span><br><span class=\"line\">ObjectCaseÂ =Â &quot;a&quot;;Â //Â ok</span><br><span class=\"line\">ObjectCaseÂ =Â true;Â //Â ok</span><br><span class=\"line\">ObjectCaseÂ =Â null;Â //Â error</span><br><span class=\"line\">ObjectCaseÂ =Â undefined;Â //Â error</span><br><span class=\"line\">ObjectCaseÂ =Â &#123;&#125;;Â //Â ok</span><br></pre></td></tr></table></figure>\n<p>ã€Œ{}ã€ ç©ºå¯¹è±¡ç±»å‹å’Œå¤§ Object ä¸€æ · ä¹Ÿæ˜¯è¡¨ç¤ºåŸå§‹ç±»å‹å’ŒéåŸå§‹ç±»å‹çš„é›†åˆ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ simpleCase:Â &#123;&#125;;</span><br><span class=\"line\">simpleCaseÂ =Â 1;Â //Â ok</span><br><span class=\"line\">simpleCaseÂ =Â &quot;a&quot;;Â //Â ok</span><br><span class=\"line\">simpleCaseÂ =Â true;Â //Â ok</span><br><span class=\"line\">simpleCaseÂ =Â null;Â //Â error</span><br><span class=\"line\">simpleCaseÂ =Â undefined;Â //Â error</span><br><span class=\"line\">simpleCaseÂ =Â &#123;&#125;;Â //Â ok</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-15-ç±»å‹æ¨è®º\"><a href=\"#2-15-ç±»å‹æ¨è®º\" class=\"headerlink\" title=\"2.15 ç±»å‹æ¨è®º\"></a><strong>2.15 ç±»å‹æ¨è®º</strong></h5><p>æŒ‡ç¼–ç¨‹è¯­è¨€ä¸­èƒ½å¤Ÿè‡ªåŠ¨æ¨å¯¼å‡ºå€¼çš„ç±»å‹çš„èƒ½åŠ› å®ƒæ˜¯ä¸€äº›å¼ºé™æ€ç±»å‹è¯­è¨€ä¸­å‡ºç°çš„ç‰¹æ€§ å®šä¹‰æ—¶æœªèµ‹å€¼å°±ä¼šæ¨è®ºæˆ <code>any</code> ç±»å‹ å¦‚æœå®šä¹‰çš„æ—¶å€™å°±èµ‹å€¼å°±èƒ½åˆ©ç”¨åˆ°ç±»å‹æ¨è®º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ flag;Â //æ¨æ–­ä¸ºany</span><br><span class=\"line\">letÂ countÂ =Â 123;Â //ä¸ºnumberç±»å‹</span><br><span class=\"line\">letÂ helloÂ =Â &quot;hello&quot;;Â //ä¸ºstringç±»å‹</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-16-è”åˆç±»å‹\"><a href=\"#2-16-è”åˆç±»å‹\" class=\"headerlink\" title=\"2.16 è”åˆç±»å‹\"></a><strong>2.16 è”åˆç±»å‹</strong></h5><p>è”åˆç±»å‹ï¼ˆUnion Typesï¼‰è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ æœªèµ‹å€¼æ—¶è”åˆç±»å‹ä¸Šåªèƒ½è®¿é—®ä¸¤ä¸ªç±»å‹å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ name:Â stringÂ |Â number;</span><br><span class=\"line\">console.log(name.toString());</span><br><span class=\"line\">nameÂ =Â 1;</span><br><span class=\"line\">console.log(name.toFixed(2));</span><br><span class=\"line\">nameÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">console.log(name.length);</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-17-ç±»å‹æ–­è¨€\"><a href=\"#2-17-ç±»å‹æ–­è¨€\" class=\"headerlink\" title=\"2.17 ç±»å‹æ–­è¨€\"></a><strong>2.17 ç±»å‹æ–­è¨€</strong></h5><p>æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” TypeScript æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚å…¶å®å°±æ˜¯ä½ éœ€è¦æ‰‹åŠ¨å‘Šè¯‰ ts å°±æŒ‰ç…§ä½ æ–­è¨€çš„é‚£ä¸ªç±»å‹é€šè¿‡ç¼–è¯‘ï¼ˆè¿™ä¸€æ‹›å¾ˆå…³é”® æœ‰æ—¶å€™å¯ä»¥å¸®åŠ©ä½ è§£å†³å¾ˆå¤šç¼–è¯‘æŠ¥é”™ï¼‰</p>\n<p>ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â å°–æ‹¬å·Â è¯­æ³•</span><br><span class=\"line\">letÂ someValue:Â anyÂ =Â &quot;thisÂ isÂ aÂ string&quot;;</span><br><span class=\"line\">letÂ strLength:Â numberÂ =Â (&lt;string&gt;someValue).length;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â asÂ è¯­æ³•</span><br><span class=\"line\">letÂ someValue:Â anyÂ =Â &quot;thisÂ isÂ aÂ string&quot;;</span><br><span class=\"line\">letÂ strLength:Â numberÂ =Â (someValueÂ asÂ string).length;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>ä»¥ä¸Šä¸¤ç§æ–¹å¼è™½ç„¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å°–æ‹¬å·æ ¼å¼ä¼šä¸ react ä¸­ JSX äº§ç”Ÿè¯­æ³•å†²çªï¼Œå› æ­¤æˆ‘ä»¬æ›´æ¨èä½¿ç”¨ as è¯­æ³•ã€‚</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>ã€Œéç©ºæ–­è¨€ã€åœ¨ä¸Šä¸‹æ–‡ä¸­å½“ç±»å‹æ£€æŸ¥å™¨æ— æ³•æ–­å®šç±»å‹æ—¶ ä¸€ä¸ªæ–°çš„åç¼€è¡¨è¾¾å¼æ“ä½œç¬¦ ! å¯ä»¥ç”¨äºæ–­è¨€æ“ä½œå¯¹è±¡æ˜¯é <code>null</code> å’Œé <code>undefined</code> ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ flag:Â nullÂ |Â undefinedÂ |Â string;</span><br><span class=\"line\">flag!.toString();Â //Â ok</span><br><span class=\"line\">flag.toString();Â //Â error</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-18-å­—é¢é‡ç±»å‹\"><a href=\"#2-18-å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"2.18 å­—é¢é‡ç±»å‹\"></a><strong>2.18 å­—é¢é‡ç±»å‹</strong></h5><p>åœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œå¯¹åº”çš„å­—ç¬¦ä¸²å­—é¢é‡ã€æ•°å­—å­—é¢é‡ã€å¸ƒå°”å­—é¢é‡åˆ†åˆ«æ‹¥æœ‰ä¸å…¶å€¼ä¸€æ ·çš„å­—é¢é‡ç±»å‹ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ flag1:Â &quot;hello&quot;Â =Â &quot;hello&quot;;</span><br><span class=\"line\">letÂ flag2:Â 1Â =Â 1;</span><br><span class=\"line\">letÂ flag3:Â trueÂ =Â true;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-19-ç±»å‹åˆ«å\"><a href=\"#2-19-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"2.19 ç±»å‹åˆ«å\"></a><strong>2.19 ç±»å‹åˆ«å</strong></h5><p>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ flagÂ =Â stringÂ |Â number;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ hello(value:Â flag)Â &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-20-äº¤å‰ç±»å‹\"><a href=\"#2-20-äº¤å‰ç±»å‹\" class=\"headerlink\" title=\"2.20 äº¤å‰ç±»å‹\"></a><strong>2.20 äº¤å‰ç±»å‹</strong></h5><p>äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚é€šè¿‡ &amp; è¿ç®—ç¬¦å¯ä»¥å°†ç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Flag1Â =Â &#123;Â x:Â numberÂ &#125;;</span><br><span class=\"line\">typeÂ Flag2Â =Â Flag1Â &amp;Â &#123;Â y:Â stringÂ &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ flag3:Â Flag2Â =Â &#123;</span><br><span class=\"line\">Â Â x:Â 1,</span><br><span class=\"line\">Â Â y:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â henb,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-21-ç±»å‹ä¿æŠ¤\"><a href=\"#2-21-ç±»å‹ä¿æŠ¤\" class=\"headerlink\" title=\"2.21 ç±»å‹ä¿æŠ¤\"></a><strong>2.21 ç±»å‹ä¿æŠ¤</strong></h5><p>ç±»å‹ä¿æŠ¤å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œä»–ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™å°±èƒ½é€šè¿‡ç±»å‹ä¿¡æ¯ç¡®ä¿æŸä¸ªä½œç”¨åŸŸå†…å˜é‡çš„ç±»å‹ å…¶ä¸»è¦æ€æƒ³æ˜¯å°è¯•æ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹ï¼Œä»¥ç¡®å®šå¦‚ä½•å¤„ç†å€¼</p>\n<p>ã€Œtypeof ç±»å‹ä¿æŠ¤ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ double(input:Â stringÂ |Â numberÂ |Â boolean)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (typeofÂ inputÂ ===Â &quot;string&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ inputÂ +Â input;</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â ifÂ (typeofÂ inputÂ ===Â &quot;number&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â returnÂ inputÂ *Â 2;</span><br><span class=\"line\">Â Â Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â Â Â returnÂ !input;</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ã€Œin å…³é”®å­—ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ BirdÂ &#123;</span><br><span class=\"line\">Â Â fly:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">interfaceÂ DogÂ &#123;</span><br><span class=\"line\">Â Â leg:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ getNumber(value:Â BirdÂ |Â Dog)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (&quot;fly&quot;Â inÂ value)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ value.fly;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ value.leg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ã€Œinstanceof ç±»å‹ä¿æŠ¤ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â name!:Â string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ BirdÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â fly!:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ getName(animal:Â Animal)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (animalÂ instanceofÂ Bird)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(animal.fly);</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â console.log(animal.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ã€Œè‡ªå®šä¹‰ç±»å‹ä¿æŠ¤ã€</p>\n<p>é€šè¿‡ <code>type is xxx</code>è¿™æ ·çš„ç±»å‹è°“è¯æ¥è¿›è¡Œç±»å‹ä¿æŠ¤</p>\n<p>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ <code>value is object</code>å°±ä¼šè®¤ä¸ºå¦‚æœå‡½æ•°è¿”å› true é‚£ä¹ˆå®šä¹‰çš„ value å°±æ˜¯ object ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ isObject(value:Â unknown):Â valueÂ isÂ objectÂ &#123;</span><br><span class=\"line\">Â Â returnÂ typeofÂ valueÂ ===Â &quot;object&quot;Â &amp;&amp;Â valueÂ !==Â null;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ fn(x:Â stringÂ |Â object)Â &#123;</span><br><span class=\"line\">Â Â ifÂ (isObject(x))Â &#123;</span><br><span class=\"line\">Â Â Â Â //Â ....</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â //Â .....</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-å‡½æ•°\"><a href=\"#3-å‡½æ•°\" class=\"headerlink\" title=\"3 å‡½æ•°\"></a><strong>3 å‡½æ•°</strong></h3><h5 id=\"3-1-å‡½æ•°çš„å®šä¹‰\"><a href=\"#3-1-å‡½æ•°çš„å®šä¹‰\" class=\"headerlink\" title=\"3.1 å‡½æ•°çš„å®šä¹‰\"></a><strong>3.1 å‡½æ•°çš„å®šä¹‰</strong></h5><p>å¯ä»¥æŒ‡å®šå‚æ•°çš„ç±»å‹å’Œè¿”å›å€¼çš„ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ hello(name:Â string):Â voidÂ &#123;</span><br><span class=\"line\">Â Â console.log(&quot;hello&quot;,Â name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">hello(&quot;hahaha&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-2-å‡½æ•°è¡¨è¾¾å¼\"><a href=\"#3-2-å‡½æ•°è¡¨è¾¾å¼\" class=\"headerlink\" title=\"3.2 å‡½æ•°è¡¨è¾¾å¼\"></a><strong>3.2 å‡½æ•°è¡¨è¾¾å¼</strong></h5><p>å®šä¹‰å‡½æ•°ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ SumFuncÂ =Â (x:Â number,Â y:Â number)Â =&gt;Â number;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ countNumber:Â SumFuncÂ =Â functionÂ (a,Â b)Â &#123;</span><br><span class=\"line\">Â Â returnÂ aÂ +Â b;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-3-å¯é€‰å‚æ•°\"><a href=\"#3-3-å¯é€‰å‚æ•°\" class=\"headerlink\" title=\"3.3 å¯é€‰å‚æ•°\"></a><strong>3.3 å¯é€‰å‚æ•°</strong></h5><p>åœ¨ TS ä¸­å‡½æ•°çš„å½¢å‚å’Œå®å‚å¿…é¡»ä¸€æ ·ï¼Œä¸ä¸€æ ·å°±è¦é…ç½®å¯é€‰å‚æ•°,è€Œä¸”å¿…é¡»æ˜¯ã€Œæœ€åä¸€ä¸ªå‚æ•°ã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ print(name:Â string,Â age?:Â number):Â voidÂ &#123;</span><br><span class=\"line\">Â Â console.log(name,Â age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">print(&quot;hahaha&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-4-é»˜è®¤å‚æ•°\"><a href=\"#3-4-é»˜è®¤å‚æ•°\" class=\"headerlink\" title=\"3.4 é»˜è®¤å‚æ•°\"></a><strong>3.4 é»˜è®¤å‚æ•°</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ ajax(url:Â string,Â method:Â stringÂ =Â &quot;GET&quot;)Â &#123;</span><br><span class=\"line\">Â Â console.log(url,Â method);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&quot;/users&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-5-å‰©ä½™å‚æ•°\"><a href=\"#3-5-å‰©ä½™å‚æ•°\" class=\"headerlink\" title=\"3.5 å‰©ä½™å‚æ•°\"></a><strong>3.5 å‰©ä½™å‚æ•°</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ sum(...numbers:Â number[])Â &#123;</span><br><span class=\"line\">Â Â returnÂ numbers.reduce((val,Â item)Â =&gt;Â (valÂ +=Â item),Â 0);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(sum(1,Â 2,Â 3));</span><br></pre></td></tr></table></figure>\n<h5 id=\"3-6-å‡½æ•°é‡è½½\"><a href=\"#3-6-å‡½æ•°é‡è½½\" class=\"headerlink\" title=\"3.6 å‡½æ•°é‡è½½\"></a><strong>3.6 å‡½æ•°é‡è½½</strong></h5><p>å‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚åœ¨ TypeScript ä¸­ï¼Œè¡¨ç°ä¸ºç»™åŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">letÂ obj:Â anyÂ =Â &#123;&#125;;</span><br><span class=\"line\">functionÂ attr(val:Â string):Â void;</span><br><span class=\"line\">functionÂ attr(val:Â number):Â void;</span><br><span class=\"line\">functionÂ attr(val:Â any):Â voidÂ &#123;</span><br><span class=\"line\">Â Â ifÂ (typeofÂ valÂ ===Â &quot;string&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â obj.nameÂ =Â val;</span><br><span class=\"line\">Â Â &#125;Â elseÂ &#123;</span><br><span class=\"line\">Â Â Â Â obj.ageÂ =Â val;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">attr(&quot;hahaha&quot;);</span><br><span class=\"line\">attr(9);</span><br><span class=\"line\">attr(true);</span><br><span class=\"line\">console.log(obj);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå‡½æ•°é‡è½½çœŸæ­£æ‰§è¡Œçš„æ˜¯åŒåå‡½æ•°æœ€åå®šä¹‰çš„å‡½æ•°ä½“ åœ¨æœ€åä¸€ä¸ªå‡½æ•°ä½“å®šä¹‰ä¹‹å‰å…¨éƒ½å±äºå‡½æ•°ç±»å‹å®šä¹‰ ä¸èƒ½å†™å…·ä½“çš„å‡½æ•°å®ç°æ–¹æ³• åªèƒ½å®šä¹‰ç±»å‹</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<h3 id=\"4-ç±»\"><a href=\"#4-ç±»\" class=\"headerlink\" title=\"4 ç±»\"></a><strong>4 ç±»</strong></h3><h5 id=\"4-1-ç±»çš„å®šä¹‰\"><a href=\"#4-1-ç±»çš„å®šä¹‰\" class=\"headerlink\" title=\"4.1 ç±»çš„å®šä¹‰\"></a><strong>4.1 ç±»çš„å®šä¹‰</strong></h5><p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Class</code> å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name!:Â string;Â //å¦‚æœåˆå§‹å±æ€§æ²¡èµ‹å€¼å°±éœ€è¦åŠ ä¸Š!</span><br><span class=\"line\">Â Â constructor(_name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â _name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getName():Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p1Â =Â newÂ Person(&quot;hello&quot;);</span><br><span class=\"line\">p1.getName();</span><br></pre></td></tr></table></figure>\n<p>å½“ç„¶ å¦‚æœæˆ‘ä»¬å›¾çœäº‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå±æ€§å®šä¹‰ç›´æ¥å†™åˆ°æ„é€ å‡½æ•°çš„å‚æ•°é‡Œé¢å»(ä¸è¿‡ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·å†™ å› ä¸ºä¼šè®©ä»£ç å¢åŠ é˜…è¯»éš¾åº¦)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â constructor(publicÂ name:Â string)Â &#123;&#125;</span><br><span class=\"line\">Â Â getName():Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p1Â =Â newÂ Person(&quot;hello&quot;);</span><br><span class=\"line\">p1.getName();</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»çš„æ—¶å€™,ä¼šå¾—åˆ° ã€Œ2 ä¸ªç±»å‹ã€ä¸€ä¸ªæ˜¯æ„é€ å‡½æ•°ç±»å‹çš„å‡½æ•°ç±»å‹(å½“åšæ™®é€šæ„é€ å‡½æ•°çš„ç±»å‹) å¦ä¸€ä¸ªæ˜¯ç±»çš„å®ä¾‹ç±»å‹ï¼ˆä»£è¡¨å®ä¾‹ï¼‰</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>å…·ä½“çœ‹ä¾‹å­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ ComponentÂ &#123;</span><br><span class=\"line\">Â Â staticÂ myName:Â stringÂ =Â &quot;é™æ€åç§°å±æ€§&quot;;</span><br><span class=\"line\">Â Â myName:Â stringÂ =Â &quot;å®ä¾‹åç§°å±æ€§&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//tsÂ ä¸€ä¸ªç±»å‹Â ä¸€ä¸ªå«å€¼</span><br><span class=\"line\">//æ”¾åœ¨=åé¢çš„æ˜¯å€¼</span><br><span class=\"line\">letÂ comÂ =Â Component;Â //è¿™é‡Œæ˜¯ä»£è¡¨æ„é€ å‡½æ•°</span><br><span class=\"line\">//å†’å·åé¢çš„æ˜¯ç±»å‹</span><br><span class=\"line\">letÂ c:Â ComponentÂ =Â newÂ Component();Â //è¿™é‡Œæ˜¯ä»£è¡¨å®ä¾‹ç±»å‹</span><br><span class=\"line\">letÂ f:Â typeofÂ ComponentÂ =Â com;</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-2-å­˜å–å™¨\"><a href=\"#4-2-å­˜å–å™¨\" class=\"headerlink\" title=\"4.2 å­˜å–å™¨\"></a><strong>4.2 å­˜å–å™¨</strong></h5><p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å­˜å–å™¨æ¥æ”¹å˜ä¸€ä¸ªç±»ä¸­å±æ€§çš„è¯»å–å’Œèµ‹å€¼è¡Œä¸º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ UserÂ &#123;</span><br><span class=\"line\">Â Â myname:Â string;</span><br><span class=\"line\">Â Â constructor(myname:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.mynameÂ =Â myname;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getÂ name()Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.myname;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â setÂ name(value)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.mynameÂ =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ userÂ =Â newÂ User(&quot;hello&quot;);</span><br><span class=\"line\">user.nameÂ =Â &quot;world&quot;;</span><br><span class=\"line\">console.log(user.name);</span><br></pre></td></tr></table></figure>\n<p>å…¶å®æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ç¿»è¯‘æˆ es5 çš„ä»£ç  åŸç†å¾ˆç®€å• å°±æ˜¯ä½¿ç”¨äº† Object.defineProperty åœ¨ç±»çš„åŸå‹ä¸Šé¢æ‹¦æˆªäº†å±æ€§å¯¹åº”çš„ get å’Œ set æ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">varÂ UserÂ =Â /**Â @classÂ */Â (functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â functionÂ User(myname)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.mynameÂ =Â myname;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â Object.defineProperty(User.prototype,Â &quot;name&quot;,Â &#123;</span><br><span class=\"line\">Â Â Â Â get:Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â returnÂ this.myname;</span><br><span class=\"line\">Â Â Â Â &#125;,</span><br><span class=\"line\">Â Â Â Â set:Â functionÂ (value)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â this.mynameÂ =Â value;</span><br><span class=\"line\">Â Â Â Â &#125;,</span><br><span class=\"line\">Â Â Â Â enumerable:Â false,</span><br><span class=\"line\">Â Â Â Â configurable:Â true,</span><br><span class=\"line\">Â Â &#125;);</span><br><span class=\"line\">Â Â returnÂ User;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\">varÂ userÂ =Â newÂ User(&quot;hello&quot;);</span><br><span class=\"line\">user.nameÂ =Â &quot;world&quot;;</span><br><span class=\"line\">console.log(user.name);</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-3-readonly-åªè¯»å±æ€§\"><a href=\"#4-3-readonly-åªè¯»å±æ€§\" class=\"headerlink\" title=\"4.3 readonly åªè¯»å±æ€§\"></a><strong>4.3 readonly åªè¯»å±æ€§</strong></h5><p>readonly ä¿®é¥°çš„å˜é‡åªèƒ½åœ¨ã€Œæ„é€ å‡½æ•°ã€ä¸­åˆå§‹åŒ– TypeScript çš„ç±»å‹ç³»ç»ŸåŒæ ·ä¹Ÿå…è®¸å°† interfaceã€typeã€ class ä¸Šçš„å±æ€§æ ‡è¯†ä¸º readonly readonly å®é™…ä¸Šåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œä»£ç æ£€æŸ¥ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â publicÂ readonlyÂ name:Â string;</span><br><span class=\"line\">Â Â constructor(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â changeName(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;Â //è¿™ä¸ªtsæ˜¯æŠ¥é”™çš„</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ aÂ =Â newÂ Animal(&quot;hello&quot;);</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-4-ç»§æ‰¿\"><a href=\"#4-4-ç»§æ‰¿\" class=\"headerlink\" title=\"4.4 ç»§æ‰¿\"></a><strong>4.4 ç»§æ‰¿</strong></h5><p>å­ç±»ç»§æ‰¿çˆ¶ç±»åå­ç±»çš„å®ä¾‹å°±æ‹¥æœ‰äº†çˆ¶ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥å¢å¼ºä»£ç çš„å¯å¤ç”¨æ€§</p>\n<p>å°†å­ç±»å…¬ç”¨çš„æ–¹æ³•æŠ½è±¡å‡ºæ¥æ”¾åœ¨çˆ¶ç±»ä¸­ï¼Œè‡ªå·±çš„ç‰¹æ®Šé€»è¾‘æ”¾åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»çš„é€»è¾‘</p>\n<p>super å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸Šçš„æ–¹æ³•å’Œå±æ€§</p>\n<p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ extends å…³é”®å­—æ¥å®ç°ç»§æ‰¿</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;Â //å®šä¹‰å®ä¾‹çš„å±æ€§ï¼Œé»˜è®¤çœç•¥publicä¿®é¥°ç¬¦</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â //æ„é€ å‡½æ•°</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â Â Â this.ageÂ =Â age;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getName():Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â setName(name:Â string):Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ StudentÂ extendsÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â no:Â number;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number,Â no:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â super(name,Â age);</span><br><span class=\"line\">Â Â Â Â this.noÂ =Â no;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getNo():Â numberÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.no;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ s1Â =Â newÂ Student(&quot;hello&quot;,Â 10,Â 1);</span><br><span class=\"line\">console.log(s1);</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-5-ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦\"><a href=\"#4-5-ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦\" class=\"headerlink\" title=\"4.5 ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦\"></a><strong>4.5 ç±»é‡Œé¢çš„ä¿®é¥°ç¬¦</strong></h5><p>ã€Œpublicã€ ç±»é‡Œé¢ å­ç±» å…¶å®ƒä»»ä½•åœ°æ–¹å¤–è¾¹éƒ½å¯ä»¥è®¿é—®ã€Œprotectedã€ ç±»é‡Œé¢ å­ç±» éƒ½å¯ä»¥è®¿é—®,å…¶å®ƒä»»ä½•åœ°æ–¹ä¸èƒ½è®¿é—®ã€Œprivateã€ ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œå­ç±»å’Œå…¶å®ƒä»»ä½•åœ°æ–¹éƒ½ä¸å¯ä»¥è®¿é—®</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ ParentÂ &#123;</span><br><span class=\"line\">Â Â publicÂ name:Â string;</span><br><span class=\"line\">Â Â protectedÂ age:Â number;</span><br><span class=\"line\">Â Â privateÂ car:Â number;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â //æ„é€ å‡½æ•°</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â Â Â this.ageÂ =Â age;</span><br><span class=\"line\">Â Â Â Â this.carÂ =Â car;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getName():Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ this.name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â setName(name:Â string):Â voidÂ &#123;</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ ChildÂ extendsÂ ParentÂ &#123;</span><br><span class=\"line\">Â Â constructor(name:Â string,Â age:Â number,Â car:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â super(name,Â age,Â car);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â desc()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(`$&#123;this.name&#125;Â $&#123;this.age&#125;Â $&#123;this.car&#125;`);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ childÂ =Â newÂ Child(&quot;hello&quot;,Â 10,Â 1000);</span><br><span class=\"line\">console.log(child.name);</span><br><span class=\"line\">console.log(child.age);Â //ageè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™</span><br><span class=\"line\">console.log(child.car);Â //carè®¿é—®ä¸åˆ°Â ä¼šæŠ¥é”™</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-6-é™æ€å±æ€§-é™æ€æ–¹æ³•\"><a href=\"#4-6-é™æ€å±æ€§-é™æ€æ–¹æ³•\" class=\"headerlink\" title=\"4.6 é™æ€å±æ€§ é™æ€æ–¹æ³•\"></a><strong>4.6 é™æ€å±æ€§ é™æ€æ–¹æ³•</strong></h5><p>ç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•æ˜¯ç›´æ¥å®šä¹‰åœ¨ç±»æœ¬èº«ä¸Šé¢çš„ æ‰€ä»¥ä¹Ÿåªèƒ½é€šè¿‡ç›´æ¥è°ƒç”¨ç±»çš„æ–¹æ³•å’Œå±æ€§æ¥è®¿é—®</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ ParentÂ &#123;</span><br><span class=\"line\">Â Â staticÂ mainNameÂ =Â &quot;Parent&quot;;</span><br><span class=\"line\">Â Â staticÂ getmainName()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this);Â //æ³¨æ„é™æ€æ–¹æ³•é‡Œé¢çš„thisæŒ‡å‘çš„æ˜¯ç±»æœ¬èº«Â è€Œä¸æ˜¯ç±»çš„å®ä¾‹å¯¹è±¡Â æ‰€ä»¥é™æ€æ–¹æ³•é‡Œé¢åªèƒ½è®¿é—®ç±»çš„é™æ€å±æ€§å’Œæ–¹æ³•</span><br><span class=\"line\">Â Â Â Â returnÂ this.mainName;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â publicÂ name:Â string;</span><br><span class=\"line\">Â Â constructor(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â //æ„é€ å‡½æ•°</span><br><span class=\"line\">Â Â Â Â this.nameÂ =Â name;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(Parent.mainName);</span><br><span class=\"line\">console.log(Parent.getmainName());</span><br></pre></td></tr></table></figure>\n<h5 id=\"4-7-æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\"><a href=\"#4-7-æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\" class=\"headerlink\" title=\"4.7 æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•\"></a><strong>4.7 æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•</strong></h5><p>æŠ½è±¡ç±»ï¼Œæ— æ³•è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿å¹¶ä¸”æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹ å­ç±»å¯ä»¥å¯¹æŠ½è±¡ç±»è¿›è¡Œä¸åŒçš„å®ç°</p>\n<p>æŠ½è±¡æ–¹æ³•åªèƒ½å‡ºç°åœ¨æŠ½è±¡ç±»ä¸­å¹¶ä¸”æŠ½è±¡æ–¹æ³•ä¸èƒ½åœ¨æŠ½è±¡ç±»ä¸­è¢«å…·ä½“å®ç°ï¼Œåªèƒ½åœ¨æŠ½è±¡ç±»çš„å­ç±»ä¸­å®ç°ï¼ˆå¿…é¡»è¦å®ç°ï¼‰</p>\n<p>ä½¿ç”¨åœºæ™¯ï¼šæˆ‘ä»¬ä¸€èˆ¬ç”¨æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•æŠ½ç¦»å‡ºäº‹ç‰©çš„å…±æ€§ ä»¥åæ‰€æœ‰ç»§æ‰¿çš„å­ç±»å¿…é¡»æŒ‰ç…§è§„èŒƒå»å®ç°è‡ªå·±çš„å…·ä½“é€»è¾‘ è¿™æ ·å¯ä»¥å¢åŠ ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§</p>\n<p>ä½¿ç”¨ <code>abstract</code> å…³é”®å­—æ¥å®šä¹‰æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abstractÂ classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â name!:Â string;</span><br><span class=\"line\">Â Â abstractÂ speak():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ CatÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â speak()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;å–µå–µå–µ&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ animalÂ =Â newÂ Animal();Â //ç›´æ¥æŠ¥é”™Â æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹</span><br><span class=\"line\">letÂ catÂ =Â newÂ Cat();</span><br><span class=\"line\">cat.speak();</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒ 1:é‡å†™(override)å’Œé‡è½½(overload)çš„åŒºåˆ«</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>ã€Œé‡å†™ã€æ˜¯æŒ‡å­ç±»é‡å†™ç»§æ‰¿è‡ªçˆ¶ç±»ä¸­çš„æ–¹æ³•ã€Œé‡è½½ã€æ˜¯æŒ‡ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªç±»å‹å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â speak(word:Â string):Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ &quot;åŠ¨ç‰©:&quot;Â +Â word;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ CatÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â speak(word:Â string):Â stringÂ &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ &quot;çŒ«:&quot;Â +Â word;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ catÂ =Â newÂ Cat();</span><br><span class=\"line\">console.log(cat.speak(&quot;hello&quot;));</span><br><span class=\"line\">//Â ä¸Šé¢æ˜¯é‡å†™</span><br><span class=\"line\">//--------------------------------------------</span><br><span class=\"line\">//Â ä¸‹é¢æ˜¯é‡è½½</span><br><span class=\"line\">functionÂ double(val:Â number):Â number;</span><br><span class=\"line\">functionÂ double(val:Â string):Â string;</span><br><span class=\"line\">functionÂ double(val:Â any):Â anyÂ &#123;</span><br><span class=\"line\">Â Â ifÂ (typeofÂ valÂ ==Â &quot;number&quot;)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ valÂ *Â 2;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ valÂ +Â val;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ rÂ =Â double(1);</span><br><span class=\"line\">console.log(r);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒ 2:ä»€ä¹ˆæ˜¯ã€Œå¤šæ€ã€</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>åœ¨çˆ¶ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å­ç±»ä¸­æœ‰å¤šä¸ªå®ç°ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒçš„å¯¹è±¡æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œå®ç°è¿è¡Œæ—¶çš„ç»‘å®šã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abstractÂ classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â //Â å£°æ˜æŠ½è±¡çš„æ–¹æ³•ï¼Œè®©å­ç±»å»å®ç°</span><br><span class=\"line\">Â Â abstractÂ sleep():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ DogÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â sleep()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;dogÂ sleep&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ dogÂ =Â newÂ Dog();</span><br><span class=\"line\">classÂ CatÂ extendsÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â sleep()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;catÂ sleep&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ catÂ =Â newÂ Cat();</span><br><span class=\"line\">letÂ animals:Â Animal[]Â =Â [dog,Â cat];</span><br><span class=\"line\">animals.forEach((i)Â =&gt;Â &#123;</span><br><span class=\"line\">Â Â i.sleep();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-æ¥å£\"><a href=\"#5-æ¥å£\" class=\"headerlink\" title=\"5 æ¥å£\"></a><strong>5 æ¥å£</strong></h3><p>æ¥å£æ—¢å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æè¿°å¯¹è±¡çš„å½¢çŠ¶</p>\n<p>æˆ‘ä»¬ç”¨ <code>interface</code> å…³é”®å­—æ¥å®šä¹‰æ¥å£ åœ¨æ¥å£ä¸­å¯ä»¥ç”¨åˆ†å·æˆ–è€…é€—å·åˆ†å‰²æ¯ä¸€é¡¹ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸åŠ </p>\n<h5 id=\"5-1-å¯¹è±¡çš„å½¢çŠ¶\"><a href=\"#5-1-å¯¹è±¡çš„å½¢çŠ¶\" class=\"headerlink\" title=\"5.1 å¯¹è±¡çš„å½¢çŠ¶\"></a><strong>5.1 å¯¹è±¡çš„å½¢çŠ¶</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`</span><br><span class=\"line\">//æ¥å£å¯ä»¥ç”¨æ¥æè¿°`å¯¹è±¡çš„å½¢çŠ¶`</span><br><span class=\"line\">interfaceÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speak():Â void;</span><br><span class=\"line\">Â Â readonlyÂ lng:Â string;Â //readonlyè¡¨ç¤ºåªè¯»å±æ€§Â åç»­ä¸å¯ä»¥æ›´æ”¹</span><br><span class=\"line\">Â Â name?:Â string;Â //ï¼Ÿè¡¨ç¤ºå¯é€‰å±æ€§</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ speakman:Â SpeakableÂ =Â &#123;</span><br><span class=\"line\">Â Â //Â Â Â speak()Â &#123;&#125;,Â //å°‘å±æ€§ä¼šæŠ¥é”™</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â lng:Â &quot;en&quot;,</span><br><span class=\"line\">Â Â age:Â 111,Â //å¤šå±æ€§ä¹Ÿä¼šæŠ¥é”™</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-2-è¡Œä¸ºçš„æŠ½è±¡\"><a href=\"#5-2-è¡Œä¸ºçš„æŠ½è±¡\" class=\"headerlink\" title=\"5.2 è¡Œä¸ºçš„æŠ½è±¡\"></a><strong>5.2 è¡Œä¸ºçš„æŠ½è±¡</strong></h5><p>æ¥å£å¯ä»¥æŠŠä¸€äº›ç±»ä¸­å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•æŠ½è±¡å‡ºæ¥,å¯ä»¥ç”¨æ¥çº¦æŸå®ç°æ­¤æ¥å£çš„ç±»</p>\n<p>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥è¢«å¤šä¸ªç±»å®ç°</p>\n<p>æˆ‘ä»¬ç”¨ <code>implements</code>å…³é”®å­—æ¥ä»£è¡¨ å®ç°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //æ¥å£å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡</span><br><span class=\"line\">interfaceÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speak():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interfaceÂ EatableÂ &#123;</span><br><span class=\"line\">Â Â eat():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</span><br><span class=\"line\">classÂ PersonÂ implementsÂ Speakable,Â EatableÂ &#123;</span><br><span class=\"line\">Â Â speak()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;Personè¯´è¯&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â //Â Â Â eat()Â &#123;&#125;Â //éœ€è¦å®ç°çš„æ¥å£åŒ…å«eatæ–¹æ³•Â ä¸å®ç°ä¼šæŠ¥é”™</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-3-å®šä¹‰ä»»æ„å±æ€§\"><a href=\"#5-3-å®šä¹‰ä»»æ„å±æ€§\" class=\"headerlink\" title=\"5.3 å®šä¹‰ä»»æ„å±æ€§\"></a><strong>5.3 å®šä¹‰ä»»æ„å±æ€§</strong></h5><p>å¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰æ¥å£çš„æ—¶å€™æ— æ³•é¢„å…ˆçŸ¥é“æœ‰å“ªäº›å±æ€§çš„æ—¶å€™,å¯ä»¥ä½¿ç”¨ <code>[propName:string]:any</code>,propName åå­—æ˜¯ä»»æ„çš„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â id:Â number;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â [propName:Â string]:Â any;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ p1Â =Â &#123;</span><br><span class=\"line\">Â Â id:Â 1,</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ªæ¥å£è¡¨ç¤º å¿…é¡»è¦æœ‰ id å’Œ name è¿™ä¸¤ä¸ªå­—æ®µ ç„¶åè¿˜å¯ä»¥æ–°åŠ å…¶ä½™çš„æœªçŸ¥å­—æ®µ</p>\n<h5 id=\"5-4-æ¥å£çš„ç»§æ‰¿\"><a href=\"#5-4-æ¥å£çš„ç»§æ‰¿\" class=\"headerlink\" title=\"5.4 æ¥å£çš„ç»§æ‰¿\"></a><strong>5.4 æ¥å£çš„ç»§æ‰¿</strong></h5><p>æˆ‘ä»¬é™¤äº†ç±»å¯ä»¥ç»§æ‰¿ æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿ åŒæ ·çš„ä½¿ç”¨ <code>extends</code>å…³é”®å­—</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speak():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interfaceÂ SpeakChineseÂ extendsÂ SpeakableÂ &#123;</span><br><span class=\"line\">Â Â speakChinese():Â void;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ PersonÂ implementsÂ SpeakChineseÂ &#123;</span><br><span class=\"line\">Â Â speak()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;Person&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â speakChinese()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;speakChinese&quot;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-5-å‡½æ•°ç±»å‹æ¥å£\"><a href=\"#5-5-å‡½æ•°ç±»å‹æ¥å£\" class=\"headerlink\" title=\"5.5 å‡½æ•°ç±»å‹æ¥å£\"></a><strong>5.5 å‡½æ•°ç±»å‹æ¥å£</strong></h5><p>å¯ä»¥ç”¨æ¥å£æ¥å®šä¹‰å‡½æ•°ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ discountÂ &#123;</span><br><span class=\"line\">Â Â (price:Â number):Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ cost:Â discountÂ =Â functionÂ (price:Â number):Â numberÂ &#123;</span><br><span class=\"line\">Â Â returnÂ priceÂ *Â 0.8;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"5-6-æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£\"><a href=\"#5-6-æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£\" class=\"headerlink\" title=\"5.6 æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£\"></a><strong>5.6 æ„é€ å‡½æ•°çš„ç±»å‹æ¥å£</strong></h5><p>ä½¿ç”¨ç‰¹æ®Šçš„ new()å…³é”®å­—æ¥æè¿°ç±»çš„æ„é€ å‡½æ•°ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ AnimalÂ &#123;</span><br><span class=\"line\">Â Â constructor(publicÂ name:Â string)Â &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//ä¸åŠ newæ˜¯ä¿®é¥°å‡½æ•°çš„,åŠ newæ˜¯ä¿®é¥°ç±»çš„</span><br><span class=\"line\">interfaceÂ WithNameClassÂ &#123;</span><br><span class=\"line\">Â Â newÂ (name:Â string):Â Animal;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ createAnimal(clazz:Â WithNameClass,Â name:Â string)Â &#123;</span><br><span class=\"line\">Â Â returnÂ newÂ clazz(name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ aÂ =Â createAnimal(Animal,Â &quot;hello&quot;);</span><br><span class=\"line\">console.log(a.name);</span><br></pre></td></tr></table></figure>\n<p>å…¶å®è¿™æ ·çš„ç”¨æ³•ä¸€èˆ¬å‡ºç°åœ¨ å½“æˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ªç±»ä½œä¸ºå‚æ•°çš„æ—¶å€™ æˆ‘ä»¬éœ€è¦å¯¹ä¼ å…¥çš„ç±»çš„æ„é€ å‡½æ•°ç±»å‹è¿›è¡Œçº¦æŸ æ‰€ä»¥éœ€è¦ä½¿ç”¨ new å…³é”®å­—ä»£è¡¨æ˜¯ç±»çš„æ„é€ å‡½æ•°ç±»å‹ ç”¨ä»¥å’Œæ™®é€šå‡½æ•°è¿›è¡ŒåŒºåˆ†</p>\n<hr>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒï¼šæ¥å£å’Œç±»å‹åˆ«åçš„åŒºåˆ« è¿™ä¸ªé¢˜ç›®æ˜¯ç»å…¸çš„ ã€Œts é¢è¯•é¢˜ã€</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<p>å®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹ä½¿ç”¨æ¥å£ç±»å‹å’Œç±»å‹åˆ«åçš„æ•ˆæœç­‰ä»·ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹å®šçš„åœºæ™¯ä¸‹è¿™ä¸¤è€…è¿˜æ˜¯å­˜åœ¨å¾ˆå¤§åŒºåˆ«ã€‚</p>\n<p>1.åŸºç¡€æ•°æ®ç±»å‹ ä¸æ¥å£ä¸åŒï¼Œç±»å‹åˆ«åè¿˜å¯ä»¥ç”¨äºå…¶ä»–ç±»å‹ï¼Œå¦‚åŸºæœ¬ç±»å‹ï¼ˆåŸå§‹å€¼ï¼‰ã€è”åˆç±»å‹ã€å…ƒç»„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â primitive</span><br><span class=\"line\">typeÂ NameÂ =Â string;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â union</span><br><span class=\"line\">typeÂ PartialPointÂ =Â PartialPointXÂ |Â PartialPointY;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â tuple</span><br><span class=\"line\">typeÂ DataÂ =Â [number,Â string];</span><br><span class=\"line\"></span><br><span class=\"line\">//Â dom</span><br><span class=\"line\">letÂ divÂ =Â document.createElement(&quot;div&quot;);</span><br><span class=\"line\">typeÂ BÂ =Â typeofÂ div;</span><br></pre></td></tr></table></figure>\n<p>2.é‡å¤å®šä¹‰</p>\n<p>æ¥å£å¯ä»¥å®šä¹‰å¤šæ¬¡ ä¼šè¢«è‡ªåŠ¨åˆå¹¶ä¸ºå•ä¸ªæ¥å£ ç±»å‹åˆ«åä¸å¯ä»¥é‡å¤å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PointÂ &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interfaceÂ PointÂ &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">constÂ point:Â PointÂ =Â &#123;Â x:Â 1,Â y:Â 2Â &#125;;</span><br></pre></td></tr></table></figure>\n<p>3.æ‰©å±• æ¥å£å¯ä»¥æ‰©å±•ç±»å‹åˆ«åï¼ŒåŒç†ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ‰©å±•æ¥å£ã€‚ä½†æ˜¯ä¸¤è€…å®ç°æ‰©å±•çš„æ–¹å¼ä¸åŒ</p>\n<p>æ¥å£çš„æ‰©å±•å°±æ˜¯ç»§æ‰¿ï¼Œé€šè¿‡ extends æ¥å®ç°ã€‚ç±»å‹åˆ«åçš„æ‰©å±•å°±æ˜¯äº¤å‰ç±»å‹ï¼Œé€šè¿‡ &amp; æ¥å®ç°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â æ¥å£æ‰©å±•æ¥å£</span><br><span class=\"line\">interfaceÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">interfaceÂ PointÂ extendsÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//Â ----</span><br><span class=\"line\">//Â ç±»å‹åˆ«åæ‰©å±•ç±»å‹åˆ«å</span><br><span class=\"line\">typeÂ PointXÂ =Â &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ PointÂ =Â PointXÂ &amp;Â &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">//Â ----</span><br><span class=\"line\">//Â æ¥å£æ‰©å±•ç±»å‹åˆ«å</span><br><span class=\"line\">typeÂ PointXÂ =Â &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">interfaceÂ PointÂ extendsÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//Â ----</span><br><span class=\"line\">//Â ç±»å‹åˆ«åæ‰©å±•æ¥å£</span><br><span class=\"line\">interfaceÂ PointXÂ &#123;</span><br><span class=\"line\">Â Â x:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">typeÂ PointÂ =Â PointXÂ &amp;Â &#123;</span><br><span class=\"line\">Â Â y:Â number;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>4.å®ç° è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šæƒ…å†µ ç±»æ— æ³•å®ç°å®šä¹‰äº†è”åˆç±»å‹çš„ç±»å‹åˆ«å</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ PartialPointÂ =Â &#123;Â x:Â numberÂ &#125;Â |Â &#123;Â y:Â numberÂ &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â AÂ classÂ canÂ onlyÂ implementÂ anÂ objectÂ typeÂ or</span><br><span class=\"line\">//Â intersectionÂ ofÂ objectÂ typesÂ withÂ staticallyÂ knownÂ members.</span><br><span class=\"line\">classÂ SomePartialPointÂ implementsÂ PartialPointÂ &#123;</span><br><span class=\"line\">Â Â //Â Error</span><br><span class=\"line\">Â Â xÂ =Â 1;</span><br><span class=\"line\">Â Â yÂ =Â 2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-æ³›å‹\"><a href=\"#6-æ³›å‹\" class=\"headerlink\" title=\"6 æ³›å‹\"></a><strong>6 æ³›å‹</strong></h3><p>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§</p>\n<p>ä¸ºäº†æ›´å¥½çš„äº†è§£æ³›å‹çš„ä½œç”¨ æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ createArray(length:Â number,Â value:Â any):Â any[]Â &#123;</span><br><span class=\"line\">Â Â letÂ resultÂ =Â [];</span><br><span class=\"line\">Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â result[i]Â =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ result;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">createArray(3,Â &quot;x&quot;);Â //Â [&apos;x&apos;,Â &apos;x&apos;,Â &apos;x&apos;]</span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¿°è¿™æ®µä»£ç ç”¨æ¥ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º length å€¼ä¸º value çš„æ•°ç»„ ä½†æ˜¯æˆ‘ä»¬å…¶å®å¯ä»¥å‘ç°ä¸€ä¸ªé—®é¢˜ ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹çš„ value è¿”å›å€¼çš„æ•°ç»„æ°¸è¿œæ˜¯ any ç±»å‹ å¦‚æœæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ æˆ‘ä»¬é¢„å…ˆä¸çŸ¥é“ä¼šä¼ å…¥ä»€ä¹ˆç±»å‹ ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ä¸ç®¡æˆ‘ä»¬ä¼ å…¥ä»€ä¹ˆç±»å‹ æˆ‘ä»¬çš„è¿”å›çš„æ•°ç»„çš„æŒ‡é‡Œé¢çš„ç±»å‹åº”è¯¥å’Œå‚æ•°ä¿æŒä¸€è‡´ é‚£ä¹ˆè¿™æ—¶å€™ æ³›å‹å°±ç™»åœºäº†</p>\n<p>ä½¿ç”¨ã€Œæ³›å‹ã€æ”¹é€ </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ createArray&lt;T&gt;(length:Â number,Â value:Â T):Â Array&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â letÂ result:Â T[]Â =Â [];</span><br><span class=\"line\">Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â result[i]Â =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ result;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">createArray&lt;string&gt;(3,Â &quot;x&quot;);Â //Â [&apos;x&apos;,Â &apos;x&apos;,Â &apos;x&apos;]</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;&gt;çš„å†™æ³• ç„¶åå†é¢ä¼ å…¥ä¸€ä¸ªå˜é‡ T ç”¨æ¥è¡¨ç¤ºåç»­å‡½æ•°éœ€è¦ç”¨åˆ°çš„ç±»å‹ å½“æˆ‘ä»¬çœŸæ­£å»è°ƒç”¨å‡½æ•°çš„æ—¶å€™å†ä¼ å…¥ T çš„ç±»å‹å°±å¯ä»¥è§£å†³å¾ˆå¤šé¢„å…ˆæ— æ³•ç¡®å®šç±»å‹ç›¸å…³çš„é—®é¢˜</p>\n<h5 id=\"6-1-å¤šä¸ªç±»å‹å‚æ•°\"><a href=\"#6-1-å¤šä¸ªç±»å‹å‚æ•°\" class=\"headerlink\" title=\"6.1 å¤šä¸ªç±»å‹å‚æ•°\"></a><strong>6.1 å¤šä¸ªç±»å‹å‚æ•°</strong></h5><p>å¦‚æœæˆ‘ä»¬éœ€è¦æœ‰å¤šä¸ªæœªçŸ¥çš„ç±»å‹å ä½ é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»»ä½•çš„å­—æ¯æ¥è¡¨ç¤ºä¸åŒçš„ç±»å‹å‚æ•°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ swap&lt;T,Â U&gt;(tuple:Â [T,Â U]):Â [U,Â T]Â &#123;</span><br><span class=\"line\">Â Â returnÂ [tuple[1],Â tuple[0]];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">swap([7,Â &quot;seven&quot;]);Â //Â [&apos;seven&apos;,Â 7]</span><br></pre></td></tr></table></figure>\n<h5 id=\"6-2-æ³›å‹çº¦æŸ\"><a href=\"#6-2-æ³›å‹çº¦æŸ\" class=\"headerlink\" title=\"6.2 æ³›å‹çº¦æŸ\"></a><strong>6.2 æ³›å‹çº¦æŸ</strong></h5><p>åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹å˜é‡çš„æ—¶å€™ï¼Œç”±äºäº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±æ€§æˆ–æ–¹æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ loggingIdentity&lt;T&gt;(arg:Â T):Â TÂ &#123;</span><br><span class=\"line\">Â Â console.log(arg.length);</span><br><span class=\"line\">Â Â returnÂ arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â index.ts(2,19):Â errorÂ TS2339:Â PropertyÂ &apos;length&apos;Â doesÂ notÂ existÂ onÂ typeÂ &apos;T&apos;.</span><br></pre></td></tr></table></figure>\n<p>ä¸Šä¾‹ä¸­ï¼Œæ³›å‹ T ä¸ä¸€å®šåŒ…å«å±æ€§ lengthï¼Œæ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™äº†ã€‚</p>\n<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ³›å‹è¿›è¡Œçº¦æŸï¼Œåªå…è®¸è¿™ä¸ªå‡½æ•°ä¼ å…¥é‚£äº›åŒ…å« length å±æ€§çš„å˜é‡ã€‚è¿™å°±æ˜¯ã€Œæ³›å‹çº¦æŸã€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ LengthwiseÂ &#123;</span><br><span class=\"line\">Â Â length:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ loggingIdentity&lt;TÂ extendsÂ Lengthwise&gt;(arg:Â T):Â TÂ &#123;</span><br><span class=\"line\">Â Â console.log(arg.length);</span><br><span class=\"line\">Â Â returnÂ arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>â</strong></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šæˆ‘ä»¬åœ¨æ³›å‹é‡Œé¢ä½¿ç”¨<code>extends</code>å…³é”®å­—ä»£è¡¨çš„æ˜¯æ³›å‹çº¦æŸ éœ€è¦å’Œç±»çš„ç»§æ‰¿åŒºåˆ†å¼€</p>\n</blockquote>\n<blockquote>\n<p>â</p>\n</blockquote>\n<h5 id=\"6-3-æ³›å‹æ¥å£\"><a href=\"#6-3-æ³›å‹æ¥å£\" class=\"headerlink\" title=\"6.3 æ³›å‹æ¥å£\"></a><strong>6.3 æ³›å‹æ¥å£</strong></h5><p>å®šä¹‰æ¥å£çš„æ—¶å€™ä¹Ÿå¯ä»¥æŒ‡å®šæ³›å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ Cart&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â list:Â T[];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ cart:Â Cart&lt;&#123;Â name:Â string;Â price:Â numberÂ &#125;&gt;Â =Â &#123;</span><br><span class=\"line\">Â Â list:Â [&#123;Â name:Â &quot;hello&quot;,Â price:Â 10Â &#125;],</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">console.log(cart.list[0].name,Â cart.list[0].price);</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å®šä¹‰äº†æ¥å£ä¼ å…¥çš„ç±»å‹ T ä¹‹åè¿”å›çš„å¯¹è±¡æ•°ç»„é‡Œé¢ T å°±æ˜¯å½“æ—¶ä¼ å…¥çš„å‚æ•°ç±»å‹</p>\n<h5 id=\"6-4-æ³›å‹ç±»\"><a href=\"#6-4-æ³›å‹ç±»\" class=\"headerlink\" title=\"6.4 æ³›å‹ç±»\"></a><strong>6.4 æ³›å‹ç±»</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">classÂ MyArray&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â privateÂ list:Â T[]Â =Â [];</span><br><span class=\"line\">Â Â add(value:Â T)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.list.push(value);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â getMax():Â TÂ &#123;</span><br><span class=\"line\">Â Â Â Â letÂ resultÂ =Â this.list[0];</span><br><span class=\"line\">Â Â Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â this.list.length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â ifÂ (this.list[i]Â &gt;Â result)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â resultÂ =Â this.list[i];</span><br><span class=\"line\">Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â returnÂ result;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ arrÂ =Â newÂ MyArray();</span><br><span class=\"line\">arr.add(1);</span><br><span class=\"line\">arr.add(2);</span><br><span class=\"line\">arr.add(3);</span><br><span class=\"line\">letÂ retÂ =Â arr.getMax();</span><br><span class=\"line\">console.log(ret);</span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¯‰ä¾‹å­æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåœ¨æ•°ç»„é‡Œé¢æ·»åŠ æ•°å­—å¹¶ä¸”è·å–æœ€å¤§å€¼çš„æ³›å‹ç±»</p>\n<h5 id=\"6-5-æ³›å‹ç±»å‹åˆ«å\"><a href=\"#6-5-æ³›å‹ç±»å‹åˆ«å\" class=\"headerlink\" title=\"6.5 æ³›å‹ç±»å‹åˆ«å\"></a><strong>6.5 æ³›å‹ç±»å‹åˆ«å</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Cart&lt;T&gt;Â =Â &#123;Â list:Â T[]Â &#125;Â |Â T[];</span><br><span class=\"line\">letÂ c1:Â Cart&lt;string&gt;Â =Â &#123;Â list:Â [&quot;1&quot;]Â &#125;;</span><br><span class=\"line\">letÂ c2:Â Cart&lt;number&gt;Â =Â [1];</span><br></pre></td></tr></table></figure>\n<h5 id=\"6-6-æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹\"><a href=\"#6-6-æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹\" class=\"headerlink\" title=\"6.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹\"></a><strong>6.6 æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹</strong></h5><p>æˆ‘ä»¬å¯ä»¥ä¸ºæ³›å‹ä¸­çš„ç±»å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰åœ¨ä»£ç ä¸­ç›´æ¥æŒ‡å®šç±»å‹å‚æ•°ï¼Œä»å®é™…å€¼å‚æ•°ä¸­ä¹Ÿæ— æ³•æ¨æµ‹å‡ºæ—¶ï¼Œè¿™ä¸ªé»˜è®¤ç±»å‹å°±ä¼šèµ·ä½œç”¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ createArray&lt;TÂ =Â string&gt;(length:Â number,Â value:Â T):Â Array&lt;T&gt;Â &#123;</span><br><span class=\"line\">Â Â letÂ result:Â T[]Â =Â [];</span><br><span class=\"line\">Â Â forÂ (letÂ iÂ =Â 0;Â iÂ &lt;Â length;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â result[i]Â =Â value;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â returnÂ result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"7-å®ç”¨æŠ€å·§\"><a href=\"#7-å®ç”¨æŠ€å·§\" class=\"headerlink\" title=\"7 å®ç”¨æŠ€å·§\"></a><strong>7 å®ç”¨æŠ€å·§</strong></h3><h5 id=\"7-1-typeof-å…³é”®è¯\"><a href=\"#7-1-typeof-å…³é”®è¯\" class=\"headerlink\" title=\"7.1 typeof å…³é”®è¯\"></a><strong>7.1 typeof å…³é”®è¯</strong></h5><p><code>typeof</code> å…³é”®è¯é™¤äº†åšç±»å‹ä¿æŠ¤ è¿˜å¯ä»¥ä»å®ç°æ¨å‡ºç±»å‹ï¼Œ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //å…ˆå®šä¹‰å˜é‡ï¼Œå†å®šä¹‰ç±»å‹</span><br><span class=\"line\">letÂ p1Â =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">typeÂ PeopleÂ =Â typeofÂ p1;</span><br><span class=\"line\">functionÂ getName(p:Â People):Â stringÂ &#123;</span><br><span class=\"line\">Â Â returnÂ p.name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getName(p1);</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨ typeof è·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹</p>\n<h5 id=\"7-2-keyof-å…³é”®è¯\"><a href=\"#7-2-keyof-å…³é”®è¯\" class=\"headerlink\" title=\"7.2 keyof å…³é”®è¯\"></a><strong>7.2 keyof å…³é”®è¯</strong></h5><p><code>keyof</code> å¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æ¥å£çš„æ‰€æœ‰ key å€¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//typeÂ PersonKeyÂ =Â &apos;name&apos;|&apos;age&apos;|&apos;gender&apos;;</span><br><span class=\"line\">typeÂ PersonKeyÂ =Â keyofÂ Person;</span><br><span class=\"line\"></span><br><span class=\"line\">functionÂ getValueByKey(p:Â Person,Â key:Â PersonKey)Â &#123;</span><br><span class=\"line\">Â Â returnÂ p[key];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ valÂ =Â getValueByKey(&#123;Â name:Â &quot;hello&quot;,Â age:Â 10,Â gender:Â &quot;male&quot;Â &#125;,Â &quot;name&quot;);</span><br><span class=\"line\">console.log(val);</span><br></pre></td></tr></table></figure>\n<h5 id=\"7-3-ç´¢å¼•è®¿é—®æ“ä½œç¬¦\"><a href=\"#7-3-ç´¢å¼•è®¿é—®æ“ä½œç¬¦\" class=\"headerlink\" title=\"7.3 ç´¢å¼•è®¿é—®æ“ä½œç¬¦\"></a><strong>7.3 ç´¢å¼•è®¿é—®æ“ä½œç¬¦</strong></h5><p>ä½¿ç”¨ [] æ“ä½œç¬¦å¯ä»¥è¿›è¡Œç´¢å¼•è®¿é—®</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ xÂ =Â Person[&quot;name&quot;];Â //Â xÂ isÂ string</span><br></pre></td></tr></table></figure>\n<h5 id=\"7-4-æ˜ å°„ç±»å‹-in\"><a href=\"#7-4-æ˜ å°„ç±»å‹-in\" class=\"headerlink\" title=\"7.4 æ˜ å°„ç±»å‹ in\"></a><strong>7.4 æ˜ å°„ç±»å‹ in</strong></h5><p>åœ¨å®šä¹‰çš„æ—¶å€™ç”¨ in æ“ä½œç¬¦å»æ‰¹é‡å®šä¹‰ç±»å‹ä¸­çš„å±æ€§</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//æ‰¹é‡æŠŠä¸€ä¸ªæ¥å£ä¸­çš„å±æ€§éƒ½å˜æˆå¯é€‰çš„</span><br><span class=\"line\">typeÂ PartPersonÂ =Â &#123;</span><br><span class=\"line\">Â Â [KeyÂ inÂ keyofÂ Person]?:Â Person[Key];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">letÂ p1:Â PartPersonÂ =Â &#123;&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"7-5-infer-å…³é”®å­—\"><a href=\"#7-5-infer-å…³é”®å­—\" class=\"headerlink\" title=\"7.5 infer å…³é”®å­—\"></a><strong>7.5 infer å…³é”®å­—</strong></h5><p>åœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ ReturnType&lt;T&gt;Â =Â TÂ extendsÂ (...args:Â any[])Â =&gt;Â inferÂ RÂ ?Â RÂ :Â any;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä»£ç ä¸­ infer R å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚</p>\n<h5 id=\"7-6-å†…ç½®å·¥å…·ç±»å‹\"><a href=\"#7-6-å†…ç½®å·¥å…·ç±»å‹\" class=\"headerlink\" title=\"7.6 å†…ç½®å·¥å…·ç±»å‹\"></a><strong>7.6 å†…ç½®å·¥å…·ç±»å‹</strong></h5><ol>\n<li>Exclude&lt;T,U&gt; ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æ’é™¤ U</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Exclude&lt;T,Â U&gt;Â =Â TÂ extendsÂ UÂ ?Â neverÂ :Â T;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ EÂ =Â Exclude&lt;stringÂ |Â number,Â string&gt;;</span><br><span class=\"line\">letÂ e:Â EÂ =Â 10;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>Extract&lt;T,U&gt; ä» T å¯åˆ†é…ç»™çš„ç±»å‹ä¸­æå– U</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Extract&lt;T,Â U&gt;Â =Â TÂ extendsÂ UÂ ?Â TÂ :Â never;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ EÂ =Â Extract&lt;stringÂ |Â number,Â string&gt;;</span><br><span class=\"line\">letÂ e:Â EÂ =Â &quot;1&quot;;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>NonNullableä» T ä¸­æ’é™¤ <code>null</code> å’Œ <code>undefined</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ NonNullable&lt;T&gt;Â =Â TÂ extendsÂ nullÂ |Â undefinedÂ ?Â neverÂ :Â T;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ EÂ =Â NonNullable&lt;stringÂ |Â numberÂ |Â nullÂ |Â undefined&gt;;</span><br><span class=\"line\">letÂ e:Â EÂ =Â null;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>ReturnType<code>infer</code> æœ€æ—©å‡ºç°åœ¨æ­¤ PR ä¸­ï¼Œè¡¨ç¤ºåœ¨ <code>extends</code> æ¡ä»¶è¯­å¥ä¸­å¾…æ¨æ–­çš„ç±»å‹å˜é‡</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ ReturnType&lt;TÂ extendsÂ (...args:Â any[])Â =&gt;Â any&gt;Â =Â TÂ extendsÂ (</span><br><span class=\"line\">Â Â ...args:Â any[]</span><br><span class=\"line\">)Â =&gt;Â inferÂ R</span><br><span class=\"line\">Â Â ?Â R</span><br><span class=\"line\">Â Â :Â any;</span><br><span class=\"line\">functionÂ getUserInfo()Â &#123;</span><br><span class=\"line\">Â Â returnÂ &#123;Â name:Â &quot;hello&quot;,Â age:Â 10Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â é€šè¿‡Â ReturnTypeÂ å°†Â getUserInfoÂ çš„è¿”å›å€¼ç±»å‹èµ‹ç»™äº†Â UserInfo</span><br><span class=\"line\">typeÂ UserInfoÂ =Â ReturnType&lt;typeofÂ getUserInfo&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">constÂ userA:Â UserInfoÂ =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>å¯è§ è¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„è¿”å›ç±»å‹</p>\n<ol start=\"5\">\n<li>Parametersè¯¥å·¥å…·ç±»å‹ä¸»è¦æ˜¯è·å–å‡½æ•°ç±»å‹çš„å‚æ•°ç±»å‹</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Parameters&lt;T&gt;Â =Â TÂ extendsÂ (...args:Â inferÂ R)Â =&gt;Â anyÂ ?Â RÂ :Â any;</span><br><span class=\"line\"></span><br><span class=\"line\">typeÂ T0Â =Â Parameters&lt;()Â =&gt;Â string&gt;;Â //Â []</span><br><span class=\"line\">typeÂ T1Â =Â Parameters&lt;(s:Â string)Â =&gt;Â void&gt;;Â //Â [string]</span><br><span class=\"line\">typeÂ T2Â =Â Parameters&lt;&lt;T&gt;(arg:Â T)Â =&gt;Â T&gt;;Â //Â [unknown]</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>PartialPartial å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ç”±éå¯é€‰å˜ä¸ºå¯é€‰</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">typeÂ Partial&lt;T&gt;Â =Â &#123;Â [PÂ inÂ keyofÂ T]?:Â T[P]Â &#125;;</span><br><span class=\"line\">interfaceÂ AÂ &#123;</span><br><span class=\"line\">Â Â a1:Â string;</span><br><span class=\"line\">Â Â a2:Â number;</span><br><span class=\"line\">Â Â a3:Â boolean;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">typeÂ aPartialÂ =Â Partial&lt;A&gt;;</span><br><span class=\"line\">constÂ a:Â aPartialÂ =Â &#123;&#125;;Â //Â ä¸ä¼šæŠ¥é”™</span><br></pre></td></tr></table></figure>\n<ol start=\"7\">\n<li>RequiredRequired å¯ä»¥å°†ä¼ å…¥çš„å±æ€§ä¸­çš„å¯é€‰é¡¹å˜ä¸ºå¿…é€‰é¡¹ï¼Œè¿™é‡Œç”¨äº† -? ä¿®é¥°ç¬¦æ¥å®ç°ã€‚</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender?:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/**</span><br><span class=\"line\">*Â typeÂ Required&lt;T&gt;Â =Â &#123;Â [PÂ inÂ keyofÂ T]-?:Â T[P]Â &#125;;</span><br><span class=\"line\">*/</span><br><span class=\"line\">letÂ p:Â Required&lt;Person&gt;Â =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"8\">\n<li>ReadonlyReadonly é€šè¿‡ä¸ºä¼ å…¥çš„å±æ€§æ¯ä¸€é¡¹éƒ½åŠ ä¸Š readonly ä¿®é¥°ç¬¦æ¥å®ç°ã€‚</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â string;</span><br><span class=\"line\">Â Â age:Â number;</span><br><span class=\"line\">Â Â gender?:Â &quot;male&quot;Â |Â &quot;female&quot;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//typeÂ Readonly&lt;T&gt;Â =Â &#123;Â readonlyÂ [PÂ inÂ keyofÂ T]:Â T[P]Â &#125;;</span><br><span class=\"line\">letÂ p:Â Readonly&lt;Person&gt;Â =Â &#123;</span><br><span class=\"line\">Â Â name:Â &quot;hello&quot;,</span><br><span class=\"line\">Â Â age:Â 10,</span><br><span class=\"line\">Â Â gender:Â &quot;male&quot;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">p.ageÂ =Â 11;Â //error</span><br></pre></td></tr></table></figure>\n<ol start=\"9\">\n<li>Pick&lt;T,K&gt; Pick èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ä»ä¼ å…¥çš„å±æ€§ä¸­æ‘˜å–æŸäº›è¿”å›</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interfaceÂ TodoÂ &#123;</span><br><span class=\"line\">Â Â title:Â string;</span><br><span class=\"line\">Â Â description:Â string;</span><br><span class=\"line\">Â Â done:Â boolean;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/**</span><br><span class=\"line\">*Â FromÂ TÂ pickÂ aÂ setÂ ofÂ propertiesÂ K</span><br><span class=\"line\">*Â typeÂ Pick&lt;T,Â KÂ extendsÂ keyofÂ T&gt;Â =Â &#123;Â [PÂ inÂ K]:Â T[P]Â &#125;;</span><br><span class=\"line\">*/</span><br><span class=\"line\">typeÂ TodoBaseÂ =Â Pick&lt;Todo,Â &quot;title&quot;Â |Â &quot;done&quot;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">//Â =</span><br><span class=\"line\">typeÂ TodoBaseÂ =Â &#123;</span><br><span class=\"line\">Â Â title:Â string;</span><br><span class=\"line\">Â Â done:Â boolean;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"10\">\n<li>Record&lt;K,T&gt; æ„é€ ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å…·æœ‰ä¸€ç»„å±æ€§ Kï¼Œæ¯ä¸ªå±æ€§çš„ç±»å‹ä¸º Tã€‚å¯ç”¨äºå°†ä¸€ä¸ªç±»å‹çš„å±æ€§æ˜ å°„ä¸ºå¦ä¸€ä¸ªç±»å‹ã€‚Record åé¢çš„æ³›å‹å°±æ˜¯å¯¹è±¡é”®å’Œå€¼çš„ç±»å‹ã€‚</li>\n</ol>\n<p>ç®€å•ç†è§£ï¼šK å¯¹åº”å¯¹åº”çš„ keyï¼ŒT å¯¹åº”å¯¹è±¡çš„ valueï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªå£°æ˜å¥½çš„å¯¹è±¡ ä½†æ˜¯ K å¯¹åº”çš„æ³›å‹çº¦æŸæ˜¯<code>keyof any</code> ä¹Ÿå°±æ„å‘³ç€åªèƒ½ä¼ å…¥ <code>string|number|symbol</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â typeÂ Record&lt;KÂ extendsÂ keyofÂ any,Â T&gt;Â =Â &#123;</span><br><span class=\"line\">//Â [PÂ inÂ K]:Â T;</span><br><span class=\"line\">//Â &#125;;</span><br><span class=\"line\">typeÂ PointÂ =Â &quot;x&quot;Â |Â &quot;y&quot;;</span><br><span class=\"line\">typeÂ PointListÂ =Â Record&lt;Point,Â &#123;Â value:Â numberÂ &#125;&gt;;</span><br><span class=\"line\">constÂ cars:Â PointListÂ =Â &#123;</span><br><span class=\"line\">Â Â x:Â &#123;Â value:Â 10Â &#125;,</span><br><span class=\"line\">Â Â y:Â &#123;Â value:Â 20Â &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"11\">\n<li>Omit&lt;K,T&gt; åŸºäºå·²ç»å£°æ˜çš„ç±»å‹è¿›è¡Œå±æ€§å‰”é™¤è·å¾—æ–°ç±»å‹</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //Â typeÂ Omit=Pick&lt;T,Exclude&lt;keyofÂ T,K&gt;&gt;</span><br><span class=\"line\">typeÂ UserÂ =Â &#123;</span><br><span class=\"line\">id:Â string;</span><br><span class=\"line\">name:Â string;</span><br><span class=\"line\">email:Â string;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">typeÂ UserWithoutEmailÂ =Â Omit&lt;User,Â &quot;email&quot;&gt;; //Â UserWithoutEmailÂ =&#123;id:Â string;name:Â string;&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"8-TypeScript-è£…é¥°å™¨\"><a href=\"#8-TypeScript-è£…é¥°å™¨\" class=\"headerlink\" title=\"8 TypeScript è£…é¥°å™¨\"></a><strong>8</strong> <strong>TypeScript</strong> <strong>è£…é¥°å™¨</strong></h3><p>è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€å±æ€§æˆ–å‚æ•°ä¸Šï¼Œå¯ä»¥ä¿®æ”¹ç±»çš„è¡Œä¸º</p>\n<p>å¸¸è§çš„è£…é¥°å™¨æœ‰ç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨å’Œå‚æ•°è£…é¥°å™¨</p>\n<p>è£…é¥°å™¨çš„å†™æ³•åˆ†ä¸ºæ™®é€šè£…é¥°å™¨å’Œè£…é¥°å™¨å·¥å‚</p>\n<p>ä½¿ç”¨@è£…é¥°å™¨çš„å†™æ³•éœ€è¦æŠŠ tsconfig.json çš„ <code>experimentalDecorators</code> å­—æ®µè®¾ç½®ä¸º true</p>\n<h5 id=\"8-1-ç±»è£…é¥°å™¨\"><a href=\"#8-1-ç±»è£…é¥°å™¨\" class=\"headerlink\" title=\"8.1 ç±»è£…é¥°å™¨\"></a><strong>8.1 ç±»è£…é¥°å™¨</strong></h5><p>ç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰å£°æ˜ï¼Œç”¨æ¥ç›‘è§†ã€ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">namespaceÂ aÂ &#123;</span><br><span class=\"line\">Â Â //å½“è£…é¥°å™¨ä½œä¸ºä¿®é¥°ç±»çš„æ—¶å€™ï¼Œä¼šæŠŠæ„é€ å™¨ä¼ é€’è¿›å»</span><br><span class=\"line\">Â Â functionÂ addNameEat(constructor:Â Function)Â &#123;</span><br><span class=\"line\">Â Â Â Â constructor.prototype.nameÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">Â Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â console.log(&quot;eat&quot;);</span><br><span class=\"line\">Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @addNameEat</span><br><span class=\"line\">Â Â classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â Â Â name!:Â string;</span><br><span class=\"line\">Â Â Â Â eat!:Â Function;</span><br><span class=\"line\">Â Â Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">Â Â console.log(p.name);</span><br><span class=\"line\">Â Â p.eat();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">namespaceÂ bÂ &#123;</span><br><span class=\"line\">Â Â //è¿˜å¯ä»¥ä½¿ç”¨è£…é¥°å™¨å·¥å‚Â è¿™æ ·å¯ä»¥ä¼ é€’é¢å¤–å‚æ•°</span><br><span class=\"line\">Â Â functionÂ addNameEatFactory(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ functionÂ (constructor:Â Function)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â constructor.prototype.nameÂ =Â name;</span><br><span class=\"line\">Â Â Â Â Â Â constructor.prototype.eatÂ =Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â console.log(&quot;eat&quot;);</span><br><span class=\"line\">Â Â Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @addNameEatFactory(&quot;hello&quot;)</span><br><span class=\"line\">Â Â classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â Â Â name!:Â string;</span><br><span class=\"line\">Â Â Â Â eat!:Â Function;</span><br><span class=\"line\">Â Â Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">Â Â console.log(p.name);</span><br><span class=\"line\">Â Â p.eat();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">namespaceÂ cÂ &#123;</span><br><span class=\"line\">Â Â //è¿˜å¯ä»¥æ›¿æ¢ç±»,ä¸è¿‡æ›¿æ¢çš„ç±»è¦ä¸åŸç±»ç»“æ„ç›¸åŒ</span><br><span class=\"line\">Â Â functionÂ enhancer(constructor:Â Function)Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ classÂ &#123;</span><br><span class=\"line\">Â Â Â Â Â Â name:Â stringÂ =Â &quot;jiagou&quot;;</span><br><span class=\"line\">Â Â Â Â Â Â eat()Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â console.log(&quot;åƒé¥­é¥­&quot;);</span><br><span class=\"line\">Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â &#125;;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @enhancer</span><br><span class=\"line\">Â Â classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â Â Â name!:Â string;</span><br><span class=\"line\">Â Â Â Â eat!:Â Function;</span><br><span class=\"line\">Â Â Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">Â Â console.log(p.name);</span><br><span class=\"line\">Â Â p.eat();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"8-2-å±æ€§è£…é¥°å™¨\"><a href=\"#8-2-å±æ€§è£…é¥°å™¨\" class=\"headerlink\" title=\"8.2 å±æ€§è£…é¥°å™¨\"></a><strong>8.2 å±æ€§è£…é¥°å™¨</strong></h5><p>å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ 2 ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§çš„åç§°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //ä¿®é¥°å®ä¾‹å±æ€§</span><br><span class=\"line\">functionÂ upperCase(target:Â any,Â propertyKey:Â string)Â &#123;</span><br><span class=\"line\">Â Â letÂ valueÂ =Â target[propertyKey];</span><br><span class=\"line\">Â Â constÂ getterÂ =Â functionÂ ()Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ value;</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">Â Â //Â ç”¨æ¥æ›¿æ¢çš„setter</span><br><span class=\"line\">Â Â constÂ setterÂ =Â functionÂ (newVal:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â valueÂ =Â newVal.toUpperCase();</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">Â Â //Â æ›¿æ¢å±æ€§ï¼Œå…ˆåˆ é™¤åŸå…ˆçš„å±æ€§ï¼Œå†é‡æ–°å®šä¹‰å±æ€§</span><br><span class=\"line\">Â Â ifÂ (deleteÂ target[propertyKey])Â &#123;</span><br><span class=\"line\">Â Â Â Â Object.defineProperty(target,Â propertyKey,Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â get:Â getter,</span><br><span class=\"line\">Â Â Â Â Â Â set:Â setter,</span><br><span class=\"line\">Â Â Â Â Â Â enumerable:Â true,</span><br><span class=\"line\">Â Â Â Â Â Â configurable:Â true,</span><br><span class=\"line\">Â Â Â Â &#125;);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â @upperCase</span><br><span class=\"line\">Â Â name!:Â string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">p.nameÂ =Â &quot;world&quot;;</span><br><span class=\"line\">console.log(p.name);</span><br></pre></td></tr></table></figure>\n<h5 id=\"8-3-æ–¹æ³•è£…é¥°å™¨\"><a href=\"#8-3-æ–¹æ³•è£…é¥°å™¨\" class=\"headerlink\" title=\"8.3 æ–¹æ³•è£…é¥°å™¨\"></a><strong>8.3 æ–¹æ³•è£…é¥°å™¨</strong></h5><p>æ–¹æ³•è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„æ–¹æ³•ã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štarget: Object - å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ propertyKey: string | symbol - æ–¹æ³•å descriptor: TypePropertyDescript - å±æ€§æè¿°ç¬¦</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> //ä¿®é¥°å®ä¾‹æ–¹æ³•</span><br><span class=\"line\">functionÂ noEnumerable(</span><br><span class=\"line\">Â Â target:Â any,</span><br><span class=\"line\">Â Â property:Â string,</span><br><span class=\"line\">Â Â descriptor:Â PropertyDescriptor</span><br><span class=\"line\">)Â &#123;</span><br><span class=\"line\">Â Â console.log(&quot;target.getName&quot;,Â target.getName);</span><br><span class=\"line\">Â Â console.log(&quot;target.getAge&quot;,Â target.getAge);</span><br><span class=\"line\">Â Â descriptor.enumerableÂ =Â false;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//é‡å†™æ–¹æ³•</span><br><span class=\"line\">functionÂ toNumber(</span><br><span class=\"line\">Â Â target:Â any,</span><br><span class=\"line\">Â Â methodName:Â string,</span><br><span class=\"line\">Â Â descriptor:Â PropertyDescriptor</span><br><span class=\"line\">)Â &#123;</span><br><span class=\"line\">Â Â letÂ oldMethodÂ =Â descriptor.value;</span><br><span class=\"line\">Â Â descriptor.valueÂ =Â functionÂ (...args:Â any[])Â &#123;</span><br><span class=\"line\">Â Â Â Â argsÂ =Â args.map((item)Â =&gt;Â parseFloat(item));</span><br><span class=\"line\">Â Â Â Â returnÂ oldMethod.apply(this,Â args);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â name:Â stringÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">Â Â publicÂ staticÂ age:Â numberÂ =Â 10;</span><br><span class=\"line\">Â Â constructor()Â &#123;&#125;</span><br><span class=\"line\">Â Â @noEnumerable</span><br><span class=\"line\">Â Â getName()Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(this.name);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">Â Â @toNumber</span><br><span class=\"line\">Â Â sum(...args:Â any[])Â &#123;</span><br><span class=\"line\">Â Â Â Â returnÂ args.reduce((accu:Â number,Â item:Â number)Â =&gt;Â accuÂ +Â item,Â 0);</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">letÂ p:Â PersonÂ =Â newÂ Person();</span><br><span class=\"line\">forÂ (letÂ attrÂ inÂ p)Â &#123;</span><br><span class=\"line\">Â Â console.log(&quot;attr=&quot;,Â attr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">p.getName();</span><br><span class=\"line\">console.log(p.sum(&quot;1&quot;,Â &quot;2&quot;,Â &quot;3&quot;));</span><br></pre></td></tr></table></figure>\n<h5 id=\"8-4-å‚æ•°è£…é¥°å™¨\"><a href=\"#8-4-å‚æ•°è£…é¥°å™¨\" class=\"headerlink\" title=\"8.4 å‚æ•°è£…é¥°å™¨\"></a><strong>8.4 å‚æ•°è£…é¥°å™¨</strong></h5><p>å‚æ•°è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”¨æ¥è£…é¥°å‡½æ•°å‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<p>target: Object - è¢«è£…é¥°çš„ç±» propertyKey: string | symbol - æ–¹æ³•å parameterIndex: number - æ–¹æ³•ä¸­å‚æ•°çš„ç´¢å¼•å€¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ Log(target:Â Function,Â key:Â string,Â parameterIndex:Â number)Â &#123;</span><br><span class=\"line\">Â Â letÂ functionLoggedÂ =Â keyÂ ||Â target.prototype.constructor.name;</span><br><span class=\"line\">Â Â console.log(`TheÂ parameterÂ inÂ positionÂ $&#123;parameterIndex&#125;Â atÂ $&#123;functionLogged&#125;Â has</span><br><span class=\"line\">Â beenÂ decorated`);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">classÂ GreeterÂ &#123;</span><br><span class=\"line\">Â Â greeting:Â string;</span><br><span class=\"line\">Â Â constructor(@LogÂ phrase:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â this.greetingÂ =Â phrase;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š<code>&quot;The parameter in position 0 at Greeter has been decorated&quot;</code></p>\n<h5 id=\"8-5-è£…é¥°å™¨æ‰§è¡Œé¡ºåº\"><a href=\"#8-5-è£…é¥°å™¨æ‰§è¡Œé¡ºåº\" class=\"headerlink\" title=\"8.5 è£…é¥°å™¨æ‰§è¡Œé¡ºåº\"></a><strong>8.5 è£…é¥°å™¨æ‰§è¡Œé¡ºåº</strong></h5><p>æœ‰å¤šä¸ªå‚æ•°è£…é¥°å™¨æ—¶ï¼šä»æœ€åä¸€ä¸ªå‚æ•°ä¾æ¬¡å‘å‰æ‰§è¡Œ</p>\n<p>æ–¹æ³•å’Œæ–¹æ³•å‚æ•°ä¸­å‚æ•°è£…é¥°å™¨å…ˆæ‰§è¡Œã€‚æ–¹æ³•å’Œå±æ€§è£…é¥°å™¨ï¼Œè°åœ¨å‰é¢è°å…ˆæ‰§è¡Œã€‚å› ä¸ºå‚æ•°å±äºæ–¹æ³•ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å‚æ•°ä¼šä¸€ç›´ç´§ç´§æŒ¨ç€æ–¹æ³•æ‰§è¡Œ</p>\n<p>ç±»è£…é¥°å™¨æ€»æ˜¯æœ€åæ‰§è¡Œ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">functionÂ Class1Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;ç±»1è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ Class2Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;ç±»2è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ MethodDecorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (</span><br><span class=\"line\">Â Â Â Â target:Â any,</span><br><span class=\"line\">Â Â Â Â methodName:Â string,</span><br><span class=\"line\">Â Â Â Â descriptor:Â PropertyDescriptor</span><br><span class=\"line\">Â Â )Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;æ–¹æ³•è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ Param1Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;å‚æ•°1è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ Param2Decorator()Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any,Â methodName:Â string,Â paramIndex:Â number)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(&quot;å‚æ•°2è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">functionÂ PropertyDecorator(name:Â string)Â &#123;</span><br><span class=\"line\">Â Â returnÂ functionÂ (target:Â any,Â propertyName:Â string)Â &#123;</span><br><span class=\"line\">Â Â Â Â console.log(nameÂ +Â &quot;å±æ€§è£…é¥°å™¨&quot;);</span><br><span class=\"line\">Â Â &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@Class1Decorator()</span><br><span class=\"line\">@Class2Decorator()</span><br><span class=\"line\">classÂ PersonÂ &#123;</span><br><span class=\"line\">Â Â @PropertyDecorator(&quot;name&quot;)</span><br><span class=\"line\">Â Â name:Â stringÂ =Â &quot;hello&quot;;</span><br><span class=\"line\">Â Â @PropertyDecorator(&quot;age&quot;)</span><br><span class=\"line\">Â Â age:Â numberÂ =Â 10;</span><br><span class=\"line\">Â Â @MethodDecorator()</span><br><span class=\"line\">Â Â greet(@Param1Decorator()Â p1:Â string,Â @Param2Decorator()Â p2:Â string)Â &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\">nameå±æ€§è£…é¥°å™¨</span><br><span class=\"line\">ageå±æ€§è£…é¥°å™¨</span><br><span class=\"line\">å‚æ•°2è£…é¥°å™¨</span><br><span class=\"line\">å‚æ•°1è£…é¥°å™¨</span><br><span class=\"line\">æ–¹æ³•è£…é¥°å™¨</span><br><span class=\"line\">ç±»2è£…é¥°å™¨</span><br><span class=\"line\">ç±»1è£…é¥°å™¨</span><br><span class=\"line\">*/</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-ç¼–è¯‘\"><a href=\"#9-ç¼–è¯‘\" class=\"headerlink\" title=\"9 ç¼–è¯‘\"></a><strong>9 ç¼–è¯‘</strong></h3><h5 id=\"9-1-tsconfig-json-çš„ä½œç”¨\"><a href=\"#9-1-tsconfig-json-çš„ä½œç”¨\" class=\"headerlink\" title=\"9.1 tsconfig.json çš„ä½œç”¨\"></a><strong>9.1 tsconfig.json çš„ä½œç”¨</strong></h5><ul>\n<li>ç”¨äºæ ‡è¯† TypeScript é¡¹ç›®çš„æ ¹è·¯å¾„ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>ç”¨äºé…ç½® TypeScript ç¼–è¯‘å™¨ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>ç”¨äºæŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶ã€‚</li>\n</ul>\n<h5 id=\"9-2-tsconfig-json-é‡è¦å­—æ®µ\"><a href=\"#9-2-tsconfig-json-é‡è¦å­—æ®µ\" class=\"headerlink\" title=\"9.2 tsconfig.json é‡è¦å­—æ®µ\"></a><strong>9.2 tsconfig.json é‡è¦å­—æ®µ</strong></h5><ul>\n<li>files - è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶çš„åç§°ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>include - è®¾ç½®éœ€è¦è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>exclude - è®¾ç½®æ— éœ€è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li>\n</ul>\n<!---->\n<ul>\n<li>compilerOptions - è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹ã€‚</li>\n</ul>\n<h5 id=\"9-3-compilerOptions-é€‰é¡¹\"><a href=\"#9-3-compilerOptions-é€‰é¡¹\" class=\"headerlink\" title=\"9.3 compilerOptions é€‰é¡¹\"></a><strong>9.3 compilerOptions é€‰é¡¹</strong></h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">Â Â &quot;compilerOptions&quot;:Â &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â åŸºæœ¬é€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;target&quot;:Â &quot;es5&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ ECMAScriptÂ ç›®æ ‡ç‰ˆæœ¬:Â &apos;ES3&apos;Â (default),Â &apos;ES5&apos;,Â &apos;ES6&apos;/&apos;ES2015&apos;,Â &apos;ES2016&apos;,Â &apos;ES2017&apos;,Â orÂ &apos;ESNEXT&apos;</span><br><span class=\"line\">Â Â Â Â &quot;module&quot;:Â &quot;commonjs&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šä½¿ç”¨æ¨¡å—:Â &apos;commonjs&apos;,Â &apos;amd&apos;,Â &apos;system&apos;,Â &apos;umd&apos;Â orÂ &apos;es2015&apos;</span><br><span class=\"line\">Â Â Â Â &quot;lib&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;allowJs&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å…è®¸ç¼–è¯‘Â javascriptÂ æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;checkJs&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŠ¥å‘ŠÂ javascriptÂ æ–‡ä»¶ä¸­çš„é”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;jsx&quot;:Â &quot;preserve&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šÂ jsxÂ ä»£ç çš„ç”Ÿæˆ:Â &apos;preserve&apos;,Â &apos;react-native&apos;,Â orÂ &apos;react&apos;</span><br><span class=\"line\">Â Â Â Â &quot;declaration&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â &apos;.d.ts&apos;Â æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;sourceMap&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆç›¸åº”çš„Â &apos;.map&apos;Â æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;outFile&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;outDir&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè¾“å‡ºç›®å½•</span><br><span class=\"line\">Â Â Â Â &quot;rootDir&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„Â --outDir.</span><br><span class=\"line\">Â Â Â Â &quot;removeComments&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š</span><br><span class=\"line\">Â Â Â Â &quot;noEmit&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;importHelpers&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»Â tslibÂ å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°</span><br><span class=\"line\">Â Â Â Â &quot;isolatedModules&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å—Â ï¼ˆä¸Â &apos;ts.transpileModule&apos;Â ç±»ä¼¼ï¼‰.</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;strict&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span><br><span class=\"line\">Â Â Â Â &quot;noImplicitAny&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„Â anyç±»å‹æ—¶æŠ¥é”™</span><br><span class=\"line\">Â Â Â Â &quot;strictNullChecks&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¯ç”¨ä¸¥æ ¼çš„Â nullÂ æ£€æŸ¥</span><br><span class=\"line\">Â Â Â Â &quot;noImplicitThis&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å½“Â thisÂ è¡¨è¾¾å¼å€¼ä¸ºÂ anyÂ ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;alwaysStrict&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥Â &apos;useÂ strict&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â é¢å¤–çš„æ£€æŸ¥Â */</span><br><span class=\"line\">Â Â Â Â &quot;noUnusedLocals&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;noUnusedParameters&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â //Â æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;noImplicitReturns&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class=\"line\">Â Â Â Â &quot;noFallthroughCasesInSwitch&quot;:Â true,Â Â Â Â //Â æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â æ¨¡å—è§£æé€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;moduleResolution&quot;:Â &quot;node&quot;,Â Â Â Â Â Â Â Â Â Â Â Â //Â é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼šÂ &apos;node&apos;Â (Node.js) or &apos;classic&apos;Â (TypeScript pre-1.6)</span><br><span class=\"line\">Â Â Â Â &quot;baseUrl&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•</span><br><span class=\"line\">Â Â Â Â &quot;paths&quot;:Â &#123;&#125;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ¨¡å—ååˆ°åŸºäºÂ baseUrlÂ çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</span><br><span class=\"line\">Â Â Â Â &quot;rootDirs&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹</span><br><span class=\"line\">Â Â Â Â &quot;typeRoots&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨</span><br><span class=\"line\">Â Â Â Â &quot;types&quot;:Â [],Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨</span><br><span class=\"line\">Â Â Â Â &quot;allowSyntheticDefaultImports&quot;:Â true,Â Â //Â å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â SourceÂ MapÂ OptionsÂ */</span><br><span class=\"line\">Â Â Â Â &quot;sourceRoot&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°Â TypeScriptÂ æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®</span><br><span class=\"line\">Â Â Â Â &quot;mapRoot&quot;:Â &quot;./&quot;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®</span><br><span class=\"line\">Â Â Â Â &quot;inlineSourceMap&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”Ÿæˆå•ä¸ªÂ soucemapsÂ æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°†Â sourcemapsÂ ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</span><br><span class=\"line\">Â Â Â Â &quot;inlineSources&quot;:Â true,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å°†ä»£ç ä¸Â sourcemapsÂ ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº†Â --inlineSourceMapÂ æˆ–Â --sourceMapÂ å±æ€§</span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â /*Â å…¶ä»–é€‰é¡¹Â */</span><br><span class=\"line\">Â Â Â Â &quot;experimentalDecorators&quot;:Â true,Â Â Â Â Â Â Â Â //Â å¯ç”¨è£…é¥°å™¨</span><br><span class=\"line\">Â Â Â Â &quot;emitDecoratorMetadata&quot;:Â trueÂ Â Â Â Â Â Â Â Â Â //Â ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"10-æ¨¡å—å’Œå£°æ˜æ–‡ä»¶\"><a href=\"#10-æ¨¡å—å’Œå£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10 æ¨¡å—å’Œå£°æ˜æ–‡ä»¶\"></a><strong>10 æ¨¡å—å’Œå£°æ˜æ–‡ä»¶</strong></h3><h5 id=\"10-1-å…¨å±€æ¨¡å—\"><a href=\"#10-1-å…¨å±€æ¨¡å—\" class=\"headerlink\" title=\"10.1 å…¨å±€æ¨¡å—\"></a><strong>10.1 å…¨å±€æ¨¡å—</strong></h5><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ å¼€å§‹åœ¨ä¸€ä¸ªæ–°çš„ TypeScript æ–‡ä»¶ä¸­å†™ä¸‹ä»£ç æ—¶ï¼Œå®ƒå¤„äºå…¨å±€å‘½åç©ºé—´ä¸­</p>\n<p>ä½¿ç”¨å…¨å±€å˜é‡ç©ºé—´æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä¼šä¸æ–‡ä»¶å†…çš„ä»£ç å‘½åå†²çªã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ä¸‹æ–‡ä¸­å°†è¦æåˆ°çš„æ–‡ä»¶æ¨¡å—</p>\n<p>foo.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ fooÂ =Â 123;</span><br></pre></td></tr></table></figure>\n<p>bar.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ barÂ =Â foo;Â //Â allowed</span><br></pre></td></tr></table></figure>\n<h5 id=\"10-2-æ–‡ä»¶æ¨¡å—\"><a href=\"#10-2-æ–‡ä»¶æ¨¡å—\" class=\"headerlink\" title=\"10.2 æ–‡ä»¶æ¨¡å—\"></a><strong>10.2 æ–‡ä»¶æ¨¡å—</strong></h5><ul>\n<li>æ–‡ä»¶æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨æ¨¡å—ã€‚å¦‚æœåœ¨ä½ çš„ TypeScript æ–‡ä»¶çš„æ ¹çº§åˆ«ä½ç½®å«æœ‰ import æˆ–è€… exportï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„ä½œç”¨åŸŸ</li>\n</ul>\n<!---->\n<ul>\n<li>æ¨¡å—æ˜¯ TS ä¸­å¤–éƒ¨æ¨¡å—çš„ç®€ç§°ï¼Œä¾§é‡äºä»£ç å’Œå¤ç”¨</li>\n</ul>\n<!---->\n<ul>\n<li>æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œ</li>\n</ul>\n<!---->\n<ul>\n<li>ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ã€å‡½æ•°ã€ç±»ç­‰åœ¨å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æŠŠå®ƒå¯¼å‡º</li>\n</ul>\n<!---->\n<ul>\n<li>å¦‚æœæƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ¨¡å—é‡Œå¯¼å‡ºçš„å˜é‡ï¼Œåˆ™éœ€è¦å¯¼å…¥</li>\n</ul>\n<p>foo.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ fooÂ =Â 123;</span><br><span class=\"line\">exportÂ &#123;&#125;;</span><br></pre></td></tr></table></figure>\n<p>bar.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">constÂ barÂ =Â foo;Â //Â error</span><br></pre></td></tr></table></figure>\n<h5 id=\"10-3-å£°æ˜æ–‡ä»¶\"><a href=\"#10-3-å£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10.3 å£°æ˜æ–‡ä»¶\"></a><strong>10.3 å£°æ˜æ–‡ä»¶</strong></h5><ul>\n<li>æˆ‘ä»¬å¯ä»¥æŠŠç±»å‹å£°æ˜æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­</li>\n</ul>\n<!---->\n<ul>\n<li>æ–‡ä»¶å‘½åè§„èŒƒä¸º*.d.ts</li>\n</ul>\n<!---->\n<ul>\n<li>æŸ¥çœ‹ç±»å‹å£°æ˜æ–‡ä»¶æœ‰åŠ©äºäº†è§£åº“çš„ä½¿ç”¨æ–¹å¼</li>\n</ul>\n<p>typings\\jquery.d.ts</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declareÂ constÂ $:Â (selector:Â string)Â =&gt;Â &#123;</span><br><span class=\"line\">Â Â click():Â void;</span><br><span class=\"line\">Â Â width(length:Â number):Â void;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"10-4-ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶\"><a href=\"#10-4-ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10.4 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶\"></a><strong>10.4 ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶</strong></h5><ul>\n<li>å¯ä»¥å®‰è£…ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å£°æ˜æ–‡ä»¶</li>\n</ul>\n<!---->\n<ul>\n<li>@types æ˜¯ä¸€ä¸ªçº¦å®šçš„å‰ç¼€ï¼Œæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹å£°æ˜çš„ç±»å‹åº“éƒ½ä¼šå¸¦æœ‰è¿™æ ·çš„å‰ç¼€</li>\n</ul>\n<!---->\n<ul>\n<li>JavaScript ä¸­æœ‰å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥åœ¨ TypeScript ä¸­è¢«å½“åšå£°æ˜å¥½äº†çš„ç±»å‹</li>\n</ul>\n<!---->\n<ul>\n<li>å†…ç½®å¯¹è±¡æ˜¯æŒ‡æ ¹æ®æ ‡å‡†åœ¨å…¨å±€ä½œç”¨åŸŸï¼ˆGlobalï¼‰ä¸Šå­˜åœ¨çš„å¯¹è±¡ã€‚è¿™é‡Œçš„æ ‡å‡†æ˜¯æŒ‡ ECMAScript å’Œå…¶ä»–ç¯å¢ƒï¼ˆæ¯”å¦‚ DOMï¼‰çš„æ ‡å‡†</li>\n</ul>\n<!---->\n<ul>\n<li>è¿™äº›å†…ç½®å¯¹è±¡çš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œå°±åŒ…å«åœ¨ TypeScript æ ¸å¿ƒåº“çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­,å…·ä½“å¯ä»¥æŸ¥çœ‹ts æ ¸å¿ƒå£°æ˜æ–‡ä»¶</li>\n</ul>\n<h5 id=\"10-5-æŸ¥æ‰¾å£°æ˜æ–‡ä»¶\"><a href=\"#10-5-æŸ¥æ‰¾å£°æ˜æ–‡ä»¶\" class=\"headerlink\" title=\"10.5 æŸ¥æ‰¾å£°æ˜æ–‡ä»¶\"></a><strong>10.5 æŸ¥æ‰¾å£°æ˜æ–‡ä»¶</strong></h5><ul>\n<li>å¦‚æœæ˜¯æ‰‹åŠ¨å†™çš„å£°æ˜æ–‡ä»¶ï¼Œé‚£ä¹ˆéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œæ‰èƒ½è¢«æ­£ç¡®çš„è¯†åˆ«</li>\n</ul>\n<!---->\n<ul>\n<li>ç»™ package.json ä¸­çš„ types æˆ– typings å­—æ®µæŒ‡å®šä¸€ä¸ªç±»å‹å£°æ˜æ–‡ä»¶åœ°å€</li>\n</ul>\n<!---->\n<ul>\n<li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç¼–å†™ä¸€ä¸ª index.d.ts æ–‡ä»¶</li>\n</ul>\n<!---->\n<ul>\n<li>é’ˆå¯¹å…¥å£æ–‡ä»¶ï¼ˆpackage.json ä¸­çš„ main å­—æ®µæŒ‡å®šçš„å…¥å£æ–‡ä»¶ï¼‰ï¼Œç¼–å†™ä¸€ä¸ªåŒåä¸åŒåç¼€çš„ .d.ts æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">Â Â Â Â &quot;name&quot;:Â &quot;myLib&quot;,</span><br><span class=\"line\">Â Â Â Â &quot;version&quot;:Â &quot;1.0.0&quot;,</span><br><span class=\"line\">Â Â Â Â &quot;main&quot;:Â &quot;lib/index.js&quot;,</span><br><span class=\"line\">Â Â Â Â &quot;types&quot;:Â &quot;myLib.d.ts&quot;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æŸ¥æ‰¾è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>\n<p>1.å…ˆæ‰¾ myLib.d.ts</p>\n<p>2.æ²¡æœ‰å°±å†æ‰¾ index.d.ts</p>\n<p>3.è¿˜æ²¡æœ‰å†æ‰¾ lib/index.d.js</p>\n<p>4.è¿˜æ‰¾ä¸åˆ°å°±è®¤ä¸ºæ²¡æœ‰ç±»å‹å£°æ˜äº†</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckxq3m94i000ckudo2wrce5go","category_id":"ckxq3m94p000ekudoaxld8xqd","_id":"ckxq3m94w000mkudo4qcpwf6u"},{"post_id":"ckxq3m94o000dkudo0l50jmos","category_id":"ckxq3m94u000jkudob6xoij3n","_id":"ckxq3m94y000qkudot31gw20g"},{"post_id":"ckxq3m94r000gkudoy7ahtgwy","category_id":"ckxq3m94w000nkudoitic0rak","_id":"ckxq3m94z000ukudoqsyy11sr"},{"post_id":"ckxq3m94s000hkudoqi8694ky","category_id":"ckxq3m94y000rkudoio8z3n0n","_id":"ckxq3m950000ykudot11wq5x4"},{"post_id":"ckxq3m94t000ikudof4wbz3kh","category_id":"ckxq3m94z000vkudoh09iroqp","_id":"ckxq3m9500010kudohwkm6k2j"},{"post_id":"ckxq3m95s0011kudod22vnzbz","category_id":"ckxq3m95t0012kudogopxm0tw","_id":"ckxq3m95u0015kudo3i2p9smi"},{"post_id":"ckxq3m95v0016kudoufl51f8x","category_id":"ckxq3m95t0012kudogopxm0tw","_id":"ckxq3m95w0018kudou4v0vbx4"}],"PostTag":[{"post_id":"ckxq3m94i000ckudo2wrce5go","tag_id":"ckxq3m94r000fkudo3a02wc4p","_id":"ckxq3m94v000lkudo906d4i9u"},{"post_id":"ckxq3m94o000dkudo0l50jmos","tag_id":"ckxq3m94u000kkudoogaxw0al","_id":"ckxq3m94y000pkudoq6mgn616"},{"post_id":"ckxq3m94r000gkudoy7ahtgwy","tag_id":"ckxq3m94w000okudotfv4b1zv","_id":"ckxq3m94z000tkudolmplod4t"},{"post_id":"ckxq3m94s000hkudoqi8694ky","tag_id":"ckxq3m94y000skudongq4gyjs","_id":"ckxq3m94z000xkudo5w3bfd6o"},{"post_id":"ckxq3m94t000ikudof4wbz3kh","tag_id":"ckxq3m94z000wkudo253n7s7n","_id":"ckxq3m950000zkudoa9umtoam"},{"post_id":"ckxq3m95s0011kudod22vnzbz","tag_id":"ckxq3m95t0013kudo8jwlobly","_id":"ckxq3m95t0014kudo09ufyx4j"},{"post_id":"ckxq3m95v0016kudoufl51f8x","tag_id":"ckxq3m95t0013kudo8jwlobly","_id":"ckxq3m95w0017kudob4zatwhc"}],"Tag":[{"name":"Architecture","_id":"ckxq3m94r000fkudo3a02wc4p"},{"name":"Engineering","_id":"ckxq3m94u000kkudoogaxw0al"},{"name":"Interview","_id":"ckxq3m94w000okudotfv4b1zv"},{"name":"Talking to oneself","_id":"ckxq3m94y000skudongq4gyjs"},{"name":"Security","_id":"ckxq3m94z000wkudo253n7s7n"},{"name":"Web","_id":"ckxq3m95t0013kudo8jwlobly"}]}}